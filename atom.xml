<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Kelly Chan]]></title>
  <link href="http://k.arttechresearch.com/atom.xml" rel="self"/>
  <link href="http://k.arttechresearch.com/"/>
  <updated>2015-10-17T13:22:46+08:00</updated>
  <id>http://k.arttechresearch.com/</id>
  <author>
    <name><![CDATA[Kelly Chan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Generating TOC With Javascript for Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/17/generating-toc-with-javascript-for-octopress/"/>
    <updated>2015-10-17T12:37:04+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/17/generating-toc-with-javascript-for-octopress</id>
    <content type="html"><![CDATA[<p>Features:</p>

<ul>
<li>genearting a table of contents in a article</li>
<li>user can set toc if true/false</li>
</ul>


<p>Devkits:</p>

<ul>
<li>javascript</li>
<li>html</li>
<li>sass</li>
</ul>


<h2>1. HTML</h2>

<h3>1.1. toc_generator.html</h3>

<p>octopress/source/_includes/toc_generator.html</p>

<figure class='code'><figcaption><span>toc_generator.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{\% if index %\}
</span><span class='line'>  {\% comment %\}
</span><span class='line'>    No table of contents on the index page.
</span><span class='line'>  {\% endcomment %\}
</span><span class='line'>
</span><span class='line'>{\% elsif page.toc == true %\}
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Put a TOC right before the entry content.</span>
</span><span class='line'>    <span class="nx">generateTOC</span><span class="p">(</span><span class="s1">&#39;.entry-content&#39;</span><span class="p">,</span> <span class="s1">&#39;Table of Contents&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>{\% endif %\}
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. article.html</h3>

<p>Include <code>toc_generator.html</code> at the end of <code>article.html</code></p>

<figure class='code'><figcaption><span>article.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'>
</span><span class='line'>{\% include toc_generator.html %\}
</span></code></pre></td></tr></table></div></figure>


<h2>2. Javascript</h2>

<h3>2.1. update the libraries</h3>

<p>octopress/source/_includes/head.html</p>

<figure class='code'><figcaption><span>head.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;{\{ root_url }\}/javascripts/jquery.tableofcontents.min.js&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;{\{ root_url }\}/javascripts/toc_generator.js&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. jquery.tableofcontents.min.js</h3>

<p>Go to <a href="http://fuelyourcoding.com/scripts/toc/">TOC jQuery Plugin</a>,
download the library, and copy <code>jquery.tableofcontents.min.js</code> to <code>octopress/source/javascript/</code>.</p>

<h3>2.3. toc_generator.js</h3>

<p>octopress/source/javascript/toc_generator.js</p>

<figure class='code'><figcaption><span>toc_generator.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">generateTOC</span><span class="p">(</span><span class="nx">insertBefore</span><span class="p">,</span> <span class="nx">heading</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;&lt;div id=&#39;tocBlock&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;&lt;ul id=&#39;toc&#39;&gt;&lt;/ul&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">insertBefore</span><span class="p">).</span><span class="nx">first</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">heading</span> <span class="o">!=</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">heading</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">container</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;tocHeading&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">heading</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">div</span><span class="p">.</span><span class="nx">tableOfContents</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">container</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">container</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">insertBefore</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. SASS</h2>

<h3>3.1. _utilities.scss</h3>

<p>octopress/sass/base/_utilities.scss</p>

<figure class='code'><figcaption><span>_utilities.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@mixin</span> <span class="nt">rounded-border</span><span class="o">($</span><span class="nt">radius</span><span class="o">:</span> <span class="nt">10px</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">border-radius</span><span class="o">:</span> <span class="o">$</span><span class="nt">radius</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">-moz-border-radius</span><span class="o">:</span> <span class="o">$</span><span class="nt">radius</span><span class="o">;</span>
</span><span class='line'>   <span class="nt">padding</span><span class="o">:</span> <span class="o">$</span><span class="nt">radius</span><span class="o">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@mixin</span> <span class="nt">centered</span><span class="o">($</span><span class="nt">width</span><span class="o">:</span> <span class="nt">auto</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">width</span><span class="o">:</span> <span class="o">$</span><span class="nt">width</span> <span class="o">!</span><span class="nt">important</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">margin-left</span><span class="o">:</span> <span class="nt">auto</span> <span class="o">!</span><span class="nt">important</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">margin-right</span><span class="o">:</span> <span class="nt">auto</span> <span class="o">!</span><span class="nt">important</span><span class="o">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@mixin</span> <span class="nt">drop-shadow-right-bottom</span><span class="o">($</span><span class="nt">width</span><span class="o">:</span> <span class="nt">5px</span><span class="o">,</span> <span class="o">$</span><span class="nt">color</span><span class="o">:</span> <span class="nf">#999</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">box-shadow</span><span class="o">:</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">color</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">-moz-box-shadow</span><span class="o">:</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">color</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">-webkit-box-shadow</span><span class="o">:</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">width</span> <span class="o">$</span><span class="nt">color</span><span class="o">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. _toc_generator.scss</h3>

<p>ocotpress/sass/partials/_toc_generator.scss</p>

<figure class='code'><figcaption><span>_toc_generator.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">bg</span><span class="o">:</span> <span class="nf">#e8e8e8</span><span class="o">;</span>
</span><span class='line'><span class="o">$</span><span class="nt">toc-incr</span><span class="o">:</span> <span class="nt">5px</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">div</span><span class="nf">#tocBlock</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">@</span><span class="n">include</span> <span class="n">drop</span><span class="o">-</span><span class="n">shadow</span><span class="o">-</span><span class="k">right</span><span class="o">-</span><span class="k">bottom</span><span class="p">(</span><span class="m">5px</span><span class="o">,</span> <span class="m">#999</span><span class="p">);</span>
</span><span class='line'>    <span class="o">@</span><span class="n">include</span> <span class="n">rounded</span><span class="o">-</span><span class="k">border</span><span class="p">(</span><span class="m">10px</span><span class="p">);</span>
</span><span class='line'>    <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
</span><span class='line'>    <span class="k">font-size</span><span class="o">:</span> <span class="m">10pt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">width</span><span class="o">:</span> <span class="m">300px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-left</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-right</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-bottom</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">background</span><span class="o">:</span> <span class="err">$</span><span class="n">toc</span><span class="o">-</span><span class="n">bg</span><span class="p">;</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="k">solid</span> <span class="m">1px</span> <span class="m">#ccc</span><span class="p">;</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">10px</span> <span class="m">15px</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">.</span><span class="n">tocHeading</span> <span class="err">{</span>
</span><span class='line'>  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">125%</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">ul</span> <span class="p">{</span> <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nf">#toc</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background</span><span class="o">:</span> <span class="err">$</span><span class="n">toc</span><span class="o">-</span><span class="n">bg</span><span class="p">;</span>
</span><span class='line'>  <span class="n">ul</span> <span class="err">{</span>
</span><span class='line'>      <span class="n">li</span> <span class="err">{</span>
</span><span class='line'>      <span class="k">margin-left</span><span class="o">:</span> <span class="err">$</span><span class="n">toc</span><span class="o">-</span><span class="n">incr</span> <span class="cp">!important</span><span class="p">;</span>
</span><span class='line'>      <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="cp">!important</span><span class="p">;</span>
</span><span class='line'>      <span class="k">list-style</span><span class="o">:</span> <span class="k">disc</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>    <span class="err">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. _partials.scss</h3>

<p>octopress/sass/_particials.scss</p>

<figure class='code'><figcaption><span>_particials.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="k">@import</span> <span class="s2">&quot;partials/toc_generator&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Rakefile</h2>

<p><code>octopress/Rakefile</code>: update the head variable for <code>new_post_tech</code>, <code>new_post_art</code> and <code>new_post_life</code>.</p>

<figure class='code'><figcaption><span>Rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">post</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;toc: false&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>5. Testing</h2>

<p><code>rake new_post_tech['post_name']</code>, check the header if <code>toc: false</code> exists.</p>

<p>If <code>toc: true</code>, the table of contents will be generated, if <code>toc:false</code>, no table of contents.</p>

<h2>Reference</h2>

<ul>
<li><a href="http://brizzled.clapper.org/blog/2012/02/04/generating-a-table-of-contents-in-octopress/">Generating a table of contents in Octopress</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adding TOC Plugin for Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/16/adding-toc-plugin-for-octopress/"/>
    <updated>2015-10-16T22:31:58+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/16/adding-toc-plugin-for-octopress</id>
    <content type="html"><![CDATA[<h2>1. Plugin: toc_generator.rb</h2>

<h3>1.1. toc_generator.rb</h3>

<p>octopress/plugins/toc_generator.rb</p>

<figure class='code'><figcaption><span>toc_generator.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;nokogiri&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">module</span> <span class="nn">TOCGenerator</span>
</span><span class='line'>
</span><span class='line'>    <span class="no">TOGGLE_HTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;div id=&quot;toctitle&quot;&gt;&lt;h2&gt;%1&lt;/h2&gt;%2&lt;/div&gt;&#39;</span>
</span><span class='line'>    <span class="no">TOC_CONTAINER_HTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;div id=&quot;toc-container&quot;&gt;&lt;table class=&quot;toc&quot; id=&quot;toc&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;%1&lt;ul&gt;%2&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&#39;</span>
</span><span class='line'>    <span class="no">HIDE_HTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;toctoggle&quot;&gt;[&lt;a id=&quot;toctogglelink&quot; class=&quot;internal&quot; href=&quot;#&quot;&gt;%1&lt;/a&gt;]&lt;/span&gt;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">toc_generate</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># No Toc can be specified on every single page</span>
</span><span class='line'>      <span class="c1"># For example the index page has no table of contents</span>
</span><span class='line'>      <span class="n">no_toc</span> <span class="o">=</span> <span class="vi">@context</span><span class="o">.</span><span class="n">environments</span><span class="o">.</span><span class="n">first</span><span class="o">[</span><span class="s2">&quot;page&quot;</span><span class="o">][</span><span class="s2">&quot;noToc&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="kp">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="n">html</span> <span class="k">if</span> <span class="n">no_toc</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="vi">@context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Minimum number of items needed to show TOC, default 0 (0 means no minimum)</span>
</span><span class='line'>      <span class="n">min_items_to_show_toc</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;minItemsToShowToc&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">anchor_prefix</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;anchorPrefix&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;tocAnchor-&#39;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># better for traditional page seo, commonlly use h1 as title</span>
</span><span class='line'>      <span class="n">toc_top_tag</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;tocTopTag&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;h1&#39;</span>
</span><span class='line'>      <span class="n">toc_top_tag</span> <span class="o">=</span> <span class="n">toc_top_tag</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/h/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">toc_top_tag</span> <span class="o">=</span> <span class="mi">5</span> <span class="k">if</span> <span class="n">toc_top_tag</span> <span class="o">&gt;</span> <span class="mi">5</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">toc_sec_tag</span> <span class="o">=</span> <span class="n">toc_top_tag</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">toc_top_tag</span> <span class="o">=</span> <span class="s2">&quot;h</span><span class="si">#{</span><span class="n">toc_top_tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="n">toc_sec_tag</span> <span class="o">=</span> <span class="s2">&quot;h</span><span class="si">#{</span><span class="n">toc_sec_tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Text labels</span>
</span><span class='line'>      <span class="n">contents_label</span>     <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;contentsLabel&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Contents&#39;</span>
</span><span class='line'>      <span class="n">hide_label</span>         <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;hideLabel&quot;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;hide&#39;</span>
</span><span class='line'>      <span class="c1"># show_label       = config[&quot;showLabel&quot;] || &#39;show&#39; # unused</span>
</span><span class='line'>      <span class="n">show_toggle_button</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s2">&quot;showToggleButton&quot;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">toc_html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>      <span class="n">toc_level</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">toc_section</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">item_number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">level_html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Find H1 tag and all its H2 siblings until next H1</span>
</span><span class='line'>      <span class="n">doc</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="n">toc_top_tag</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
</span><span class='line'>        <span class="c1"># TODO This XPATH expression can greatly improved</span>
</span><span class='line'>        <span class="n">ct</span>    <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;count(following-sibling::</span><span class="si">#{</span><span class="n">toc_top_tag</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">sects</span> <span class="o">=</span> <span class="n">tag</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;following-sibling::</span><span class="si">#{</span><span class="n">toc_sec_tag</span><span class="si">}</span><span class="s2">[count(following-sibling::</span><span class="si">#{</span><span class="n">toc_top_tag</span><span class="si">}</span><span class="s2">)=</span><span class="si">#{</span><span class="n">ct</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">level_html</span>    <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="n">inner_section</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">sects</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">sect</span><span class="o">|</span>
</span><span class='line'>          <span class="n">inner_section</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>          <span class="n">anchor_id</span> <span class="o">=</span> <span class="o">[</span>
</span><span class='line'>                        <span class="n">anchor_prefix</span><span class="p">,</span> <span class="n">toc_level</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">toc_section</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
</span><span class='line'>                        <span class="n">inner_section</span>
</span><span class='line'>                      <span class="o">].</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span><span class="o">.</span><span class="n">join</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">sect</span><span class="o">[</span><span class="s1">&#39;id&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">anchor_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">level_html</span> <span class="o">+=</span> <span class="n">create_level_html</span><span class="p">(</span><span class="n">anchor_id</span><span class="p">,</span>
</span><span class='line'>                                          <span class="n">toc_level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>                                          <span class="n">toc_section</span> <span class="o">+</span> <span class="n">inner_section</span><span class="p">,</span>
</span><span class='line'>                                          <span class="n">item_number</span><span class="o">.</span><span class="n">to_s</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">inner_section</span><span class="o">.</span><span class="n">to_s</span><span class="p">,</span>
</span><span class='line'>                                          <span class="n">sect</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
</span><span class='line'>                                          <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">level_html</span> <span class="o">=</span> <span class="s1">&#39;&lt;ul&gt;&#39;</span> <span class="o">+</span> <span class="n">level_html</span> <span class="o">+</span> <span class="s1">&#39;&lt;/ul&gt;&#39;</span> <span class="k">if</span> <span class="n">level_html</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">anchor_id</span> <span class="o">=</span> <span class="n">anchor_prefix</span> <span class="o">+</span> <span class="n">toc_level</span><span class="o">.</span><span class="n">to_s</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">toc_section</span><span class="o">.</span><span class="n">to_s</span><span class="p">;</span>
</span><span class='line'>        <span class="n">tag</span><span class="o">[</span><span class="s1">&#39;id&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">anchor_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">toc_html</span> <span class="o">+=</span> <span class="n">create_level_html</span><span class="p">(</span><span class="n">anchor_id</span><span class="p">,</span>
</span><span class='line'>                                      <span class="n">toc_level</span><span class="p">,</span>
</span><span class='line'>                                      <span class="n">toc_section</span><span class="p">,</span>
</span><span class='line'>                                      <span class="n">item_number</span><span class="p">,</span>
</span><span class='line'>                                      <span class="n">tag</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
</span><span class='line'>                                      <span class="n">level_html</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">toc_section</span> <span class="o">+=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">inner_section</span><span class="p">;</span>
</span><span class='line'>        <span class="n">item_number</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># for convenience item_number starts from 1</span>
</span><span class='line'>      <span class="c1"># so we decrement it to obtain the index count</span>
</span><span class='line'>      <span class="n">toc_index_count</span> <span class="o">=</span> <span class="n">item_number</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="n">html</span> <span class="k">unless</span> <span class="n">toc_html</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">hide_html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="n">hide_html</span> <span class="o">=</span> <span class="no">HIDE_HTML</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%1&#39;</span><span class="p">,</span> <span class="n">hide_label</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">show_toggle_button</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="n">min_items_to_show_toc</span> <span class="o">&lt;=</span> <span class="n">toc_index_count</span>
</span><span class='line'>        <span class="n">replaced_toggle_html</span> <span class="o">=</span> <span class="no">TOGGLE_HTML</span>
</span><span class='line'>        <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%1&#39;</span><span class="p">,</span> <span class="n">contents_label</span><span class="p">)</span>
</span><span class='line'>        <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%2&#39;</span><span class="p">,</span> <span class="n">hide_html</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">toc_table</span> <span class="o">=</span> <span class="no">TOC_CONTAINER_HTML</span>
</span><span class='line'>        <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%1&#39;</span><span class="p">,</span> <span class="n">replaced_toggle_html</span><span class="p">)</span>
</span><span class='line'>        <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%2&#39;</span><span class="p">,</span> <span class="n">toc_html</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">doc</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">toc_table</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">doc</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">to_xhtml</span><span class="p">(</span><span class="ss">indent</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="ss">indent_text</span><span class="p">:</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">create_level_html</span><span class="p">(</span><span class="n">anchor_id</span><span class="p">,</span> <span class="n">toc_level</span><span class="p">,</span> <span class="n">toc_section</span><span class="p">,</span> <span class="n">tocNumber</span><span class="p">,</span> <span class="n">tocText</span><span class="p">,</span> <span class="n">tocInner</span><span class="p">)</span>
</span><span class='line'>      <span class="n">link</span> <span class="o">=</span> <span class="s1">&#39;&lt;a href=&quot;#%1&quot;&gt;&lt;span class=&quot;tocnumber&quot;&gt;%2&lt;/span&gt; &lt;span class=&quot;toctext&quot;&gt;%3&lt;/span&gt;&lt;/a&gt;%4&#39;</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%1&#39;</span><span class="p">,</span> <span class="n">anchor_id</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%2&#39;</span><span class="p">,</span> <span class="n">tocNumber</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%3&#39;</span><span class="p">,</span> <span class="n">tocText</span><span class="p">)</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%4&#39;</span><span class="p">,</span> <span class="n">tocInner</span> <span class="p">?</span> <span class="n">tocInner</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="s1">&#39;&lt;li class=&quot;toc_level-%1 toc_section-%2&quot;&gt;%3&lt;/li&gt;&#39;</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%1&#39;</span><span class="p">,</span> <span class="n">toc_level</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%2&#39;</span><span class="p">,</span> <span class="n">toc_section</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span>
</span><span class='line'>      <span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;%3&#39;</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_filter</span><span class="p">(</span><span class="no">Jekyll</span><span class="o">::</span><span class="no">TOCGenerator</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. Gemfile</h3>

<figure class='code'><figcaption><span>toc_generator.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s1">&#39;nokogiri&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. _config.yml</h3>

<figure class='code'><figcaption><span>_config.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1">#---------------------------#</span>
</span><span class='line'><span class="c1">#      TOC Settings         #</span>
</span><span class='line'><span class="c1">#---------------------------#</span>
</span><span class='line'>
</span><span class='line'><span class="l-Scalar-Plain">minItemsToShowToc</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>
</span><span class='line'><span class="l-Scalar-Plain">tocTopTag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">h1</span>
</span><span class='line'><span class="l-Scalar-Plain">anchorPrefix</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">tocAnchor-</span>
</span><span class='line'><span class="l-Scalar-Plain">showToggleButton</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Variable definitions</p>

<table>
<tr>
<th>Parameter name</th>
<th>Description</th>
<th>Default value</th>
</tr>

<tr>
<td>minItemsToShowToc</td>
<td>Minimum number of items to show the TOC<br/>Suppose you want to generated the TOC only if there are at least 3 H1</td>
<td>0 (no limit)</td>
</tr>

<tr>
<td>tocTopTag</td>
<td>The top level tag given nokogiri to find<br/>Suppose you want to generated the TOC start form h1 to h5</td>
<td>h1</td>
</tr>
<tr>
<td>anchorPrefix</td>
<td>The prefix used to generate the anchor name</td>
<td>tocAnchor-</td>
</tr>

<tr>
<td>showToggleButton</td>
<td>The TOC has a button used to collapse/expand the list, this requires a little of Javascript
<br/>This package contains a jQuery plugin to handle the click</td>
<td>false</td>
</tr>
</table>


<h2>2. HTML: source/_includes/article.html</h2>

<p>source/_includes/article.html</p>

<figure class='code'><figcaption><span>article.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div&gt;</span>
</span><span class='line'>    {\{ content | toc_generate }\}
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. SASS: _toc_generator.scss</h2>

<p>sass/plugins/_toc_generator.scss</p>

<figure class='code'><figcaption><span>_toc_generator.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nf">#toc</span><span class="o">,</span> <span class="nc">.toc</span><span class="o">,</span> <span class="nc">.mw-warning</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">background-color</span><span class="o">:</span> <span class="m">#F9F9F9</span><span class="p">;</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#AAAAAA</span><span class="p">;</span>
</span><span class='line'>    <span class="k">font-size</span><span class="o">:</span> <span class="m">95%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding</span><span class="o">:</span> <span class="m">5px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nf">#toc</span> <span class="nt">h2</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nt">h2</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">border</span><span class="o">:</span> <span class="k">medium</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="p">;</span>
</span><span class='line'>    <span class="k">font-size</span><span class="o">:</span> <span class="m">100%</span><span class="p">;</span>
</span><span class='line'>    <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nf">#toc</span> <span class="nf">#toctitle</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nf">#toctitle</span><span class="o">,</span> <span class="nf">#toc</span> <span class="nc">.toctitle</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nc">.toctitle</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span><span class="m">0</span> <span class="m">8px</span> <span class="m">4px</span> <span class="m">14px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-top</span><span class="o">:</span><span class="m">8px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">line-height</span><span class="o">:</span> <span class="m">1</span><span class="o">.</span><span class="m">5</span><span class="p">;</span>
</span><span class='line'>    <span class="k">overflow</span><span class="o">:</span><span class="k">hidden</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nf">#toc</span> <span class="nt">ul</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nt">ul</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">list-style-image</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="k">list-style-type</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span><span class="m">0</span> <span class="m">8px</span> <span class="m">7px</span> <span class="m">14px</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>    <span class="k">text-align</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nf">#toc</span> <span class="nt">ul</span> <span class="nt">ul</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nt">ul</span> <span class="nt">ul</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">2em</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nf">#toc</span> <span class="nc">.toctoggle</span><span class="o">,</span> <span class="nc">.toc</span> <span class="nc">.toctoggle</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">font-size</span><span class="o">:</span> <span class="m">94%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#toc</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">list-style-type</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="k">padding-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#toc-container</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Javascript: jquery.tocLight.js</h2>

<figure class='code'><figcaption><span>jquery.tocLight.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> * jQuery Table of Content Generator Support for Jekyll v1.0</span>
</span><span class='line'><span class="cm"> *</span>
</span><span class='line'><span class="cm"> * https://github.com/dafi/jekyll-tocmd-generator</span>
</span><span class='line'><span class="cm"> * Examples and documentation at: https://github.com/dafi/jekyll-tocmd-generator</span>
</span><span class='line'><span class="cm"> *</span>
</span><span class='line'><span class="cm"> * Requires: jQuery v1.7+</span>
</span><span class='line'><span class="cm"> *</span>
</span><span class='line'><span class="cm"> * Copyright (c) 2013 Davide Ficano</span>
</span><span class='line'><span class="cm"> *</span>
</span><span class='line'><span class="cm"> * Dual licensed under the MIT and GPL licenses:</span>
</span><span class='line'><span class="cm"> *   http://www.opensource.org/licenses/mit-license.php</span>
</span><span class='line'><span class="cm"> *   http://www.gnu.org/licenses/gpl.html</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">toc</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">toc</span><span class="p">.</span><span class="nx">clickHideButton</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">saveShowStatus</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">hideText</span><span class="o">:</span> <span class="s1">&#39;hide&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">showText</span><span class="o">:</span> <span class="s1">&#39;show&#39;</span><span class="p">};</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toctogglelink&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">ul</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc ul&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nx">ul</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">ul</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">showText</span><span class="p">);</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">saveShowStatus</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;toc-hide&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">expires</span><span class="o">:</span> <span class="mi">365</span><span class="p">,</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span> <span class="p">});</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>                <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;tochidden&#39;</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">ul</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">hideText</span><span class="p">);</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">saveShowStatus</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">$</span><span class="p">.</span><span class="nx">removeCookie</span><span class="p">(</span><span class="s1">&#39;toc-hide&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span> <span class="p">});</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>                <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;tochidden&#39;</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">saveShowStatus</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;toc-hide&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">ul</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc ul&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>            <span class="nx">ul</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toctogglelink&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">showText</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#toc&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;tochidden&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>update the html template</p>

<figure class='code'><figcaption><span>article.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>{\{ page.title }\}<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/jquery.tocLight.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">toc</span><span class="p">.</span><span class="nx">clickHideButton</span><span class="p">();</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body</span> <span class="na">id=</span><span class="s">&quot;small&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        {\{ content | toc_generate }\}
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<p><code>rake generate</code> and <code>rake preview</code></p>

<h2>Reference</h2>

<ul>
<li><a href="https://github.com/dafi/jekyll-toc-generator">jekyll-toc-generator</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Logic and Thinking]]></title>
    <link href="http://k.arttechresearch.com/life/2015/10/15/logic-and-thinking/"/>
    <updated>2015-10-15T22:14:42+08:00</updated>
    <id>http://k.arttechresearch.com/life/2015/10/15/logic-and-thinking</id>
    <content type="html"><![CDATA[<h2>逻辑与思考</h2>

<p>验证错误，只需一个反例。和别人进行讨论的时候，似乎举个反例，也很容易论证一些事物的真伪。</p>

<p>比如，语言考试，是否母语人士必能高分通过？前提假设，该母语人士的日常听说读写能力流畅。
事实是，语言考试和日常交流还是有区别的。日常交流，可能只需双方明白各自的意思，达到沟通的
目的；而语言考试，除了语言的听说读写能力外，可能还需要相应的解题技巧、逻辑推理，甚至某些
方面的专业知识或技能。这样，可以很容易理解，为什么有些人日常外语沟通流畅，却不一定能高分
通过高考英文题或考研英文卷，后两者，除了听说读写，还需要考查和日常交流不同方面的能力。</p>

<p>因为这样的讨论，引出了学习的模式。快速学习的方法，似乎就是快速找到该领域的规律、法则或模
式，然后灵活地应用到具体的场景、情景中。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Colors]]></title>
    <link href="http://k.arttechresearch.com/life/2015/10/15/the-colors/"/>
    <updated>2015-10-15T12:31:35+08:00</updated>
    <id>http://k.arttechresearch.com/life/2015/10/15/the-colors</id>
    <content type="html"><![CDATA[<h2>修色</h2>

<p>准备把默认的背景色白和页面的背景色淡灰对换一下，不想没这么简单。
一旦修改，同页面的其他的配色必须重来。</p>

<p>不知哪位画家曾记，某年某月某日，他呈递了一幅人像给皇帝，皇帝过目，
希望小修一个小部位。画家答曰：“若修改，则需XX天。”
皇帝不解，画家解释说：“修了这一小处，其他XX，XX等部位也需要一并修改。”</p>

<p>事物关联性这么奇妙，稍微改动一下，整体就变化了。而我自己的页面，主要是
配色改变了，色彩对比度变了，牵动其他地方也需要修改，估计需要把整个主题
切换，才能呈现我相对合意的界面。大修。</p>

<p>色彩也有其有趣的地方，比如，深色背景＋浅色前景，更能突出内容，这也是现在
很多大型网站所用的配色方案：浅灰色的背景＋白色的前背景＋深灰色的字体＋主题
颜色作高亮。扁平化的设计，主题突出，内容清晰，阅读体验好。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using MathJax With Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/13/using-mathjax-with-octopress/"/>
    <updated>2015-10-13T10:26:29+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/13/using-mathjax-with-octopress</id>
    <content type="html"><![CDATA[<h2>1. Adding MathJax</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/mathjax.html
</span></code></pre></td></tr></table></div></figure>


<p>mathjax.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- MathJax --&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span><span class="s1">&#39;$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;\\(&quot;</span><span class="p">,</span><span class="s2">&quot;\\)&quot;</span><span class="p">]</span> <span class="p">],</span>
</span><span class='line'>      <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">skipTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">all</span> <span class="o">=</span> <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">getAllJax</span><span class="p">(),</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">all</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">all</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">SourceElement</span><span class="p">().</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; has-jax&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
</span><span class='line'>   <span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Including MathJax in head.html</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/head.html
</span></code></pre></td></tr></table></div></figure>


<p>head.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{\% include mathjax.html %\}
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Inside a French Chateau by Kraemer Gallery]]></title>
    <link href="http://k.arttechresearch.com/art/2015/10/11/inside-a-french-chateau-by-kraemer-gallery/"/>
    <updated>2015-10-11T22:46:04+08:00</updated>
    <id>http://k.arttechresearch.com/art/2015/10/11/inside-a-french-chateau-by-kraemer-gallery</id>
    <content type="html"><![CDATA[<p>NOTE: copied from the Brochure.</p>

<h2>1. Royal Chinese Room</h2>

<h3>1.1. A very exceptional and rare table in bamboo</h3>

<p>Circa 1780, with a Vernis Martin lacquer top ornate gilt-bronze.</p>

<p>Imported by Marchand Mercier Daguerre and attribute to artist Martin Carlin.</p>

<p>&ldquo;This piece comes from the Trianon&rdquo;</p>

<p>Comparable examples in:</p>

<ul>
<li>Her Majesty Queen Elizabeth II&rsquo;s Collection (England)</li>
<li>Royal Swedish collection (Sweden)</li>
<li>Similar Iaquer at the Louvre Museum in Paris (France)</li>
</ul>


<h3>1.2. A rare Louis XV Lacquer Chest of Drawers</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/f3/0b/8f/f30b8fbda113f73480efe39dd0b2a675.jpg" /></p>

<p>Circa 1745, stamped by B.V.R.B (Bernard II Van Risen Burgh, Master in 1733) in collaboration with Desforges (Master in 1739).</p>

<p>Using lacquers screen panels supplied by Marchand Mercier Darnault.</p>

<p>The scenes represent Chinese Culture and traditions.</p>

<h3>1.3. A rare transitional secretary in Camomile Lacquer and Vernis Martin</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/ae/b1/37/aeb137c0dfae49f72a0c7dd45b4b4188.jpg" /></p>

<p>Circa 1770, stamped by Francois Reizell (Master in 1764).</p>

<p>Provenance: a branch of the French Royal Family.</p>

<h3>1.4. A louis XIV pair of caches pots</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/c0/3d/8f/c03d8f23a4e3b1461e2ad1affc430c60.jpg" /></p>

<p>Circa 1700. Similar pieces with same dragon bronzes are at the Getty Museum in Los Angeles.</p>

<p>The pair has been exhibited at the ArtScience Museum in Singapore.</p>

<h3>1.5. A Louis XVI Biscuit clock</h3>

<p>Circa 1785. Featuring Orpheus and goats ornated with elaborate chased and giltbronze mounts by Remond. The dial and movement signed Gavelle l'aine a Paris.</p>

<h3>1.6. A regence corner cupboard</h3>

<p>Circa 1725. A rare Regence corner cupboard by Charles Cressent (Master in 1719).</p>

<p>Equivalences are in the Rothschild Collection.</p>

<h2>2. Royal French Salon</h2>

<h2>2.1. A portrait of King Louis XIV</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/e7/35/3c/e7353c947a630f779c1f401abe04eb5e.jpg" /></p>

<p>Circa 1700. The quality of the face expression, the hair, and the cravat are perfect. A similar piece is at the Bordeaux Museum of Decorative Arts and at the chateau of Courances (the Ganay family).</p>

<h2>2.2. A portrait of King Louis XV in Royal Savonnerie Tapestry</h2>

<p>Circa 1755, made at the Royal Manufacture of the Goblins.</p>

<p>The same piece is at the Louvre Museum in Paris.</p>

<h2>2.3. A royal Louis XV savonnerie carpet</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/8c/ac/7c/8cac7cb4d0456b63a8ba2c5f936fb30d.jpg" /></p>

<p>Circa 1755, made at the Royal Manufacture of the Goblins for one of the King&rsquo;s property.</p>

<p>Decorated with Sun King flowers, the French Royalty symbol.</p>

<p>Similar examples at Versailles Castle and in many International Museum.</p>

<h2>2.4. A regence black and gold writting desk</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/49/b4/39/49b439e23280d4068c24ddd4602a92c0.jpg" /></p>

<p>Circa 1730, stampmed F.L. for Francois Lieutaud.</p>

<p>A comparable desk made by the same artist for the Dauphin (the King&rsquo;s son) is displayed at Versailles Castle.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h2>2.5. Four Royal Louis XVI chairs from Versailles castle</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/f4/2b/e0/f42be07b61fefede0ac5ae6e95a14ff8.jpg" /></p>

<p>Circa 1780, stamped by J.B Sene (Master in 1769).</p>

<p>Marked many times with crowned W.</p>

<p>Provenance: Chateau de Versailles.</p>

<p>Probably ordered for a Royal family member.</p>

<h2>2.6. A beautiful Louis XV chest of drawers</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/fa/6d/4e/fa6d4e9f483268172fb59a396f2f489b.jpg" /></p>

<p>Circa 1745, stamped by G.Feilt (master in 1736), a beautiful flowered marquetry motifs ornate with chased and gilt-bronzes.</p>

<p>Similar examples in many International Museums.</p>

<h2>3. Royal Lifestyle Pavilions</h2>

<h3>3.1. Library Room</h3>

<h4>3.1.1. Dictionary book of translation &ldquo;Linguae Sinarum Mandarinicae Hieroglythicae Grammatica Duplex&rdquo;</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/d7/1a/46/d71a4673f148e25f080639515957963a.jpg" /></p>

<p>Exceptionally rare first comparative grammar between Chinese and Latin.</p>

<p>Published in Paris in 1742.</p>

<p>FOURMONT, Etienne. Linguae Sinarum Mandarinicae hieroglyphicae grammatica duplex, latine, &amp; curn characteribus Sinensium, Item Sinicorum Regiae Biliothecae librorum catalogus &hellip; Paris.</p>

<p>Made during 40 years with 80,000 Chinese characters realized by the French Royal printing. The necessary investment for this very important realisation was about 17,000 gold coins. Only 250 copies were printed.</p>

<p>Beautiful working copy, probably owned later during the XIXth century by Benjamin Brucyre, the first French author who attempted a translation of the Bible into Chinese (1863).</p>

<h4>3.1.2. A beautiful Louis XIV Boulle Marquetry bookcase</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/62/6b/34/626b34132ca2a46e74d860ff5da3ed1c.jpg" /></p>

<p>Circa 1680, designed influenced by Culture Minister Berain, the beginning of furniture to be considered as a Major Art.</p>

<p>Provenance: a private mansion in Paris.</p>

<h3>3.2. Dining Room</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/85/df/72/85df727cfd4cb9db3315c17505dda0af.jpg" /></p>

<h4>3.2.1. A Louis XVI Bronze clock featuring bacchus</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/89/9d/00/899d009ffe025dd241fc0cd02638d5ad.jpg" /></p>

<p>Circa 1780, made by Osmond and movement signed by Lechopie a Paris.</p>

<p>Comparable example: at the Munich Residenz Museum in Germany.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h4>3.2.2. An extraordinary and rare Louis XV giltbronze 8 arms surtout de table</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/0a/56/22/0a5622f0a8264c713155fc0e6d7a85b9.jpg" /></p>

<p>Circa 1740, probably made by Caffien.</p>

<p>Provenance: a member of the Royal family.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h3>3.3. Music and Entertainment Room</h3>

<h4>3.3.1. A Louis XVI gilt-wood console table</h4>

<p>Circa 1780, with a beautiful quality of carving, the medusa face is the inspiration for Versace Logo.</p>

<p>Comparable examples in:</p>

<ul>
<li>Made for the King at the Chateau de Fontainebleau</li>
<li>At the Louvre Museum in Paris</li>
<li>In a private collection</li>
</ul>


<h4>3.3.2. A Louis XV jewel box</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/6a/42/52/6a4252756ec8f35d65a604b46db2acce.jpg" /></p>

<p>Circa 1745, stamped by B.V.R.B (for Bernard II Van Risen Burgh, Master in 1733) in Kingwood and Rosewood.</p>

<p>Ink inscriptions written by Marchand Mercier Poirier.</p>

<p>This piece has been exhibited at the Grand Palais in Paris and similar piece is at the Boston Museum of Fine Art in America.</p>

<h2>Others</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/84/cb/41/84cb41aba14d092e52171ecfa6ab37cb.jpg" /></p>

<p>A pair of neoclassical Louis XVI giltwood stands on display at the Liang Yi Museum (Photo courtesy of the Kraemer Gallery)</p>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/99/95/60/999560b50b6a35d1ab14dfcda8a96b92.jpg" /></p>

<p>An exceptional Louis XIV Boulle marquetry casket by André-Charles Boulle, circa 1700 (Photo courtesy of Kraemer Gallery)</p>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/69/d6/33/69d63319ecd558fd746d9bcffabf6182.jpg" /></p>

<p>A Louis XV-Louis XVI transitional fire screen in gilded wood with a Gobelin tapestry panel framed within a large Chinese standing screen in zitan wood on show at the Great Minds Think Alike exhibition (Photo courtesy of the Liang Yi Museum)</p>

<h2>Kraemer</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/ae/8c/e9/ae8ce963c48bf3f96408febdb7fadfcc.jpg" /></p>

<p><a href="http://www.kraemer.fr/">Kraemer</a> is the oldest family owned gallery based in Paris, established in 1875, specializing in museum quality 18th century furniture and objets d'art. Since its beginning, the Kraemer Gallery includes among its clientele the greatest international museums, collectors and interior designers-decorators. Among the may salons of their mansion house at 43 rue Monceau in Paris, they present several rooms with a very contemporary decor where also displayed are Louis XIV, Louis XV and Louis XVI furniture and objets d'art.</p>

<p>Their prestigious collectors included through the times: the Rothschilds, the Camondos and Comte Boni de Castellanes, then Hery Ford Jr, Christian Dior, J.Paul Getty, the Agnelli family, Jackie Kennedy and Karl Lagerifeld.</p>

<p>The prestige of the Kraemer name continues to rest on the personal discretion of the family and their exacting professional standards of authenticity, beauty, rarity and charm. For more than a century, Kraemer &amp; Cie has been the source of significant example of French 18th century decorative arts that are now in the permanent collections of major museums in Qurope and the United States.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adding Tag Generator in Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/06/adding-tag-generator-in-octopress/"/>
    <updated>2015-10-06T05:42:01+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/06/adding-tag-generator-in-octopress</id>
    <content type="html"><![CDATA[<p>Feature: add the links for the tags.</p>

<p>Steps:</p>

<ol>
<li>update the ruby plugin: <code>octopress/plugins/tag_generator.rb</code></li>
<li>update the html in source: <code>octopress/source/_layouts/tag_index.html</code></li>
<li>update the <code>tag_dir</code> in _config.yml: <code>octopress/_config.yml</code></li>
</ol>


<h2>1. Plugin: tag_generator.rb</h2>

<figure class='code'><figcaption><span>tag_generator.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># encoding: utf-8</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Jekyll tag page generator.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Based on Jekyll tag category generator:</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     http://recursive-design.com/projects/jekyll-plugins/</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     Version: 0.1.4 (201101061053)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     Copyright (c) 2010 Dave Perrett, http://recursive-design.com/</span>
</span><span class='line'><span class="c1">#     Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># A generator that creates tag pages for jekyll sites.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Included filters :</span>
</span><span class='line'><span class="c1"># - tag_links:      Outputs the list of tags as comma-separated &lt;a&gt; links.</span>
</span><span class='line'><span class="c1"># - date_to_html_string: Outputs the post.date as formatted html, with hooks for CSS styling.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Available _config.yml settings :</span>
</span><span class='line'><span class="c1"># - tag_dir:          The subfolder to build tag pages in (default is &#39;tags&#39;).</span>
</span><span class='line'><span class="c1"># - tag_title_prefix: The string used before the tag name in the page title (default is</span>
</span><span class='line'><span class="c1">#                          &#39;Tag: &#39;).</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;stringex&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The TagIndex class creates a single tag page for the specified tag.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Initializes a new TagIndex.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +base+         is the String path to the &lt;source&gt;.</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path between &lt;source&gt; and the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
</span><span class='line'>      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
</span><span class='line'>      <span class="vi">@dir</span>  <span class="o">=</span> <span class="n">tag_dir</span>
</span><span class='line'>      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Read the YAML data from the layout page.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;tag_index.html&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span>    <span class="o">=</span> <span class="n">tag</span>
</span><span class='line'>      <span class="c1"># Set the title for this page.</span>
</span><span class='line'>      <span class="n">title_prefix</span>             <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span>       <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">title_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="c1"># Set the meta-description for this page.</span>
</span><span class='line'>      <span class="n">meta_description_prefix</span>  <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_meta_description_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;description&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">meta_description_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The TagFeed class creates an Atom feed for the specified tag.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagFeed</span> <span class="o">&lt;</span> <span class="no">Page</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Initializes a new TagFeed.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +base+         is the String path to the &lt;source&gt;.</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path between &lt;source&gt; and the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
</span><span class='line'>      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
</span><span class='line'>      <span class="vi">@dir</span>  <span class="o">=</span> <span class="n">tag_dir</span>
</span><span class='line'>      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;atom.xml&#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Read the YAML data from the layout page.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_includes/custom&#39;</span><span class="p">),</span> <span class="s1">&#39;tag_feed.xml&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span>    <span class="o">=</span> <span class="n">tag</span>
</span><span class='line'>      <span class="c1"># Set the title for this page.</span>
</span><span class='line'>      <span class="n">title_prefix</span>             <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span>       <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">title_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="c1"># Set the meta-description for this page.</span>
</span><span class='line'>      <span class="n">meta_description_prefix</span>  <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_meta_description_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;description&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">meta_description_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Set the correct feed URL.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;feed_url&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tag_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The Site class is a built-in Jekyll class with access to global site config information.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Site</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Creates an instance of TagIndex for each tag page, renders it, and</span>
</span><span class='line'>    <span class="c1"># writes the output to a file.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path to the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">write_tag_index</span><span class="p">(</span><span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span> <span class="o">=</span> <span class="no">TagIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site_payload</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Record the fact that this page has been added, otherwise Site::cleanup will remove it.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">index</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Create an Atom-feed for each index.</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_feeds&#39;</span><span class="o">]</span>
</span><span class='line'>        <span class="n">feed</span> <span class="o">=</span> <span class="no">TagFeed</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="n">feed</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site_payload</span><span class="p">)</span>
</span><span class='line'>        <span class="n">feed</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
</span><span class='line'>        <span class="c1"># Record the fact that this page has been added, otherwise Site::cleanup will remove it.</span>
</span><span class='line'>        <span class="nb">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">feed</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Loops through the list of tag pages and processes each one.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">write_tag_indexes</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;tag_index&#39;</span>
</span><span class='line'>        <span class="n">dir</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;tags&#39;</span>
</span><span class='line'>        <span class="nb">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
</span><span class='line'>          <span class="nb">self</span><span class="o">.</span><span class="n">write_tag_index</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">to_url</span><span class="p">),</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Throw an exception if the layout couldn&#39;t be found.</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="k">raise</span> <span class="o">&lt;&lt;-</span><span class="no">ERR</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sh">===============================================</span>
</span><span class='line'><span class="sh"> Error for tag_generator.rb plugin</span>
</span><span class='line'><span class="sh">-----------------------------------------------</span>
</span><span class='line'><span class="sh"> No &#39;tag_index.hmtl&#39; in source/_layouts/</span>
</span><span class='line'><span class="sh"> Perhaps you haven&#39;t installed a theme yet.</span>
</span><span class='line'><span class="sh">===============================================</span>
</span><span class='line'>
</span><span class='line'><span class="no">ERR</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Jekyll hook - the generate method is called by jekyll, and generates all of the tag pages.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">GenerateTags</span> <span class="o">&lt;</span> <span class="no">Generator</span>
</span><span class='line'>    <span class="n">safe</span> <span class="kp">true</span>
</span><span class='line'>    <span class="n">priority</span> <span class="ss">:low</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
</span><span class='line'>      <span class="n">site</span><span class="o">.</span><span class="n">write_tag_indexes</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Adds some extra filters used during the tag creation process.</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">Filters</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs a list of tags as comma-separated &lt;a&gt; links. This is used</span>
</span><span class='line'>    <span class="c1"># to output the tag list for each post on a tag page.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tags+ is the list of tags to format.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">tag_links</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span>
</span><span class='line'>      <span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">sort!</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="n">tag_link</span> <span class="n">c</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">case</span> <span class="n">tags</span><span class="o">.</span><span class="n">length</span>
</span><span class='line'>      <span class="k">when</span> <span class="mi">0</span>
</span><span class='line'>        <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="k">when</span> <span class="mi">1</span>
</span><span class='line'>        <span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">to_s</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">tags</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs a single tag as an &lt;a&gt; link.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tag+ is a tag string to format as an &lt;a&gt; link</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">tag_link</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dir</span> <span class="o">=</span> <span class="vi">@context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="s2">&quot;&lt;a class=&#39;tag&#39; href=&#39;/</span><span class="si">#{</span><span class="n">dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">tag</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs the post.date as formatted html, with hooks for CSS styling.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +date+ is the date object to format as HTML.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">date_to_html_string</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;month&quot;&gt;&#39;</span> <span class="o">+</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upcase</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt; &#39;</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">+=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;day&quot;&gt;%d&lt;/span&gt; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">+=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;year&quot;&gt;%Y&lt;/span&gt; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Layouts: tag_index.html</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cp octopress/source/_layouts/category_index.html octopress/source/_layouts/tag_index.html
</span></code></pre></td></tr></table></div></figure>


<p>Update the <code>category</code> as <code>tag</code>.</p>

<h2>3. Config: tag_dir</h2>

<figure class='code'><figcaption><span>_config.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">tag_dir</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">tags</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<p><code>rake generate</code> and <code>rake preview</code>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adding Tag Cloud in Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/06/adding-tag-cloud-in-octopress/"/>
    <updated>2015-10-06T05:20:09+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/06/adding-tag-cloud-in-octopress</id>
    <content type="html"><![CDATA[<p>Features: tag cloud and category list with counts.</p>

<p>Steps:</p>

<ol>
<li>update the ruby plugin: <code>plugins/tag_cloud.rb</code></li>
<li>update the html templates: <code>source/_includes/asides/tag_cloud.html</code>, <code>source/_includes/asides/category_list.html</code></li>
<li>update the sass files: <code>sass/plugins/_tag_cloud.scss</code>, <code>sass/plugins/_category_list.scss</code></li>
</ol>


<h2>1. Plugin: tag_cloud.rb</h2>

<figure class='code'><figcaption><span>tag_cloud.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># encoding: utf-8</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Tag Cloud for Octopress</span>
</span><span class='line'><span class="c1"># =======================</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Description:</span>
</span><span class='line'><span class="c1"># ------------</span>
</span><span class='line'><span class="c1"># Easy output tag cloud and category list.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Syntax:</span>
</span><span class='line'><span class="c1"># -------</span>
</span><span class='line'><span class="c1">#     {\% tag_cloud [counter:true] %\}</span>
</span><span class='line'><span class="c1">#     {\% category_list [counter:true] %\}</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Example:</span>
</span><span class='line'><span class="c1"># --------</span>
</span><span class='line'><span class="c1"># In some template files, you can add the following markups.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># ### source/_includes/custom/asides/tag_cloud.html ###</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     `&lt;section&gt;`</span>
</span><span class='line'><span class="c1">#       `&lt;h1&gt;Tag Cloud&lt;/h1&gt;`</span>
</span><span class='line'><span class="c1">#         `&lt;span id=&quot;tag-cloud&quot;&gt;{\% tag_cloud %\}&lt;/span&gt;`</span>
</span><span class='line'><span class="c1">#     `&lt;/section&gt;`</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># ### source/_includes/custom/asides/category_list.html ###</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     `&lt;section&gt;`</span>
</span><span class='line'><span class="c1">#       `&lt;h1&gt;Categories&lt;/h1&gt;`</span>
</span><span class='line'><span class="c1">#         `&lt;ul id=&quot;category-list&quot;&gt;{\% category_list counter:true %\}&lt;/ul&gt;`</span>
</span><span class='line'><span class="c1">#     `&lt;/section&gt;`</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Notes:</span>
</span><span class='line'><span class="c1"># ------</span>
</span><span class='line'><span class="c1"># Be sure to insert above template files into `default_asides` array in `_config.yml`.</span>
</span><span class='line'><span class="c1"># And also you can define styles for &#39;tag-cloud&#39; or &#39;category-list&#39; in a `.scss` file.</span>
</span><span class='line'><span class="c1"># (ex: `sass/custom/_styles.scss`)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Licence:</span>
</span><span class='line'><span class="c1"># --------</span>
</span><span class='line'><span class="c1"># Distributed under the [MIT License][MIT].</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># [MIT]: http://www.opensource.org/licenses/mit-license.php</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;stringex&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagCloud</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">markup</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span> <span class="o">=~</span> <span class="sr">/\s*counter:(\w+)/i</span>
</span><span class='line'>        <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="vg">$1</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sr">/counter:\w+/i</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="k">super</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">lists</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="n">max</span><span class="p">,</span> <span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>      <span class="n">tag_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;root&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
</span><span class='line'>      <span class="n">tags</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">tags</span>
</span><span class='line'>      <span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort_by</span><span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
</span><span class='line'>        <span class="n">count</span> <span class="o">=</span> <span class="n">tags</span><span class="o">[</span><span class="n">tag</span><span class="o">].</span><span class="n">count</span>
</span><span class='line'>        <span class="n">lists</span><span class="o">[</span><span class="n">tag</span><span class="o">]</span> <span class="o">=</span> <span class="n">count</span>
</span><span class='line'>        <span class="n">max</span> <span class="o">=</span> <span class="n">count</span> <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>      <span class="n">lists</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span> <span class="n">tag</span><span class="p">,</span> <span class="n">counter</span> <span class="o">|</span>
</span><span class='line'>        <span class="n">url</span> <span class="o">=</span> <span class="n">tag_dir</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/_|\P{Word}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/-{2,}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">downcase</span>
</span><span class='line'>        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;font-size: </span><span class="si">#{</span><span class="mi">90</span> <span class="o">+</span> <span class="p">(</span><span class="mi">110</span> <span class="o">*</span> <span class="nb">Float</span><span class="p">(</span><span class="n">counter</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">max</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;a href=&#39;</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39; style=&#39;</span><span class="si">#{</span><span class="n">style</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span>
</span><span class='line'>          <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;(</span><span class="si">#{</span><span class="n">tags</span><span class="o">[</span><span class="n">tag</span><span class="o">].</span><span class="n">count</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;/a&gt; &quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">html</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">CategoryList</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">markup</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span> <span class="o">=~</span> <span class="sr">/\s*counter:(\w+)/i</span>
</span><span class='line'>        <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="vg">$1</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sr">/counter:\w+/i</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="k">super</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>      <span class="n">category_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;category_dir&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">categories</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span>
</span><span class='line'>      <span class="n">categories</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort_by</span><span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;li&gt;&lt;a href=&#39;/</span><span class="si">#{</span><span class="n">category_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">category</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span>
</span><span class='line'>          <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; (</span><span class="si">#{</span><span class="n">categories</span><span class="o">[</span><span class="n">category</span><span class="o">].</span><span class="n">count</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;/a&gt;&lt;/li&gt;&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">html</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;tag_cloud&#39;</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">TagCloud</span><span class="p">)</span>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;category_list&#39;</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">CategoryList</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. HTML: source/_includes/</h2>

<p>tag_cloud.html</p>

<figure class='code'><figcaption><span>tag_cloud.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;tag-cloud&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Tags<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>{\% tag_cloud counter:true %\}<span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>category_list.html</p>

<figure class='code'><figcaption><span>category_list.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Summary<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>{\% category_list counter:true %\}<span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. SASS: sass/plugins</h2>

<p>_tag_cloud.scss</p>

<figure class='code'><figcaption><span>_tag_cloud.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">section</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;category-list&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">h1</span><span class="o">&gt;</span><span class="nt">Summary</span><span class="o">&lt;/</span><span class="nt">h1</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nt">ul</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;category-list&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">category_list</span> <span class="n">counter</span><span class="o">:</span><span class="n">true</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">section</span><span class="o">&gt;</span>
</span><span class='line'><span class="nt">kelly-2</span><span class="nd">:octopress</span> <span class="nt">kelly</span><span class="o">$</span> <span class="nt">cat</span> <span class="nt">sass</span><span class="o">/</span><span class="nt">plugins</span><span class="o">/</span><span class="nt">_tag_cloud</span><span class="nc">.scss</span>
</span><span class='line'><span class="nc">.tag-cloud</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ul</span> <span class="err">{</span>
</span><span class='line'>        <span class="k">padding</span><span class="o">:</span> <span class="m">.5em</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nt">a</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>_category_list.scss</p>

<figure class='code'><figcaption><span>_category_list.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.category-list</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">a</span> <span class="err">{</span>
</span><span class='line'>  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<p>Include the <code>tag_cloud.html</code> and <code>category_list.html</code> in a page, and then run <code>rake generate</code> and <code>rake preview</code>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Adding the Social Icons in Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/06/adding-the-social-icons-in-octopress/"/>
    <updated>2015-10-06T05:04:17+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/06/adding-the-social-icons-in-octopress</id>
    <content type="html"><![CDATA[<h2>1. Perfections: design the icons</h2>

<p>Go to <a href="http://perfecticons.com">Perfections</a>, choose the icons you need, select the styles, and then generate the codes.</p>

<p>Once done, download the <code>fonts.zip</code>.</p>

<h2>2. Octopress: integrate the icons</h2>

<ul>
<li>copy the <code>fonts.zip</code> to <code>octopress/source/assets/fonts/</code></li>
<li>copy the html file to <code>octopress/source/_includes/social.html</code>, and then modify the variables</li>
<li>add the <code>social.html</code> to a page</li>
<li>copy the css file to <code>octopress/sass/partials/_socials.scss</code></li>
<li>update the links in <code>octopress/_config.yml</code></li>
</ul>


<p>Once done, run <code>rake generate</code> and <code>rake preview</code> to check.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress Construct]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/06/octopress-construct/"/>
    <updated>2015-10-06T04:06:04+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/06/octopress-construct</id>
    <content type="html"><![CDATA[<h2>1. Folder Construct</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./
</span><span class='line'>|---- source/                                   # templates
</span><span class='line'>|---- sass/                                     # scss
</span><span class='line'>|---- ./themes/                                 # themes
</span><span class='line'>|          |---- classic/                       # a theme contains source and sass
</span><span class='line'>|                   |---- source/
</span><span class='line'>|                   |---- sass/
</span><span class='line'>|---- plugins/                                   # ruby plugins
</span><span class='line'>|
</span><span class='line'>|---- Gemfile                                    # gemfile
</span><span class='line'>|---- Rakefile                                   # rakefile
</span><span class='line'>|---- config.rb
</span><span class='line'>|---- config.ru
</span><span class='line'>|---- _config.yml                                # site config file
</span><span class='line'>|
</span><span class='line'>|---- public/                                    # the generated pages
</span><span class='line'>|---- _deploy/                                   # the files for deployment</span></code></pre></td></tr></table></div></figure>


<h2>2. Static Pages</h2>

<h3>2.1. source</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source/
</span><span class='line'>  |---- _includes/                  # template partials
</span><span class='line'>  |---- _layouts/                   # page layouts
</span><span class='line'>  |
</span><span class='line'>  |---- page/                       # page construct
</span><span class='line'>  |---- index.html                  # index
</span><span class='line'>  |
</span><span class='line'>  |
</span><span class='line'>  |---- javascripts/
</span><span class='line'>  |---- stylesheets/
</span><span class='line'>  |---- assets/                     # fonts and others
</span><span class='line'>  |---- images/</span></code></pre></td></tr></table></div></figure>


<h4>2.1.1. templates</h4>

<p><code>index.html</code> and <code>page/index.html</code> are the top layers, they are extended from <code>_layouts</code> which is contatining the page templates.</p>

<p>All the page layouts <code>_layouts</code> are extended from the <code>_includes</code> partials.</p>

<p>If you would like to start a new page, follow the steps:</p>

<ul>
<li>type <code>rake new_page['page_name']</code></li>
<li>go to <code>page_name</code></li>
<li><code>vim index.html</code></li>
<li>update the layouts and head_vars</li>
<li>update the contents, for example, include a partial from <code>_includes</code> or rewrite the content corresponding to the requirements</li>
</ul>


<h4>2.1.2. static files</h4>

<p>Put the images in the <code>images</code>, put the fonts and other files in <code>assets</code>, put the javascripts in <code>javascripts</code>.</p>

<p>NOTE: For the stylesheets, you can update the styles in <code>sass/</code>.</p>

<h3>2.2. sass</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sass/
</span><span class='line'>  |---- screen.scss
</span><span class='line'>            |---- custom/
</span><span class='line'>            |---- _base.scss                               # the global settings
</span><span class='line'>            |         |---- _utilities.scss                # mixins
</span><span class='line'>            |         |---- _solarized.scss                # codes
</span><span class='line'>            |         |---- _theme.scss                    # theme
</span><span class='line'>            |         |---- _typography.scss               # DOM elements
</span><span class='line'>            |         |---- _layout.scss                   # layouts
</span><span class='line'>            |
</span><span class='line'>            |---- _partials.scss                           # the partial settings
</span><span class='line'>            |         |---- _header.scss
</span><span class='line'>            |         |---- _navigation.scss
</span><span class='line'>            |         |---- _blog.scss
</span><span class='line'>            |         |---- _sharing.scss                  # sharing
</span><span class='line'>            |         |---- _syntax.scss                   # codes
</span><span class='line'>            |         |---- _archives.scss
</span><span class='line'>            |         |---- _sidebar.scss
</span><span class='line'>            |         |---- _footer.scss
</span><span class='line'>            |
</span><span class='line'>            |---- plugins/                                 # plugin styles</span></code></pre></td></tr></table></div></figure>


<h3>2.3. .themes</h3>

<p>The theme related files are <code>source</code> and <code>sass</code>.</p>

<p>If install a theme, the step is just copy the <code>source</code> and <code>sass</code> to <code>octopress/</code>, and then replace the old files.</p>

<p>If create a theme, vise versa, just copy <code>octopress/source</code> and <code>octopress/sass</code> to <code>.themes/theme_name</code>.</p>

<h4>2.3.1. Installing a theme</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress/.themes
</span><span class='line'><span class="nv">$ </span>git clone https://a_new_theme_url
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress/
</span><span class='line'><span class="nv">$ </span>rake install<span class="o">[</span><span class="s1">&#39;theme_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake generate
</span></code></pre></td></tr></table></div></figure>


<h4>2.3.2. Creating a theme</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress
</span><span class='line'><span class="nv">$ </span>mkdir .themes/theme_name
</span><span class='line'><span class="nv">$ </span>cp -R <span class="nb">source</span> .themes/theme_name/source
</span><span class='line'><span class="nv">$ </span>cp -<span class="nv">$ </span>sass .themes/theme_name/sass
</span></code></pre></td></tr></table></div></figure>


<h2>3. Plugins</h2>

<p>You can extend various of features by ruby plugins.</p>

<p>If you perfer creating a plugin by yourself, follow the steps:</p>

<ul>
<li><code>cd plugins</code></li>
<li><code>vim plugin_name.rb</code></li>
<li>write the features</li>
<li>update <code>Gemfile</code> if some packages required</li>
<li>go to <code>source/_includes/plugins</code>, write the corresponding template</li>
<li>go to <code>source/</code>, include the plugin in the pages</li>
<li><code>vim _config.yml</code>, write the config variables if needed</li>
<li>go to <code>sass/plugins</code>, write the coresponding style`</li>
<li><code>rake generate</code></li>
<li><code>rake preview</code></li>
</ul>


<h2>4. Configuration</h2>

<h3>4.1. _config.yml</h3>

<p>Since Octopress is the extension of Jekyll, you can check the Jekyll configuration documents for the detailed config variables.</p>

<h2>5. Commands</h2>

<h3>5.1. Gemfile</h3>

<p>Update the gems in the <code>Gemfile</code>, especially when you update the plugins.</p>

<h3>5.2. Rakefile</h3>

<p>Update the commands in the <code>Rakefile</code>.</p>

<h4>5.2.1. Default commands</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rake generate
</span><span class='line'><span class="nv">$ </span>rake watch
</span><span class='line'><span class="nv">$ </span>rake preview
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake new_post<span class="o">[</span><span class="s1">&#39;post_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake new_page<span class="o">[</span><span class="s1">&#39;page_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake isolate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake integrate
</span><span class='line'><span class="nv">$ </span>rake update_sytle
</span><span class='line'><span class="nv">$ </span>rake update_source
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake deploy
</span><span class='line'><span class="nv">$ </span>rake gen_deploy
</span><span class='line'><span class="nv">$ </span>rake rsync
</span><span class='line'><span class="nv">$ </span>rake set_root_dir
</span><span class='line'><span class="nv">$ </span>rake setup_github_pages
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://octopress.org/docs/">Octopress Docs</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/06/installing-octopress/"/>
    <updated>2015-10-06T03:54:31+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/06/installing-octopress</id>
    <content type="html"><![CDATA[<h2>1. Prequisitions</h2>

<ul>
<li>Ubuntu 14.04</li>
<li>Node.js</li>
<li>RVM</li>
<li>Ruby 2.1.1</li>
<li>Gem</li>
<li>Bundler</li>
<li>Rake</li>
</ul>


<p>Node.js</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nodejs
</span></code></pre></td></tr></table></div></figure>


<p>RVM and Ruby</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
</span><span class='line'><span class="nv">$ </span><span class="se">\c</span>url -sSL https://get.rvm.io <span class="p">|</span> bash -s stable
</span><span class='line'><span class="nv">$ </span>rvm install 2.1.1
</span></code></pre></td></tr></table></div></figure>


<h2>2. Octopress</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress
</span><span class='line'><span class="nv">$ </span>gem install bundler
</span><span class='line'><span class="nv">$ </span>bundle install
</span><span class='line'><span class="nv">$ </span>rake install
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rake generate
</span><span class='line'><span class="nv">$ </span>rake preview
</span></code></pre></td></tr></table></div></figure>


<p>link: <a href="http://localhost:4000">http://localhost:4000</a></p>

<h2>References</h2>

<ol>
<li><a href="http://octopress.org/docs/setup/">Octopress</a></li>
<li><a href="https://github.com/imathis/octopress">Octopress Source Code</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Openstack Devstack]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/03/installing-openstack-devstack/"/>
    <updated>2015-10-03T12:33:38+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/03/installing-openstack-devstack</id>
    <content type="html"><![CDATA[<h3>Prequisition</h3>

<p>Softwares:</p>

<p>&ndash; (VM) <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox 5.0</a><br/>
&ndash; (OS) <a href="http://www.ubuntu.com/download/server">Ubuntu Server 14.04.3</a><br/>
&ndash; (SW) <a href="https://github.com/openstack-dev/devstack">Openstack</a></p>

<p>Steps:</p>

<p>&ndash; Installing VirtualBox<br/>
&ndash; Installing Ubuntu 14.04.03<br/>
&ndash; Installing Openstack<br/>
&ndash; Testing</p>

<h3>1. Installing VirtualBox</h3>

<p>Go to <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>, download and install on the local machine.</p>

<h3>2. Installing Ubuntu</h3>

<p>Go to <a href="http://www.ubuntu.com/download/server">Ubuntu</a> page, download the ubuntu server 14.04.03 (NOTE: Preferring 14.04.03) iso image.</p>

<p>Once done, open VirtualBox, create a vm for Ubuntu server. The vm settings are:<br/>
&ndash; memory: 2GB<br/>
&ndash; storage: 100GB<br/>
&ndash; <strong>network: briaged adapter (IMPORTANT), promiscuous mode with ALLOW ALL</strong></p>

<p>Then, attach Ubuntu server iso file to the drive, double click the vm, the system will be jumped to the installation guide.</p>

<p>When installing Ubuntu, the installation mode should be:<br/>
&ndash; <strong>multi-server with MAAS (IMPORTANT)</strong></p>

<p>Once done, restart and config the system:</p>

<figure class='code'><figcaption><span>config system</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update <span class="o">&amp;&amp;</span> upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install git
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;username&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;user@example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. Installing Openstack</h3>

<p>Go to <a href="https://github.com/openstack-dev/devstack">Openstack</a>, download the repo and install:</p>

<figure class='code'><figcaption><span>installing openstack</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># create a project folder and download the repo</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>sudo mkdir openstack
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>openstack
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/openstack-dev/devstack.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>devstack
</span><span class='line'><span class="nv">$ </span>git checkout stable/juno
</span><span class='line'>
</span><span class='line'><span class="c"># config user</span>
</span><span class='line'><span class="nv">$ </span>sudo ./tools/create-stack-user.sh
</span><span class='line'><span class="nv">$ </span>sudo chown -R stack:stack /openstack
</span><span class='line'>
</span><span class='line'><span class="c"># install</span>
</span><span class='line'><span class="nv">$ </span>./stack.sh
</span></code></pre></td></tr></table></div></figure>


<p>Trouble Shooting</p>

<p><strong>(1)</strong> If something wrong, try <code>./unstack.sh</code> and then <code>./clean.sh</code>, restart and then <code>./stack.sh</code> again.</p>

<p><strong>(2)</strong> If re-run <code>./stack.sh</code> and the python packages flag some issue, try to delete <code>/opt/stack/xxx</code>, and re-run <code>./stack.sh</code>.</p>

<h3>4. Testing</h3>

<p>Open a browser, enter the dashboard with <code>http://ip_address</code>, login with <code>admin/password</code> (NOTE: password was set at previous).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Will Architecture]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/30/will-architecture/"/>
    <updated>2015-09-30T15:19:59+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/30/will-architecture</id>
    <content type="html"><![CDATA[<h2>1. Features</h2>

<h2>2. Architect</h2>

<h2>3. File Construct</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./
</span><span class='line'> |
</span><span class='line'> |---- will/                                    # src
</span><span class='line'> |       |---- mixins/
</span><span class='line'> |       |---- plugins/                         # extensions
</span><span class='line'> |       |---- scripts/                         # commands
</span><span class='line'> |       |---- storage/                         # dbs
</span><span class='line'> |       |---- templates/                       # html
</span><span class='line'> |       |---- tests/                           # testing
</span><span class='line'> |       |
</span><span class='line'> |       |---- acl.py
</span><span class='line'> |       |---- decorators.py
</span><span class='line'> |       |---- listener.py
</span><span class='line'> |       |---- plugin.py
</span><span class='line'> |       |---- scheduler.py
</span><span class='line'> |       |---- utils.py
</span><span class='line'> |       |
</span><span class='line'> |       |---- settings.py
</span><span class='line'> |       |---- main.py
</span><span class='line'> |
</span><span class='line'> |---- config.py                                # config file
</span><span class='line'> |---- run_will.py                              # run will</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hipchat API]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/30/hipchat-api/"/>
    <updated>2015-09-30T15:09:22+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/30/hipchat-api</id>
    <content type="html"><![CDATA[<h2>1. Hipchat API</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ROOM_NOTIFICATION_URL = "https://%(server)s/v2/room/%(room_id)s/notification?auth_token=%(token)s    "
</span><span class='line'>ROOM_TOPIC_URL = "https://%(server)s/v2/room/%(room_id)s/topic?auth_token=%(token)s"
</span><span class='line'>PRIVATE_MESSAGE_URL = "https://%(server)s/v2/user/%(user_id)s/message?auth_token=%(token)s"
</span><span class='line'>SET_TOPIC_URL = "https://%(server)s/v2/room/%(room_id)s/topic?auth_token=%(token)s"
</span><span class='line'>USER_DETAILS_URL = "https://%(server)s/v2/user/%(user_id)s?auth_token=%(token)s"
</span><span class='line'>ALL_USERS_URL = "https://%(server)s/v2/user?auth_token=%(token)s&start-index=%(start_index)s"</span></code></pre></td></tr></table></div></figure>


<h2>2. Command Line</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s1">&#39;{&quot;color&quot;: &quot;green&quot;, &quot;message&quot;: &quot;message&quot;, &quot;notify&quot;: false, &quot;messae_format&quot;: &quot;text&quot;}&#39;</span> -H <span class="s1">&#39;Content-Type: application/json&#39;</span> https://api.hipchat.com/v2/room/room id/scope_name<span class="o">(</span>message/notification<span class="o">)</span>?auth_token<span class="o">=</span>specific_token
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="https://www.hipchat.com/docs/apiv2">Hipchat API Docs</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Will Bot]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/30/will-bot/"/>
    <updated>2015-09-30T14:52:04+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/30/will-bot</id>
    <content type="html"><![CDATA[<h2>1. Installation</h2>

<h3>1.1. Prequisition</h3>

<ul>
<li>Ubuntu 14.04</li>
<li>Redis</li>
<li>Will</li>
</ul>


<h3>1.2. Ubuntu</h3>

<p>Ubuntu 14.04</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-virtualenv redis-server
</span><span class='line'><span class="nv">$ </span>redis
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. Octowill</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/project/
</span><span class='line'><span class="nv">$ </span>sudo mkdir octowill
</span><span class='line'><span class="nv">$ </span>sudo chown -R user:group /path/to/octowill/
</span><span class='line'><span class="nv">$ </span>sudo su user
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>mkdir venvs
</span><span class='line'><span class="nv">$ </span>virtualenv venvs/octowill
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/octowill/bin/activate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/KellyChan/octowill.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span></code></pre></td></tr></table></div></figure>


<h2>2. Configuration</h2>

<h3>2.1. Prequistion</h3>

<ul>
<li>hipchat account</li>
<li>octowill</li>
</ul>


<h3>2.2. Hipchat</h3>

<ul>
<li>signup hipchat</li>
<li>get API tokens</li>
</ul>


<p>API summary</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>V2 Tokens:
</span><span class='line'>- Administer Group - Perform group administrative tasks. Note that this scope is restricted from updating the group owner<span class="err">&#39;</span>s profile.
</span><span class='line'>- Administer Room - Perform room administrative tasks
</span><span class='line'>- Manage Rooms - Create, update, and remove rooms
</span><span class='line'>- Send Message - Send private one-on-one messages
</span><span class='line'>- Send Notification - Send room notifications
</span><span class='line'>- View Group - View users, rooms, and other group information
</span><span class='line'>- View Messages - View messages from chat rooms and private chats you have access to
</span><span class='line'>- View Room - View room information and participants, but not <span class="nb">history</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Octowill</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>cp config.py.sample config.py
</span><span class='line'><span class="nv">$ </span>vim config.py                   <span class="c"># update USERNAME, PASSWORD, V2_TOKENS</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>./start_dev/will.py
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="https://github.com/skoczen/will">will</a></li>
<li><a href="http://skoczen.github.io/will/">will document</a></li>
<li><a href="https://www.hipchat.com">hiphat</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Changing a Theme for NodeJS Ghost]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/16/changing-a-theme-for-nodejs-ghost/"/>
    <updated>2015-09-16T23:30:16+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/16/changing-a-theme-for-nodejs-ghost</id>
    <content type="html"><![CDATA[<h2>1. Download a theme</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /path/to/ghost/content/themes
</span><span class='line'>git clone git@xxxx:a_new_theme.git
</span></code></pre></td></tr></table></div></figure>


<h2>2. Config a theme</h2>

<p>Go to <a href="http://localhost:2368/admin">http://localhost:2368/admin</a></p>

<ul>
<li>find generic -> themes -> select</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Generating Static Pages With Python Butter for NodeJS Ghost]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/07/generating-static-pages-with-python-butter-for-nodejs-ghost/"/>
    <updated>2015-09-07T22:09:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/07/generating-static-pages-with-python-butter-for-nodejs-ghost</id>
    <content type="html"><![CDATA[<h2>1. Installing Dependencies</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install libxml2-dev libxslt1-dev
</span></code></pre></td></tr></table></div></figure>


<p>Without the above dependencies, it will flag error:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pip instal buster: lxml error: <span class="nb">command</span> <span class="s1">&#39;gcc&#39;</span> failed with <span class="nb">exit </span>status 1
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>2. Installing Butter</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/
</span><span class='line'><span class="nv">$ </span>sudo mkdir venvs
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install python-virtualenv
</span><span class='line'><span class="nv">$ </span>sudo virtualenv venvs/diary
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/diary/bin/activate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir static_pages
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>static_pages
</span><span class='line'><span class="nv">$ </span>sudo mkdir requirements
</span><span class='line'><span class="nv">$ </span>sudo nano requirements/base.txt    <span class="c"># add buster==0.1.3</span>
</span><span class='line'><span class="nv">$ </span>sudo pip install -r requirements/base.txt
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary/static_pages
</span><span class='line'><span class="nv">$ </span>buster generate --domain<span class="o">=</span>http://localhost:2368
</span><span class='line'><span class="nv">$ </span>buster preview
</span></code></pre></td></tr></table></div></figure>


<p>Site: <a href="http://localhost:9000">http://localhost:9000</a></p>

<h2>3. Config Bin</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /atr/apps/atr-blog/atr-blog/buster
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span>sudo vim requirments.sh       <span class="c"># add sudo apt-get install libxml2-dev libxslt1-dev</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Uploading to Github Pages</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rm -rf static
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/username/project.git static
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>buster generate --domain<span class="o">=</span>http://localhost:2233
</span><span class='line'><span class="nv">$ </span>buster preview
</span><span class='line'><span class="nv">$ </span><span class="c"># open http://localhost:9000</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>buster deploy
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Deploying NodeJS Ghost Production Stack]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/05/deploying-nodejs-ghost-production-stack/"/>
    <updated>2015-09-05T22:19:58+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/05/deploying-nodejs-ghost-production-stack</id>
    <content type="html"><![CDATA[<h2>Prequisitions</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>MySQL</li>
<li>Node.js / NPM</li>
<li>Ghost</li>
<li>NPM / forever</li>
<li>Nginx</li>
<li>Git</li>
</ul>


<h2>1. Ubuntu</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install git
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;xxx&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;xxxx&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>2. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server mysql-client
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mysql -uroot
</span><span class='line'>
</span><span class='line'>mysql&gt; create database ghost<span class="p">;</span>
</span><span class='line'>mysql&gt; create database ghost_dev<span class="p">;</span>
</span><span class='line'>mysql&gt; show schemas<span class="p">;</span>
</span><span class='line'>mysql&gt; <span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Node.js / NPM</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install --yes build-essential
</span><span class='line'><span class="nv">$ </span>sudo apt-get install curl
</span><span class='line'><span class="nv">$ </span>curl --silent --location https://deb.nodesource.com/setup_0.12 <span class="p">|</span> sudo bash -
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes nodejs
</span><span class='line'><span class="nv">$ </span>node -v
</span><span class='line'><span class="nv">$ </span>npm -v
</span></code></pre></td></tr></table></div></figure>


<h2>4. Ghost</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo su -
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>mkdir ghost
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>ghost
</span><span class='line'><span class="nv">$ </span>mkdir -p var/log
</span><span class='line'><span class="nv">$ </span>mkdir -p var/run
</span><span class='line'><span class="nv">$ </span>mkdir bin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo git clone https://github.com/username/project.git
</span><span class='line'><span class="nv">$ </span>git remote -v
</span><span class='line'><span class="nv">$ </span>git branch
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo npm start --development
</span><span class='line'><span class="nv">$ </span>sudo npm start --production
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>localhost:2368</li>
<li>localhost:2368/admin</li>
</ul>


<h2>5. Forever</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo npm install -g forever
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo node index.js
</span><span class='line'><span class="nv">$ </span>sudo forever start index.js
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># sudo forever stop 0  </span>
</span></code></pre></td></tr></table></div></figure>


<h2>6. Nginx</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /ghost
</span><span class='line'><span class="nv">$ </span>sudo mkdir -p etc/nginx
</span><span class='line'><span class="nv">$ </span>sudo ln ghost/config/nginx/diary.conf /ghost/etc/nginx/ghost.conf
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /ghost/etc/nginx/ghost.conf /etc/nginx/sites-available/ghost.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-available/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /etc/nginx/sites-available/ghost.conf /etc/nginx/sites-enabled/ghost.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-enabled/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>7. Auto Service Start</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /ghost/ghost/config/bin
</span><span class='line'><span class="nv">$ </span>sudo cp diary-dev ghost              <span class="c"># update the paths</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln ghost /ghost/bin/ghost
</span><span class='line'><span class="nv">$ </span>sudo ln /ghost/bin/ghost /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>ls /etc/init.d/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chmod a+x /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>ls /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>sudo update-rc.d ghost defaults
</span><span class='line'><span class="nv">$ </span>sudo service ghost start
</span></code></pre></td></tr></table></div></figure>


<p>ghost: check the paths</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;ghost&quot;</span>
</span><span class='line'><span class="nv">NODE_BIN_DIR</span><span class="o">=</span><span class="s2">&quot;/usr/local/node/bin&quot;</span>
</span><span class='line'><span class="nv">NODE_PATH</span><span class="o">=</span><span class="s2">&quot;/ghost/ghost/node_modules&quot;</span>
</span><span class='line'><span class="nv">APPLICATION_PATH</span><span class="o">=</span><span class="s2">&quot;/ghost/ghost/index.js&quot;</span>
</span><span class='line'><span class="nv">PIDFILE</span><span class="o">=</span><span class="s2">&quot;/ghost/var/run/ghost.pid&quot;</span>
</span><span class='line'><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;/ghost/var/log/ghost.log&quot;</span>
</span><span class='line'><span class="nv">MIN_UPTIME</span><span class="o">=</span><span class="s2">&quot;5000&quot;</span>
</span><span class='line'><span class="nv">SPIN_SLEEP_TIME</span><span class="o">=</span><span class="s2">&quot;2000&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>8. Testing</h2>

<ul>
<li>ip_address:8000</li>
<li>ip_address:8000/admin</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing NodeJS Ghost Devstack]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/09/04/installing-nodejs-ghost-devstack/"/>
    <updated>2015-09-04T20:42:51+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/09/04/installing-nodejs-ghost-devstack</id>
    <content type="html"><![CDATA[<h2>Prequistions</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>Vagrant / VirtualBox</li>
<li>Node.js / NPM</li>
<li>NPM: forever</li>
<li>Ghost</li>
<li>MySQL</li>
<li>Nginx</li>
<li>Git</li>
</ul>


<h2>1. Vagrant / VirtualBox</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/project/
</span><span class='line'><span class="nv">$ </span>mkdir private
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>private
</span><span class='line'><span class="nv">$ </span>vagrant init hashicorp/precise64
</span></code></pre></td></tr></table></div></figure>


<p>config Vagrantfile</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">diary_mount_dir</span> <span class="o">=</span> <span class="s1">&#39;diary&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_MOUNT_BASE&#39;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">diary_mount_dir</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_MOUNT_BASE&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">diary_mount_dir</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a forwarded port mapping which allows access to a specific port</span>
</span><span class='line'>  <span class="c1"># within the machine from a port on the host machine. In the example below,</span>
</span><span class='line'>  <span class="c1"># accessing &quot;localhost:8080&quot; will access port 80 on the guest machine.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8000</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">2346</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">2346</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a private network, which allows host-only access to the machine</span>
</span><span class='line'>  <span class="c1"># using a specific IP.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.33.10&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Share an additional folder to the guest VM. The first argument is</span>
</span><span class='line'>  <span class="c1"># the path on the host to the actual folder. The second argument is</span>
</span><span class='line'>  <span class="c1"># the path on the guest to mount the folder. And the optional third</span>
</span><span class='line'>  <span class="c1"># argument is a set of non-required options.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span> <span class="ss">disabled</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">diary_mount_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/private/apps/diary/diary&quot;</span><span class="p">,</span> <span class="ss">create</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">nfs</span><span class="p">:</span> <span class="kp">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>vagrant up</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list  <span class="c"># change us to cn</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<h2>2. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server mysql-client
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mysql -uroot
</span><span class='line'>
</span><span class='line'>mysql&gt; CREATE DATABASE ghost<span class="p">;</span>
</span><span class='line'>mysql&gt; CREATE DATABASE ghost_dev<span class="p">;</span>
</span><span class='line'>mysql&gt; show schemas<span class="p">;</span>
</span><span class='line'>mysql&gt; <span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Node.js / NPM</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo reboot
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes build-essential
</span><span class='line'><span class="nv">$ </span>sudo apt-get install curl
</span><span class='line'><span class="nv">$ </span>curl --silent --location https://deb.nodesource.com/setup_0.12 <span class="p">|</span> sudo bash -
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes nodejs
</span><span class='line'><span class="nv">$ </span>node -v
</span><span class='line'><span class="nv">$ </span>npm -v
</span></code></pre></td></tr></table></div></figure>


<h2>4. Ghost</h2>

<h3>4.1. Installation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /tmp
</span><span class='line'><span class="nv">$ </span>curl -L https://ghost.org/zip/ghost-latest.zip -o ghost.zip
</span><span class='line'><span class="nv">$ </span>sudo apt-get install unzip
</span><span class='line'><span class="nv">$ </span>sudo unzip -uo ghost.zip -d /private/apps/diary/diary/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>npm install --production
</span><span class='line'><span class="nv">$ </span>npm install --development
</span></code></pre></td></tr></table></div></figure>


<h3>4.2. Configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo nano config.js                 <span class="c"># config mysql db for development and production</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>npm start --development
</span><span class='line'><span class="nv">$ </span>npm start --production
</span></code></pre></td></tr></table></div></figure>


<p>config.js - development</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="c1">//database: {</span>
</span><span class='line'>    <span class="c1">//    client: &#39;sqlite3&#39;,</span>
</span><span class='line'>    <span class="c1">//    connection: {</span>
</span><span class='line'>    <span class="c1">//        filename: path.join(__dirname, &#39;/content/data/ghost-dev.db&#39;)</span>
</span><span class='line'>    <span class="c1">//    },</span>
</span><span class='line'>    <span class="c1">//    debug: false</span>
</span><span class='line'>    <span class="c1">//},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">database</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">client</span><span class="o">:</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">connection</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">host</span>     <span class="o">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">user</span>     <span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">password</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">database</span> <span class="o">:</span> <span class="s1">&#39;ghost_dev&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">charset</span>  <span class="o">:</span> <span class="s1">&#39;utf8&#39;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'>    <span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>


<p>config.js - production</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="c1">//database: {</span>
</span><span class='line'>    <span class="c1">//    client: &#39;sqlite3&#39;,</span>
</span><span class='line'>    <span class="c1">//    connection: {</span>
</span><span class='line'>    <span class="c1">//        filename: path.join(__dirname, &#39;/content/data/ghost-dev.db&#39;)</span>
</span><span class='line'>    <span class="c1">//    },</span>
</span><span class='line'>    <span class="c1">//    debug: false</span>
</span><span class='line'>    <span class="c1">//},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">database</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">client</span><span class="o">:</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">connection</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">host</span>     <span class="o">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">user</span>     <span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">password</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">database</span> <span class="o">:</span> <span class="s1">&#39;ghost&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">charset</span>  <span class="o">:</span> <span class="s1">&#39;utf8&#39;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'>    <span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>


<h2>6. Forever</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo npm install -g forever
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>node index.js
</span><span class='line'><span class="nv">$ </span>forever start index.js
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># forever stop 0  </span>
</span></code></pre></td></tr></table></div></figure>


<h2>7. Nginx</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir nginx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>nginx
</span><span class='line'><span class="nv">$ </span>sudo nano diary.conf
</span></code></pre></td></tr></table></div></figure>


<p>ghost.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>server <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  listen 8000<span class="p">;</span>
</span><span class='line'>  server_name ghost.com<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  location / <span class="o">{</span>
</span><span class='line'>    proxy_set_header   X-Real-IP <span class="nv">$remote_addr</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header   Host      <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_pass         http://127.0.0.1:2368<span class="p">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>config nginx</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln diary.conf /etc/nginx/sites-available/diary.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-available/
</span><span class='line'><span class="nv">$ </span>sudo ln /etc/nginx/sites-available/diary.conf /etc/nginx/sites-enabled/diary.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-enabled/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>8. Testing</h2>

<ul>
<li>localhost:8000</li>
<li>localhost:8000/admin</li>
</ul>


<h2>9. Auto Service Start</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>bin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano ghost  <span class="c"># add the config file</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /private/apps/diary/bin/diary /etc/init.d/diary
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /etc/init.d/
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>chmod a+x /etc/init.d/diary
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'><span class="nv">$ </span>update-rc.d diary defaults
</span><span class='line'><span class="nv">$ </span>service diary start
</span></code></pre></td></tr></table></div></figure>


<p>ghost</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># An init.d script for running a Node.js process as a service using Forever as</span>
</span><span class='line'><span class="c"># the process monitor. For more configuration options associated with Forever,</span>
</span><span class='line'><span class="c"># see: https://github.com/nodejitsu/forever</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># This was written for Debian distributions such as Ubuntu, but should still</span>
</span><span class='line'><span class="c"># work on RedHat, Fedora, or other RPM-based distributions, since none of the</span>
</span><span class='line'><span class="c"># built-in service functions are used. So information is provided for both.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c">### BEGIN INIT INFO</span>
</span><span class='line'><span class="c"># Provides:             my-application</span>
</span><span class='line'><span class="c"># Required-Start:       $syslog $remote_fs</span>
</span><span class='line'><span class="c"># Required-Stop:        $syslog $remote_fs</span>
</span><span class='line'><span class="c"># Should-Start:         $local_fs</span>
</span><span class='line'><span class="c"># Should-Stop:          $local_fs</span>
</span><span class='line'><span class="c"># Default-Start:        2 3 4 5</span>
</span><span class='line'><span class="c"># Default-Stop:         0 1 6</span>
</span><span class='line'><span class="c"># Short-Description:    My Application</span>
</span><span class='line'><span class="c"># Description:          My Application</span>
</span><span class='line'><span class="c">### END INIT INFO</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c">### BEGIN CHKCONFIG INFO</span>
</span><span class='line'><span class="c"># chkconfig: 2345 55 25</span>
</span><span class='line'><span class="c"># description: My Application</span>
</span><span class='line'><span class="c">### END CHKCONFIG INFO</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Based on:</span>
</span><span class='line'><span class="c"># https://gist.github.com/3748766</span>
</span><span class='line'><span class="c"># https://github.com/hectorcorrea/hectorcorrea.com/blob/master/etc/forever-initd-hectorcorrea.sh</span>
</span><span class='line'><span class="c"># https://www.exratione.com/2011/07/running-a-nodejs-server-as-a-service-using-forever/</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># The example environment variables below assume that Node.js is installed by</span>
</span><span class='line'><span class="c"># building from source with the standard settings.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># It should be easy enough to adapt to the paths to be appropriate to a package</span>
</span><span class='line'><span class="c"># installation, but note that the packages available in the default repositories</span>
</span><span class='line'><span class="c"># are far behind the times. Most users will be building from source to get a</span>
</span><span class='line'><span class="c"># suitably recent Node.js version.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># An application name to display in echo text.</span>
</span><span class='line'><span class="c"># NAME=&quot;My Application&quot; </span>
</span><span class='line'><span class="c"># The full path to the directory containing the node and forever binaries.</span>
</span><span class='line'><span class="c"># NODE_BIN_DIR=&quot;/usr/local/node/bin&quot; </span>
</span><span class='line'><span class="c"># Set the NODE_PATH to the Node.js main node_modules directory.</span>
</span><span class='line'><span class="c"># NODE_PATH=&quot;/usr/local/lib/node_modules&quot; </span>
</span><span class='line'><span class="c"># The application startup Javascript file path.</span>
</span><span class='line'><span class="c"># APPLICATION_PATH=&quot;/home/user/my-application/start-my-application.js&quot; </span>
</span><span class='line'><span class="c"># Process ID file path.</span>
</span><span class='line'><span class="c"># PIDFILE=&quot;/var/run/my-application.pid&quot; </span>
</span><span class='line'><span class="c"># Log file path.</span>
</span><span class='line'><span class="c"># LOGFILE=&quot;/var/log/my-application.log&quot; </span>
</span><span class='line'><span class="c"># Forever settings to prevent the application spinning if it fails on launch.</span>
</span><span class='line'><span class="c"># MIN_UPTIME=&quot;5000&quot; </span>
</span><span class='line'><span class="c"># SPIN_SLEEP_TIME=&quot;2000&quot; </span>
</span><span class='line'>
</span><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">NODE_BIN_DIR</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">NODE_PATH</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">APPLICATION_PATH</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">PIDFILE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">MIN_UPTIME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">SPIN_SLEEP_TIME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Add node to the path for situations in which the environment is passed.</span>
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$NODE_BIN_DIR</span>:<span class="nv">$PATH</span>
</span><span class='line'><span class="c"># Export all environment variables that must be visible for the Node.js</span>
</span><span class='line'><span class="c"># application process forked by Forever. It will not see any of the other</span>
</span><span class='line'><span class="c"># variables defined in this script.</span>
</span><span class='line'><span class="nb">export </span><span class="nv">NODE_PATH</span><span class="o">=</span><span class="nv">$NODE_PATH</span>
</span><span class='line'>
</span><span class='line'>start<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Starting $NAME&quot;</span>
</span><span class='line'>    <span class="c"># We&#39;re calling forever directly without using start-stop-daemon for the</span>
</span><span class='line'>    <span class="c"># sake of simplicity when it comes to environment, and because this way</span>
</span><span class='line'>    <span class="c"># the script will work whether it is executed directly or via the service</span>
</span><span class='line'>    <span class="c"># utility.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The minUptime and spinSleepTime settings stop Forever from thrashing if</span>
</span><span class='line'>    <span class="c"># the application fails immediately on launch. This is generally necessary to</span>
</span><span class='line'>    <span class="c"># avoid loading development servers to the point of failure every time</span>
</span><span class='line'>    <span class="c"># someone makes an error in application initialization code, or bringing down</span>
</span><span class='line'>    <span class="c"># production servers the same way if a database or other critical service</span>
</span><span class='line'>    <span class="c"># suddenly becomes inaccessible.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The pidfile contains the child process pid, not the forever process pid.</span>
</span><span class='line'>    <span class="c"># We&#39;re only using it as a marker for whether or not the process is</span>
</span><span class='line'>    <span class="c"># running.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># Note that redirecting the output to /dev/null (or anywhere) is necessary</span>
</span><span class='line'>    <span class="c"># to make this script work if provisioning the service via Chef.</span>
</span><span class='line'>    forever <span class="se">\</span>
</span><span class='line'>      --pidFile <span class="nv">$PIDFILE</span> <span class="se">\</span>
</span><span class='line'>      -a <span class="se">\</span>
</span><span class='line'>      -l <span class="nv">$LOGFILE</span> <span class="se">\</span>
</span><span class='line'>      --minUptime <span class="nv">$MIN_UPTIME</span> <span class="se">\</span>
</span><span class='line'>      --spinSleepTime <span class="nv">$SPIN_SLEEP_TIME</span> <span class="se">\</span>
</span><span class='line'>      start <span class="nv">$APPLICATION_PATH</span> 2&gt;<span class="p">&amp;</span><span class="m">1</span> &gt; /dev/null <span class="p">&amp;</span>
</span><span class='line'>    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>stop<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> -f <span class="nv">$PIDFILE</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;Shutting down $NAME&quot;</span>
</span><span class='line'>        <span class="c"># Tell Forever to stop the process.</span>
</span><span class='line'>        forever stop <span class="nv">$APPLICATION_PATH</span> 2&gt;<span class="p">&amp;</span><span class="m">1</span> &gt; /dev/null
</span><span class='line'>        <span class="c"># Get rid of the pidfile, since Forever won&#39;t do that.</span>
</span><span class='line'>        rm -f <span class="nv">$PIDFILE</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is not running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>restart<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    stop
</span><span class='line'>    start
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>status<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="c"># On Ubuntu this isn&#39;t even necessary. To find out whether the service is</span>
</span><span class='line'>    <span class="c"># running, use &quot;service my-application status&quot; which bypasses this script</span>
</span><span class='line'>    <span class="c"># entirely provided you used the service utility to start the process.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The commented line below is the obvious way of checking whether or not a</span>
</span><span class='line'>    <span class="c"># process is currently running via Forever, but in recent Forever versions</span>
</span><span class='line'>    <span class="c"># when the service is started during Chef provisioning a dead pipe is left</span>
</span><span class='line'>    <span class="c"># behind somewhere and that causes an EPIPE exception to be thrown.</span>
</span><span class='line'>    <span class="c"># forever list | grep -q &quot;$APPLICATION_PATH&quot; </span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># So instead we add an extra layer of indirection with this to bypass that</span>
</span><span class='line'>    <span class="c"># issue.</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="sb">`</span>forever list<span class="sb">`</span> <span class="p">|</span> grep -q <span class="s2">&quot;$APPLICATION_PATH&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$?&quot;</span> -eq <span class="s2">&quot;0&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>0
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is not running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>3
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
</span><span class='line'>    start<span class="o">)</span>
</span><span class='line'>        start
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    stop<span class="o">)</span>
</span><span class='line'>        stop
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    status<span class="o">)</span>
</span><span class='line'>        status
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    restart<span class="o">)</span>
</span><span class='line'>        restart
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    *<span class="o">)</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;Usage: {start|stop|status|restart}&quot;</span>
</span><span class='line'>        <span class="nb">exit </span>1
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'><span class="k">esac</span>
</span><span class='line'><span class="nb">exit</span> <span class="nv">$RETVAL</span>
</span></code></pre></td></tr></table></div></figure>


<h2>10. Creating Config File</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir config
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>config
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span>sudo mkdir nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>bin
</span><span class='line'><span class="nv">$ </span>sudo cp /private/apps/diary/bin/diary diary-dev
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ..
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>nginx
</span><span class='line'><span class="nv">$ </span>sudo cp /private/apps/diary/nginx/diary.conf diary.conf
</span></code></pre></td></tr></table></div></figure>


<h2>11. Git</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git init
</span><span class='line'><span class="nv">$ </span>git remote add origin xxxx
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;xxx&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="http://support.ghost.org/installing-ghost-linux/">Installing ghost linux</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Deploying Redmine on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/08/30/deploying-redmine-on-ubuntu/"/>
    <updated>2015-08-30T23:46:36+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/08/30/deploying-redmine-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>Requirements</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>Redmine</li>
<li>MySQL</li>
<li>Apache2</li>
</ul>


<h2>1. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install mysql-server mysql-client
</span></code></pre></td></tr></table></div></figure>


<h2>2. Redmine</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install redmine redmine-mysql libapache2-mod-passenger
</span><span class='line'><span class="nv">$ </span>sudo dpkg-reconfigure redmine
</span></code></pre></td></tr></table></div></figure>


<h2>3. Apache2</h2>

<p>to link redmine to apache2</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /usr/share/redmine/public/ /var/www/redmine
</span></code></pre></td></tr></table></div></figure>


<p>edit passenger.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/mods-available/passenger.conf
</span><span class='line'>
</span><span class='line'><span class="c"># add </span>
</span><span class='line'>
</span><span class='line'>PassengerDefaultUser www-data
</span></code></pre></td></tr></table></div></figure>


<p>edit sites-available//default</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/sites-available/default
</span><span class='line'>
</span><span class='line'><span class="c"># add</span>
</span><span class='line'>
</span><span class='line'>&lt;Directory /var/www/redmine&gt;
</span><span class='line'>RailsBaseURI /redmine
</span><span class='line'>PassengerResolveSymlinksInDocumentRoot on
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>


<p>restart apache2</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service apache2 restart
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<ul>
<li>Site: <a href="http://ip_address/redmine">http://ip_address/redmine</a></li>
<li>Username/Password: admin/admin</li>
</ul>

]]></content>
  </entry>
  
</feed>
