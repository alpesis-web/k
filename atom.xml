<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Kelly Chan]]></title>
  <link href="http://k.arttechresearch.com/atom.xml" rel="self"/>
  <link href="http://k.arttechresearch.com/"/>
  <updated>2015-10-13T11:08:35+08:00</updated>
  <id>http://k.arttechresearch.com/</id>
  <author>
    <name><![CDATA[Kelly Chan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Using MathJax With Octopress]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/13/using-mathjax-with-octopress/"/>
    <updated>2015-10-13T10:26:29+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/13/using-mathjax-with-octopress</id>
    <content type="html"><![CDATA[<h2>1. Adding MathJax</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/mathjax.html
</span></code></pre></td></tr></table></div></figure>


<p>mathjax.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- MathJax --&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span><span class="s1">&#39;$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;\\(&quot;</span><span class="p">,</span><span class="s2">&quot;\\)&quot;</span><span class="p">]</span> <span class="p">],</span>
</span><span class='line'>      <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">skipTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">all</span> <span class="o">=</span> <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">getAllJax</span><span class="p">(),</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">all</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">all</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">SourceElement</span><span class="p">().</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; has-jax&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
</span><span class='line'>   <span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Including MathJax in head.html</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/head.html
</span></code></pre></td></tr></table></div></figure>


<p>head.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{\% include mathjax.html %\}
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Inside a French Chateau by Kraemer Gallery]]></title>
    <link href="http://k.arttechresearch.com/art/2015/10/11/inside-a-french-chateau-by-kraemer-gallery/"/>
    <updated>2015-10-11T22:46:04+08:00</updated>
    <id>http://k.arttechresearch.com/art/2015/10/11/inside-a-french-chateau-by-kraemer-gallery</id>
    <content type="html"><![CDATA[<p>NOTE: copied from the Brochure.</p>

<h2>1. Royal Chinese Room</h2>

<h3>1.1. A very exceptional and rare table in bamboo</h3>

<p>Circa 1780, with a Vernis Martin lacquer top ornate gilt-bronze.</p>

<p>Imported by Marchand Mercier Daguerre and attribute to artist Martin Carlin.</p>

<p>&ldquo;This piece comes from the Trianon&rdquo;</p>

<p>Comparable examples in:</p>

<ul>
<li>Her Majesty Queen Elizabeth II&rsquo;s Collection (England)</li>
<li>Royal Swedish collection (Sweden)</li>
<li>Similar Iaquer at the Louvre Museum in Paris (France)</li>
</ul>


<h3>1.2. A rare Louis XV Lacquer Chest of Drawers</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/f3/0b/8f/f30b8fbda113f73480efe39dd0b2a675.jpg" /></p>

<p>Circa 1745, stamped by B.V.R.B (Bernard II Van Risen Burgh, Master in 1733) in collaboration with Desforges (Master in 1739).</p>

<p>Using lacquers screen panels supplied by Marchand Mercier Darnault.</p>

<p>The scenes represent Chinese Culture and traditions.</p>

<h3>1.3. A rare transitional secretary in Camomile Lacquer and Vernis Martin</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/ae/b1/37/aeb137c0dfae49f72a0c7dd45b4b4188.jpg" /></p>

<p>Circa 1770, stamped by Francois Reizell (Master in 1764).</p>

<p>Provenance: a branch of the French Royal Family.</p>

<h3>1.4. A louis XIV pair of caches pots</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/c0/3d/8f/c03d8f23a4e3b1461e2ad1affc430c60.jpg" /></p>

<p>Circa 1700. Similar pieces with same dragon bronzes are at the Getty Museum in Los Angeles.</p>

<p>The pair has been exhibited at the ArtScience Museum in Singapore.</p>

<h3>1.5. A Louis XVI Biscuit clock</h3>

<p>Circa 1785. Featuring Orpheus and goats ornated with elaborate chased and giltbronze mounts by Remond. The dial and movement signed Gavelle l'aine a Paris.</p>

<h3>1.6. A regence corner cupboard</h3>

<p>Circa 1725. A rare Regence corner cupboard by Charles Cressent (Master in 1719).</p>

<p>Equivalences are in the Rothschild Collection.</p>

<h2>2. Royal French Salon</h2>

<h2>2.1. A portrait of King Louis XIV</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/e7/35/3c/e7353c947a630f779c1f401abe04eb5e.jpg" /></p>

<p>Circa 1700. The quality of the face expression, the hair, and the cravat are perfect. A similar piece is at the Bordeaux Museum of Decorative Arts and at the chateau of Courances (the Ganay family).</p>

<h2>2.2. A portrait of King Louis XV in Royal Savonnerie Tapestry</h2>

<p>Circa 1755, made at the Royal Manufacture of the Goblins.</p>

<p>The same piece is at the Louvre Museum in Paris.</p>

<h2>2.3. A royal Louis XV savonnerie carpet</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/8c/ac/7c/8cac7cb4d0456b63a8ba2c5f936fb30d.jpg" /></p>

<p>Circa 1755, made at the Royal Manufacture of the Goblins for one of the King&rsquo;s property.</p>

<p>Decorated with Sun King flowers, the French Royalty symbol.</p>

<p>Similar examples at Versailles Castle and in many International Museum.</p>

<h2>2.4. A regence black and gold writting desk</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/49/b4/39/49b439e23280d4068c24ddd4602a92c0.jpg" /></p>

<p>Circa 1730, stampmed F.L. for Francois Lieutaud.</p>

<p>A comparable desk made by the same artist for the Dauphin (the King&rsquo;s son) is displayed at Versailles Castle.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h2>2.5. Four Royal Louis XVI chairs from Versailles castle</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/f4/2b/e0/f42be07b61fefede0ac5ae6e95a14ff8.jpg" /></p>

<p>Circa 1780, stamped by J.B Sene (Master in 1769).</p>

<p>Marked many times with crowned W.</p>

<p>Provenance: Chateau de Versailles.</p>

<p>Probably ordered for a Royal family member.</p>

<h2>2.6. A beautiful Louis XV chest of drawers</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/fa/6d/4e/fa6d4e9f483268172fb59a396f2f489b.jpg" /></p>

<p>Circa 1745, stamped by G.Feilt (master in 1736), a beautiful flowered marquetry motifs ornate with chased and gilt-bronzes.</p>

<p>Similar examples in many International Museums.</p>

<h2>3. Royal Lifestyle Pavilions</h2>

<h3>3.1. Library Room</h3>

<h4>3.1.1. Dictionary book of translation &ldquo;Linguae Sinarum Mandarinicae Hieroglythicae Grammatica Duplex&rdquo;</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/d7/1a/46/d71a4673f148e25f080639515957963a.jpg" /></p>

<p>Exceptionally rare first comparative grammar between Chinese and Latin.</p>

<p>Published in Paris in 1742.</p>

<p>FOURMONT, Etienne. Linguae Sinarum Mandarinicae hieroglyphicae grammatica duplex, latine, &amp; curn characteribus Sinensium, Item Sinicorum Regiae Biliothecae librorum catalogus &hellip; Paris.</p>

<p>Made during 40 years with 80,000 Chinese characters realized by the French Royal printing. The necessary investment for this very important realisation was about 17,000 gold coins. Only 250 copies were printed.</p>

<p>Beautiful working copy, probably owned later during the XIXth century by Benjamin Brucyre, the first French author who attempted a translation of the Bible into Chinese (1863).</p>

<h4>3.1.2. A beautiful Louis XIV Boulle Marquetry bookcase</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/62/6b/34/626b34132ca2a46e74d860ff5da3ed1c.jpg" /></p>

<p>Circa 1680, designed influenced by Culture Minister Berain, the beginning of furniture to be considered as a Major Art.</p>

<p>Provenance: a private mansion in Paris.</p>

<h3>3.2. Dining Room</h3>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/85/df/72/85df727cfd4cb9db3315c17505dda0af.jpg" /></p>

<h4>3.2.1. A Louis XVI Bronze clock featuring bacchus</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/89/9d/00/899d009ffe025dd241fc0cd02638d5ad.jpg" /></p>

<p>Circa 1780, made by Osmond and movement signed by Lechopie a Paris.</p>

<p>Comparable example: at the Munich Residenz Museum in Germany.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h4>3.2.2. An extraordinary and rare Louis XV giltbronze 8 arms surtout de table</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/474x/0a/56/22/0a5622f0a8264c713155fc0e6d7a85b9.jpg" /></p>

<p>Circa 1740, probably made by Caffien.</p>

<p>Provenance: a member of the Royal family.</p>

<p>This piece has been exhibited at the ArtScience Museum in Singapore.</p>

<h3>3.3. Music and Entertainment Room</h3>

<h4>3.3.1. A Louis XVI gilt-wood console table</h4>

<p>Circa 1780, with a beautiful quality of carving, the medusa face is the inspiration for Versace Logo.</p>

<p>Comparable examples in:</p>

<ul>
<li>Made for the King at the Chateau de Fontainebleau</li>
<li>At the Louvre Museum in Paris</li>
<li>In a private collection</li>
</ul>


<h4>3.3.2. A Louis XV jewel box</h4>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/6a/42/52/6a4252756ec8f35d65a604b46db2acce.jpg" /></p>

<p>Circa 1745, stamped by B.V.R.B (for Bernard II Van Risen Burgh, Master in 1733) in Kingwood and Rosewood.</p>

<p>Ink inscriptions written by Marchand Mercier Poirier.</p>

<p>This piece has been exhibited at the Grand Palais in Paris and similar piece is at the Boston Museum of Fine Art in America.</p>

<h2>Others</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/84/cb/41/84cb41aba14d092e52171ecfa6ab37cb.jpg" /></p>

<p>A pair of neoclassical Louis XVI giltwood stands on display at the Liang Yi Museum (Photo courtesy of the Kraemer Gallery)</p>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/99/95/60/999560b50b6a35d1ab14dfcda8a96b92.jpg" /></p>

<p>An exceptional Louis XIV Boulle marquetry casket by André-Charles Boulle, circa 1700 (Photo courtesy of Kraemer Gallery)</p>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/69/d6/33/69d63319ecd558fd746d9bcffabf6182.jpg" /></p>

<p>A Louis XV-Louis XVI transitional fire screen in gilded wood with a Gobelin tapestry panel framed within a large Chinese standing screen in zitan wood on show at the Great Minds Think Alike exhibition (Photo courtesy of the Liang Yi Museum)</p>

<h2>Kraemer</h2>

<p><img src="https://s-media-cache-ak0.pinimg.com/736x/ae/8c/e9/ae8ce963c48bf3f96408febdb7fadfcc.jpg" /></p>

<p><a href="http://www.kraemer.fr/">Kraemer</a> is the oldest family owned gallery based in Paris, established in 1875, specializing in museum quality 18th century furniture and objets d'art. Since its beginning, the Kraemer Gallery includes among its clientele the greatest international museums, collectors and interior designers-decorators. Among the may salons of their mansion house at 43 rue Monceau in Paris, they present several rooms with a very contemporary decor where also displayed are Louis XIV, Louis XV and Louis XVI furniture and objets d'art.</p>

<p>Their prestigious collectors included through the times: the Rothschilds, the Camondos and Comte Boni de Castellanes, then Hery Ford Jr, Christian Dior, J.Paul Getty, the Agnelli family, Jackie Kennedy and Karl Lagerifeld.</p>

<p>The prestige of the Kraemer name continues to rest on the personal discretion of the family and their exacting professional standards of authenticity, beauty, rarity and charm. For more than a century, Kraemer &amp; Cie has been the source of significant example of French 18th century decorative arts that are now in the permanent collections of major museums in Qurope and the United States.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Openstack Devstack]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/10/03/installing-openstack-devstack/"/>
    <updated>2015-10-03T12:33:38+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/10/03/installing-openstack-devstack</id>
    <content type="html"><![CDATA[<h3>Prequisition</h3>

<p>Softwares:</p>

<p>&ndash; (VM) <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox 5.0</a><br/>
&ndash; (OS) <a href="http://www.ubuntu.com/download/server">Ubuntu Server 14.04.3</a><br/>
&ndash; (SW) <a href="https://github.com/openstack-dev/devstack">Openstack</a></p>

<p>Steps:</p>

<p>&ndash; Installing VirtualBox<br/>
&ndash; Installing Ubuntu 14.04.03<br/>
&ndash; Installing Openstack<br/>
&ndash; Testing</p>

<h3>1. Installing VirtualBox</h3>

<p>Go to <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>, download and install on the local machine.</p>

<h3>2. Installing Ubuntu</h3>

<p>Go to <a href="http://www.ubuntu.com/download/server">Ubuntu</a> page, download the ubuntu server 14.04.03 (NOTE: Preferring 14.04.03) iso image.</p>

<p>Once done, open VirtualBox, create a vm for Ubuntu server. The vm settings are:<br/>
&ndash; memory: 2GB<br/>
&ndash; storage: 100GB<br/>
&ndash; <strong>network: briaged adapter (IMPORTANT), promiscuous mode with ALLOW ALL</strong></p>

<p>Then, attach Ubuntu server iso file to the drive, double click the vm, the system will be jumped to the installation guide.</p>

<p>When installing Ubuntu, the installation mode should be:<br/>
&ndash; <strong>multi-server with MAAS (IMPORTANT)</strong></p>

<p>Once done, restart and config the system:</p>

<figure class='code'><figcaption><span>config system</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update <span class="o">&amp;&amp;</span> upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install git
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;username&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;user@example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. Installing Openstack</h3>

<p>Go to <a href="https://github.com/openstack-dev/devstack">Openstack</a>, download the repo and install:</p>

<figure class='code'><figcaption><span>installing openstack</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># create a project folder and download the repo</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>sudo mkdir openstack
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>openstack
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/openstack-dev/devstack.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>devstack
</span><span class='line'><span class="nv">$ </span>git checkout stable/juno
</span><span class='line'>
</span><span class='line'><span class="c"># config user</span>
</span><span class='line'><span class="nv">$ </span>sudo ./tools/create-stack-user.sh
</span><span class='line'><span class="nv">$ </span>sudo chown -R stack:stack /openstack
</span><span class='line'>
</span><span class='line'><span class="c"># install</span>
</span><span class='line'><span class="nv">$ </span>./stack.sh
</span></code></pre></td></tr></table></div></figure>


<p>Trouble Shooting</p>

<p><strong>(1)</strong> If something wrong, try <code>./unstack.sh</code> and then <code>./clean.sh</code>, restart and then <code>./stack.sh</code> again.</p>

<p><strong>(2)</strong> If re-run <code>./stack.sh</code> and the python packages flag some issue, try to delete <code>/opt/stack/xxx</code>, and re-run <code>./stack.sh</code>.</p>

<h3>4. Testing</h3>

<p>Open a browser, enter the dashboard with <code>http://ip_address</code>, login with <code>admin/password</code> (NOTE: password was set at previous).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Jenkins on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/05/01/installing-jenkins-on-ubuntu/"/>
    <updated>2015-05-01T11:46:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/05/01/installing-jenkins-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>Jenkins</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo sh -c <span class="s1">&#39;echo deb http://pkg.jenkins-ci.org/debian binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39;</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install jenkins
</span></code></pre></td></tr></table></div></figure>


<p>open the link: <a href="http://202.120.83.101:8080">http://202.120.83.101:8080</a></p>

<h2>Nginx</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo aptitude -y install nginx
</span><span class='line'>
</span><span class='line'><span class="c"># remove default setting</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /etc/nginx/sites-available
</span><span class='line'><span class="nv">$ </span>sudo cp default default.backup
</span><span class='line'><span class="nv">$ </span>sudo rm default ../sites-enabled/default
</span></code></pre></td></tr></table></div></figure>


<p>/etc.nginx.sites-available: add the configurations of jenkins</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano jenkins
</span><span class='line'>
</span><span class='line'>upstream app_server <span class="o">{</span>
</span><span class='line'>server 127.0.0.1:8080 <span class="nv">fail_timeout</span><span class="o">=</span>0<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>server <span class="o">{</span>
</span><span class='line'>listen 80<span class="p">;</span>
</span><span class='line'>listen <span class="o">[</span>::<span class="o">]</span>:80 default <span class="nv">ipv6only</span><span class="o">=</span>on<span class="p">;</span>
</span><span class='line'>server_name ci.yourcompany.com<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>location / <span class="o">{</span>
</span><span class='line'>    proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header Host <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_redirect off<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span>!-f <span class="nv">$request_filename</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  proxy_pass http://app_server<span class="p">;</span>
</span><span class='line'>  <span class="nb">break</span><span class="p">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>adding the link</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /etc/nginx/sites-available/jenkins /etc/nginx/sites-enabled/
</span></code></pre></td></tr></table></div></figure>


<p>start service</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>Configurating Jenkins</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-java7-installer
</span><span class='line'><span class="nv">$ </span>sudo update-java-alternatives -s java-7-oracle
</span><span class='line'><span class="nv">$ </span>sudo update-alternatives --config java
</span></code></pre></td></tr></table></div></figure>


<p>configurating java home</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano <span class="nv">$HOME</span>/.bashrc
</span></code></pre></td></tr></table></div></figure>


<p>adding the configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># set JAVA_HOME</span>
</span><span class='line'><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java-7-oracle/
</span><span class='line'><span class="nb">export </span>JAVA_HOME
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>
</span><span class='line'><span class="nb">export </span>PATH
</span></code></pre></td></tr></table></div></figure>


<p>source</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">source</span> <span class="nv">$HOME</span>/.bashrc
</span><span class='line'><span class="nb">echo</span> <span class="nv">$JAVA_HOME</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating jenkins</p>

<ul>
<li><p>Manage Jenkins -> Configure System -> JDK/Ant/Maven</p></li>
<li><p>Manage Jenkins -> Configure Global Security -> security/matrix/admin</p></li>
<li><p>restart jenkins, sign up with admin</p></li>
<li><p>Manage Jenkins -> Manage Plugins -> Git Plugin</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Cloudera Hadoop on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/05/01/installing-cloudera-hadoop-on-ubuntu/"/>
    <updated>2015-05-01T11:10:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/05/01/installing-cloudera-hadoop-on-ubuntu</id>
    <content type="html"><![CDATA[<p>NOTE: All hosts should be finished all the steps listed below.</p>

<h2>Preparation</h2>

<p>hosts</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>202.120.83.101 insight-master
</span><span class='line'>202.120.83.102 insight-slave1
</span><span class='line'>202.120.83.103 insight-slave2
</span><span class='line'>202.120.83.104 insight-slave3
</span><span class='line'>202.120.83.105 insight-slave4</span></code></pre></td></tr></table></div></figure>


<p>updating softwares</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get dist-upgrade
</span></code></pre></td></tr></table></div></figure>


<p>modifing the hosts</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/hosts
</span></code></pre></td></tr></table></div></figure>


<p>hosts</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>127.0.0.1       localhost
</span><span class='line'><span class="c">#127.0.1.1      insight</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Cloudera-Hadoop Cluster</span>
</span><span class='line'>202.120.83.101 insight-master
</span><span class='line'>202.120.83.102 insight-slave1
</span><span class='line'>202.120.83.103 insight-slave2
</span><span class='line'>202.120.83.104 insight-slave3
</span><span class='line'>202.120.83.105 insight-slave4
</span></code></pre></td></tr></table></div></figure>


<p>ssh</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install ssh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ssh-keygen -t rsa
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># copy the publick key</span>
</span><span class='line'><span class="nv">$ </span>cat /home/insight/.ssh/id_rsa.pub
</span><span class='line'><span class="nv">$ </span>sudo nano /home/insight/.ssh/authorized_keys
</span></code></pre></td></tr></table></div></figure>


<p>authorized_keys</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># 202.120.83.101</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+JcGP7MopXAdZUJR1AK7tCXHELACXh++6kxUf1FCAwdooJ8MlLiqMJTgCCSNMghiB0w442XB+lohQmFPDTLJDRaTZxbCvo82aD0sJ1slaxZDuu5/B3hv+pO7Nz4P1CHLw6JHsY+ml48GjX2FhI/iYDFg0RyEt3d91f+Bha9nubB3+uh9MGhAfpxsxMlc1J4/GTm6F1YfGV5aVfrztEM07bqVVaMS6tT0wrp5L57IzBhdcTOhd9asEmO/OpCQLytoIFS5kTv+M6bTU23ChMj7Df4BNEr2idwqUI/h3zx/jT25LR6qryWiwxZ2jho1yYUMM3jN6LqKSKXOarcrwgjOX insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.102</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHa6O+7kg+T6+G5UMhiPqG9PLcNu0LvO5VPIsuTMbWaer8w8ZRJE2R1KMlXmowMpiADFxeGWUEhruxyDp16JFv/axYc67dfvS1SSJiuNnAZ5PDQ7EIbPcOZqP7641XWY1kHrYbBr4gWnb/EectDQAzdb3GScWlEAu9/vamu7baHfm6C2X+0o3m3nkfB2i/Fd35TGL0xMJx3H/oOcX7Jm8MqCSgdJwIqBxilfqRrHC4VICYB2zDmzFNpgWEPlZZ0do1BKXOBddKMU7c0tgRCcuPLtMWJkIrEZIR7K9UGY7GniXA2Zq8GytjZj1215CyXaLQD9XhC5f0td3KxgmWCzxN insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.103</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDeICFND0O2JSt7lXo7r8cFiqhFpZ9Vbc9AG2yQau6xQPvbwPZd6xtCljUWMTAMhdKOFsJp6TbYPWQr25HYUxw+7VUziN1dyXrfchRB4uBQqvYmwcay2vBJlZRAfEK1Ahm6LumXi+kozmHm+7SjBhY/24IRxLf+G1g7ldNW3jLx+GNXtHffH9mw6Uc/ihV/AaFHThR1s4j28mLTBMwVxAHSXadwN863u/hd9rsES7vpxKRNK6U3TymPE5gIRPkXTO5xoxoGKX9E8ClKjl7/D1/sOJI0WZWhlslhSQDGLpMLU1uwK8RT5f4saqZyOv9kva7ad1gIYXXibmhzuct7sk67 insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.104</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCbDG89bL9yNik01Xo2fhf8QHh1MzWcvIRIfK1GyGOh5b8LvaE3iZtX2RKYI4CCzvJ6y3A8peTWUuRZSV0lO7cpyOIoFIFRHScSuLulv8dHj0gYyjsH66R6lbnFYk72Ih/XzRUSH8Fo4Ar+eXWVZfBzWZWTL3ftRR7fmc5mZP+4IH7LdgZI2Wgb/GwksCx09vlMQmiQzHIYRs3iD6fsfL5prvcPKHYmwqslZcrBuy9nW2s0un3yRTeWwxYgRT15CHKXeOq5N+H0WxORCkY7FvLttPQbaAhbldvnir3NaIwCnds7vOvry5dm79LJzIC+2br7WQ2spUGCRtrzw8IcO4N9 insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.105</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAjeDr/HcUsjs7xq7MlpFnGbr/hDr9SaQhet4Fp8UQnQKwuFVtUqP48Dwr0sVYY8xueqhylI2q9wL+rovIk2T1DKeD+z0BX9P1C3CrcHNMpirEotdQd2OGGwsIEMTeMugox1oER3LWLjGBcxZ71KOx2INSxBq/6EoDSOhMIbVH0ZC9fPdG/mEScf3VmvzBT1UwyewZVoVPqSr6NmOJ1RVxKA9c0P7hHtBTcUhwFNLgitM8ca6Y4eL6DsTuIl3zQA+dSnpa8IudCY1oARnphQInHIa9wCrnMCAEgRqPHfyRwg8hcOrOerWEq2Q95m15dPoIrmfy8T63p0zrhKXN34lJ insight@insight
</span></code></pre></td></tr></table></div></figure>


<p>validation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh 202.120.83.xxx
</span></code></pre></td></tr></table></div></figure>


<h2>MySQL</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server libmysql-java
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/mysql/conf.d/mysql_cloudera_manager.cnf
</span></code></pre></td></tr></table></div></figure>


<p>mysql_cloudera_manager.cnf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>mysqld<span class="o">]</span>
</span><span class='line'>transaction-isolation<span class="o">=</span>READ-COMMITTED
</span><span class='line'><span class="c"># Disabling symbolic-links is recommended to prevent assorted security risks;</span>
</span><span class='line'><span class="c"># to do so, uncomment this line:</span>
</span><span class='line'><span class="c"># symbolic-links=0</span>
</span><span class='line'>
</span><span class='line'><span class="nv">key_buffer</span>              <span class="o">=</span> 16M
</span><span class='line'><span class="nv">key_buffer_size</span>         <span class="o">=</span> 32M
</span><span class='line'><span class="nv">max_allowed_packet</span>      <span class="o">=</span> 16M
</span><span class='line'><span class="nv">thread_stack</span>            <span class="o">=</span> 256K
</span><span class='line'><span class="nv">thread_cache_size</span>       <span class="o">=</span> 64
</span><span class='line'><span class="nv">query_cache_limit</span>       <span class="o">=</span> 8M
</span><span class='line'><span class="nv">query_cache_size</span>        <span class="o">=</span> 64M
</span><span class='line'><span class="nv">query_cache_type</span>        <span class="o">=</span> 1
</span><span class='line'><span class="c"># Important: see Configuring the Databases and Setting max_connections</span>
</span><span class='line'><span class="nv">max_connections</span>         <span class="o">=</span> 550
</span><span class='line'>
</span><span class='line'><span class="c"># log-bin should be on a disk with enough free space</span>
</span><span class='line'>log-bin<span class="o">=</span>/var/log/mysql/mysql_binary_log
</span><span class='line'>
</span><span class='line'><span class="c"># For MySQL version 5.1.8 or later. Comment out binlog_format for older versions.</span>
</span><span class='line'><span class="nv">binlog_format</span>           <span class="o">=</span> mixed
</span><span class='line'>
</span><span class='line'><span class="nv">read_buffer_size</span> <span class="o">=</span> 2M
</span><span class='line'><span class="nv">read_rnd_buffer_size</span> <span class="o">=</span> 16M
</span><span class='line'><span class="nv">sort_buffer_size</span> <span class="o">=</span> 8M
</span><span class='line'><span class="nv">join_buffer_size</span> <span class="o">=</span> 8M
</span><span class='line'>
</span><span class='line'><span class="c"># InnoDB settings</span>
</span><span class='line'><span class="nv">innodb_file_per_table</span> <span class="o">=</span> 1
</span><span class='line'><span class="nv">innodb_flush_log_at_trx_commit</span>  <span class="o">=</span> 2
</span><span class='line'><span class="nv">innodb_log_buffer_size</span>          <span class="o">=</span> 64M
</span><span class='line'><span class="nv">innodb_buffer_pool_size</span>         <span class="o">=</span> 4G
</span><span class='line'><span class="nv">innodb_thread_concurrency</span>       <span class="o">=</span> 8
</span><span class='line'><span class="nv">innodb_flush_method</span>             <span class="o">=</span> O_DIRECT
</span><span class='line'><span class="nv">innodb_log_file_size</span> <span class="o">=</span> 512M
</span><span class='line'>
</span><span class='line'><span class="o">[</span>mysqld_safe<span class="o">]</span>
</span><span class='line'>log-error<span class="o">=</span>/var/log/mysqld.log
</span><span class='line'>pid-file<span class="o">=</span>/var/run/mysqld/mysqld.pid
</span></code></pre></td></tr></table></div></figure>


<p>configurating my.cnf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo nano /etc/mysql/my.cnf
</span><span class='line'>
</span><span class='line'><span class="c"># comment the bind-address</span>
</span><span class='line'><span class="c"># bind-address   = 127.0.0.1</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating innodb</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo su
</span><span class='line'><span class="nv">$ </span>mv /var/lib/mysql/ib_logfile* /var/tmp/
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>initialization</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service mysql restart
</span><span class='line'><span class="nv">$ </span>mysql -uroot -p
</span><span class='line'>
</span><span class='line'>mysql&gt; create database amon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on amon.* TO <span class="s1">&#39;amon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;amon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on amon.* TO <span class="s1">&#39;amon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;amon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database smon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on smon.* TO <span class="s1">&#39;smon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;smon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on smon.* TO <span class="s1">&#39;smon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;smon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database rman DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on rman.* TO <span class="s1">&#39;rman&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;rman_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on rman.* TO <span class="s1">&#39;rman&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;rman_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database hmon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hmon.* TO <span class="s1">&#39;hmon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;hmon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hmon.* TO <span class="s1">&#39;hmon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;hmon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database hive DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hive.* TO <span class="s1">&#39;hive&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;hive_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hive.* TO <span class="s1">&#39;hive&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;hive_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>mysql&gt; create database nav DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on nav.* TO <span class="s1">&#39;nav&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;nav_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on nav.* TO <span class="s1">&#39;nav&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;nav_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>mysql&gt; create database navms DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on navms.* TO <span class="s1">&#39;navms&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;navms_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on navms.* TO <span class="s1">&#39;navms&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;navms_password&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Manager</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-software-properties
</span><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list.d/cloudera.list
</span></code></pre></td></tr></table></div></figure>


<p>cloudera.list</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span></code></pre></td></tr></table></div></figure>


<p>adding key</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -s http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh/archive.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<p>installing manager by manual</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get -q -y --force-yes install oracle-j2sdk1.7 cloudera-manager-server-db cloudera-manager-server cloudera-manager-daemons cloudera-manager-agent
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># config cloudera-manager-server db</span>
</span><span class='line'><span class="nv">$ </span>sudo /usr/share/cmf/schema/scm_prepare_database.sh mysql  -uroot -p --scm-host localhost scm scm scm_password
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># start service</span>
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db initdb
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db start
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server start
</span></code></pre></td></tr></table></div></figure>


<p>installing manager automatically</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ./cloudera-mangaer-installer.bin
</span></code></pre></td></tr></table></div></figure>


<p>steps:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>apt-get -q -y --force-yes install oracle-j2sdk1.7 cloudera-manager-server-db cloudera-manager-server cloudera-manager-daemons
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db initdb
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db start
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server start
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Agent</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-software-properties
</span><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-j2sdk1.7
</span></code></pre></td></tr></table></div></figure>


<p>adding sources</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list.d/cloudera.list
</span></code></pre></td></tr></table></div></figure>


<p>cloudera.list</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span></code></pre></td></tr></table></div></figure>


<p>adding keys</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -s http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh/archive.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<p>installing agent</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install cloudera-manager-agent cloudera-manager-daemons
</span></code></pre></td></tr></table></div></figure>


<p>configurating agent</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/cloudera-scm-agent/config.ini
</span></code></pre></td></tr></table></div></figure>


<p>config.ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">server_host</span><span class="o">=</span>insight-master  <span class="c"># master host name</span>
</span></code></pre></td></tr></table></div></figure>


<p>start services</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Hadoop</h2>

<p>restart agents on slaves</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<p>restart master</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-server restart
</span><span class='line'><span class="nv">$ </span> sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<p>open the link on browser:</p>

<ul>
<li><a href="http://202.120.83.101:7180">http://202.120.83.101:7180</a></li>
<li>username/password: admin/admin</li>
</ul>


<p>steps:</p>

<ul>
<li><p>step1. login</p></li>
<li><p>step2. welcome</p></li>
<li><p>step3. select hosts</p></li>
<li><p>step4. express-wizard</p></li>
<li><p>step5. install parcel</p></li>
<li><p>step6. host inspector</p></li>
</ul>


<p>updating swappiness</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vagrant ssh insight-master/insight-slave1/insight-slave2/insight-slave3/insight-slave4 <span class="c"># for all hosts</span>
</span><span class='line'>sudo nano /proc/sys/vm/swappiness
</span><span class='line'>
</span><span class='line'><span class="c"># modification</span>
</span><span class='line'><span class="m">60</span> -&gt; 0
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>step7. select services</p></li>
<li><p>step8. assign roles</p></li>
<li><p>step9. config db</p></li>
<li><p>step10. review steps</p></li>
<li><p>step11. start services</p></li>
<li><p>step12. done</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Configurating Nginx for Django Projects on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/05/01/configurating-nginx-for-django-projects-on-ubuntu/"/>
    <updated>2015-05-01T10:54:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/05/01/configurating-nginx-for-django-projects-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>1. Nginx</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span></code></pre></td></tr></table></div></figure>


<p>configurating users</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo groupadd --system edx
</span><span class='line'><span class="nv">$ </span>sudo useradd --system --gid edx --home /edx/analytics/apps/edx-analytics-data-api analyticsapi
</span><span class='line'><span class="nv">$ </span>sudo useradd --system --gid edx --home /edx/analytics/apps/edx-analytics-dashboard analyticsdashboard
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown -R insight:insight /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'><span class="nv">$ </span>sudo chmod -R g+w /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown -R insight:insight /edx/analytics/apps/edx-analytics-dashboard
</span><span class='line'><span class="nv">$ </span>sudo chmod -R g+w /edx/analytics/apps/edx-analytics-dashboard
</span></code></pre></td></tr></table></div></figure>


<h2>2. Supervisor</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install supervisor
</span></code></pre></td></tr></table></div></figure>


<p>configurating supervisor</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics
</span><span class='line'><span class="nv">$ </span>mkdir -p var/logs
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>var/logs
</span><span class='line'><span class="nv">$ </span>touch gunicorn_supervisor.log
</span></code></pre></td></tr></table></div></figure>


<h2>3. Django Project</h2>

<p>django settings</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api/app/analyticsdataserver/settings
</span><span class='line'><span class="nv">$ </span>nano production.py
</span></code></pre></td></tr></table></div></figure>


<p>gunicorn</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>api_env/bin/activate
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>app
</span><span class='line'><span class="nv">$ </span>pip install gunicorn
</span><span class='line'><span class="nv">$ </span>pip install setproctitle
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>app
</span><span class='line'><span class="nv">$ </span>gunicorn analyticsdataserver.wsgi:application --bind 0.0.0.0:9001
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api/api_env/bin
</span><span class='line'><span class="nv">$ </span>sudo nano gunicorn_start
</span><span class='line'><span class="nv">$ </span>sudo chown insight:insight gunicorn_start
</span><span class='line'><span class="nv">$ </span>sudo chmod u+x gunicorn_start
</span></code></pre></td></tr></table></div></figure>


<p>gunicorn_start</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;analyticsapi&quot;</span> <span class="c"># Name of the application</span>
</span><span class='line'><span class="nv">DJANGODIR</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/ <span class="c"># Django project directory</span>
</span><span class='line'><span class="nv">SOCKFILE</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/var/run/gunicorn.sock <span class="c"># we will communicte using this unix socket</span>
</span><span class='line'><span class="nv">USER</span><span class="o">=</span>insight <span class="c"># the user to run as</span>
</span><span class='line'><span class="nv">GROUP</span><span class="o">=</span>edx <span class="c"># the group to run as</span>
</span><span class='line'><span class="nv">NUM_WORKERS</span><span class="o">=</span><span class="m">3</span> <span class="c"># how many worker processes should Gunicorn spawn</span>
</span><span class='line'><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>analyticsdataserver.settings <span class="c"># which settings file should Django use</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Starting $NAME&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Activate the virtual environment</span>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$DJANGODIR</span>
</span><span class='line'><span class="nb">source </span>api_env/bin/activate
</span><span class='line'><span class="c">#export DJANGO_SETTINGS_MODULE=$DJANGO_SETTINGS_MODULE</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/api_env/bin/python
</span><span class='line'>
</span><span class='line'><span class="c"># Create the run directory if it doesn&#39;t exist</span>
</span><span class='line'><span class="nv">RUNDIR</span><span class="o">=</span><span class="k">$(</span>dirname <span class="nv">$SOCKFILE</span><span class="k">)</span>
</span><span class='line'><span class="nb">test</span> -d <span class="nv">$RUNDIR</span> <span class="o">||</span> mkdir -p <span class="nv">$RUNDIR</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Start your Django Unicorn</span>
</span><span class='line'><span class="c"># Programs meant to be run under supervisor should not daemonize themselves (do not use --daemon)</span>
</span><span class='line'><span class="nb">cd </span>app
</span><span class='line'>gunicorn <span class="se">\</span>
</span><span class='line'>--name <span class="nv">$NAME</span> <span class="se">\</span>
</span><span class='line'>--workers <span class="nv">$NUM_WORKERS</span>  <span class="se">\</span>
</span><span class='line'>analyticsdataserver.wsgi:application --bind 0.0.0.0:9001
</span></code></pre></td></tr></table></div></figure>


<p>supervisor</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/supervisor/conf.d/analyticsapi.conf
</span></code></pre></td></tr></table></div></figure>


<p>analyticsapi.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>program:analyticsapi<span class="o">]</span>
</span><span class='line'><span class="nb">command</span> <span class="o">=</span> /edx/analytics/apps/edx-analytics-data-api/api_env/bin/gunicorn_start                    <span class="p">;</span> Command to start app
</span><span class='line'><span class="nv">user</span> <span class="o">=</span> insight                                                                                     <span class="p">;</span> User to run as
</span><span class='line'><span class="nv">stdout_logfile</span> <span class="o">=</span> /edx/analytics/apps/edx-analytics-data-api/var/logs/gunicorn_supervisor.log       <span class="p">;</span> Where to write log messages
</span><span class='line'><span class="nv">redirect_stderr</span> <span class="o">=</span> <span class="nb">true</span>                                                                             <span class="p">;</span> Save stderr in the same log
</span></code></pre></td></tr></table></div></figure>


<p>run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo supervisorctl reread
</span><span class='line'><span class="nv">$ </span>sudo supervisorctl update
</span><span class='line'><span class="nv">$ </span>sudo supervisorctl start analyticsapi
</span></code></pre></td></tr></table></div></figure>


<h2>4. Configurating Nginx</h2>

<p>modification</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/nginx/sites-available/analyticsapi
</span></code></pre></td></tr></table></div></figure>


<p>analyticsapi</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>server <span class="o">{</span>
</span><span class='line'>listen   8088<span class="p">;</span>
</span><span class='line'>server_name 202.120.83.105<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>client_max_body_size 4G<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>access_log /edx/analytics/apps/edx-analytics-data-api/var/logs/nginx-access.log<span class="p">;</span>
</span><span class='line'>error_log /edx/analytics/apps/edx-analytics-data-api/var/logs/nginx-error.log<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>location ~ ^/static/ <span class="o">{</span>
</span><span class='line'>    autoindex on<span class="p">;</span>
</span><span class='line'>    expires 1y<span class="p">;</span>
</span><span class='line'>    root /edx/analytics/apps/edx-analytics-data-api/app/<span class="p">;</span>
</span><span class='line'>    <span class="c">#alias  /edx/analytics/apps/edx-analytics-data-api/app/assets;</span>
</span><span class='line'>    <span class="c">#alias http://202.120.83.105/static/rest_framework_swagger;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location ~ ^/media/ <span class="o">{</span>
</span><span class='line'>    root /edx/analytics/apps/edx-analytics-data-api/app/<span class="p">;</span>
</span><span class='line'>    expires 24h<span class="p">;</span>
</span><span class='line'>    access_log   off<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location / <span class="o">{</span>
</span><span class='line'>    try_files <span class="nv">$uri</span> @proxy<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location @proxy <span class="o">{</span>
</span><span class='line'>    proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header Host <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_redirect off<span class="p">;</span>
</span><span class='line'>    proxy_pass http://0.0.0.0:9001<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /etc/nginx/sites-available/analyticsapi /etc/nginx/sites-enabled/analyticsapi
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h3>5. Testing</h3>

<p>open the link: <a href="http://202.120.83.105:8088">http://202.120.83.105:8088</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting Up MySQL on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/05/01/setting-up-mysql-on-ubuntu/"/>
    <updated>2015-05-01T10:50:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/05/01/setting-up-mysql-on-ubuntu</id>
    <content type="html"><![CDATA[<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server libmysql-java
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/mysql/my.cnf
</span><span class='line'>
</span><span class='line'><span class="c"># comment bind-address</span>
</span><span class='line'><span class="c"># bind-address = 127.0.0.1</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating database</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service mysql restart
</span><span class='line'><span class="nv">$ </span>mysql -uroot -p
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>create database analytics DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;202.120.83.105&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;202.120.83.101&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>GRANT ALL ON *.* TO insight@<span class="s1">&#39;localhost&#39;</span>  IDENTIFIED BY <span class="s1">&#39;insight&#39;</span> WITH GRANT OPTION<span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Emacs on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/04/26/installing-emacs-on-ubuntu/"/>
    <updated>2015-04-26T23:48:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/04/26/installing-emacs-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>Prequistions</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install ipython
</span><span class='line'><span class="nv">$ </span>sudo apt-get install texinfo
</span><span class='line'><span class="nv">$ </span>sudo apt-get install automake autoconf
</span><span class='line'><span class="nv">$ </span>sudo apt-get install texlive
</span><span class='line'><span class="nv">$ </span>sudo apt-get install cvs
</span><span class='line'><span class="nv">$ </span>sudo apt-get install mercurial
</span></code></pre></td></tr></table></div></figure>


<h2>1. Installation</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:cassou/emacs
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># stable version</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install emacs24 emacs24-el emacs24-common-non-dfsg
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># latest version</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install emacs-snapshot-el emacs-snapshot-gtk emacs-snapshot
</span></code></pre></td></tr></table></div></figure>


<h2>2. Configuration</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone https://github.com/jhamrick/emacs.git
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>emacs
</span><span class='line'><span class="nv">$ </span>sudo /path/to/emacs/bootstrap.sh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># open the emacs, it will automatically install the plugins    </span>
</span><span class='line'><span class="nv">$ </span>emacs
</span></code></pre></td></tr></table></div></figure>


<h2>3. Trouble Shooting</h2>

<h3>3.1. error: makeinfo: command not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>error: makeinfo: <span class="nb">command </span>not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install texinfo
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. error: autogen.sh: autoconf: not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: autogen.sh: autoconf: not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install automake autoconf
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. error: pdftex: command not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: pdftex: <span class="nb">command </span>not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install texlive
</span></code></pre></td></tr></table></div></figure>


<h3>3.4. error: Error (el-get): while installing matlab-mode: The command named ‘cvs’ can not be found with `executable-find’</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: Error <span class="o">(</span>el-get<span class="o">)</span>: <span class="k">while</span> installing matlab-mode: The <span class="nb">command </span>named ‘cvs’ can not be found with <span class="sb">`</span>executable-find’
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install cvs
</span></code></pre></td></tr></table></div></figure>


<h3>3.5. error: Error (el-get): while installing pydoc-info: The command named ‘hg’ can not be found with `executable-find’</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: Error <span class="o">(</span>el-get<span class="o">)</span>: <span class="k">while</span> installing pydoc-info: The <span class="nb">command </span>named ‘hg’ can not be found with <span class="sb">`</span>executable-find’
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mercurial
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Automatically Running Shell Scripts on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/04/25/automatically-running-shell-scripts-on-ubuntu/"/>
    <updated>2015-04-25T14:17:14+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/04/25/automatically-running-shell-scripts-on-ubuntu</id>
    <content type="html"><![CDATA[<p>configurating script</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/folder
</span><span class='line'><span class="nv">$ </span>nano file_name
</span><span class='line'><span class="c"># save and exit</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown user:group file_name
</span><span class='line'><span class="nv">$ </span>sudo chmod u+x file_name
</span></code></pre></td></tr></table></div></figure>


<p>editting shell script</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>...
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>configurating env path</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>nano ~/.bashrc
</span><span class='line'>
</span><span class='line'><span class="c"># custom bin</span>
</span><span class='line'><span class="c"># export PATH=$PATH:/path/to/bin</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[It Could Not Access Network on Ubuntu]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/04/25/it-could-not-access-network-on-ubuntu/"/>
    <updated>2015-04-25T14:08:20+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/04/25/it-could-not-access-network-on-ubuntu</id>
    <content type="html"><![CDATA[<h2>1. Interfaces</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/network/interfaces
</span></code></pre></td></tr></table></div></figure>


<p>/etc/network/interfaces</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>auto lo
</span><span class='line'>iface lo inet loopback
</span><span class='line'>
</span><span class='line'>auto eth1
</span><span class='line'>iface eth1 inet static
</span><span class='line'>address 192.168.2.250
</span><span class='line'>netmask 255.255.255.0
</span><span class='line'>gateway 192.168.2.1
</span></code></pre></td></tr></table></div></figure>


<h2>2. DNS</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/resolv.conf
</span></code></pre></td></tr></table></div></figure>


<p>/etc/resolv.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Google</span>
</span><span class='line'>nameserver 8.8.8.8
</span><span class='line'>nameserver 8.8.4.4
</span><span class='line'>
</span><span class='line'><span class="c"># or</span>
</span><span class='line'><span class="c"># OpenDNS</span>
</span><span class='line'>nameserver 208.67.222.222
</span><span class='line'>nameserver 208.67.220.220
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /etc/init.d/networking restart
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing PyCharm on Ubuntu 12.04]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/04/25/installing-pycharm-on-ubuntu-12.04/"/>
    <updated>2015-04-25T10:08:14+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/04/25/installing-pycharm-on-ubuntu-12.04</id>
    <content type="html"><![CDATA[<h3>Installing Java</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-java7-installer
</span></code></pre></td></tr></table></div></figure>


<h3>Installing PyCharm</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p ~/opt/packages/pycharm
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ~/opt/packages/pycharm
</span><span class='line'><span class="nv">$ </span>wget http://download.jetbrains.com/python/pycharm-community-4.0.4.tar.gz
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>gzip -dc pycharm-community-4.0.4.tar.gz <span class="p">|</span> tar xf -
</span><span class='line'><span class="nv">$ </span>ln -s ~/opt/packages/pycharm/pycharm-community-4.0.4 ~/opt/pycharm
</span><span class='line'>
</span><span class='line'><span class="c"># Start PyCharm</span>
</span><span class='line'><span class="nv">$ </span>~/opt/pycharm/bin/pycharm.sh
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup a Git Server]]></title>
    <link href="http://k.arttechresearch.com/tech/2015/02/11/setup-a-git-server/"/>
    <updated>2015-02-11T02:00:14+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2015/02/11/setup-a-git-server</id>
    <content type="html"><![CDATA[<h2>Prequistions</h2>

<ul>
<li>Ubuntu 12.04</li>
<li>Git Server/Client</li>
<li>Gitolite</li>
<li>Gitweb</li>
<li>Apache</li>
</ul>


<h2>1. Git Server</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install git-core
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo adduser --system --shell /bin/bash --group --disabled-password --home /home/git git
</span><span class='line'><span class="nv">$ </span>sudo passwd git
</span></code></pre></td></tr></table></div></figure>


<h2>2. Gitolite</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install gitolite
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>cp ~/.ssh/id_rsa.pub /tmp/<span class="k">$(</span>whoami<span class="k">)</span>.pub
</span><span class='line'><span class="nv">$ </span>sudo su - git
</span><span class='line'><span class="nv">$ </span>gl-setup /tmp/*.pub
</span><span class='line'>
</span><span class='line'><span class="c"># config the path of gitolite</span>
</span><span class='line'><span class="c"># save and exit</span>
</span><span class='line'><span class="c"># path: /home/git/project.list</span>
</span><span class='line'><span class="c"># path: /home/gt/repositories</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;you@example.com&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;Your Name&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mkdir gitadmin
</span><span class='line'><span class="nv">$ </span>sudo chown -R user:group /gitadmin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /gitadmin
</span><span class='line'><span class="nv">$ </span>git clone git@ip:gitolite-admin.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gitolite-admin
</span><span class='line'>
</span><span class='line'><span class="c"># config key and gitolite.conf</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;comment&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h2>3. Gitweb</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install gitweb
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /var/www/
</span><span class='line'><span class="nv">$ </span>sudo mkdir gitweb
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gitweb
</span><span class='line'><span class="nv">$ </span>sudo ln -s /usr/share/gitweb/* .  <span class="c"># note: . is a must</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/gitweb.conf
</span><span class='line'><span class="nv">$ </span>sudo chmod <span class="m">777</span> -R /home/git/repositories
</span></code></pre></td></tr></table></div></figure>


<p>gitweb.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># path to git projects (&lt;project&gt;.git)</span>
</span><span class='line'><span class="c">#$projectroot = &quot;/var/cache/git&quot;;</span>
</span><span class='line'><span class="nv">$projectroot</span> <span class="o">=</span> <span class="s2">&quot;/home/git/repositories&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># directory to use for temp files</span>
</span><span class='line'><span class="nv">$git_temp</span> <span class="o">=</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># target of the home link on top of all pages</span>
</span><span class='line'><span class="c">#$home_link = $my_uri || &quot;/&quot;;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># html text to include at home page</span>
</span><span class='line'><span class="c">#$home_text = &quot;indextext.html&quot;;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># file with project list; by default, simply scan the projectroot dir.</span>
</span><span class='line'><span class="c">#$projects_list = $projectroot;</span>
</span><span class='line'><span class="nv">$projects_list</span> <span class="o">=</span> <span class="s2">&quot;/home/git/project.list&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># stylesheet to use</span>
</span><span class='line'>@stylesheets <span class="o">=</span> <span class="o">(</span><span class="s2">&quot;http://202.120.83.104:8090/static/gitweb.css&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># javascript code for gitweb</span>
</span><span class='line'><span class="nv">$javascript</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/gitweb.js&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># logo to use</span>
</span><span class='line'><span class="nv">$logo</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/git-logo.png&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># the &#39;favicon&#39;</span>
</span><span class='line'><span class="nv">$favicon</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/git-favicon.png&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># git-diff-tree(1) options to use for generated patches</span>
</span><span class='line'><span class="c">#@diff_opts = (&quot;-M&quot;);</span>
</span><span class='line'>@diff_opts <span class="o">=</span> <span class="o">()</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Apache</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install apache2
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># note1: web path - /var/www</span>
</span><span class='line'><span class="c"># note2: cgi path - /usr/lib/cgi-bin/</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /usr/lib/cgi-bin/               <span class="c"># check if gitweb.cgi is here</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/sites-available/default
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/ports.conf
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/apache2.conf
</span><span class='line'><span class="nv">$ </span>sudo /etc/init.d/apache2 restart
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/sites0available/default</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;VirtualHost *:8090&gt;
</span><span class='line'>        <span class="c">#ServerAdmin webmaster@localhost</span>
</span><span class='line'>        ServerAdmin insight@202.120.83.104
</span><span class='line'>
</span><span class='line'>        DocumentRoot /var/www/gitweb
</span><span class='line'>        &lt;Directory /&gt;
</span><span class='line'>                Options FollowSymLinks
</span><span class='line'>                AllowOverride None
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>        &lt;Directory /var/www/&gt;
</span><span class='line'>                Options Indexes FollowSymLinks MultiViews
</span><span class='line'>                AllowOverride None
</span><span class='line'>                Order allow,deny
</span><span class='line'>                allow from all
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>        SetEnv GIT_PROJECT_ROOT /home/git/repositories
</span><span class='line'>        SetEnv GIT_HTTP_EXPORT_ALL
</span><span class='line'>        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
</span><span class='line'>        &lt;Directory <span class="s2">&quot;/usr/lib/cgi-bin&quot;</span>&gt;
</span><span class='line'>                AllowOverride None
</span><span class='line'>                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
</span><span class='line'>                Order allow,deny
</span><span class='line'>                Allow from all
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>        ErrorLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/error.log
</span><span class='line'>
</span><span class='line'>        <span class="c"># Possible values include: debug, info, notice, warn, error, crit,</span>
</span><span class='line'>        <span class="c"># alert, emerg.</span>
</span><span class='line'>        LogLevel warn
</span><span class='line'>
</span><span class='line'>        CustomLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/access.log combined
</span><span class='line'>
</span><span class='line'>    Alias /doc/ <span class="s2">&quot;/usr/share/doc/&quot;</span>
</span><span class='line'>    &lt;Directory <span class="s2">&quot;/usr/share/doc/&quot;</span>&gt;
</span><span class='line'>        Options Indexes MultiViews FollowSymLinks
</span><span class='line'>        AllowOverride None
</span><span class='line'>        Order deny,allow
</span><span class='line'>        Deny from all
</span><span class='line'>        Allow from 127.0.0.0/255.0.0.0 ::1/128
</span><span class='line'>    &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>&lt;/VirtualHost&gt;
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/ports.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>NameVirtualHost *:8090
</span><span class='line'><span class="c">#Listen 80</span>
</span><span class='line'>Listen 202.120.83.104:8090
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/apache2.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Gitweb host</span>
</span><span class='line'>ServerName 202.120.83.104:8090
</span></code></pre></td></tr></table></div></figure>


<h2>Testing</h2>

<p>link: <a href="http://ip_address/gitweb">http://ip_address/gitweb</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Python Django]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/16/python-django/"/>
    <updated>2014-09-16T19:32:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/16/python-django</id>
    <content type="html"><![CDATA[<p>Project Construct</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysite/
</span><span class='line'>    manage.py
</span><span class='line'>    mysite/
</span><span class='line'>        __init__.py
</span><span class='line'>        settings.py
</span><span class='line'>        urls.py
</span><span class='line'>        wsgi.py</span></code></pre></td></tr></table></div></figure>


<p>django app</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>polls/
</span><span class='line'>    __init__.py
</span><span class='line'>    admin.py
</span><span class='line'>    models.py
</span><span class='line'>    tests.py
</span><span class='line'>    views.py
</span><span class='line'>    urls.py
</span><span class='line'>
</span><span class='line'>    migrations/
</span><span class='line'>        __init__.py
</span><span class='line'>    templates/
</span><span class='line'>        appname/
</span><span class='line'>            xxx.html
</span><span class='line'>    static/
</span><span class='line'>        appname/
</span><span class='line'>            css/
</span><span class='line'>            js/
</span><span class='line'>            images/</span></code></pre></td></tr></table></div></figure>


<h2>1. MVC</h2>

<h3>1.1. Model</h3>

<h3>1.2. View</h3>

<h3>1.3. Control</h3>

<h2>2. Admin</h2>

<h2>3. Commands</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>django-admin.py startproject mysite
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>python manage.py migrate
</span><span class='line'><span class="nv">$ </span>python manage.py runserver
</span><span class='line'><span class="nv">$ </span>python manage.py runserver 8080
</span><span class='line'><span class="nv">$ </span>python manage.py runserver 0.0.0.0:8000
</span><span class='line'><span class="nv">$ </span>python manage.py startapp polls
</span><span class='line'><span class="nv">$ </span>python manage.py makemigrations polls
</span><span class='line'><span class="nv">$ </span>python manage.py sqlmigrate polls 0001
</span><span class='line'><span class="nv">$ </span>python manage.py migrate
</span><span class='line'><span class="nv">$ </span>python manage.py shell
</span><span class='line'><span class="nv">$ </span>python manage.py createsuperuser
</span><span class='line'><span class="nv">$ </span>python manage.py validate
</span><span class='line'><span class="nv">$ </span>python manage.py syncdb
</span><span class='line'><span class="nv">$ </span>python manage.py collectstatic
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Parsing the Catalogs From Lowes]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/09/parsing-the-catalogs-from-lowes/"/>
    <updated>2014-09-09T20:59:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/09/parsing-the-catalogs-from-lowes</id>
    <content type="html"><![CDATA[<h2>1. Introduction</h2>

<p>I needed to get the catalogs from <a href="http://www.lowes.com">Lowe&rsquo;s</a> which was
including the department and catagories.</p>

<ul>
<li>category #</li>
<li>categories</li>
<li>item #</li>
<li>model #</li>
<li>product #</li>
<li>product name</li>
</ul>


<h2>2. Steps</h2>

<ul>
<li>step1. analyze the site struture</li>
<li>step2. parse all urls of department/categories those containing product info</li>
<li>step3. parse the product info from the urls one by one</li>
<li>step4. clean the data with standard formats</li>
<li>step5. load the data into database</li>
</ul>


<h2>3. Tools</h2>

<ul>
<li>language: Python</li>
<li>libraries: re, beautifulsoup, mechanize</li>
</ul>


<h2>4. Notes</h2>

<ul>
<li>If crawling data is denied by a site, simulating a browser to click the urls.</li>
<li>Parsing the data from a same container (div).</li>
<li>URL/href contains a lot of information, especially the data of product ID,
dept ID, category ID etc.</li>
<li>Record all the exceptions, and then re-check.</li>
<li>It will cost more time if writing the data frequently, but it can record the
process well if writing the data by a small batch.</li>
</ul>


<h2>5. Source Codes</h2>

<ul>
<li>step2. parse all urls of department/categories those containing product info</li>
<li>step3. parse the product info from the urls one by one</li>
<li>step4. clean the data with standard formats</li>
</ul>


<h3>5.1. parse all urls of department/categories those containing product info</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getHTML</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#time.sleep(1.00)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;User-Agent&#39;</span> <span class="p">:</span> <span class="s">&quot;Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.16 Safari/534.24&quot;</span><span class="p">}</span>
</span><span class='line'>    <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">headers</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractAttribute</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractURL</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;categories sep&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="c">#print results</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># links</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;&lt;a href=&quot;(.*) title=.*&gt;&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="n">extractAttribute</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#print links</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">links</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">getHTML</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">extractURL</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
</span><span class='line'>        <span class="n">thisLink</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">thisURL</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="n">thisLink</span>
</span><span class='line'>        <span class="n">newURLs</span> <span class="o">=</span> <span class="n">extract</span><span class="p">(</span><span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">newURLs</span><span class="p">:</span>
</span><span class='line'>            <span class="n">dfs</span><span class="p">(</span><span class="n">newURLs</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">outCSV</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">thisLink</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">outCSV</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">baseurl</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com&quot;</span>
</span><span class='line'>    <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com/Hidden-Catalogs/_/N-1z138z4/pl#!&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>    <span class="n">fullurls</span> <span class="o">=</span> <span class="s">&quot;lowes-catalogs-fullurls.csv&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">fullurls</span><span class="p">):</span>
</span><span class='line'>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">cateName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="n">extract</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dfs</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="n">fullurls</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#with open(outPath+fullurls, &#39;wb&#39;) as f:</span>
</span><span class='line'>    <span class="c">#    for line in data:</span>
</span><span class='line'>    <span class="c">#        f.write(&quot;%s\n&quot; % line)</span>
</span><span class='line'>    <span class="c">#f.close()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5.2. parse the product info from the urls one by one</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">mechanize</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cookielib</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">openBrowser</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser </span>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
</span><span class='line'>    <span class="c"># Cookie Jar </span>
</span><span class='line'>    <span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser options </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_equiv</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#br.set_handle_gzip(True) </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_redirect</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_referer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Follows refresh 0 but not hangs on refresh &gt; 0 </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s">&#39;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">br</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Open url</span>
</span><span class='line'>    <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadURLs</span><span class="p">(</span><span class="n">dataFile</span><span class="p">):</span>
</span><span class='line'>    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dataFile</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span><span class='line'>            <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">urls</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getPages</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;totalPages&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">pages</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">pages</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">pages</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
</span><span class='line'>    <span class="n">products</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&#39;h3&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;productTitle&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="c">#print results</span>
</span><span class='line'>    <span class="n">pattern1</span> <span class="o">=</span> <span class="s">r&quot;&lt;a href=.*&gt;([\d\w\u4e00-\u9fa5\s].*)&lt;/a&gt;&quot;</span>
</span><span class='line'>    <span class="n">results1</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern1</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print products</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pattern2</span> <span class="o">=</span> <span class="s">r&#39;&lt;a href=&quot;(.*)&quot; name=.*&gt;&#39;</span>
</span><span class='line'>    <span class="n">results2</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern2</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print links</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">products</span><span class="p">,</span> <span class="n">links</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">baseurl</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">openBrowser</span><span class="p">()</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">):</span>
</span><span class='line'>        <span class="n">fileName</span> <span class="o">=</span> <span class="s">&quot;lowes-catalogs-fullurls-</span><span class="si">%s</span><span class="s">.csv&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>        <span class="n">urls</span> <span class="o">=</span> <span class="n">loadURLs</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">outCSV</span> <span class="o">=</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;products-&quot;</span><span class="o">+</span><span class="n">fileName</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outCSV</span><span class="p">):</span>
</span><span class='line'>            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">outCSV</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
</span><span class='line'>            <span class="n">thisURL</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="n">url</span>
</span><span class='line'>            <span class="n">soup</span> <span class="o">=</span> <span class="n">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>            <span class="n">pages</span> <span class="o">=</span> <span class="n">getPages</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</span><span class='line'>            <span class="c">#print soup</span>
</span><span class='line'>            <span class="c">#print pages</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="n">pages</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-no-products.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nf</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">nf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">thisURL</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">elif</span> <span class="n">pages</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                <span class="n">content</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;productResults&#39;</span><span class="p">})</span>
</span><span class='line'>                <span class="n">products</span><span class="p">,</span> <span class="n">links</span> <span class="o">=</span> <span class="n">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>                    <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span> <span class="s">&#39;prodURL&#39;</span><span class="p">:</span> <span class="n">links</span><span class="p">})</span>
</span><span class='line'>                    <span class="n">data</span><span class="p">[</span><span class="s">&#39;deptURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thisURL</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outCSV</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-one-page.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">tf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pages</span><span class="p">):</span>
</span><span class='line'>                    <span class="n">pageURL</span> <span class="o">=</span> <span class="n">thisURL</span> <span class="o">+</span> <span class="s">&quot;?&amp;rpp=32&amp;page=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">thisSoup</span> <span class="o">=</span> <span class="n">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">pageURL</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">content</span> <span class="o">=</span> <span class="n">thisSoup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;productResults&#39;</span><span class="p">})</span>
</span><span class='line'>                    <span class="n">products</span><span class="p">,</span> <span class="n">links</span> <span class="o">=</span> <span class="n">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>                    <span class="c">#print pageURL</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span> <span class="s">&#39;prodURL&#39;</span><span class="p">:</span> <span class="n">links</span><span class="p">})</span>
</span><span class='line'>                        <span class="n">data</span><span class="p">[</span><span class="s">&#39;deptURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pageURL</span>
</span><span class='line'>
</span><span class='line'>                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outCSV</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>                             <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-more-pages.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pf</span><span class="p">:</span>
</span><span class='line'>                            <span class="n">pf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pageURL</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5.3. clean the data with standard formats</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadContent</span><span class="p">(</span><span class="n">dataFile</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dataFile</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">content</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractAttrs</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="c">#ids = []</span>
</span><span class='line'>    <span class="n">itemIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">cateIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">modelIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">prodIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">depts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c"># names</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;.*,(.*),http://www.lowes.com/.*&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># ids </span>
</span><span class='line'>    <span class="c">#pattern = r&quot;/pd_(.*)_.*__\??&quot;</span>
</span><span class='line'>    <span class="c">#results = filterRE(content, pattern)</span>
</span><span class='line'>    <span class="c">#for result in results:</span>
</span><span class='line'>    <span class="c">#    ids.append(result)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># itemIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_(\d+)-?&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">itemIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># cateIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_\d+-(\d+)-?&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">cateIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># modelIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_\d+-\d+-(.*)_.*__\??&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">modelIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># prodIDs</span>
</span><span class='line'>    <span class="c">#pattern = r&quot;productId=(\d+)&amp;amp;&quot;</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;productId=(\d+)&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">prodIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># depts</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;http://www.lowes.com/(.*)/_/N-.*&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">depts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cates</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">dept</span> <span class="ow">in</span> <span class="n">depts</span><span class="p">:</span>
</span><span class='line'>        <span class="n">cates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dept</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print len(names)</span>
</span><span class='line'>    <span class="c">#print len(itemIDs)</span>
</span><span class='line'>    <span class="c">#print len(cateIDs)</span>
</span><span class='line'>    <span class="c">#print len(modelIDs)</span>
</span><span class='line'>    <span class="c">#print len(prodIDs)</span>
</span><span class='line'>    <span class="c">#print len(cates)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">attrs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;prodName&#39;</span><span class="p">:</span> <span class="n">names</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;itemID&#39;</span><span class="p">:</span> <span class="n">itemIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;cateID&#39;</span><span class="p">:</span> <span class="n">cateIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;modelID&#39;</span><span class="p">:</span> <span class="n">modelIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;prodID&#39;</span><span class="p">:</span> <span class="n">prodIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;cates&#39;</span><span class="p">:</span> <span class="n">cates</span><span class="p">})</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">attrs</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/data/lowes/products/&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#for i in range(21):</span>
</span><span class='line'>    <span class="c">#    dataFile = &quot;products-lowes-catalogs-fullurls-%s.csv&quot; % str(i)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#    content = loadContent(dataPath+dataFile)</span>
</span><span class='line'>    <span class="c">#    attrs = extractAttrs(content)</span>
</span><span class='line'>    <span class="c">#    attrs.to_csv(outPath+&quot;clean-&quot;+dataFile, header=True, index=False)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#dataFile = &quot;products-error-one-page.csv&quot;</span>
</span><span class='line'>    <span class="c">#dataFile = &quot;products-error-more-pages.csv&quot;</span>
</span><span class='line'>    <span class="n">dataFile</span> <span class="o">=</span> <span class="s">&quot;products-error-no-products.csv&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">content</span> <span class="o">=</span> <span class="n">loadContent</span><span class="p">(</span><span class="n">dataPath</span><span class="o">+</span><span class="n">dataFile</span><span class="p">)</span>
</span><span class='line'>    <span class="n">attrs</span> <span class="o">=</span> <span class="n">extractAttrs</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>    <span class="n">attrs</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;clean-&quot;</span><span class="o">+</span><span class="n">dataFile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mechanize]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/08/mechanize/"/>
    <updated>2014-09-08T21:15:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/08/mechanize</id>
    <content type="html"><![CDATA[<p>Mechanize is to simulate a browser.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">mechanize</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cookielib</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">openBrowser</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser </span>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
</span><span class='line'>    <span class="c"># Cookie Jar </span>
</span><span class='line'>    <span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser options </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_equiv</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#br.set_handle_gzip(True) </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_redirect</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_referer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Follows refresh 0 but not hangs on refresh &gt; 0 </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s">&#39;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">br</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Open url</span>
</span><span class='line'>    <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Morse Codes]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/07/morse-code/"/>
    <updated>2014-09-07T22:53:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/07/morse-code</id>
    <content type="html"><![CDATA[<p>Encoding and decoding Morse.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -*- coding:utf-8 -*-</span>
</span><span class='line'><span class="n">__author__</span>  <span class="o">=</span> <span class="s">&#39;KellyChan&#39;</span>
</span><span class='line'><span class="n">__date__</span>    <span class="o">=</span> <span class="s">&#39;2014-09-07&#39;</span>
</span><span class='line'><span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">encode</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Morse Table</span>
</span><span class='line'>    <span class="n">CODE</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="c"># 26 letters</span>
</span><span class='line'>            <span class="s">&#39;A&#39;</span><span class="p">:</span> <span class="s">&#39;.-&#39;</span><span class="p">,</span>     <span class="s">&#39;B&#39;</span><span class="p">:</span> <span class="s">&#39;-...&#39;</span><span class="p">,</span>   <span class="s">&#39;C&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;D&#39;</span><span class="p">:</span> <span class="s">&#39;-..&#39;</span><span class="p">,</span>    <span class="s">&#39;E&#39;</span><span class="p">:</span> <span class="s">&#39;.&#39;</span><span class="p">,</span>      <span class="s">&#39;F&#39;</span><span class="p">:</span> <span class="s">&#39;..-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;G&#39;</span><span class="p">:</span> <span class="s">&#39;--.&#39;</span><span class="p">,</span>    <span class="s">&#39;H&#39;</span><span class="p">:</span> <span class="s">&#39;....&#39;</span><span class="p">,</span>   <span class="s">&#39;I&#39;</span><span class="p">:</span> <span class="s">&#39;..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;J&#39;</span><span class="p">:</span> <span class="s">&#39;.---&#39;</span><span class="p">,</span>   <span class="s">&#39;K&#39;</span><span class="p">:</span> <span class="s">&#39;-.-&#39;</span><span class="p">,</span>    <span class="s">&#39;L&#39;</span><span class="p">:</span> <span class="s">&#39;.-..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;M&#39;</span><span class="p">:</span> <span class="s">&#39;--&#39;</span><span class="p">,</span>     <span class="s">&#39;N&#39;</span><span class="p">:</span> <span class="s">&#39;-.&#39;</span><span class="p">,</span>     <span class="s">&#39;O&#39;</span><span class="p">:</span> <span class="s">&#39;---&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;P&#39;</span><span class="p">:</span> <span class="s">&#39;.--.&#39;</span><span class="p">,</span>   <span class="s">&#39;Q&#39;</span><span class="p">:</span> <span class="s">&#39;--.-&#39;</span><span class="p">,</span>   <span class="s">&#39;R&#39;</span><span class="p">:</span> <span class="s">&#39;.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;S&#39;</span><span class="p">:</span> <span class="s">&#39;...&#39;</span><span class="p">,</span>    <span class="s">&#39;T&#39;</span><span class="p">:</span> <span class="s">&#39;-&#39;</span><span class="p">,</span>      <span class="s">&#39;U&#39;</span><span class="p">:</span> <span class="s">&#39;..-&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;V&#39;</span><span class="p">:</span> <span class="s">&#39;...-&#39;</span><span class="p">,</span>   <span class="s">&#39;W&#39;</span><span class="p">:</span> <span class="s">&#39;.--&#39;</span><span class="p">,</span>    <span class="s">&#39;X&#39;</span><span class="p">:</span> <span class="s">&#39;-..-&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;Y&#39;</span><span class="p">:</span> <span class="s">&#39;-.--&#39;</span><span class="p">,</span>   <span class="s">&#39;Z&#39;</span><span class="p">:</span> <span class="s">&#39;--..&#39;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># 10 digits</span>
</span><span class='line'>            <span class="s">&#39;0&#39;</span><span class="p">:</span> <span class="s">&#39;-----&#39;</span><span class="p">,</span>  <span class="s">&#39;1&#39;</span><span class="p">:</span> <span class="s">&#39;.----&#39;</span><span class="p">,</span>  <span class="s">&#39;2&#39;</span><span class="p">:</span> <span class="s">&#39;..---&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;3&#39;</span><span class="p">:</span> <span class="s">&#39;...--&#39;</span><span class="p">,</span>  <span class="s">&#39;4&#39;</span><span class="p">:</span> <span class="s">&#39;....-&#39;</span><span class="p">,</span>  <span class="s">&#39;5&#39;</span><span class="p">:</span> <span class="s">&#39;.....&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;6&#39;</span><span class="p">:</span> <span class="s">&#39;-....&#39;</span><span class="p">,</span>  <span class="s">&#39;7&#39;</span><span class="p">:</span> <span class="s">&#39;--...&#39;</span><span class="p">,</span>  <span class="s">&#39;8&#39;</span><span class="p">:</span> <span class="s">&#39;---..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;9&#39;</span><span class="p">:</span> <span class="s">&#39;----.&#39;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># 16 punctuations</span>
</span><span class='line'>            <span class="s">&#39;,&#39;</span><span class="p">:</span> <span class="s">&#39;--..--&#39;</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">:</span> <span class="s">&#39;.-.-.-&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">:</span> <span class="s">&#39;---...&#39;</span><span class="p">,</span> <span class="s">&#39;;&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;?&#39;</span><span class="p">:</span> <span class="s">&#39;..--..&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">:</span> <span class="s">&#39;-...-&#39;</span><span class="p">,</span>  <span class="s">&quot;&#39;&quot;</span><span class="p">:</span> <span class="s">&#39;.----.&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">:</span> <span class="s">&#39;-..-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;!&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.--&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="s">&#39;-....-&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">:</span> <span class="s">&#39;..--.-&#39;</span><span class="p">,</span> <span class="s">&#39;(&#39;</span><span class="p">:</span> <span class="s">&#39;-.--.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;)&#39;</span><span class="p">:</span> <span class="s">&#39;-.--.-&#39;</span><span class="p">,</span> <span class="s">&#39;$&#39;</span><span class="p">:</span> <span class="s">&#39;...-..-&#39;</span><span class="p">,</span><span class="s">&#39;&amp;&#39;</span><span class="p">:</span> <span class="s">&#39;. . . .&#39;</span><span class="p">,</span><span class="s">&#39;@&#39;</span><span class="p">:</span> <span class="s">&#39;.--.-.&#39;</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># you can define more</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">CODE</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="n">CODE</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">CODE</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">convertString2Morse</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
</span><span class='line'>    <span class="n">morse</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your message was: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">msg</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s">&#39; &#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">morse</span> <span class="o">+=</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># upper(): convert all lowercases to uppercases</span>
</span><span class='line'>            <span class="n">CODE</span> <span class="o">=</span> <span class="n">encode</span><span class="p">()</span>
</span><span class='line'>            <span class="n">morse</span> <span class="o">+=</span> <span class="n">CODE</span><span class="p">[</span><span class="n">char</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Morse Code is: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">morse</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">morse</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">convertMorse2String</span><span class="p">(</span><span class="n">morse</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">codes</span> <span class="o">=</span> <span class="n">morse</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Morse Code was: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">codes</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">string</span> <span class="o">+=</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">UNCODE</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encode</span><span class="p">())</span>
</span><span class='line'>            <span class="n">string</span> <span class="o">+=</span> <span class="n">UNCODE</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Message is: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">string</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">string</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#msg = raw_input(&#39;Please input your message: &#39;)</span>
</span><span class='line'>    <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Happy Mid-Autumn Day!&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">morse</span> <span class="o">=</span> <span class="n">convertString2Morse</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>    <span class="n">string</span> <span class="o">=</span> <span class="n">convertMorse2String</span><span class="p">(</span><span class="n">morse</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Generating Passwords]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/07/generating-passwords/"/>
    <updated>2014-09-07T22:01:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/07/generating-passwords</id>
    <content type="html"><![CDATA[<p>Generating all 4-digit passwords combining digits 0-9, uppercases A-Z and
lowercases a-z.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">chars</span><span class="o">=</span><span class="p">[</span>
</span><span class='line'>            <span class="s">&#39;0&#39;</span><span class="p">,</span><span class="s">&#39;1&#39;</span><span class="p">,</span><span class="s">&#39;2&#39;</span><span class="p">,</span><span class="s">&#39;3&#39;</span><span class="p">,</span><span class="s">&#39;4&#39;</span><span class="p">,</span><span class="s">&#39;5&#39;</span><span class="p">,</span><span class="s">&#39;6&#39;</span><span class="p">,</span><span class="s">&#39;7&#39;</span><span class="p">,</span><span class="s">&#39;8&#39;</span><span class="p">,</span><span class="s">&#39;9&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">,</span><span class="s">&#39;e&#39;</span><span class="p">,</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="s">&#39;h&#39;</span><span class="p">,</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;j&#39;</span><span class="p">,</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="s">&#39;l&#39;</span><span class="p">,</span><span class="s">&#39;m&#39;</span><span class="p">,</span><span class="s">&#39;n&#39;</span><span class="p">,</span><span class="s">&#39;o&#39;</span><span class="p">,</span><span class="s">&#39;p&#39;</span><span class="p">,</span><span class="s">&#39;q&#39;</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">,</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="s">&#39;t&#39;</span><span class="p">,</span><span class="s">&#39;u&#39;</span><span class="p">,</span><span class="s">&#39;v&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="s">&#39;z&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">,</span><span class="s">&#39;E&#39;</span><span class="p">,</span><span class="s">&#39;F&#39;</span><span class="p">,</span><span class="s">&#39;G&#39;</span><span class="p">,</span><span class="s">&#39;H&#39;</span><span class="p">,</span><span class="s">&#39;I&#39;</span><span class="p">,</span><span class="s">&#39;J&#39;</span><span class="p">,</span><span class="s">&#39;K&#39;</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">,</span><span class="s">&#39;M&#39;</span><span class="p">,</span><span class="s">&#39;N&#39;</span><span class="p">,</span><span class="s">&#39;O&#39;</span><span class="p">,</span><span class="s">&#39;P&#39;</span><span class="p">,</span><span class="s">&#39;Q&#39;</span><span class="p">,</span><span class="s">&#39;R&#39;</span><span class="p">,</span><span class="s">&#39;S&#39;</span><span class="p">,</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="s">&#39;U&#39;</span><span class="p">,</span><span class="s">&#39;V&#39;</span><span class="p">,</span><span class="s">&#39;W&#39;</span><span class="p">,</span><span class="s">&#39;X&#39;</span><span class="p">,</span><span class="s">&#39;Y&#39;</span><span class="p">,</span><span class="s">&#39;Z&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">base</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span>  <span class="c"># 62</span>
</span><span class='line'>    <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span><span class="o">**</span><span class="mi">4</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="s">&#39;outputs&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outputs</span><span class="o">+</span><span class="s">&quot;/dict.txt&quot;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">i</span>
</span><span class='line'>            <span class="n">char0</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char1</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char2</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char3</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="c">#print i, char3, char2, char1, char0</span>
</span><span class='line'>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">char3</span><span class="o">+</span><span class="n">char2</span><span class="o">+</span><span class="n">char1</span><span class="o">+</span><span class="n">char0</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#with open(outputs+&quot;/dict.txt&quot;, &#39;rb&#39;) as f:</span>
</span><span class='line'>    <span class="c">#    for line in f.readlines()[-100:]:</span>
</span><span class='line'>    <span class="c">#        print line</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Python UnicodeEncodeError]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/03/python-unicodeencodeerror/"/>
    <updated>2014-09-03T20:22:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/03/python-unicodeencodeerror</id>
    <content type="html"><![CDATA[<p>Error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="ne">UnicodeEncodeError</span><span class="p">:</span> <span class="s">&#39;ascii&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="s">&#39;t encode characters in position 32-34: ordinal not in range(128) </span>
</span></code></pre></td></tr></table></div></figure>


<p>Solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># add these lines at the top</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Multiplication Tables]]></title>
    <link href="http://k.arttechresearch.com/tech/2014/09/02/multiplication-tables/"/>
    <updated>2014-09-02T20:10:00+08:00</updated>
    <id>http://k.arttechresearch.com/tech/2014/09/02/multiplication-tables</id>
    <content type="html"><![CDATA[<h2>Chinese 9-9 Multiplication Table</h2>

<p>Print a multiplication table</p>

<pre><code>1*1=1   
1*2=2   2*2=4   
1*3=3   2*3=6   3*3=9   
1*4=4   2*4=8   3*4=12  4*4=16  
1*5=5   2*5=10  3*5=15  4*5=20  5*5=25  
1*6=6   2*6=12  3*6=18  4*6=24  5*6=30  6*6=36  
1*7=7   2*7=14  3*7=21  4*7=28  5*7=35  6*7=42  7*7=49  
1*8=8   2*8=16  3*8=24  4*8=32  5*8=40  6*8=48  7*8=56  8*8=64  
1*9=9   2*9=18  3*9=27  4*9=36  5*9=45  6*9=54  7*9=63  8*9=72  9*9=81  
</code></pre>

<p>solution 1:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">print99</span><span class="p">():</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
</span><span class='line'>        <span class="n">row</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">base</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="n">row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">row</span>
</span></code></pre></td></tr></table></div></figure>


<p>solution 2:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">=</span><span class="si">%-2s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summation</h2>

<p>Print a summation.</p>

<pre><code>1 = 1
1 + 2 = 3
1 + 2 + 3 = 6
1 + 2 + 3 + 4 = 10
1 + 2 + 3 + 4 + 5 = 15
1 + 2 + 3 + 4 + 5 + 6 = 21
1 + 2 + 3 + 4 + 5 + 6 + 7 = 28
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 = 36
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 = 55
</code></pre>

<p>solution:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">calSum</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
</span><span class='line'>  <span class="n">digits</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>  <span class="n">digitStrings</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>  <span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39; + &#39;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">num</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>      <span class="n">digits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>      <span class="n">digitStrings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span><span class='line'>  <span class="k">print</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">digitStrings</span><span class="p">),</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="nb">sum</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
</span><span class='line'>  <span class="n">calSum</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Just for Fun]]></title>
    <link href="http://k.arttechresearch.com/life/2014/09/02/just-for-fun/"/>
    <updated>2014-09-02T11:35:22+08:00</updated>
    <id>http://k.arttechresearch.com/life/2014/09/02/just-for-fun</id>
    <content type="html"><![CDATA[<p>夜不能寐，遂起来看动漫。现在已经习惯用法英中切换，用于学习各种不同的表达，脑子里浮现出这样的句子：</p>

<p><strong>我在用法语英文字幕看关于中国饮食的日本动漫。</strong></p>

<p>玩味之处，是法、英、中、日都集合在句子里，我又试着把它转换成英语：</p>

<p><strong>I am watching a Japanese comic in French that with the subtitle in English,
which is about the Chinese cuisine.</strong></p>

<p>玩味之处，还是把Japanese, French, English, Chinese融合到句子中。</p>

<p>顺着思路，写了一道题：</p>

<p>汉语等级考试之听力题，现在请听题：<br/>
甲：我在用法语英文字幕看关于中国饮食的日本动漫。<br/>
问题：请问我在看哪国的动画片？<br/>
（1）法国<br/>
（2）英国<br/>
（3）中国<br/>
（4）日本</p>

<p>胡闹一下。</p>
]]></content>
  </entry>
  
</feed>
