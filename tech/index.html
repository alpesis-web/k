
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Kelly Chan</title>
  <meta name="author" content="Kelly Chan">

  
  <meta name="description" content="1. Adding MathJax 1
$ vim octopress/_includes/mathjax.html mathjax.html 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
&lt &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://k.arttechresearch.com/tech/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Kelly Chan" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  <!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  

<script type="text/javascript">

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53625944-7', 'auto');
  ga('send', 'pageview');

</script>



</head>

<body   >
  <header role="banner"><ul class="soc">

  
    <li><a class="soc-github" href="https://github.com/KellyChan"></a></li>
  

  
    <li><a class="soc-twitter" href="https://twitter.com/kwailamchan"></a></li>
  

  
    <li><a class="soc-pinterest" href="https://www.pinterest.com/wailamchan/"></a></li>
  

  
    <li><a class="soc-email1 soc-icon-last" href="mailto:support@arttechresearch.com"></a></li>
  
</ul>

<hgroup>
  <h1><a href="/">Kelly Chan</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="k.arttechresearch.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/tech">Tech</a></li>
  <li><a href="/art">Art</a></li>
  <li><a href="/life">Life</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/devkits">Devkits</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">

  
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/13/using-mathjax-with-octopress/">Using MathJax With Octopress</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-13T10:26:29+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:26 am</span></time>
        
           | <a href="/tech/2015/10/13/using-mathjax-with-octopress/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/13/using-mathjax-with-octopress/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Adding MathJax</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/mathjax.html
</span></code></pre></td></tr></table></div></figure>


<p>mathjax.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- MathJax --&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span><span class="s1">&#39;$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;\\(&quot;</span><span class="p">,</span><span class="s2">&quot;\\)&quot;</span><span class="p">]</span> <span class="p">],</span>
</span><span class='line'>      <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">skipTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Queue</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">all</span> <span class="o">=</span> <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">getAllJax</span><span class="p">(),</span> <span class="nx">i</span><span class="p">;</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">all</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">all</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">SourceElement</span><span class="p">().</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">className</span> <span class="o">+=</span> <span class="s1">&#39; has-jax&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
</span><span class='line'>   <span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Including MathJax in head.html</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim octopress/_includes/head.html
</span></code></pre></td></tr></table></div></figure>


<p>head.html</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{\% include mathjax.html %\}
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/06/adding-tag-generator-in-octopress/">Adding Tag Generator in Octopress</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T05:42:01+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:42 am</span></time>
        
           | <a href="/tech/2015/10/06/adding-tag-generator-in-octopress/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/06/adding-tag-generator-in-octopress/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Feature: add the links for the tags.</p>

<p>Steps:</p>

<ol>
<li>update the ruby plugin: <code>octopress/plugins/tag_generator.rb</code></li>
<li>update the html in source: <code>octopress/source/_layouts/tag_index.html</code></li>
<li>update the <code>tag_dir</code> in _config.yml: <code>octopress/_config.yml</code></li>
</ol>


<h2>1. Plugin: tag_generator.rb</h2>

<figure class='code'><figcaption><span>tag_generator.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># encoding: utf-8</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Jekyll tag page generator.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Based on Jekyll tag category generator:</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     http://recursive-design.com/projects/jekyll-plugins/</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     Version: 0.1.4 (201101061053)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     Copyright (c) 2010 Dave Perrett, http://recursive-design.com/</span>
</span><span class='line'><span class="c1">#     Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># A generator that creates tag pages for jekyll sites.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Included filters :</span>
</span><span class='line'><span class="c1"># - tag_links:      Outputs the list of tags as comma-separated &lt;a&gt; links.</span>
</span><span class='line'><span class="c1"># - date_to_html_string: Outputs the post.date as formatted html, with hooks for CSS styling.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Available _config.yml settings :</span>
</span><span class='line'><span class="c1"># - tag_dir:          The subfolder to build tag pages in (default is &#39;tags&#39;).</span>
</span><span class='line'><span class="c1"># - tag_title_prefix: The string used before the tag name in the page title (default is</span>
</span><span class='line'><span class="c1">#                          &#39;Tag: &#39;).</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;stringex&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The TagIndex class creates a single tag page for the specified tag.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagIndex</span> <span class="o">&lt;</span> <span class="no">Page</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Initializes a new TagIndex.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +base+         is the String path to the &lt;source&gt;.</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path between &lt;source&gt; and the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
</span><span class='line'>      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
</span><span class='line'>      <span class="vi">@dir</span>  <span class="o">=</span> <span class="n">tag_dir</span>
</span><span class='line'>      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Read the YAML data from the layout page.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_layouts&#39;</span><span class="p">),</span> <span class="s1">&#39;tag_index.html&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span>    <span class="o">=</span> <span class="n">tag</span>
</span><span class='line'>      <span class="c1"># Set the title for this page.</span>
</span><span class='line'>      <span class="n">title_prefix</span>             <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span>       <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">title_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="c1"># Set the meta-description for this page.</span>
</span><span class='line'>      <span class="n">meta_description_prefix</span>  <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_meta_description_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;description&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">meta_description_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The TagFeed class creates an Atom feed for the specified tag.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagFeed</span> <span class="o">&lt;</span> <span class="no">Page</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Initializes a new TagFeed.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +base+         is the String path to the &lt;source&gt;.</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path between &lt;source&gt; and the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@site</span> <span class="o">=</span> <span class="n">site</span>
</span><span class='line'>      <span class="vi">@base</span> <span class="o">=</span> <span class="n">base</span>
</span><span class='line'>      <span class="vi">@dir</span>  <span class="o">=</span> <span class="n">tag_dir</span>
</span><span class='line'>      <span class="vi">@name</span> <span class="o">=</span> <span class="s1">&#39;atom.xml&#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="vi">@name</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Read the YAML data from the layout page.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">read_yaml</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;_includes/custom&#39;</span><span class="p">),</span> <span class="s1">&#39;tag_feed.xml&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;tag&#39;</span><span class="o">]</span>    <span class="o">=</span> <span class="n">tag</span>
</span><span class='line'>      <span class="c1"># Set the title for this page.</span>
</span><span class='line'>      <span class="n">title_prefix</span>             <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_title_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span>       <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">title_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="c1"># Set the meta-description for this page.</span>
</span><span class='line'>      <span class="n">meta_description_prefix</span>  <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_meta_description_prefix&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;Tag: &#39;</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;description&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">meta_description_prefix</span><span class="si">}#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Set the correct feed URL.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">data</span><span class="o">[</span><span class="s1">&#39;feed_url&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tag_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># The Site class is a built-in Jekyll class with access to global site config information.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">Site</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Creates an instance of TagIndex for each tag page, renders it, and</span>
</span><span class='line'>    <span class="c1"># writes the output to a file.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tag_dir+ is the String path to the tag folder.</span>
</span><span class='line'>    <span class="c1">#  +tag+     is the tag currently being processed.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">write_tag_index</span><span class="p">(</span><span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span> <span class="o">=</span> <span class="no">TagIndex</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site_payload</span><span class="p">)</span>
</span><span class='line'>      <span class="n">index</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
</span><span class='line'>      <span class="c1"># Record the fact that this page has been added, otherwise Site::cleanup will remove it.</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">index</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Create an Atom-feed for each index.</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_feeds&#39;</span><span class="o">]</span>
</span><span class='line'>        <span class="n">feed</span> <span class="o">=</span> <span class="no">TagFeed</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">tag_dir</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="n">feed</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="p">,</span> <span class="n">site_payload</span><span class="p">)</span>
</span><span class='line'>        <span class="n">feed</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">dest</span><span class="p">)</span>
</span><span class='line'>        <span class="c1"># Record the fact that this page has been added, otherwise Site::cleanup will remove it.</span>
</span><span class='line'>        <span class="nb">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;&lt;</span> <span class="n">feed</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Loops through the list of tag pages and processes each one.</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">write_tag_indexes</span>
</span><span class='line'>      <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">key?</span> <span class="s1">&#39;tag_index&#39;</span>
</span><span class='line'>        <span class="n">dir</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;tags&#39;</span>
</span><span class='line'>        <span class="nb">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
</span><span class='line'>          <span class="nb">self</span><span class="o">.</span><span class="n">write_tag_index</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">to_url</span><span class="p">),</span> <span class="n">tag</span><span class="p">)</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1"># Throw an exception if the layout couldn&#39;t be found.</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="k">raise</span> <span class="o">&lt;&lt;-</span><span class="no">ERR</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sh">===============================================</span>
</span><span class='line'><span class="sh"> Error for tag_generator.rb plugin</span>
</span><span class='line'><span class="sh">-----------------------------------------------</span>
</span><span class='line'><span class="sh"> No &#39;tag_index.hmtl&#39; in source/_layouts/</span>
</span><span class='line'><span class="sh"> Perhaps you haven&#39;t installed a theme yet.</span>
</span><span class='line'><span class="sh">===============================================</span>
</span><span class='line'>
</span><span class='line'><span class="no">ERR</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Jekyll hook - the generate method is called by jekyll, and generates all of the tag pages.</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">GenerateTags</span> <span class="o">&lt;</span> <span class="no">Generator</span>
</span><span class='line'>    <span class="n">safe</span> <span class="kp">true</span>
</span><span class='line'>    <span class="n">priority</span> <span class="ss">:low</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
</span><span class='line'>      <span class="n">site</span><span class="o">.</span><span class="n">write_tag_indexes</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Adds some extra filters used during the tag creation process.</span>
</span><span class='line'>  <span class="k">module</span> <span class="nn">Filters</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs a list of tags as comma-separated &lt;a&gt; links. This is used</span>
</span><span class='line'>    <span class="c1"># to output the tag list for each post on a tag page.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tags+ is the list of tags to format.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">tag_links</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span>
</span><span class='line'>      <span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">sort!</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="n">tag_link</span> <span class="n">c</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">case</span> <span class="n">tags</span><span class="o">.</span><span class="n">length</span>
</span><span class='line'>      <span class="k">when</span> <span class="mi">0</span>
</span><span class='line'>        <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="k">when</span> <span class="mi">1</span>
</span><span class='line'>        <span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">to_s</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="s2">&quot;</span><span class="si">#{</span><span class="n">tags</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">tags</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs a single tag as an &lt;a&gt; link.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +tag+ is a tag string to format as an &lt;a&gt; link</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">tag_link</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dir</span> <span class="o">=</span> <span class="vi">@context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="s2">&quot;&lt;a class=&#39;tag&#39; href=&#39;/</span><span class="si">#{</span><span class="n">dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">tag</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&lt;/a&gt;&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Outputs the post.date as formatted html, with hooks for CSS styling.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1">#  +date+ is the date object to format as HTML.</span>
</span><span class='line'>    <span class="c1">#</span>
</span><span class='line'>    <span class="c1"># Returns string</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">date_to_html_string</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&lt;span class=&quot;month&quot;&gt;&#39;</span> <span class="o">+</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upcase</span> <span class="o">+</span> <span class="s1">&#39;&lt;/span&gt; &#39;</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">+=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;day&quot;&gt;%d&lt;/span&gt; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span> <span class="o">+=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;year&quot;&gt;%Y&lt;/span&gt; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">result</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Layouts: tag_index.html</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cp octopress/source/_layouts/category_index.html octopress/source/_layouts/tag_index.html
</span></code></pre></td></tr></table></div></figure>


<p>Update the <code>category</code> as <code>tag</code>.</p>

<h2>3. Config: tag_dir</h2>

<figure class='code'><figcaption><span>_config.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">tag_dir</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">tags</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<p><code>rake generate</code> and <code>rake preview</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/06/adding-tag-cloud-in-octopress/">Adding Tag Cloud in Octopress</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T05:20:09+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:20 am</span></time>
        
           | <a href="/tech/2015/10/06/adding-tag-cloud-in-octopress/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/06/adding-tag-cloud-in-octopress/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Features: tag cloud and category list with counts.</p>

<p>Steps:</p>

<ol>
<li>update the ruby plugin: <code>plugins/tag_cloud.rb</code></li>
<li>update the html templates: <code>source/_includes/asides/tag_cloud.html</code>, <code>source/_includes/asides/category_list.html</code></li>
<li>update the sass files: <code>sass/plugins/_tag_cloud.scss</code>, <code>sass/plugins/_category_list.scss</code></li>
</ol>


<h2>1. Plugin: tag_cloud.rb</h2>

<figure class='code'><figcaption><span>tag_cloud.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># encoding: utf-8</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Tag Cloud for Octopress</span>
</span><span class='line'><span class="c1"># =======================</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Description:</span>
</span><span class='line'><span class="c1"># ------------</span>
</span><span class='line'><span class="c1"># Easy output tag cloud and category list.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Syntax:</span>
</span><span class='line'><span class="c1"># -------</span>
</span><span class='line'><span class="c1">#     {\% tag_cloud [counter:true] %\}</span>
</span><span class='line'><span class="c1">#     {\% category_list [counter:true] %\}</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Example:</span>
</span><span class='line'><span class="c1"># --------</span>
</span><span class='line'><span class="c1"># In some template files, you can add the following markups.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># ### source/_includes/custom/asides/tag_cloud.html ###</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     `&lt;section&gt;`</span>
</span><span class='line'><span class="c1">#       `&lt;h1&gt;Tag Cloud&lt;/h1&gt;`</span>
</span><span class='line'><span class="c1">#         `&lt;span id=&quot;tag-cloud&quot;&gt;{\% tag_cloud %\}&lt;/span&gt;`</span>
</span><span class='line'><span class="c1">#     `&lt;/section&gt;`</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># ### source/_includes/custom/asides/category_list.html ###</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1">#     `&lt;section&gt;`</span>
</span><span class='line'><span class="c1">#       `&lt;h1&gt;Categories&lt;/h1&gt;`</span>
</span><span class='line'><span class="c1">#         `&lt;ul id=&quot;category-list&quot;&gt;{\% category_list counter:true %\}&lt;/ul&gt;`</span>
</span><span class='line'><span class="c1">#     `&lt;/section&gt;`</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Notes:</span>
</span><span class='line'><span class="c1"># ------</span>
</span><span class='line'><span class="c1"># Be sure to insert above template files into `default_asides` array in `_config.yml`.</span>
</span><span class='line'><span class="c1"># And also you can define styles for &#39;tag-cloud&#39; or &#39;category-list&#39; in a `.scss` file.</span>
</span><span class='line'><span class="c1"># (ex: `sass/custom/_styles.scss`)</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Licence:</span>
</span><span class='line'><span class="c1"># --------</span>
</span><span class='line'><span class="c1"># Distributed under the [MIT License][MIT].</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># [MIT]: http://www.opensource.org/licenses/mit-license.php</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;stringex&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">TagCloud</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">markup</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span> <span class="o">=~</span> <span class="sr">/\s*counter:(\w+)/i</span>
</span><span class='line'>        <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="vg">$1</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sr">/counter:\w+/i</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="k">super</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">lists</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="n">max</span><span class="p">,</span> <span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>      <span class="n">tag_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;root&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;tag_dir&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
</span><span class='line'>      <span class="n">tags</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">tags</span>
</span><span class='line'>      <span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort_by</span><span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">tag</span><span class="o">|</span>
</span><span class='line'>        <span class="n">count</span> <span class="o">=</span> <span class="n">tags</span><span class="o">[</span><span class="n">tag</span><span class="o">].</span><span class="n">count</span>
</span><span class='line'>        <span class="n">lists</span><span class="o">[</span><span class="n">tag</span><span class="o">]</span> <span class="o">=</span> <span class="n">count</span>
</span><span class='line'>        <span class="n">max</span> <span class="o">=</span> <span class="n">count</span> <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>      <span class="n">lists</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span> <span class="n">tag</span><span class="p">,</span> <span class="n">counter</span> <span class="o">|</span>
</span><span class='line'>        <span class="n">url</span> <span class="o">=</span> <span class="n">tag_dir</span> <span class="o">+</span> <span class="n">tag</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/_|\P{Word}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/-{2,}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">downcase</span>
</span><span class='line'>        <span class="n">style</span> <span class="o">=</span> <span class="s2">&quot;font-size: </span><span class="si">#{</span><span class="mi">90</span> <span class="o">+</span> <span class="p">(</span><span class="mi">110</span> <span class="o">*</span> <span class="nb">Float</span><span class="p">(</span><span class="n">counter</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">max</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="si">}</span><span class="s2">%&quot;</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;a href=&#39;</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39; style=&#39;</span><span class="si">#{</span><span class="n">style</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span>
</span><span class='line'>          <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;(</span><span class="si">#{</span><span class="n">tags</span><span class="o">[</span><span class="n">tag</span><span class="o">].</span><span class="n">count</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;/a&gt; &quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">html</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">class</span> <span class="nc">CategoryList</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">markup</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@opts</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span> <span class="o">=~</span> <span class="sr">/\s*counter:(\w+)/i</span>
</span><span class='line'>        <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="vg">$1</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sr">/counter:\w+/i</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="k">super</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>      <span class="n">category_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;category_dir&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">categories</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span>
</span><span class='line'>      <span class="n">categories</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort_by</span><span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;li&gt;&lt;a href=&#39;/</span><span class="si">#{</span><span class="n">category_dir</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">category</span><span class="o">.</span><span class="n">to_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="vi">@opts</span><span class="o">[</span><span class="s1">&#39;counter&#39;</span><span class="o">]</span>
</span><span class='line'>          <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; (</span><span class="si">#{</span><span class="n">categories</span><span class="o">[</span><span class="n">category</span><span class="o">].</span><span class="n">count</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;/a&gt;&lt;/li&gt;&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">html</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;tag_cloud&#39;</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">TagCloud</span><span class="p">)</span>
</span><span class='line'><span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;category_list&#39;</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">CategoryList</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. HTML: source/_includes/</h2>

<p>tag_cloud.html</p>

<figure class='code'><figcaption><span>tag_cloud.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;tag-cloud&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Tags<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>{\% tag_cloud counter:true %\}<span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>category_list.html</p>

<figure class='code'><figcaption><span>category_list.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Summary<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category-list&quot;</span><span class="nt">&gt;</span>{\% category_list counter:true %\}<span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. SASS: sass/plugins</h2>

<p>_tag_cloud.scss</p>

<figure class='code'><figcaption><span>_tag_cloud.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="o">&lt;</span><span class="nt">section</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;category-list&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nt">h1</span><span class="o">&gt;</span><span class="nt">Summary</span><span class="o">&lt;/</span><span class="nt">h1</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nt">ul</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;category-list&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">category_list</span> <span class="n">counter</span><span class="o">:</span><span class="n">true</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="nt">ul</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nt">section</span><span class="o">&gt;</span>
</span><span class='line'><span class="nt">kelly-2</span><span class="nd">:octopress</span> <span class="nt">kelly</span><span class="o">$</span> <span class="nt">cat</span> <span class="nt">sass</span><span class="o">/</span><span class="nt">plugins</span><span class="o">/</span><span class="nt">_tag_cloud</span><span class="nc">.scss</span>
</span><span class='line'><span class="nc">.tag-cloud</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">ul</span> <span class="err">{</span>
</span><span class='line'>        <span class="k">padding</span><span class="o">:</span> <span class="m">.5em</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nt">a</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>_category_list.scss</p>

<figure class='code'><figcaption><span>_category_list.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.category-list</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">a</span> <span class="err">{</span>
</span><span class='line'>  <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<p>Include the <code>tag_cloud.html</code> and <code>category_list.html</code> in a page, and then run <code>rake generate</code> and <code>rake preview</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/06/adding-the-social-icons-in-octopress/">Adding the Social Icons in Octopress</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T05:04:17+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:04 am</span></time>
        
           | <a href="/tech/2015/10/06/adding-the-social-icons-in-octopress/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/06/adding-the-social-icons-in-octopress/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Perfections: design the icons</h2>

<p>Go to <a href="http://perfecticons.com">Perfections</a>, choose the icons you need, select the styles, and then generate the codes.</p>

<p>Once done, download the <code>fonts.zip</code>.</p>

<h2>2. Octopress: integrate the icons</h2>

<ul>
<li>copy the <code>fonts.zip</code> to <code>octopress/source/assets/fonts/</code></li>
<li>copy the html file to <code>octopress/source/_includes/social.html</code>, and then modify the variables</li>
<li>add the <code>social.html</code> to a page</li>
<li>copy the css file to <code>octopress/sass/partials/_socials.scss</code></li>
<li>update the links in <code>octopress/_config.yml</code></li>
</ul>


<p>Once done, run <code>rake generate</code> and <code>rake preview</code> to check.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/06/octopress-construct/">Octopress Construct</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T04:06:04+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:06 am</span></time>
        
           | <a href="/tech/2015/10/06/octopress-construct/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/06/octopress-construct/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Folder Construct</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./
</span><span class='line'>|---- source/                                   # templates
</span><span class='line'>|---- sass/                                     # scss
</span><span class='line'>|---- ./themes/                                 # themes
</span><span class='line'>|          |---- classic/                       # a theme contains source and sass
</span><span class='line'>|                   |---- source/
</span><span class='line'>|                   |---- sass/
</span><span class='line'>|---- plugins/                                   # ruby plugins
</span><span class='line'>|
</span><span class='line'>|---- Gemfile                                    # gemfile
</span><span class='line'>|---- Rakefile                                   # rakefile
</span><span class='line'>|---- config.rb
</span><span class='line'>|---- config.ru
</span><span class='line'>|---- _config.yml                                # site config file
</span><span class='line'>|
</span><span class='line'>|---- public/                                    # the generated pages
</span><span class='line'>|---- _deploy/                                   # the files for deployment</span></code></pre></td></tr></table></div></figure>


<h2>2. Static Pages</h2>

<h3>2.1. source</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source/
</span><span class='line'>  |---- _includes/                  # template partials
</span><span class='line'>  |---- _layouts/                   # page layouts
</span><span class='line'>  |
</span><span class='line'>  |---- page/                       # page construct
</span><span class='line'>  |---- index.html                  # index
</span><span class='line'>  |
</span><span class='line'>  |
</span><span class='line'>  |---- javascripts/
</span><span class='line'>  |---- stylesheets/
</span><span class='line'>  |---- assets/                     # fonts and others
</span><span class='line'>  |---- images/</span></code></pre></td></tr></table></div></figure>


<h4>2.1.1. templates</h4>

<p><code>index.html</code> and <code>page/index.html</code> are the top layers, they are extended from <code>_layouts</code> which is contatining the page templates.</p>

<p>All the page layouts <code>_layouts</code> are extended from the <code>_includes</code> partials.</p>

<p>If you would like to start a new page, follow the steps:</p>

<ul>
<li>type <code>rake new_page['page_name']</code></li>
<li>go to <code>page_name</code></li>
<li><code>vim index.html</code></li>
<li>update the layouts and head_vars</li>
<li>update the contents, for example, include a partial from <code>_includes</code> or rewrite the content corresponding to the requirements</li>
</ul>


<h4>2.1.2. static files</h4>

<p>Put the images in the <code>images</code>, put the fonts and other files in <code>assets</code>, put the javascripts in <code>javascripts</code>.</p>

<p>NOTE: For the stylesheets, you can update the styles in <code>sass/</code>.</p>

<h3>2.2. sass</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sass/
</span><span class='line'>  |---- screen.scss
</span><span class='line'>            |---- custom/
</span><span class='line'>            |---- _base.scss                               # the global settings
</span><span class='line'>            |         |---- _utilities.scss                # mixins
</span><span class='line'>            |         |---- _solarized.scss                # codes
</span><span class='line'>            |         |---- _theme.scss                    # theme
</span><span class='line'>            |         |---- _typography.scss               # DOM elements
</span><span class='line'>            |         |---- _layout.scss                   # layouts
</span><span class='line'>            |
</span><span class='line'>            |---- _partials.scss                           # the partial settings
</span><span class='line'>            |         |---- _header.scss
</span><span class='line'>            |         |---- _navigation.scss
</span><span class='line'>            |         |---- _blog.scss
</span><span class='line'>            |         |---- _sharing.scss                  # sharing
</span><span class='line'>            |         |---- _syntax.scss                   # codes
</span><span class='line'>            |         |---- _archives.scss
</span><span class='line'>            |         |---- _sidebar.scss
</span><span class='line'>            |         |---- _footer.scss
</span><span class='line'>            |
</span><span class='line'>            |---- plugins/                                 # plugin styles</span></code></pre></td></tr></table></div></figure>


<h3>2.3. .themes</h3>

<p>The theme related files are <code>source</code> and <code>sass</code>.</p>

<p>If install a theme, the step is just copy the <code>source</code> and <code>sass</code> to <code>octopress/</code>, and then replace the old files.</p>

<p>If create a theme, vise versa, just copy <code>octopress/source</code> and <code>octopress/sass</code> to <code>.themes/theme_name</code>.</p>

<h4>2.3.1. Installing a theme</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress/.themes
</span><span class='line'><span class="nv">$ </span>git clone https://a_new_theme_url
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress/
</span><span class='line'><span class="nv">$ </span>rake install<span class="o">[</span><span class="s1">&#39;theme_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake generate
</span></code></pre></td></tr></table></div></figure>


<h4>2.3.2. Creating a theme</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress
</span><span class='line'><span class="nv">$ </span>mkdir .themes/theme_name
</span><span class='line'><span class="nv">$ </span>cp -R <span class="nb">source</span> .themes/theme_name/source
</span><span class='line'><span class="nv">$ </span>cp -<span class="nv">$ </span>sass .themes/theme_name/sass
</span></code></pre></td></tr></table></div></figure>


<h2>3. Plugins</h2>

<p>You can extend various of features by ruby plugins.</p>

<p>If you perfer creating a plugin by yourself, follow the steps:</p>

<ul>
<li><code>cd plugins</code></li>
<li><code>vim plugin_name.rb</code></li>
<li>write the features</li>
<li>update <code>Gemfile</code> if some packages required</li>
<li>go to <code>source/_includes/plugins</code>, write the corresponding template</li>
<li>go to <code>source/</code>, include the plugin in the pages</li>
<li><code>vim _config.yml</code>, write the config variables if needed</li>
<li>go to <code>sass/plugins</code>, write the coresponding style`</li>
<li><code>rake generate</code></li>
<li><code>rake preview</code></li>
</ul>


<h2>4. Configuration</h2>

<h3>4.1. _config.yml</h3>

<p>Since Octopress is the extension of Jekyll, you can check the Jekyll configuration documents for the detailed config variables.</p>

<h2>5. Commands</h2>

<h3>5.1. Gemfile</h3>

<p>Update the gems in the <code>Gemfile</code>, especially when you update the plugins.</p>

<h3>5.2. Rakefile</h3>

<p>Update the commands in the <code>Rakefile</code>.</p>

<h4>5.2.1. Default commands</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rake generate
</span><span class='line'><span class="nv">$ </span>rake watch
</span><span class='line'><span class="nv">$ </span>rake preview
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake new_post<span class="o">[</span><span class="s1">&#39;post_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake new_page<span class="o">[</span><span class="s1">&#39;page_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="nv">$ </span>rake isolate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake integrate
</span><span class='line'><span class="nv">$ </span>rake update_sytle
</span><span class='line'><span class="nv">$ </span>rake update_source
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rake deploy
</span><span class='line'><span class="nv">$ </span>rake gen_deploy
</span><span class='line'><span class="nv">$ </span>rake rsync
</span><span class='line'><span class="nv">$ </span>rake set_root_dir
</span><span class='line'><span class="nv">$ </span>rake setup_github_pages
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://octopress.org/docs/">Octopress Docs</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/06/installing-octopress/">Installing Octopress</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-06T03:54:31+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:54 am</span></time>
        
           | <a href="/tech/2015/10/06/installing-octopress/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/06/installing-octopress/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Prequisitions</h2>

<ul>
<li>Ubuntu 14.04</li>
<li>Node.js</li>
<li>RVM</li>
<li>Ruby 2.1.1</li>
<li>Gem</li>
<li>Bundler</li>
<li>Rake</li>
</ul>


<p>Node.js</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nodejs
</span></code></pre></td></tr></table></div></figure>


<p>RVM and Ruby</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
</span><span class='line'><span class="nv">$ </span><span class="se">\c</span>url -sSL https://get.rvm.io <span class="p">|</span> bash -s stable
</span><span class='line'><span class="nv">$ </span>rvm install 2.1.1
</span></code></pre></td></tr></table></div></figure>


<h2>2. Octopress</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octopress
</span><span class='line'><span class="nv">$ </span>gem install bundler
</span><span class='line'><span class="nv">$ </span>bundle install
</span><span class='line'><span class="nv">$ </span>rake install
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rake generate
</span><span class='line'><span class="nv">$ </span>rake preview
</span></code></pre></td></tr></table></div></figure>


<p>link: <a href="http://localhost:4000">http://localhost:4000</a></p>

<h2>References</h2>

<ol>
<li><a href="http://octopress.org/docs/setup/">Octopress</a></li>
<li><a href="https://github.com/imathis/octopress">Octopress Source Code</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/10/03/installing-openstack-devstack/">Installing Openstack Devstack</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-10-03T12:33:38+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2015</span></span> <span class='time'>12:33 pm</span></time>
        
           | <a href="/tech/2015/10/03/installing-openstack-devstack/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/10/03/installing-openstack-devstack/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h3>Prequisition</h3>

<p>Softwares:</p>

<p>&ndash; (VM) <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox 5.0</a><br/>
&ndash; (OS) <a href="http://www.ubuntu.com/download/server">Ubuntu Server 14.04.3</a><br/>
&ndash; (SW) <a href="https://github.com/openstack-dev/devstack">Openstack</a></p>

<p>Steps:</p>

<p>&ndash; Installing VirtualBox<br/>
&ndash; Installing Ubuntu 14.04.03<br/>
&ndash; Installing Openstack<br/>
&ndash; Testing</p>

<h3>1. Installing VirtualBox</h3>

<p>Go to <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>, download and install on the local machine.</p>

<h3>2. Installing Ubuntu</h3>

<p>Go to <a href="http://www.ubuntu.com/download/server">Ubuntu</a> page, download the ubuntu server 14.04.03 (NOTE: Preferring 14.04.03) iso image.</p>

<p>Once done, open VirtualBox, create a vm for Ubuntu server. The vm settings are:<br/>
&ndash; memory: 2GB<br/>
&ndash; storage: 100GB<br/>
&ndash; <strong>network: briaged adapter (IMPORTANT), promiscuous mode with ALLOW ALL</strong></p>

<p>Then, attach Ubuntu server iso file to the drive, double click the vm, the system will be jumped to the installation guide.</p>

<p>When installing Ubuntu, the installation mode should be:<br/>
&ndash; <strong>multi-server with MAAS (IMPORTANT)</strong></p>

<p>Once done, restart and config the system:</p>

<figure class='code'><figcaption><span>config system</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update <span class="o">&amp;&amp;</span> upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install git
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;username&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;user@example.com&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. Installing Openstack</h3>

<p>Go to <a href="https://github.com/openstack-dev/devstack">Openstack</a>, download the repo and install:</p>

<figure class='code'><figcaption><span>installing openstack</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># create a project folder and download the repo</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>sudo mkdir openstack
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>openstack
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/openstack-dev/devstack.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>devstack
</span><span class='line'><span class="nv">$ </span>git checkout stable/juno
</span><span class='line'>
</span><span class='line'><span class="c"># config user</span>
</span><span class='line'><span class="nv">$ </span>sudo ./tools/create-stack-user.sh
</span><span class='line'><span class="nv">$ </span>sudo chown -R stack:stack /openstack
</span><span class='line'>
</span><span class='line'><span class="c"># install</span>
</span><span class='line'><span class="nv">$ </span>./stack.sh
</span></code></pre></td></tr></table></div></figure>


<p>Trouble Shooting</p>

<p><strong>(1)</strong> If something wrong, try <code>./unstack.sh</code> and then <code>./clean.sh</code>, restart and then <code>./stack.sh</code> again.</p>

<p><strong>(2)</strong> If re-run <code>./stack.sh</code> and the python packages flag some issue, try to delete <code>/opt/stack/xxx</code>, and re-run <code>./stack.sh</code>.</p>

<h3>4. Testing</h3>

<p>Open a browser, enter the dashboard with <code>http://ip_address</code>, login with <code>admin/password</code> (NOTE: password was set at previous).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/30/will-architecture/">Will Architecture</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-30T15:19:59+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:19 pm</span></time>
        
           | <a href="/tech/2015/09/30/will-architecture/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/30/will-architecture/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Features</h2>

<h2>2. Architect</h2>

<h2>3. File Construct</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./
</span><span class='line'> |
</span><span class='line'> |---- will/                                    # src
</span><span class='line'> |       |---- mixins/
</span><span class='line'> |       |---- plugins/                         # extensions
</span><span class='line'> |       |---- scripts/                         # commands
</span><span class='line'> |       |---- storage/                         # dbs
</span><span class='line'> |       |---- templates/                       # html
</span><span class='line'> |       |---- tests/                           # testing
</span><span class='line'> |       |
</span><span class='line'> |       |---- acl.py
</span><span class='line'> |       |---- decorators.py
</span><span class='line'> |       |---- listener.py
</span><span class='line'> |       |---- plugin.py
</span><span class='line'> |       |---- scheduler.py
</span><span class='line'> |       |---- utils.py
</span><span class='line'> |       |
</span><span class='line'> |       |---- settings.py
</span><span class='line'> |       |---- main.py
</span><span class='line'> |
</span><span class='line'> |---- config.py                                # config file
</span><span class='line'> |---- run_will.py                              # run will</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/30/hipchat-api/">Hipchat API</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-30T15:09:22+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:09 pm</span></time>
        
           | <a href="/tech/2015/09/30/hipchat-api/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/30/hipchat-api/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Hipchat API</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ROOM_NOTIFICATION_URL = "https://%(server)s/v2/room/%(room_id)s/notification?auth_token=%(token)s    "
</span><span class='line'>ROOM_TOPIC_URL = "https://%(server)s/v2/room/%(room_id)s/topic?auth_token=%(token)s"
</span><span class='line'>PRIVATE_MESSAGE_URL = "https://%(server)s/v2/user/%(user_id)s/message?auth_token=%(token)s"
</span><span class='line'>SET_TOPIC_URL = "https://%(server)s/v2/room/%(room_id)s/topic?auth_token=%(token)s"
</span><span class='line'>USER_DETAILS_URL = "https://%(server)s/v2/user/%(user_id)s?auth_token=%(token)s"
</span><span class='line'>ALL_USERS_URL = "https://%(server)s/v2/user?auth_token=%(token)s&start-index=%(start_index)s"</span></code></pre></td></tr></table></div></figure>


<h2>2. Command Line</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -d <span class="s1">&#39;{&quot;color&quot;: &quot;green&quot;, &quot;message&quot;: &quot;message&quot;, &quot;notify&quot;: false, &quot;messae_format&quot;: &quot;text&quot;}&#39;</span> -H <span class="s1">&#39;Content-Type: application/json&#39;</span> https://api.hipchat.com/v2/room/room id/scope_name<span class="o">(</span>message/notification<span class="o">)</span>?auth_token<span class="o">=</span>specific_token
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="https://www.hipchat.com/docs/apiv2">Hipchat API Docs</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/30/will-bot/">Will Bot</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-30T14:52:04+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:52 pm</span></time>
        
           | <a href="/tech/2015/09/30/will-bot/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/30/will-bot/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<h3>1.1. Prequisition</h3>

<ul>
<li>Ubuntu 14.04</li>
<li>Redis</li>
<li>Will</li>
</ul>


<h3>1.2. Ubuntu</h3>

<p>Ubuntu 14.04</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-virtualenv redis-server
</span><span class='line'><span class="nv">$ </span>redis
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. Octowill</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/project/
</span><span class='line'><span class="nv">$ </span>sudo mkdir octowill
</span><span class='line'><span class="nv">$ </span>sudo chown -R user:group /path/to/octowill/
</span><span class='line'><span class="nv">$ </span>sudo su user
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>mkdir venvs
</span><span class='line'><span class="nv">$ </span>virtualenv venvs/octowill
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/octowill/bin/activate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/KellyChan/octowill.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span></code></pre></td></tr></table></div></figure>


<h2>2. Configuration</h2>

<h3>2.1. Prequistion</h3>

<ul>
<li>hipchat account</li>
<li>octowill</li>
</ul>


<h3>2.2. Hipchat</h3>

<ul>
<li>signup hipchat</li>
<li>get API tokens</li>
</ul>


<p>API summary</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>V2 Tokens:
</span><span class='line'>- Administer Group - Perform group administrative tasks. Note that this scope is restricted from updating the group owner<span class="err">&#39;</span>s profile.
</span><span class='line'>- Administer Room - Perform room administrative tasks
</span><span class='line'>- Manage Rooms - Create, update, and remove rooms
</span><span class='line'>- Send Message - Send private one-on-one messages
</span><span class='line'>- Send Notification - Send room notifications
</span><span class='line'>- View Group - View users, rooms, and other group information
</span><span class='line'>- View Messages - View messages from chat rooms and private chats you have access to
</span><span class='line'>- View Room - View room information and participants, but not <span class="nb">history</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Octowill</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>octowill
</span><span class='line'><span class="nv">$ </span>cp config.py.sample config.py
</span><span class='line'><span class="nv">$ </span>vim config.py                   <span class="c"># update USERNAME, PASSWORD, V2_TOKENS</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>./start_dev/will.py
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="https://github.com/skoczen/will">will</a></li>
<li><a href="http://skoczen.github.io/will/">will document</a></li>
<li><a href="https://www.hipchat.com">hiphat</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/16/changing-a-theme-for-nodejs-ghost/">Changing a Theme for NodeJS Ghost</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-16T23:30:16+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:30 pm</span></time>
        
           | <a href="/tech/2015/09/16/changing-a-theme-for-nodejs-ghost/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/16/changing-a-theme-for-nodejs-ghost/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Download a theme</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /path/to/ghost/content/themes
</span><span class='line'>git clone git@xxxx:a_new_theme.git
</span></code></pre></td></tr></table></div></figure>


<h2>2. Config a theme</h2>

<p>Go to <a href="http://localhost:2368/admin">http://localhost:2368/admin</a></p>

<ul>
<li>find generic -> themes -> select</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/07/generating-static-pages-with-python-butter-for-nodejs-ghost/">Generating Static Pages With Python Butter for NodeJS Ghost</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-07T22:09:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:09 pm</span></time>
        
           | <a href="/tech/2015/09/07/generating-static-pages-with-python-butter-for-nodejs-ghost/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/07/generating-static-pages-with-python-butter-for-nodejs-ghost/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installing Dependencies</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install libxml2-dev libxslt1-dev
</span></code></pre></td></tr></table></div></figure>


<p>Without the above dependencies, it will flag error:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>pip instal buster: lxml error: <span class="nb">command</span> <span class="s1">&#39;gcc&#39;</span> failed with <span class="nb">exit </span>status 1
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>2. Installing Butter</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/
</span><span class='line'><span class="nv">$ </span>sudo mkdir venvs
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install python-virtualenv
</span><span class='line'><span class="nv">$ </span>sudo virtualenv venvs/diary
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/diary/bin/activate
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir static_pages
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>static_pages
</span><span class='line'><span class="nv">$ </span>sudo mkdir requirements
</span><span class='line'><span class="nv">$ </span>sudo nano requirements/base.txt    <span class="c"># add buster==0.1.3</span>
</span><span class='line'><span class="nv">$ </span>sudo pip install -r requirements/base.txt
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary/static_pages
</span><span class='line'><span class="nv">$ </span>buster generate --domain<span class="o">=</span>http://localhost:2368
</span><span class='line'><span class="nv">$ </span>buster preview
</span></code></pre></td></tr></table></div></figure>


<p>Site: <a href="http://localhost:9000">http://localhost:9000</a></p>

<h2>3. Config Bin</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /atr/apps/atr-blog/atr-blog/buster
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span>sudo vim requirments.sh       <span class="c"># add sudo apt-get install libxml2-dev libxslt1-dev</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Uploading to Github Pages</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rm -rf static
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/username/project.git static
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>buster generate --domain<span class="o">=</span>http://localhost:2233
</span><span class='line'><span class="nv">$ </span>buster preview
</span><span class='line'><span class="nv">$ </span><span class="c"># open http://localhost:9000</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>buster deploy
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/05/deploying-nodejs-ghost-production-stack/">Deploying NodeJS Ghost Production Stack</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-05T22:19:58+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:19 pm</span></time>
        
           | <a href="/tech/2015/09/05/deploying-nodejs-ghost-production-stack/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/05/deploying-nodejs-ghost-production-stack/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Prequisitions</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>MySQL</li>
<li>Node.js / NPM</li>
<li>Ghost</li>
<li>NPM / forever</li>
<li>Nginx</li>
<li>Git</li>
</ul>


<h2>1. Ubuntu</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install git
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;xxx&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;xxxx&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>2. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server mysql-client
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mysql -uroot
</span><span class='line'>
</span><span class='line'>mysql&gt; create database ghost<span class="p">;</span>
</span><span class='line'>mysql&gt; create database ghost_dev<span class="p">;</span>
</span><span class='line'>mysql&gt; show schemas<span class="p">;</span>
</span><span class='line'>mysql&gt; <span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Node.js / NPM</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install --yes build-essential
</span><span class='line'><span class="nv">$ </span>sudo apt-get install curl
</span><span class='line'><span class="nv">$ </span>curl --silent --location https://deb.nodesource.com/setup_0.12 <span class="p">|</span> sudo bash -
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes nodejs
</span><span class='line'><span class="nv">$ </span>node -v
</span><span class='line'><span class="nv">$ </span>npm -v
</span></code></pre></td></tr></table></div></figure>


<h2>4. Ghost</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo su -
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /
</span><span class='line'><span class="nv">$ </span>mkdir ghost
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>ghost
</span><span class='line'><span class="nv">$ </span>mkdir -p var/log
</span><span class='line'><span class="nv">$ </span>mkdir -p var/run
</span><span class='line'><span class="nv">$ </span>mkdir bin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo git clone https://github.com/username/project.git
</span><span class='line'><span class="nv">$ </span>git remote -v
</span><span class='line'><span class="nv">$ </span>git branch
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo npm start --development
</span><span class='line'><span class="nv">$ </span>sudo npm start --production
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>localhost:2368</li>
<li>localhost:2368/admin</li>
</ul>


<h2>5. Forever</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo npm install -g forever
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo node index.js
</span><span class='line'><span class="nv">$ </span>sudo forever start index.js
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># sudo forever stop 0  </span>
</span></code></pre></td></tr></table></div></figure>


<h2>6. Nginx</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /ghost
</span><span class='line'><span class="nv">$ </span>sudo mkdir -p etc/nginx
</span><span class='line'><span class="nv">$ </span>sudo ln ghost/config/nginx/diary.conf /ghost/etc/nginx/ghost.conf
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /ghost/etc/nginx/ghost.conf /etc/nginx/sites-available/ghost.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-available/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /etc/nginx/sites-available/ghost.conf /etc/nginx/sites-enabled/ghost.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-enabled/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>7. Auto Service Start</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /ghost/ghost/config/bin
</span><span class='line'><span class="nv">$ </span>sudo cp diary-dev ghost              <span class="c"># update the paths</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln ghost /ghost/bin/ghost
</span><span class='line'><span class="nv">$ </span>sudo ln /ghost/bin/ghost /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>ls /etc/init.d/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chmod a+x /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>ls /etc/init.d/ghost
</span><span class='line'><span class="nv">$ </span>sudo update-rc.d ghost defaults
</span><span class='line'><span class="nv">$ </span>sudo service ghost start
</span></code></pre></td></tr></table></div></figure>


<p>ghost: check the paths</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;ghost&quot;</span>
</span><span class='line'><span class="nv">NODE_BIN_DIR</span><span class="o">=</span><span class="s2">&quot;/usr/local/node/bin&quot;</span>
</span><span class='line'><span class="nv">NODE_PATH</span><span class="o">=</span><span class="s2">&quot;/ghost/ghost/node_modules&quot;</span>
</span><span class='line'><span class="nv">APPLICATION_PATH</span><span class="o">=</span><span class="s2">&quot;/ghost/ghost/index.js&quot;</span>
</span><span class='line'><span class="nv">PIDFILE</span><span class="o">=</span><span class="s2">&quot;/ghost/var/run/ghost.pid&quot;</span>
</span><span class='line'><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;/ghost/var/log/ghost.log&quot;</span>
</span><span class='line'><span class="nv">MIN_UPTIME</span><span class="o">=</span><span class="s2">&quot;5000&quot;</span>
</span><span class='line'><span class="nv">SPIN_SLEEP_TIME</span><span class="o">=</span><span class="s2">&quot;2000&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>8. Testing</h2>

<ul>
<li>ip_address:8000</li>
<li>ip_address:8000/admin</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/09/04/installing-nodejs-ghost-devstack/">Installing NodeJS Ghost Devstack</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-04T20:42:51+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>8:42 pm</span></time>
        
           | <a href="/tech/2015/09/04/installing-nodejs-ghost-devstack/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/09/04/installing-nodejs-ghost-devstack/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Prequistions</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>Vagrant / VirtualBox</li>
<li>Node.js / NPM</li>
<li>NPM: forever</li>
<li>Ghost</li>
<li>MySQL</li>
<li>Nginx</li>
<li>Git</li>
</ul>


<h2>1. Vagrant / VirtualBox</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/project/
</span><span class='line'><span class="nv">$ </span>mkdir private
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>private
</span><span class='line'><span class="nv">$ </span>vagrant init hashicorp/precise64
</span></code></pre></td></tr></table></div></figure>


<p>config Vagrantfile</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">diary_mount_dir</span> <span class="o">=</span> <span class="s1">&#39;diary&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_MOUNT_BASE&#39;</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">diary_mount_dir</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_MOUNT_BASE&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">diary_mount_dir</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a forwarded port mapping which allows access to a specific port</span>
</span><span class='line'>  <span class="c1"># within the machine from a port on the host machine. In the example below,</span>
</span><span class='line'>  <span class="c1"># accessing &quot;localhost:8080&quot; will access port 80 on the guest machine.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">8000</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8000</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;forwarded_port&quot;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">2346</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">2346</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Create a private network, which allows host-only access to the machine</span>
</span><span class='line'>  <span class="c1"># using a specific IP.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.33.10&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Share an additional folder to the guest VM. The first argument is</span>
</span><span class='line'>  <span class="c1"># the path on the host to the actual folder. The second argument is</span>
</span><span class='line'>  <span class="c1"># the path on the guest to mount the folder. And the optional third</span>
</span><span class='line'>  <span class="c1"># argument is a set of non-required options.</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span> <span class="ss">disabled</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">diary_mount_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/private/apps/diary/diary&quot;</span><span class="p">,</span> <span class="ss">create</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">nfs</span><span class="p">:</span> <span class="kp">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>vagrant up</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list  <span class="c"># change us to cn</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<h2>2. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server mysql-client
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mysql -uroot
</span><span class='line'>
</span><span class='line'>mysql&gt; CREATE DATABASE ghost<span class="p">;</span>
</span><span class='line'>mysql&gt; CREATE DATABASE ghost_dev<span class="p">;</span>
</span><span class='line'>mysql&gt; show schemas<span class="p">;</span>
</span><span class='line'>mysql&gt; <span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Node.js / NPM</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo reboot
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes build-essential
</span><span class='line'><span class="nv">$ </span>sudo apt-get install curl
</span><span class='line'><span class="nv">$ </span>curl --silent --location https://deb.nodesource.com/setup_0.12 <span class="p">|</span> sudo bash -
</span><span class='line'><span class="nv">$ </span>sudo apt-get install --yes nodejs
</span><span class='line'><span class="nv">$ </span>node -v
</span><span class='line'><span class="nv">$ </span>npm -v
</span></code></pre></td></tr></table></div></figure>


<h2>4. Ghost</h2>

<h3>4.1. Installation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /tmp
</span><span class='line'><span class="nv">$ </span>curl -L https://ghost.org/zip/ghost-latest.zip -o ghost.zip
</span><span class='line'><span class="nv">$ </span>sudo apt-get install unzip
</span><span class='line'><span class="nv">$ </span>sudo unzip -uo ghost.zip -d /private/apps/diary/diary/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>npm install --production
</span><span class='line'><span class="nv">$ </span>npm install --development
</span></code></pre></td></tr></table></div></figure>


<h3>4.2. Configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo nano config.js                 <span class="c"># config mysql db for development and production</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>npm start --development
</span><span class='line'><span class="nv">$ </span>npm start --production
</span></code></pre></td></tr></table></div></figure>


<p>config.js - development</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="c1">//database: {</span>
</span><span class='line'>    <span class="c1">//    client: &#39;sqlite3&#39;,</span>
</span><span class='line'>    <span class="c1">//    connection: {</span>
</span><span class='line'>    <span class="c1">//        filename: path.join(__dirname, &#39;/content/data/ghost-dev.db&#39;)</span>
</span><span class='line'>    <span class="c1">//    },</span>
</span><span class='line'>    <span class="c1">//    debug: false</span>
</span><span class='line'>    <span class="c1">//},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">database</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">client</span><span class="o">:</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">connection</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">host</span>     <span class="o">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">user</span>     <span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">password</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">database</span> <span class="o">:</span> <span class="s1">&#39;ghost_dev&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">charset</span>  <span class="o">:</span> <span class="s1">&#39;utf8&#39;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'>    <span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>


<p>config.js - production</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="c1">//database: {</span>
</span><span class='line'>    <span class="c1">//    client: &#39;sqlite3&#39;,</span>
</span><span class='line'>    <span class="c1">//    connection: {</span>
</span><span class='line'>    <span class="c1">//        filename: path.join(__dirname, &#39;/content/data/ghost-dev.db&#39;)</span>
</span><span class='line'>    <span class="c1">//    },</span>
</span><span class='line'>    <span class="c1">//    debug: false</span>
</span><span class='line'>    <span class="c1">//},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">database</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">client</span><span class="o">:</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">connection</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">host</span>     <span class="o">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">user</span>     <span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">password</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">database</span> <span class="o">:</span> <span class="s1">&#39;ghost&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nx">charset</span>  <span class="o">:</span> <span class="s1">&#39;utf8&#39;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">debug</span><span class="o">:</span> <span class="kc">false</span>
</span><span class='line'>    <span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>


<h2>6. Forever</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo npm install -g forever
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>node index.js
</span><span class='line'><span class="nv">$ </span>forever start index.js
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># forever stop 0  </span>
</span></code></pre></td></tr></table></div></figure>


<h2>7. Nginx</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir nginx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>nginx
</span><span class='line'><span class="nv">$ </span>sudo nano diary.conf
</span></code></pre></td></tr></table></div></figure>


<p>ghost.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>server <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  listen 8000<span class="p">;</span>
</span><span class='line'>  server_name ghost.com<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  location / <span class="o">{</span>
</span><span class='line'>    proxy_set_header   X-Real-IP <span class="nv">$remote_addr</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header   Host      <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_pass         http://127.0.0.1:2368<span class="p">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>config nginx</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln diary.conf /etc/nginx/sites-available/diary.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-available/
</span><span class='line'><span class="nv">$ </span>sudo ln /etc/nginx/sites-available/diary.conf /etc/nginx/sites-enabled/diary.conf
</span><span class='line'><span class="nv">$ </span>ls /etc/nginx/sites-enabled/
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>8. Testing</h2>

<ul>
<li>localhost:8000</li>
<li>localhost:8000/admin</li>
</ul>


<h2>9. Auto Service Start</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>bin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano ghost  <span class="c"># add the config file</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo ln /private/apps/diary/bin/diary /etc/init.d/diary
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /etc/init.d/
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>chmod a+x /etc/init.d/diary
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'><span class="nv">$ </span>update-rc.d diary defaults
</span><span class='line'><span class="nv">$ </span>service diary start
</span></code></pre></td></tr></table></div></figure>


<p>ghost</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># An init.d script for running a Node.js process as a service using Forever as</span>
</span><span class='line'><span class="c"># the process monitor. For more configuration options associated with Forever,</span>
</span><span class='line'><span class="c"># see: https://github.com/nodejitsu/forever</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># This was written for Debian distributions such as Ubuntu, but should still</span>
</span><span class='line'><span class="c"># work on RedHat, Fedora, or other RPM-based distributions, since none of the</span>
</span><span class='line'><span class="c"># built-in service functions are used. So information is provided for both.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c">### BEGIN INIT INFO</span>
</span><span class='line'><span class="c"># Provides:             my-application</span>
</span><span class='line'><span class="c"># Required-Start:       $syslog $remote_fs</span>
</span><span class='line'><span class="c"># Required-Stop:        $syslog $remote_fs</span>
</span><span class='line'><span class="c"># Should-Start:         $local_fs</span>
</span><span class='line'><span class="c"># Should-Stop:          $local_fs</span>
</span><span class='line'><span class="c"># Default-Start:        2 3 4 5</span>
</span><span class='line'><span class="c"># Default-Stop:         0 1 6</span>
</span><span class='line'><span class="c"># Short-Description:    My Application</span>
</span><span class='line'><span class="c"># Description:          My Application</span>
</span><span class='line'><span class="c">### END INIT INFO</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c">### BEGIN CHKCONFIG INFO</span>
</span><span class='line'><span class="c"># chkconfig: 2345 55 25</span>
</span><span class='line'><span class="c"># description: My Application</span>
</span><span class='line'><span class="c">### END CHKCONFIG INFO</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Based on:</span>
</span><span class='line'><span class="c"># https://gist.github.com/3748766</span>
</span><span class='line'><span class="c"># https://github.com/hectorcorrea/hectorcorrea.com/blob/master/etc/forever-initd-hectorcorrea.sh</span>
</span><span class='line'><span class="c"># https://www.exratione.com/2011/07/running-a-nodejs-server-as-a-service-using-forever/</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># The example environment variables below assume that Node.js is installed by</span>
</span><span class='line'><span class="c"># building from source with the standard settings.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># It should be easy enough to adapt to the paths to be appropriate to a package</span>
</span><span class='line'><span class="c"># installation, but note that the packages available in the default repositories</span>
</span><span class='line'><span class="c"># are far behind the times. Most users will be building from source to get a</span>
</span><span class='line'><span class="c"># suitably recent Node.js version.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># An application name to display in echo text.</span>
</span><span class='line'><span class="c"># NAME=&quot;My Application&quot; </span>
</span><span class='line'><span class="c"># The full path to the directory containing the node and forever binaries.</span>
</span><span class='line'><span class="c"># NODE_BIN_DIR=&quot;/usr/local/node/bin&quot; </span>
</span><span class='line'><span class="c"># Set the NODE_PATH to the Node.js main node_modules directory.</span>
</span><span class='line'><span class="c"># NODE_PATH=&quot;/usr/local/lib/node_modules&quot; </span>
</span><span class='line'><span class="c"># The application startup Javascript file path.</span>
</span><span class='line'><span class="c"># APPLICATION_PATH=&quot;/home/user/my-application/start-my-application.js&quot; </span>
</span><span class='line'><span class="c"># Process ID file path.</span>
</span><span class='line'><span class="c"># PIDFILE=&quot;/var/run/my-application.pid&quot; </span>
</span><span class='line'><span class="c"># Log file path.</span>
</span><span class='line'><span class="c"># LOGFILE=&quot;/var/log/my-application.log&quot; </span>
</span><span class='line'><span class="c"># Forever settings to prevent the application spinning if it fails on launch.</span>
</span><span class='line'><span class="c"># MIN_UPTIME=&quot;5000&quot; </span>
</span><span class='line'><span class="c"># SPIN_SLEEP_TIME=&quot;2000&quot; </span>
</span><span class='line'>
</span><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">NODE_BIN_DIR</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">NODE_PATH</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">APPLICATION_PATH</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">PIDFILE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">LOGFILE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">MIN_UPTIME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="nv">SPIN_SLEEP_TIME</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Add node to the path for situations in which the environment is passed.</span>
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$NODE_BIN_DIR</span>:<span class="nv">$PATH</span>
</span><span class='line'><span class="c"># Export all environment variables that must be visible for the Node.js</span>
</span><span class='line'><span class="c"># application process forked by Forever. It will not see any of the other</span>
</span><span class='line'><span class="c"># variables defined in this script.</span>
</span><span class='line'><span class="nb">export </span><span class="nv">NODE_PATH</span><span class="o">=</span><span class="nv">$NODE_PATH</span>
</span><span class='line'>
</span><span class='line'>start<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Starting $NAME&quot;</span>
</span><span class='line'>    <span class="c"># We&#39;re calling forever directly without using start-stop-daemon for the</span>
</span><span class='line'>    <span class="c"># sake of simplicity when it comes to environment, and because this way</span>
</span><span class='line'>    <span class="c"># the script will work whether it is executed directly or via the service</span>
</span><span class='line'>    <span class="c"># utility.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The minUptime and spinSleepTime settings stop Forever from thrashing if</span>
</span><span class='line'>    <span class="c"># the application fails immediately on launch. This is generally necessary to</span>
</span><span class='line'>    <span class="c"># avoid loading development servers to the point of failure every time</span>
</span><span class='line'>    <span class="c"># someone makes an error in application initialization code, or bringing down</span>
</span><span class='line'>    <span class="c"># production servers the same way if a database or other critical service</span>
</span><span class='line'>    <span class="c"># suddenly becomes inaccessible.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The pidfile contains the child process pid, not the forever process pid.</span>
</span><span class='line'>    <span class="c"># We&#39;re only using it as a marker for whether or not the process is</span>
</span><span class='line'>    <span class="c"># running.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># Note that redirecting the output to /dev/null (or anywhere) is necessary</span>
</span><span class='line'>    <span class="c"># to make this script work if provisioning the service via Chef.</span>
</span><span class='line'>    forever <span class="se">\</span>
</span><span class='line'>      --pidFile <span class="nv">$PIDFILE</span> <span class="se">\</span>
</span><span class='line'>      -a <span class="se">\</span>
</span><span class='line'>      -l <span class="nv">$LOGFILE</span> <span class="se">\</span>
</span><span class='line'>      --minUptime <span class="nv">$MIN_UPTIME</span> <span class="se">\</span>
</span><span class='line'>      --spinSleepTime <span class="nv">$SPIN_SLEEP_TIME</span> <span class="se">\</span>
</span><span class='line'>      start <span class="nv">$APPLICATION_PATH</span> 2&gt;<span class="p">&amp;</span><span class="m">1</span> &gt; /dev/null <span class="p">&amp;</span>
</span><span class='line'>    <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>stop<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> -f <span class="nv">$PIDFILE</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;Shutting down $NAME&quot;</span>
</span><span class='line'>        <span class="c"># Tell Forever to stop the process.</span>
</span><span class='line'>        forever stop <span class="nv">$APPLICATION_PATH</span> 2&gt;<span class="p">&amp;</span><span class="m">1</span> &gt; /dev/null
</span><span class='line'>        <span class="c"># Get rid of the pidfile, since Forever won&#39;t do that.</span>
</span><span class='line'>        rm -f <span class="nv">$PIDFILE</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is not running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>0
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>restart<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    stop
</span><span class='line'>    start
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>status<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="c"># On Ubuntu this isn&#39;t even necessary. To find out whether the service is</span>
</span><span class='line'>    <span class="c"># running, use &quot;service my-application status&quot; which bypasses this script</span>
</span><span class='line'>    <span class="c"># entirely provided you used the service utility to start the process.</span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># The commented line below is the obvious way of checking whether or not a</span>
</span><span class='line'>    <span class="c"># process is currently running via Forever, but in recent Forever versions</span>
</span><span class='line'>    <span class="c"># when the service is started during Chef provisioning a dead pipe is left</span>
</span><span class='line'>    <span class="c"># behind somewhere and that causes an EPIPE exception to be thrown.</span>
</span><span class='line'>    <span class="c"># forever list | grep -q &quot;$APPLICATION_PATH&quot; </span>
</span><span class='line'>    <span class="c">#</span>
</span><span class='line'>    <span class="c"># So instead we add an extra layer of indirection with this to bypass that</span>
</span><span class='line'>    <span class="c"># issue.</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="sb">`</span>forever list<span class="sb">`</span> <span class="p">|</span> grep -q <span class="s2">&quot;$APPLICATION_PATH&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$?&quot;</span> -eq <span class="s2">&quot;0&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>0
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;$NAME is not running.&quot;</span>
</span><span class='line'>        <span class="nv">RETVAL</span><span class="o">=</span>3
</span><span class='line'>    <span class="k">fi</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
</span><span class='line'>    start<span class="o">)</span>
</span><span class='line'>        start
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    stop<span class="o">)</span>
</span><span class='line'>        stop
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    status<span class="o">)</span>
</span><span class='line'>        status
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    restart<span class="o">)</span>
</span><span class='line'>        restart
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'>    *<span class="o">)</span>
</span><span class='line'>        <span class="nb">echo</span> <span class="s2">&quot;Usage: {start|stop|status|restart}&quot;</span>
</span><span class='line'>        <span class="nb">exit </span>1
</span><span class='line'>        <span class="p">;;</span>
</span><span class='line'><span class="k">esac</span>
</span><span class='line'><span class="nb">exit</span> <span class="nv">$RETVAL</span>
</span></code></pre></td></tr></table></div></figure>


<h2>10. Creating Config File</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /private/apps/diary/diary
</span><span class='line'><span class="nv">$ </span>sudo mkdir config
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>config
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo mkdir bin
</span><span class='line'><span class="nv">$ </span>sudo mkdir nginx
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>bin
</span><span class='line'><span class="nv">$ </span>sudo cp /private/apps/diary/bin/diary diary-dev
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ..
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>nginx
</span><span class='line'><span class="nv">$ </span>sudo cp /private/apps/diary/nginx/diary.conf diary.conf
</span></code></pre></td></tr></table></div></figure>


<h2>11. Git</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git init
</span><span class='line'><span class="nv">$ </span>git remote add origin xxxx
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;xxx&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="http://support.ghost.org/installing-ghost-linux/">Installing ghost linux</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/08/30/deploying-redmine-on-ubuntu/">Deploying Redmine on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-30T23:46:36+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:46 pm</span></time>
        
           | <a href="/tech/2015/08/30/deploying-redmine-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/08/30/deploying-redmine-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Requirements</h2>

<ul>
<li>Ubuntu 12.04/14.04</li>
<li>Redmine</li>
<li>MySQL</li>
<li>Apache2</li>
</ul>


<h2>1. MySQL</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apt-get install mysql-server mysql-client
</span></code></pre></td></tr></table></div></figure>


<h2>2. Redmine</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install redmine redmine-mysql libapache2-mod-passenger
</span><span class='line'><span class="nv">$ </span>sudo dpkg-reconfigure redmine
</span></code></pre></td></tr></table></div></figure>


<h2>3. Apache2</h2>

<p>to link redmine to apache2</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /usr/share/redmine/public/ /var/www/redmine
</span></code></pre></td></tr></table></div></figure>


<p>edit passenger.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/mods-available/passenger.conf
</span><span class='line'>
</span><span class='line'><span class="c"># add </span>
</span><span class='line'>
</span><span class='line'>PassengerDefaultUser www-data
</span></code></pre></td></tr></table></div></figure>


<p>edit sites-available//default</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/sites-available/default
</span><span class='line'>
</span><span class='line'><span class="c"># add</span>
</span><span class='line'>
</span><span class='line'>&lt;Directory /var/www/redmine&gt;
</span><span class='line'>RailsBaseURI /redmine
</span><span class='line'>PassengerResolveSymlinksInDocumentRoot on
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>


<p>restart apache2</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service apache2 restart
</span></code></pre></td></tr></table></div></figure>


<h2>4. Testing</h2>

<ul>
<li>Site: <a href="http://ip_address/redmine">http://ip_address/redmine</a></li>
<li>Username/Password: admin/admin</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/05/01/setting-up-mysql-on-ubuntu/">Setting Up MySQL on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-01T10:50:00+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>10:50 am</span></time>
        
           | <a href="/tech/2015/05/01/setting-up-mysql-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/05/01/setting-up-mysql-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server libmysql-java
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/mysql/my.cnf
</span><span class='line'>
</span><span class='line'><span class="c"># comment bind-address</span>
</span><span class='line'><span class="c"># bind-address = 127.0.0.1</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating database</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service mysql restart
</span><span class='line'><span class="nv">$ </span>mysql -uroot -p
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>create database analytics DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;202.120.83.105&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$ </span>grant all on analytics.* TO <span class="s1">&#39;insight&#39;</span>@<span class="s1">&#39;202.120.83.101&#39;</span> IDENTIFIED BY <span class="s1">&#39;analytics_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>GRANT ALL ON *.* TO insight@<span class="s1">&#39;localhost&#39;</span>  IDENTIFIED BY <span class="s1">&#39;insight&#39;</span> WITH GRANT OPTION<span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/04/26/installing-emacs-on-ubuntu/">Installing Emacs on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-26T23:48:00+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:48 pm</span></time>
        
           | <a href="/tech/2015/04/26/installing-emacs-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/04/26/installing-emacs-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Prequistions</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install ipython
</span><span class='line'><span class="nv">$ </span>sudo apt-get install texinfo
</span><span class='line'><span class="nv">$ </span>sudo apt-get install automake autoconf
</span><span class='line'><span class="nv">$ </span>sudo apt-get install texlive
</span><span class='line'><span class="nv">$ </span>sudo apt-get install cvs
</span><span class='line'><span class="nv">$ </span>sudo apt-get install mercurial
</span></code></pre></td></tr></table></div></figure>


<h2>1. Installation</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:cassou/emacs
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># stable version</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install emacs24 emacs24-el emacs24-common-non-dfsg
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># latest version</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install emacs-snapshot-el emacs-snapshot-gtk emacs-snapshot
</span></code></pre></td></tr></table></div></figure>


<h2>2. Configuration</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone https://github.com/jhamrick/emacs.git
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>emacs
</span><span class='line'><span class="nv">$ </span>sudo /path/to/emacs/bootstrap.sh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># open the emacs, it will automatically install the plugins    </span>
</span><span class='line'><span class="nv">$ </span>emacs
</span></code></pre></td></tr></table></div></figure>


<h2>3. Trouble Shooting</h2>

<h3>3.1. error: makeinfo: command not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>error: makeinfo: <span class="nb">command </span>not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install texinfo
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. error: autogen.sh: autoconf: not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: autogen.sh: autoconf: not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install automake autoconf
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. error: pdftex: command not found</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: pdftex: <span class="nb">command </span>not found
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install texlive
</span></code></pre></td></tr></table></div></figure>


<h3>3.4. error: Error (el-get): while installing matlab-mode: The command named cvs can not be found with `executable-find</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: Error <span class="o">(</span>el-get<span class="o">)</span>: <span class="k">while</span> installing matlab-mode: The <span class="nb">command </span>named cvs can not be found with <span class="sb">`</span>executable-find
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install cvs
</span></code></pre></td></tr></table></div></figure>


<h3>3.5. error: Error (el-get): while installing pydoc-info: The command named hg can not be found with `executable-find</h3>

<p>error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>error: Error <span class="o">(</span>el-get<span class="o">)</span>: <span class="k">while</span> installing pydoc-info: The <span class="nb">command </span>named hg can not be found with <span class="sb">`</span>executable-find
</span></code></pre></td></tr></table></div></figure>


<p>solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mercurial
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/04/25/automatically-running-shell-scripts-on-ubuntu/">Automatically Running Shell Scripts on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-25T14:17:14+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:17 pm</span></time>
        
           | <a href="/tech/2015/04/25/automatically-running-shell-scripts-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/04/25/automatically-running-shell-scripts-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>configurating script</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /path/to/folder
</span><span class='line'><span class="nv">$ </span>nano file_name
</span><span class='line'><span class="c"># save and exit</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown user:group file_name
</span><span class='line'><span class="nv">$ </span>sudo chmod u+x file_name
</span></code></pre></td></tr></table></div></figure>


<p>editting shell script</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>...
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>configurating env path</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>nano ~/.bashrc
</span><span class='line'>
</span><span class='line'><span class="c"># custom bin</span>
</span><span class='line'><span class="c"># export PATH=$PATH:/path/to/bin</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/04/25/it-could-not-access-network-on-ubuntu/">It Could Not Access Network on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-25T14:08:20+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:08 pm</span></time>
        
           | <a href="/tech/2015/04/25/it-could-not-access-network-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/04/25/it-could-not-access-network-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Interfaces</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/network/interfaces
</span></code></pre></td></tr></table></div></figure>


<p>/etc/network/interfaces</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>auto lo
</span><span class='line'>iface lo inet loopback
</span><span class='line'>
</span><span class='line'>auto eth1
</span><span class='line'>iface eth1 inet static
</span><span class='line'>address 192.168.2.250
</span><span class='line'>netmask 255.255.255.0
</span><span class='line'>gateway 192.168.2.1
</span></code></pre></td></tr></table></div></figure>


<h2>2. DNS</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/resolv.conf
</span></code></pre></td></tr></table></div></figure>


<p>/etc/resolv.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Google</span>
</span><span class='line'>nameserver 8.8.8.8
</span><span class='line'>nameserver 8.8.4.4
</span><span class='line'>
</span><span class='line'><span class="c"># or</span>
</span><span class='line'><span class="c"># OpenDNS</span>
</span><span class='line'>nameserver 208.67.222.222
</span><span class='line'>nameserver 208.67.220.220
</span></code></pre></td></tr></table></div></figure>


<h2>3. Testing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo /etc/init.d/networking restart
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/04/25/installing-pycharm-on-ubuntu-12.04/">Installing PyCharm on Ubuntu 12.04</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-25T10:08:14+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:08 am</span></time>
        
           | <a href="/tech/2015/04/25/installing-pycharm-on-ubuntu-12.04/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/04/25/installing-pycharm-on-ubuntu-12.04/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h3>Installing Java</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-java7-installer
</span></code></pre></td></tr></table></div></figure>


<h3>Installing PyCharm</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p ~/opt/packages/pycharm
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ~/opt/packages/pycharm
</span><span class='line'><span class="nv">$ </span>wget http://download.jetbrains.com/python/pycharm-community-4.0.4.tar.gz
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>gzip -dc pycharm-community-4.0.4.tar.gz <span class="p">|</span> tar xf -
</span><span class='line'><span class="nv">$ </span>ln -s ~/opt/packages/pycharm/pycharm-community-4.0.4 ~/opt/pycharm
</span><span class='line'>
</span><span class='line'><span class="c"># Start PyCharm</span>
</span><span class='line'><span class="nv">$ </span>~/opt/pycharm/bin/pycharm.sh
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/02/11/setup-a-git-server/">Setup a Git Server</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-11T02:00:14+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:00 am</span></time>
        
           | <a href="/tech/2015/02/11/setup-a-git-server/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/02/11/setup-a-git-server/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Prequistions</h2>

<ul>
<li>Ubuntu 12.04</li>
<li>Git Server/Client</li>
<li>Gitolite</li>
<li>Gitweb</li>
<li>Apache</li>
</ul>


<h2>1. Git Server</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install git-core
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo adduser --system --shell /bin/bash --group --disabled-password --home /home/git git
</span><span class='line'><span class="nv">$ </span>sudo passwd git
</span></code></pre></td></tr></table></div></figure>


<h2>2. Gitolite</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install gitolite
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>cp ~/.ssh/id_rsa.pub /tmp/<span class="k">$(</span>whoami<span class="k">)</span>.pub
</span><span class='line'><span class="nv">$ </span>sudo su - git
</span><span class='line'><span class="nv">$ </span>gl-setup /tmp/*.pub
</span><span class='line'>
</span><span class='line'><span class="c"># config the path of gitolite</span>
</span><span class='line'><span class="c"># save and exit</span>
</span><span class='line'><span class="c"># path: /home/git/project.list</span>
</span><span class='line'><span class="c"># path: /home/gt/repositories</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git config --global user.email <span class="s2">&quot;you@example.com&quot;</span>
</span><span class='line'><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;Your Name&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mkdir gitadmin
</span><span class='line'><span class="nv">$ </span>sudo chown -R user:group /gitadmin
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /gitadmin
</span><span class='line'><span class="nv">$ </span>git clone git@ip:gitolite-admin.git
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gitolite-admin
</span><span class='line'>
</span><span class='line'><span class="c"># config key and gitolite.conf</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;comment&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h2>3. Gitweb</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install gitweb
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /var/www/
</span><span class='line'><span class="nv">$ </span>sudo mkdir gitweb
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gitweb
</span><span class='line'><span class="nv">$ </span>sudo ln -s /usr/share/gitweb/* .  <span class="c"># note: . is a must</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/gitweb.conf
</span><span class='line'><span class="nv">$ </span>sudo chmod <span class="m">777</span> -R /home/git/repositories
</span></code></pre></td></tr></table></div></figure>


<p>gitweb.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># path to git projects (&lt;project&gt;.git)</span>
</span><span class='line'><span class="c">#$projectroot = &quot;/var/cache/git&quot;;</span>
</span><span class='line'><span class="nv">$projectroot</span> <span class="o">=</span> <span class="s2">&quot;/home/git/repositories&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># directory to use for temp files</span>
</span><span class='line'><span class="nv">$git_temp</span> <span class="o">=</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># target of the home link on top of all pages</span>
</span><span class='line'><span class="c">#$home_link = $my_uri || &quot;/&quot;;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># html text to include at home page</span>
</span><span class='line'><span class="c">#$home_text = &quot;indextext.html&quot;;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># file with project list; by default, simply scan the projectroot dir.</span>
</span><span class='line'><span class="c">#$projects_list = $projectroot;</span>
</span><span class='line'><span class="nv">$projects_list</span> <span class="o">=</span> <span class="s2">&quot;/home/git/project.list&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># stylesheet to use</span>
</span><span class='line'>@stylesheets <span class="o">=</span> <span class="o">(</span><span class="s2">&quot;http://202.120.83.104:8090/static/gitweb.css&quot;</span><span class="o">)</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># javascript code for gitweb</span>
</span><span class='line'><span class="nv">$javascript</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/gitweb.js&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># logo to use</span>
</span><span class='line'><span class="nv">$logo</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/git-logo.png&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># the &#39;favicon&#39;</span>
</span><span class='line'><span class="nv">$favicon</span> <span class="o">=</span> <span class="s2">&quot;http://202.120.83.104:8090/static/git-favicon.png&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># git-diff-tree(1) options to use for generated patches</span>
</span><span class='line'><span class="c">#@diff_opts = (&quot;-M&quot;);</span>
</span><span class='line'>@diff_opts <span class="o">=</span> <span class="o">()</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Apache</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install apache2
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># note1: web path - /var/www</span>
</span><span class='line'><span class="c"># note2: cgi path - /usr/lib/cgi-bin/</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /usr/lib/cgi-bin/               <span class="c"># check if gitweb.cgi is here</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/sites-available/default
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/ports.conf
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apache2/apache2.conf
</span><span class='line'><span class="nv">$ </span>sudo /etc/init.d/apache2 restart
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/sites0available/default</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;VirtualHost *:8090&gt;
</span><span class='line'>        <span class="c">#ServerAdmin webmaster@localhost</span>
</span><span class='line'>        ServerAdmin insight@202.120.83.104
</span><span class='line'>
</span><span class='line'>        DocumentRoot /var/www/gitweb
</span><span class='line'>        &lt;Directory /&gt;
</span><span class='line'>                Options FollowSymLinks
</span><span class='line'>                AllowOverride None
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>        &lt;Directory /var/www/&gt;
</span><span class='line'>                Options Indexes FollowSymLinks MultiViews
</span><span class='line'>                AllowOverride None
</span><span class='line'>                Order allow,deny
</span><span class='line'>                allow from all
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>        SetEnv GIT_PROJECT_ROOT /home/git/repositories
</span><span class='line'>        SetEnv GIT_HTTP_EXPORT_ALL
</span><span class='line'>        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
</span><span class='line'>        &lt;Directory <span class="s2">&quot;/usr/lib/cgi-bin&quot;</span>&gt;
</span><span class='line'>                AllowOverride None
</span><span class='line'>                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
</span><span class='line'>                Order allow,deny
</span><span class='line'>                Allow from all
</span><span class='line'>        &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>        ErrorLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/error.log
</span><span class='line'>
</span><span class='line'>        <span class="c"># Possible values include: debug, info, notice, warn, error, crit,</span>
</span><span class='line'>        <span class="c"># alert, emerg.</span>
</span><span class='line'>        LogLevel warn
</span><span class='line'>
</span><span class='line'>        CustomLog <span class="k">${</span><span class="nv">APACHE_LOG_DIR</span><span class="k">}</span>/access.log combined
</span><span class='line'>
</span><span class='line'>    Alias /doc/ <span class="s2">&quot;/usr/share/doc/&quot;</span>
</span><span class='line'>    &lt;Directory <span class="s2">&quot;/usr/share/doc/&quot;</span>&gt;
</span><span class='line'>        Options Indexes MultiViews FollowSymLinks
</span><span class='line'>        AllowOverride None
</span><span class='line'>        Order deny,allow
</span><span class='line'>        Deny from all
</span><span class='line'>        Allow from 127.0.0.0/255.0.0.0 ::1/128
</span><span class='line'>    &lt;/Directory&gt;
</span><span class='line'>
</span><span class='line'>&lt;/VirtualHost&gt;
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/ports.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>NameVirtualHost *:8090
</span><span class='line'><span class="c">#Listen 80</span>
</span><span class='line'>Listen 202.120.83.104:8090
</span></code></pre></td></tr></table></div></figure>


<p>/etc/apache2/apache2.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Gitweb host</span>
</span><span class='line'>ServerName 202.120.83.104:8090
</span></code></pre></td></tr></table></div></figure>


<h2>Testing</h2>

<p>link: <a href="http://ip_address/gitweb">http://ip_address/gitweb</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2015/02/01/configurating-nginx-for-django-projects-on-ubuntu/">Configurating Nginx for Django Projects on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-01T10:54:00+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>10:54 am</span></time>
        
           | <a href="/tech/2015/02/01/configurating-nginx-for-django-projects-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2015/02/01/configurating-nginx-for-django-projects-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Nginx</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install nginx
</span></code></pre></td></tr></table></div></figure>


<p>configurating users</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo groupadd --system edx
</span><span class='line'><span class="nv">$ </span>sudo useradd --system --gid edx --home /edx/analytics/apps/edx-analytics-data-api analyticsapi
</span><span class='line'><span class="nv">$ </span>sudo useradd --system --gid edx --home /edx/analytics/apps/edx-analytics-dashboard analyticsdashboard
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown -R insight:insight /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'><span class="nv">$ </span>sudo chmod -R g+w /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo chown -R insight:insight /edx/analytics/apps/edx-analytics-dashboard
</span><span class='line'><span class="nv">$ </span>sudo chmod -R g+w /edx/analytics/apps/edx-analytics-dashboard
</span></code></pre></td></tr></table></div></figure>


<h2>2. Supervisor</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install supervisor
</span></code></pre></td></tr></table></div></figure>


<p>configurating supervisor</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics
</span><span class='line'><span class="nv">$ </span>mkdir -p var/logs
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>var/logs
</span><span class='line'><span class="nv">$ </span>touch gunicorn_supervisor.log
</span></code></pre></td></tr></table></div></figure>


<h2>3. Django Project</h2>

<p>django settings</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api/app/analyticsdataserver/settings
</span><span class='line'><span class="nv">$ </span>nano production.py
</span></code></pre></td></tr></table></div></figure>


<p>gunicorn</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>api_env/bin/activate
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>app
</span><span class='line'><span class="nv">$ </span>pip install gunicorn
</span><span class='line'><span class="nv">$ </span>pip install setproctitle
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>app
</span><span class='line'><span class="nv">$ </span>gunicorn analyticsdataserver.wsgi:application --bind 0.0.0.0:9001
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/analytics/apps/edx-analytics-data-api/api_env/bin
</span><span class='line'><span class="nv">$ </span>sudo nano gunicorn_start
</span><span class='line'><span class="nv">$ </span>sudo chown insight:insight gunicorn_start
</span><span class='line'><span class="nv">$ </span>sudo chmod u+x gunicorn_start
</span></code></pre></td></tr></table></div></figure>


<p>gunicorn_start</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">NAME</span><span class="o">=</span><span class="s2">&quot;analyticsapi&quot;</span> <span class="c"># Name of the application</span>
</span><span class='line'><span class="nv">DJANGODIR</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/ <span class="c"># Django project directory</span>
</span><span class='line'><span class="nv">SOCKFILE</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/var/run/gunicorn.sock <span class="c"># we will communicte using this unix socket</span>
</span><span class='line'><span class="nv">USER</span><span class="o">=</span>insight <span class="c"># the user to run as</span>
</span><span class='line'><span class="nv">GROUP</span><span class="o">=</span>edx <span class="c"># the group to run as</span>
</span><span class='line'><span class="nv">NUM_WORKERS</span><span class="o">=</span><span class="m">3</span> <span class="c"># how many worker processes should Gunicorn spawn</span>
</span><span class='line'><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>analyticsdataserver.settings <span class="c"># which settings file should Django use</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Starting $NAME&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Activate the virtual environment</span>
</span><span class='line'><span class="nb">cd</span> <span class="nv">$DJANGODIR</span>
</span><span class='line'><span class="nb">source </span>api_env/bin/activate
</span><span class='line'><span class="c">#export DJANGO_SETTINGS_MODULE=$DJANGO_SETTINGS_MODULE</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/edx/analytics/apps/edx-analytics-data-api/api_env/bin/python
</span><span class='line'>
</span><span class='line'><span class="c"># Create the run directory if it doesn&#39;t exist</span>
</span><span class='line'><span class="nv">RUNDIR</span><span class="o">=</span><span class="k">$(</span>dirname <span class="nv">$SOCKFILE</span><span class="k">)</span>
</span><span class='line'><span class="nb">test</span> -d <span class="nv">$RUNDIR</span> <span class="o">||</span> mkdir -p <span class="nv">$RUNDIR</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Start your Django Unicorn</span>
</span><span class='line'><span class="c"># Programs meant to be run under supervisor should not daemonize themselves (do not use --daemon)</span>
</span><span class='line'><span class="nb">cd </span>app
</span><span class='line'>gunicorn <span class="se">\</span>
</span><span class='line'>--name <span class="nv">$NAME</span> <span class="se">\</span>
</span><span class='line'>--workers <span class="nv">$NUM_WORKERS</span>  <span class="se">\</span>
</span><span class='line'>analyticsdataserver.wsgi:application --bind 0.0.0.0:9001
</span></code></pre></td></tr></table></div></figure>


<p>supervisor</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/supervisor/conf.d/analyticsapi.conf
</span></code></pre></td></tr></table></div></figure>


<p>analyticsapi.conf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>program:analyticsapi<span class="o">]</span>
</span><span class='line'><span class="nb">command</span> <span class="o">=</span> /edx/analytics/apps/edx-analytics-data-api/api_env/bin/gunicorn_start                    <span class="p">;</span> Command to start app
</span><span class='line'><span class="nv">user</span> <span class="o">=</span> insight                                                                                     <span class="p">;</span> User to run as
</span><span class='line'><span class="nv">stdout_logfile</span> <span class="o">=</span> /edx/analytics/apps/edx-analytics-data-api/var/logs/gunicorn_supervisor.log       <span class="p">;</span> Where to write log messages
</span><span class='line'><span class="nv">redirect_stderr</span> <span class="o">=</span> <span class="nb">true</span>                                                                             <span class="p">;</span> Save stderr in the same log
</span></code></pre></td></tr></table></div></figure>


<p>run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo supervisorctl reread
</span><span class='line'><span class="nv">$ </span>sudo supervisorctl update
</span><span class='line'><span class="nv">$ </span>sudo supervisorctl start analyticsapi
</span></code></pre></td></tr></table></div></figure>


<h2>4. Configurating Nginx</h2>

<p>modification</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/nginx/sites-available/analyticsapi
</span></code></pre></td></tr></table></div></figure>


<p>analyticsapi</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>server <span class="o">{</span>
</span><span class='line'>listen   8088<span class="p">;</span>
</span><span class='line'>server_name 202.120.83.105<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>client_max_body_size 4G<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>access_log /edx/analytics/apps/edx-analytics-data-api/var/logs/nginx-access.log<span class="p">;</span>
</span><span class='line'>error_log /edx/analytics/apps/edx-analytics-data-api/var/logs/nginx-error.log<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>location ~ ^/static/ <span class="o">{</span>
</span><span class='line'>    autoindex on<span class="p">;</span>
</span><span class='line'>    expires 1y<span class="p">;</span>
</span><span class='line'>    root /edx/analytics/apps/edx-analytics-data-api/app/<span class="p">;</span>
</span><span class='line'>    <span class="c">#alias  /edx/analytics/apps/edx-analytics-data-api/app/assets;</span>
</span><span class='line'>    <span class="c">#alias http://202.120.83.105/static/rest_framework_swagger;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location ~ ^/media/ <span class="o">{</span>
</span><span class='line'>    root /edx/analytics/apps/edx-analytics-data-api/app/<span class="p">;</span>
</span><span class='line'>    expires 24h<span class="p">;</span>
</span><span class='line'>    access_log   off<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location / <span class="o">{</span>
</span><span class='line'>    try_files <span class="nv">$uri</span> @proxy<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>location @proxy <span class="o">{</span>
</span><span class='line'>    proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header Host <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_redirect off<span class="p">;</span>
</span><span class='line'>    proxy_pass http://0.0.0.0:9001<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /etc/nginx/sites-available/analyticsapi /etc/nginx/sites-enabled/analyticsapi
</span><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h3>5. Testing</h3>

<p>open the link: <a href="http://202.120.83.105:8088">http://202.120.83.105:8088</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/12/15/installing-jenkins-on-ubuntu/">Installing Jenkins on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-15T11:46:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:46 am</span></time>
        
           | <a href="/tech/2014/12/15/installing-jenkins-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/12/15/installing-jenkins-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Jenkins</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>wget -q -O - https://jenkins-ci.org/debian/jenkins-ci.org.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo sh -c <span class="s1">&#39;echo deb http://pkg.jenkins-ci.org/debian binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39;</span>
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install jenkins
</span></code></pre></td></tr></table></div></figure>


<p>open the link: <a href="http://202.120.83.101:8080">http://202.120.83.101:8080</a></p>

<h2>Nginx</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo aptitude -y install nginx
</span><span class='line'>
</span><span class='line'><span class="c"># remove default setting</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /etc/nginx/sites-available
</span><span class='line'><span class="nv">$ </span>sudo cp default default.backup
</span><span class='line'><span class="nv">$ </span>sudo rm default ../sites-enabled/default
</span></code></pre></td></tr></table></div></figure>


<p>/etc.nginx.sites-available: add the configurations of jenkins</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano jenkins
</span><span class='line'>
</span><span class='line'>upstream app_server <span class="o">{</span>
</span><span class='line'>server 127.0.0.1:8080 <span class="nv">fail_timeout</span><span class="o">=</span>0<span class="p">;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>server <span class="o">{</span>
</span><span class='line'>listen 80<span class="p">;</span>
</span><span class='line'>listen <span class="o">[</span>::<span class="o">]</span>:80 default <span class="nv">ipv6only</span><span class="o">=</span>on<span class="p">;</span>
</span><span class='line'>server_name ci.yourcompany.com<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>location / <span class="o">{</span>
</span><span class='line'>    proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
</span><span class='line'>    proxy_set_header Host <span class="nv">$http_host</span><span class="p">;</span>
</span><span class='line'>    proxy_redirect off<span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span>!-f <span class="nv">$request_filename</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  proxy_pass http://app_server<span class="p">;</span>
</span><span class='line'>  <span class="nb">break</span><span class="p">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>adding the link</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ln -s /etc/nginx/sites-available/jenkins /etc/nginx/sites-enabled/
</span></code></pre></td></tr></table></div></figure>


<p>start service</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service nginx restart
</span></code></pre></td></tr></table></div></figure>


<h2>Configurating Jenkins</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-java7-installer
</span><span class='line'><span class="nv">$ </span>sudo update-java-alternatives -s java-7-oracle
</span><span class='line'><span class="nv">$ </span>sudo update-alternatives --config java
</span></code></pre></td></tr></table></div></figure>


<p>configurating java home</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano <span class="nv">$HOME</span>/.bashrc
</span></code></pre></td></tr></table></div></figure>


<p>adding the configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># set JAVA_HOME</span>
</span><span class='line'><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java-7-oracle/
</span><span class='line'><span class="nb">export </span>JAVA_HOME
</span><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>
</span><span class='line'><span class="nb">export </span>PATH
</span></code></pre></td></tr></table></div></figure>


<p>source</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">source</span> <span class="nv">$HOME</span>/.bashrc
</span><span class='line'><span class="nb">echo</span> <span class="nv">$JAVA_HOME</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating jenkins</p>

<ul>
<li><p>Manage Jenkins -> Configure System -> JDK/Ant/Maven</p></li>
<li><p>Manage Jenkins -> Configure Global Security -> security/matrix/admin</p></li>
<li><p>restart jenkins, sign up with admin</p></li>
<li><p>Manage Jenkins -> Manage Plugins -> Git Plugin</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/12/03/installing-cloudera-hadoop-on-ubuntu/">Installing Cloudera Hadoop on Ubuntu</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-03T11:10:00+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>11:10 am</span></time>
        
           | <a href="/tech/2014/12/03/installing-cloudera-hadoop-on-ubuntu/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/12/03/installing-cloudera-hadoop-on-ubuntu/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>NOTE: All hosts should be finished all the steps listed below.</p>

<h2>Preparation</h2>

<p>hosts</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>202.120.83.101 insight-master
</span><span class='line'>202.120.83.102 insight-slave1
</span><span class='line'>202.120.83.103 insight-slave2
</span><span class='line'>202.120.83.104 insight-slave3
</span><span class='line'>202.120.83.105 insight-slave4</span></code></pre></td></tr></table></div></figure>


<p>updating softwares</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get dist-upgrade
</span></code></pre></td></tr></table></div></figure>


<p>modifing the hosts</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/hosts
</span></code></pre></td></tr></table></div></figure>


<p>hosts</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>127.0.0.1       localhost
</span><span class='line'><span class="c">#127.0.1.1      insight</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Cloudera-Hadoop Cluster</span>
</span><span class='line'>202.120.83.101 insight-master
</span><span class='line'>202.120.83.102 insight-slave1
</span><span class='line'>202.120.83.103 insight-slave2
</span><span class='line'>202.120.83.104 insight-slave3
</span><span class='line'>202.120.83.105 insight-slave4
</span></code></pre></td></tr></table></div></figure>


<p>ssh</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install ssh
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ssh-keygen -t rsa
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># copy the publick key</span>
</span><span class='line'><span class="nv">$ </span>cat /home/insight/.ssh/id_rsa.pub
</span><span class='line'><span class="nv">$ </span>sudo nano /home/insight/.ssh/authorized_keys
</span></code></pre></td></tr></table></div></figure>


<p>authorized_keys</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># 202.120.83.101</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+JcGP7MopXAdZUJR1AK7tCXHELACXh++6kxUf1FCAwdooJ8MlLiqMJTgCCSNMghiB0w442XB+lohQmFPDTLJDRaTZxbCvo82aD0sJ1slaxZDuu5/B3hv+pO7Nz4P1CHLw6JHsY+ml48GjX2FhI/iYDFg0RyEt3d91f+Bha9nubB3+uh9MGhAfpxsxMlc1J4/GTm6F1YfGV5aVfrztEM07bqVVaMS6tT0wrp5L57IzBhdcTOhd9asEmO/OpCQLytoIFS5kTv+M6bTU23ChMj7Df4BNEr2idwqUI/h3zx/jT25LR6qryWiwxZ2jho1yYUMM3jN6LqKSKXOarcrwgjOX insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.102</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHa6O+7kg+T6+G5UMhiPqG9PLcNu0LvO5VPIsuTMbWaer8w8ZRJE2R1KMlXmowMpiADFxeGWUEhruxyDp16JFv/axYc67dfvS1SSJiuNnAZ5PDQ7EIbPcOZqP7641XWY1kHrYbBr4gWnb/EectDQAzdb3GScWlEAu9/vamu7baHfm6C2X+0o3m3nkfB2i/Fd35TGL0xMJx3H/oOcX7Jm8MqCSgdJwIqBxilfqRrHC4VICYB2zDmzFNpgWEPlZZ0do1BKXOBddKMU7c0tgRCcuPLtMWJkIrEZIR7K9UGY7GniXA2Zq8GytjZj1215CyXaLQD9XhC5f0td3KxgmWCzxN insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.103</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDeICFND0O2JSt7lXo7r8cFiqhFpZ9Vbc9AG2yQau6xQPvbwPZd6xtCljUWMTAMhdKOFsJp6TbYPWQr25HYUxw+7VUziN1dyXrfchRB4uBQqvYmwcay2vBJlZRAfEK1Ahm6LumXi+kozmHm+7SjBhY/24IRxLf+G1g7ldNW3jLx+GNXtHffH9mw6Uc/ihV/AaFHThR1s4j28mLTBMwVxAHSXadwN863u/hd9rsES7vpxKRNK6U3TymPE5gIRPkXTO5xoxoGKX9E8ClKjl7/D1/sOJI0WZWhlslhSQDGLpMLU1uwK8RT5f4saqZyOv9kva7ad1gIYXXibmhzuct7sk67 insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.104</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCbDG89bL9yNik01Xo2fhf8QHh1MzWcvIRIfK1GyGOh5b8LvaE3iZtX2RKYI4CCzvJ6y3A8peTWUuRZSV0lO7cpyOIoFIFRHScSuLulv8dHj0gYyjsH66R6lbnFYk72Ih/XzRUSH8Fo4Ar+eXWVZfBzWZWTL3ftRR7fmc5mZP+4IH7LdgZI2Wgb/GwksCx09vlMQmiQzHIYRs3iD6fsfL5prvcPKHYmwqslZcrBuy9nW2s0un3yRTeWwxYgRT15CHKXeOq5N+H0WxORCkY7FvLttPQbaAhbldvnir3NaIwCnds7vOvry5dm79LJzIC+2br7WQ2spUGCRtrzw8IcO4N9 insight@insight
</span><span class='line'>
</span><span class='line'><span class="c"># 202.120.83.105</span>
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAjeDr/HcUsjs7xq7MlpFnGbr/hDr9SaQhet4Fp8UQnQKwuFVtUqP48Dwr0sVYY8xueqhylI2q9wL+rovIk2T1DKeD+z0BX9P1C3CrcHNMpirEotdQd2OGGwsIEMTeMugox1oER3LWLjGBcxZ71KOx2INSxBq/6EoDSOhMIbVH0ZC9fPdG/mEScf3VmvzBT1UwyewZVoVPqSr6NmOJ1RVxKA9c0P7hHtBTcUhwFNLgitM8ca6Y4eL6DsTuIl3zQA+dSnpa8IudCY1oARnphQInHIa9wCrnMCAEgRqPHfyRwg8hcOrOerWEq2Q95m15dPoIrmfy8T63p0zrhKXN34lJ insight@insight
</span></code></pre></td></tr></table></div></figure>


<p>validation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh 202.120.83.xxx
</span></code></pre></td></tr></table></div></figure>


<h2>MySQL</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server libmysql-java
</span></code></pre></td></tr></table></div></figure>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/mysql/conf.d/mysql_cloudera_manager.cnf
</span></code></pre></td></tr></table></div></figure>


<p>mysql_cloudera_manager.cnf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>mysqld<span class="o">]</span>
</span><span class='line'>transaction-isolation<span class="o">=</span>READ-COMMITTED
</span><span class='line'><span class="c"># Disabling symbolic-links is recommended to prevent assorted security risks;</span>
</span><span class='line'><span class="c"># to do so, uncomment this line:</span>
</span><span class='line'><span class="c"># symbolic-links=0</span>
</span><span class='line'>
</span><span class='line'><span class="nv">key_buffer</span>              <span class="o">=</span> 16M
</span><span class='line'><span class="nv">key_buffer_size</span>         <span class="o">=</span> 32M
</span><span class='line'><span class="nv">max_allowed_packet</span>      <span class="o">=</span> 16M
</span><span class='line'><span class="nv">thread_stack</span>            <span class="o">=</span> 256K
</span><span class='line'><span class="nv">thread_cache_size</span>       <span class="o">=</span> 64
</span><span class='line'><span class="nv">query_cache_limit</span>       <span class="o">=</span> 8M
</span><span class='line'><span class="nv">query_cache_size</span>        <span class="o">=</span> 64M
</span><span class='line'><span class="nv">query_cache_type</span>        <span class="o">=</span> 1
</span><span class='line'><span class="c"># Important: see Configuring the Databases and Setting max_connections</span>
</span><span class='line'><span class="nv">max_connections</span>         <span class="o">=</span> 550
</span><span class='line'>
</span><span class='line'><span class="c"># log-bin should be on a disk with enough free space</span>
</span><span class='line'>log-bin<span class="o">=</span>/var/log/mysql/mysql_binary_log
</span><span class='line'>
</span><span class='line'><span class="c"># For MySQL version 5.1.8 or later. Comment out binlog_format for older versions.</span>
</span><span class='line'><span class="nv">binlog_format</span>           <span class="o">=</span> mixed
</span><span class='line'>
</span><span class='line'><span class="nv">read_buffer_size</span> <span class="o">=</span> 2M
</span><span class='line'><span class="nv">read_rnd_buffer_size</span> <span class="o">=</span> 16M
</span><span class='line'><span class="nv">sort_buffer_size</span> <span class="o">=</span> 8M
</span><span class='line'><span class="nv">join_buffer_size</span> <span class="o">=</span> 8M
</span><span class='line'>
</span><span class='line'><span class="c"># InnoDB settings</span>
</span><span class='line'><span class="nv">innodb_file_per_table</span> <span class="o">=</span> 1
</span><span class='line'><span class="nv">innodb_flush_log_at_trx_commit</span>  <span class="o">=</span> 2
</span><span class='line'><span class="nv">innodb_log_buffer_size</span>          <span class="o">=</span> 64M
</span><span class='line'><span class="nv">innodb_buffer_pool_size</span>         <span class="o">=</span> 4G
</span><span class='line'><span class="nv">innodb_thread_concurrency</span>       <span class="o">=</span> 8
</span><span class='line'><span class="nv">innodb_flush_method</span>             <span class="o">=</span> O_DIRECT
</span><span class='line'><span class="nv">innodb_log_file_size</span> <span class="o">=</span> 512M
</span><span class='line'>
</span><span class='line'><span class="o">[</span>mysqld_safe<span class="o">]</span>
</span><span class='line'>log-error<span class="o">=</span>/var/log/mysqld.log
</span><span class='line'>pid-file<span class="o">=</span>/var/run/mysqld/mysqld.pid
</span></code></pre></td></tr></table></div></figure>


<p>configurating my.cnf</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo nano /etc/mysql/my.cnf
</span><span class='line'>
</span><span class='line'><span class="c"># comment the bind-address</span>
</span><span class='line'><span class="c"># bind-address   = 127.0.0.1</span>
</span></code></pre></td></tr></table></div></figure>


<p>configurating innodb</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo su
</span><span class='line'><span class="nv">$ </span>mv /var/lib/mysql/ib_logfile* /var/tmp/
</span><span class='line'><span class="nv">$ </span><span class="nb">exit</span>
</span></code></pre></td></tr></table></div></figure>


<p>initialization</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service mysql restart
</span><span class='line'><span class="nv">$ </span>mysql -uroot -p
</span><span class='line'>
</span><span class='line'>mysql&gt; create database amon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on amon.* TO <span class="s1">&#39;amon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;amon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on amon.* TO <span class="s1">&#39;amon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;amon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database smon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on smon.* TO <span class="s1">&#39;smon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;smon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on smon.* TO <span class="s1">&#39;smon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;smon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database rman DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on rman.* TO <span class="s1">&#39;rman&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;rman_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on rman.* TO <span class="s1">&#39;rman&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;rman_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database hmon DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hmon.* TO <span class="s1">&#39;hmon&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;hmon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hmon.* TO <span class="s1">&#39;hmon&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;hmon_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; create database hive DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hive.* TO <span class="s1">&#39;hive&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;hive_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on hive.* TO <span class="s1">&#39;hive&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;hive_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>mysql&gt; create database nav DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on nav.* TO <span class="s1">&#39;nav&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;nav_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on nav.* TO <span class="s1">&#39;nav&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;nav_password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>mysql&gt; create database navms DEFAULT CHARACTER SET utf8<span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on navms.* TO <span class="s1">&#39;navms&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;navms_password&#39;</span><span class="p">;</span>
</span><span class='line'>mysql&gt; grant all on navms.* TO <span class="s1">&#39;navms&#39;</span>@<span class="s1">&#39;insight-master&#39;</span> IDENTIFIED BY <span class="s1">&#39;navms_password&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Manager</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-software-properties
</span><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list.d/cloudera.list
</span></code></pre></td></tr></table></div></figure>


<p>cloudera.list</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span></code></pre></td></tr></table></div></figure>


<p>adding key</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -s http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh/archive.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<p>installing manager by manual</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get -q -y --force-yes install oracle-j2sdk1.7 cloudera-manager-server-db cloudera-manager-server cloudera-manager-daemons cloudera-manager-agent
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># config cloudera-manager-server db</span>
</span><span class='line'><span class="nv">$ </span>sudo /usr/share/cmf/schema/scm_prepare_database.sh mysql  -uroot -p --scm-host localhost scm scm scm_password
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># start service</span>
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db initdb
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db start
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server start
</span></code></pre></td></tr></table></div></figure>


<p>installing manager automatically</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo ./cloudera-mangaer-installer.bin
</span></code></pre></td></tr></table></div></figure>


<p>steps:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>apt-get -q -y --force-yes install oracle-j2sdk1.7 cloudera-manager-server-db cloudera-manager-server cloudera-manager-daemons
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db initdb
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server-db start
</span><span class='line'><span class="nv">$ </span>service cloudera-scm-server start
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Agent</h2>

<p>installing java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install python-software-properties
</span><span class='line'><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install oracle-j2sdk1.7
</span></code></pre></td></tr></table></div></figure>


<p>adding sources</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/apt/sources.list.d/cloudera.list
</span></code></pre></td></tr></table></div></figure>


<p>cloudera.list</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh precise-cdh5 contrib
</span><span class='line'>deb <span class="o">[</span><span class="nv">arch</span><span class="o">=</span>amd64<span class="o">]</span> http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span><span class='line'>deb-src http://archive.cloudera.com/cm5/ubuntu/precise/amd64/cm precise-cm5 contrib
</span></code></pre></td></tr></table></div></figure>


<p>adding keys</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -s http://archive.cloudera.com/cdh5/ubuntu/precise/amd64/cdh/archive.key <span class="p">|</span> sudo apt-key add -
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span></code></pre></td></tr></table></div></figure>


<p>installing agent</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install cloudera-manager-agent cloudera-manager-daemons
</span></code></pre></td></tr></table></div></figure>


<p>configurating agent</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo nano /etc/cloudera-scm-agent/config.ini
</span></code></pre></td></tr></table></div></figure>


<p>config.ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">server_host</span><span class="o">=</span>insight-master  <span class="c"># master host name</span>
</span></code></pre></td></tr></table></div></figure>


<p>start services</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<h2>Cloudera Hadoop</h2>

<p>restart agents on slaves</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<p>restart master</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service cloudera-scm-server restart
</span><span class='line'><span class="nv">$ </span> sudo service cloudera-scm-agent  restart
</span></code></pre></td></tr></table></div></figure>


<p>open the link on browser:</p>

<ul>
<li><a href="http://202.120.83.101:7180">http://202.120.83.101:7180</a></li>
<li>username/password: admin/admin</li>
</ul>


<p>steps:</p>

<ul>
<li><p>step1. login</p></li>
<li><p>step2. welcome</p></li>
<li><p>step3. select hosts</p></li>
<li><p>step4. express-wizard</p></li>
<li><p>step5. install parcel</p></li>
<li><p>step6. host inspector</p></li>
</ul>


<p>updating swappiness</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>vagrant ssh insight-master/insight-slave1/insight-slave2/insight-slave3/insight-slave4 <span class="c"># for all hosts</span>
</span><span class='line'>sudo nano /proc/sys/vm/swappiness
</span><span class='line'>
</span><span class='line'><span class="c"># modification</span>
</span><span class='line'><span class="m">60</span> -&gt; 0
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>step7. select services</p></li>
<li><p>step8. assign roles</p></li>
<li><p>step9. config db</p></li>
<li><p>step10. review steps</p></li>
<li><p>step11. start services</p></li>
<li><p>step12. done</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/29/docker/">Docker</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-29T19:35:45+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:35 pm</span></time>
        
           | <a href="/tech/2014/11/29/docker/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/29/docker/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<h2>2.</h2>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/27/package-managers/">Package Managers</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-27T12:52:01+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:52 pm</span></time>
        
           | <a href="/tech/2014/11/27/package-managers/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/27/package-managers/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><table>
<thead>
<tr>
<th style="text-align:left;"> SW      </th>
<th style="text-align:left;"> Package Manager </th>
<th style="text-align:left;"> Config File     </th>
<th style="text-align:left;"> Version Control </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> redhat  </td>
<td style="text-align:left;"> rpm             </td>
<td style="text-align:left;">                 </td>
<td style="text-align:left;">                 </td>
</tr>
<tr>
<td style="text-align:left;"> ubuntu  </td>
<td style="text-align:left;"> apt             </td>
<td style="text-align:left;">                 </td>
<td style="text-align:left;">                 </td>
</tr>
<tr>
<td style="text-align:left;"> python  </td>
<td style="text-align:left;"> pip             </td>
<td style="text-align:left;"> requirments.txt </td>
<td style="text-align:left;"> virtualenv      </td>
</tr>
<tr>
<td style="text-align:left;"> ruby    </td>
<td style="text-align:left;"> gem             </td>
<td style="text-align:left;"> Gemfile         </td>
<td style="text-align:left;"> rvm             </td>
</tr>
<tr>
<td style="text-align:left;"> node.js </td>
<td style="text-align:left;"> npm             </td>
<td style="text-align:left;">                 </td>
<td style="text-align:left;">                 </td>
</tr>
<tr>
<td style="text-align:left;"> js      </td>
<td style="text-align:left;"> bower           </td>
<td style="text-align:left;"> bower.json      </td>
<td style="text-align:left;">                 </td>
</tr>
</tbody>
</table>


<h2>1. RedHat</h2>

<h2>2. Ubuntu</h2>

<h3>2.1. Installation</h3>

<h3>2.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update <span class="o">&amp;&amp;</span> upgrade
</span><span class='line'><span class="nv">$ </span>sudo apt-get install SW
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Configuration</h3>

<h3>2.4. Sources</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim /etc/apt/sources.list
</span></code></pre></td></tr></table></div></figure>


<h2>3. Python</h2>

<h3>3.1. Installation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo easy_install pip
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install PACKAGE
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>pip uninstall PACKAGE
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. Configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim requirements.txt
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mkdir requirements
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>requirements
</span><span class='line'><span class="nv">$ </span>vim base.txt
</span><span class='line'><span class="nv">$ </span>vim dev.txt
</span><span class='line'><span class="nv">$ </span>vim production.txt
</span><span class='line'><span class="nv">$ </span>vim tests.txt
</span></code></pre></td></tr></table></div></figure>


<h3>3.4. Sources</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install PACKAGE -i http://xxxx
</span></code></pre></td></tr></table></div></figure>


<p>source list</p>

<h2>4. Ruby</h2>

<h3>4.1. Installation</h3>

<h3>4.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>gem install PACKAGE
</span><span class='line'><span class="nv">$ </span>gem install -g PACKAGE
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>gem uninstall PACKAGE
</span></code></pre></td></tr></table></div></figure>


<h3>4.3. Configuration</h3>

<p>Gemfile</p>

<h3>4.4. Sources</h3>

<h2>5. Node.js</h2>

<h3>5.1 Installation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get upgrade
</span><span class='line'><span class="nv">$ </span>sudo reboot
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install curl
</span><span class='line'><span class="nv">$ </span>sudo curl -sL https://deb.nodesource.com/setup <span class="p">|</span> sudo bash -
</span><span class='line'><span class="nv">$ </span>sudo apt-get install nodejs
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo apt-get install build-essential
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>node -v
</span><span class='line'><span class="nv">$ </span>npm -v
</span></code></pre></td></tr></table></div></figure>


<h3>5.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>npm install PACKAGE
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>npm config <span class="nb">set </span>registry http://registry.cnpmjs.org // change <span class="nb">source</span>
</span><span class='line'><span class="nv">$ </span>npm info express  // package info
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>npm --registry http://registry.cnpmjs.org info express
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>nano ~/.npmrc   // config npm
</span><span class='line'><span class="nv">$ registry</span> <span class="o">=</span>https://registry.npm.taobao.org   // config <span class="nb">source</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5.3. Configuration</h3>

<h3>5.4. Sources</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>http://registry.cnpmjs.org
</span><span class='line'>https://registry.npm.taobao.org
</span></code></pre></td></tr></table></div></figure>


<h2>6. Javascript</h2>

<h3>6.1. Installation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>npm install -g bower
</span></code></pre></td></tr></table></div></figure>


<h3>6.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>bower install PACKAGE
</span></code></pre></td></tr></table></div></figure>


<h3>6.3. Configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>bower init
</span></code></pre></td></tr></table></div></figure>


<p>It will generate <a href="https://github.com/bower/spec/blob/master/json.md">bower.json</a>.</p>

<p><code>bower.json</code></p>

<h3>6.4. Sources</h3>

<h2>References</h2>

<p>Linux</p>

<p>Python</p>

<p>Ruby</p>

<p>Node.js</p>

<p>Javascript</p>

<ul>
<li><a href="http://bower.io">Bower Official Site</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/13/mysql/">MySQL</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-13T16:41:10+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:41 pm</span></time>
        
           | <a href="/tech/2014/11/13/mysql/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/13/mysql/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<p>Ubuntu</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install mysql-server
</span><span class='line'><span class="nv">$ </span>sudo service mysql start/stop/restart
</span><span class='line'><span class="nv">$ </span>mysql -u root -p
</span></code></pre></td></tr></table></div></figure>


<h2>2. Commands</h2>

<h3>2.1. database</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt; SHOW DATABASES<span class="p">;</span>
</span><span class='line'>mysql&gt; CREATE DATABASE database name<span class="p">;</span>
</span><span class='line'>mysql&gt;  DROP DATABASE database name<span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. schemas</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt;  USE database_name<span class="p">;</span>
</span><span class='line'>mysql&gt; SHOW tables<span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. tables</h3>

<p>create a table</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt; CREATE TABLE potluck <span class="o">(</span>id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
</span><span class='line'>name VARCHAR<span class="o">(</span>20<span class="o">)</span>,
</span><span class='line'>food VARCHAR<span class="o">(</span>30<span class="o">)</span>,
</span><span class='line'>confirmed CHAR<span class="o">(</span>1<span class="o">)</span>,
</span><span class='line'>signup_date DATE<span class="o">)</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>insert a record</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt; INSERT INTO <span class="sb">`</span>potluck<span class="sb">`</span> <span class="o">(</span><span class="sb">`</span>id<span class="sb">`</span>,<span class="sb">`</span>name<span class="sb">`</span>,<span class="sb">`</span>food<span class="sb">`</span>,<span class="sb">`</span>confirmed<span class="sb">`</span>,<span class="sb">`</span>signup_date<span class="sb">`</span><span class="o">)</span> VALUES <span class="o">(</span>NULL, <span class="s2">&quot;John&quot;</span>, <span class="s2">&quot;Casserole&quot;</span>,<span class="s2">&quot;Y&quot;</span>, <span class="s1">&#39;2012-04-11&#39;</span><span class="o">)</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>update a record</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt; UPDATE <span class="sb">`</span>potluck<span class="sb">`</span>
</span><span class='line'>SET
</span><span class='line'><span class="sb">`</span>confirmed<span class="sb">`</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span>
</span><span class='line'>WHERE <span class="sb">`</span>potluck<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span> <span class="o">=</span><span class="s1">&#39;Sandy&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>delete a column/row</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mysql&gt; ALTER TABLE potluck ADD email VARCHAR<span class="o">(</span>40<span class="o">)</span><span class="p">;</span>
</span><span class='line'>mysql&gt; DELETE from <span class="o">[</span>table name<span class="o">]</span> where <span class="o">[</span>column name<span class="o">]=[</span>field text<span class="o">]</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Configurations</h2>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/12/ansible/">Ansible</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-12T15:35:13+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:35 pm</span></time>
        
           | <a href="/tech/2014/11/12/ansible/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/12/ansible/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<p>Ubuntu</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install software-properties-common
</span><span class='line'><span class="nv">$ </span>sudo apt-add-repository ppa:ansible/ansible
</span><span class='line'><span class="nv">$ </span>sudo apt-get update
</span><span class='line'><span class="nv">$ </span>sudo apt-get install ansible
</span></code></pre></td></tr></table></div></figure>


<p>pip</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo easy_install pip
</span><span class='line'><span class="nv">$ </span>pip install ansible
</span></code></pre></td></tr></table></div></figure>


<h2>2. Overview</h2>

<h3>2.1. Folder Construct</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>./
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>-- playbooks
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- host_vars/           <span class="c"># host vars</span>
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- group_vars/
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- roles/               <span class="c"># tasks</span>
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- playbook.yml         <span class="c"># playbooks</span>
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- hosts                <span class="c"># inventories</span>
</span><span class='line'><span class="p">|</span>       <span class="p">|</span>---- ansible.cfg
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>-- README.md
</span><span class='line'><span class="p">|</span>-- AUTHOR
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ansible ...
</span><span class='line'><span class="nv">$ </span>ansible-playbook ...
</span></code></pre></td></tr></table></div></figure>


<h2>3. Ansible Commands</h2>

<h3>3.1. ansible</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ansible -i xxx -m xxx -u xxx -a xxx
</span><span class='line'><span class="nv">$ </span>ansible webservers -i xxx -m xxx -u xxx -a xxx
</span><span class='line'><span class="nv">$ </span>ansible all -i xxx -m xxx -u xxx -a xxx
</span><span class='line'><span class="nv">$ </span>ansible all -i hosts -m ping
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. ansible-playbook</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ansible-playbook playbook.yml --list-hosts
</span><span class='line'><span class="nv">$ </span>ansible-playbook -c user -i hosts playbook.yml --ask-pass --sudo
</span></code></pre></td></tr></table></div></figure>


<h2>4. Playbooks</h2>

<h3>4.1. playbooks</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Configure instance(s)</span>
</span><span class='line'>  <span class="l-Scalar-Plain">hosts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">all</span>
</span><span class='line'>  <span class="l-Scalar-Plain">sudo</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</span><span class='line'>  <span class="l-Scalar-Plain">gather_facts</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</span><span class='line'>  <span class="l-Scalar-Plain">vars</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">disable_edx_services</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</span><span class='line'>    <span class="l-Scalar-Plain">mongo_enable_journal</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</span><span class='line'>  <span class="l-Scalar-Plain">roles</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">common</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">app</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4.2. roles</h3>

<p>folder construct</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">./</span>
</span><span class='line'><span class="l-Scalar-Plain">|</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- defaults/</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- files/</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- handlers/</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- meta/</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- tasks/</span>
</span><span class='line'><span class="l-Scalar-Plain">|-- templates/</span>
</span></code></pre></td></tr></table></div></figure>


<h4>4.2.1. variables</h4>

<h4>4.2.2. jinja2</h4>

<h4>4.2.3. loops</h4>

<h4>4.2.4. blocks</h4>

<h4>4.2.5. strageties</h4>

<h2>References</h2>

<ul>
<li><a href="http://www.ansible.com">Ansible Official Site</a></li>
<li><a href="http://docs.ansible.com/ansible/index.html">Ansible Official Document</a></li>
<li><a href="https://github.com/leucos/ansible-tuto">ansible-tuto</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/02/linux-commands/">Linux Commands</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-02T14:10:18+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>2:10 pm</span></time>
        
           | <a href="/tech/2014/11/02/linux-commands/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/02/linux-commands/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Linux File System</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/
</span><span class='line'>/boot
</span><span class='line'>
</span><span class='line'>/etc
</span><span class='line'>
</span><span class='line'>/bin, /usr/bin
</span><span class='line'>/sbin, /usr/sbin
</span><span class='line'>/usr
</span><span class='line'>/usr/local
</span><span class='line'>
</span><span class='line'>/var
</span><span class='line'>/lib
</span><span class='line'>
</span><span class='line'>/home
</span><span class='line'>/root
</span><span class='line'>
</span><span class='line'>/tmp
</span><span class='line'>
</span><span class='line'>/dev
</span><span class='line'>/proc
</span><span class='line'>/media,/mnt</span></code></pre></td></tr></table></div></figure>


<h2>2. Shell</h2>

<h3>2.1. Navigation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">pwd</span>                      <span class="c"># working directory</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls                       <span class="c"># list</span>
</span><span class='line'><span class="nv">$ </span>ls -l
</span><span class='line'><span class="nv">$ </span>ls -la
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Manipulating files</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cp
</span><span class='line'><span class="nv">$ </span>cp -i                          <span class="c"># interactive</span>
</span><span class='line'><span class="nv">$ </span>cp -R                          <span class="c"># all</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mv
</span><span class='line'><span class="nv">$ </span>mv -i
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rm
</span><span class='line'><span class="nv">$ </span>rm -i
</span><span class='line'><span class="nv">$ </span>rm -r
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>mkdir
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Working with commands</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">type</span>                           <span class="c"># display info about the cmd </span>
</span><span class='line'><span class="nv">$ </span><span class="nb">type type</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">type </span>ls
</span><span class='line'><span class="nv">$ </span><span class="nb">type </span>cp
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>which                          <span class="c"># locate a cmd</span>
</span><span class='line'><span class="nv">$ </span>which ls
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">help</span>                           <span class="c"># display reference for shell builtin</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">help</span> -m <span class="nb">cd</span>
</span><span class='line'><span class="nv">$ </span>mkdir --help
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>man                            <span class="c"># display an on-line cmd reference</span>
</span><span class='line'><span class="nv">$ </span>man ls
</span></code></pre></td></tr></table></div></figure>


<h3>2.4. I/O redirection</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ls &gt; list_file.txt                             <span class="c"># output with overwritten</span>
</span><span class='line'><span class="nv">$ </span>ls &gt;&gt; list_file.txt                            <span class="c"># output with appending</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sort &lt; file_list.txt                           <span class="c"># input</span>
</span><span class='line'><span class="nv">$ </span>sort &lt; file_list.txt &gt; sorted_file_list.txt    <span class="c"># input and then output</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># pipeline</span>
</span><span class='line'><span class="nv">$ </span>ls -l <span class="p">|</span> less
</span><span class='line'><span class="nv">$ </span>ls -lt <span class="p">|</span> head                                  <span class="c"># display the 10 newest files</span>
</span><span class='line'><span class="nv">$ </span>du <span class="p">|</span> sort -nr
</span><span class='line'><span class="nv">$ </span>find . -type f -print <span class="p">|</span> wc -l
</span><span class='line'>
</span><span class='line'><span class="c"># filters</span>
</span><span class='line'><span class="nv">$ </span>sort
</span><span class='line'><span class="nv">$ </span>uniq
</span><span class='line'><span class="nv">$ </span>grep
</span><span class='line'><span class="nv">$ </span>fmt
</span><span class='line'><span class="nv">$ </span>pr
</span><span class='line'><span class="nv">$ </span>head/tail
</span><span class='line'><span class="nv">$ </span>tr
</span><span class='line'><span class="nv">$ </span>sed
</span><span class='line'><span class="nv">$ </span>awk
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>cat poorly_formatted_report.txt <span class="p">|</span> fmt <span class="p">|</span> pr <span class="p">|</span> lpr
</span><span class='line'><span class="nv">$ </span>cat unsorted_list_with_dupes.txt <span class="p">|</span> sort <span class="p">|</span> uniq <span class="p">|</span> pr <span class="p">|</span> lpr
</span><span class='line'><span class="nv">$ </span>tar tzvf name_of_file.tar.gz <span class="p">|</span> less
</span></code></pre></td></tr></table></div></figure>


<h3>2.5. Expansion</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">echo </span>this is a <span class="nb">test</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> *
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>ls
</span><span class='line'><span class="nv">$ </span><span class="nb">echo </span>D*
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> *s
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="o">[[</span>:upper:<span class="o">]]</span>*
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> /usr/*/share
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> ~
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> ~foo
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="k">$((</span><span class="m">2</span> <span class="o">+</span> <span class="m">2</span><span class="k">))</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo </span>Front-<span class="o">{</span>A,B,C<span class="o">}</span>-Back
</span><span class='line'><span class="nv">$ </span><span class="nb">echo </span>Number_<span class="o">{</span>1..5<span class="o">}</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="o">{</span>Z..A<span class="o">}</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo </span>a<span class="o">{</span>A<span class="o">{</span>1,2<span class="o">}</span>,B<span class="o">{</span>3,4<span class="o">}}</span>b
</span><span class='line'><span class="nv">$ </span><span class="nb">echo </span>a<span class="o">{</span>A<span class="o">{</span>1,2<span class="o">}</span>,B<span class="o">{</span>3,4<span class="o">}}</span>b
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$USER</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="k">$(</span>ls<span class="k">)</span>
</span><span class='line'><span class="nv">$ </span>ls -l <span class="k">$(</span>which cp<span class="k">)</span>
</span><span class='line'><span class="nv">$ </span>file <span class="k">$(</span>ls /usr/bin/* <span class="p">|</span> grep bin/zip<span class="k">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.6. Permissions</h3>

<p><code>-rwxrwxrwx</code></p>

<ul>
<li><code>-</code>: file type</li>
<li><code>rwx</code>: read, write, execute, first - file owner, second - group owner, third - other users</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>rwx rwx rwx <span class="m">111</span> <span class="m">111</span> <span class="m">111</span> <span class="m">777</span>
</span><span class='line'>rw- rw- rw- <span class="m">110</span> <span class="m">110</span> <span class="m">110</span> <span class="m">666</span>
</span><span class='line'>rwx --- --- <span class="m">111</span> <span class="m">000</span> <span class="m">000</span> <span class="m">700</span>
</span><span class='line'>
</span><span class='line'>rwxrwxrwx <span class="m">777</span>
</span><span class='line'>rwxr-xr-x <span class="m">755</span>
</span><span class='line'>rwx------ <span class="m">700</span>
</span><span class='line'>rw-rw-rw- <span class="m">666</span>
</span><span class='line'>rw-r--r-- <span class="m">644</span>
</span><span class='line'>rw------- <span class="m">600</span>
</span></code></pre></td></tr></table></div></figure>


<p>commands</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>chmod
</span><span class='line'><span class="nv">$ </span>chown
</span><span class='line'><span class="nv">$ </span>chgrp
</span><span class='line'><span class="nv">$ </span>su
</span><span class='line'><span class="nv">$ </span>sudo
</span></code></pre></td></tr></table></div></figure>


<h3>2.7. Job control</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ps                 <span class="c"># list the processes running on the system</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">kill</span>               <span class="c"># send a signal to one or more processes (usually to &quot;kill&quot; a process)</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">kill</span> -1/SIGHUP
</span><span class='line'><span class="nv">$ </span><span class="nb">kill</span> -2/SIGINT
</span><span class='line'><span class="nv">$ </span><span class="nb">kill</span> -15/SIGTERM
</span><span class='line'><span class="nv">$ </span><span class="nb">kill</span> -9/SIGKILL
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">jobs</span>               <span class="c"># an alternate way of listing your own processes</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">bg</span>                 <span class="c"># put a process in the background</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">fg</span>                 <span class="c"># put a process in the forground</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Shell Scripts</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.1. Variables</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="c"># sysinfo_page - A script to produce an HTML file</span>
</span><span class='line'>
</span><span class='line'><span class="nv">title</span><span class="o">=</span><span class="s2">&quot;System Information for $HOSTNAME&quot;</span>
</span><span class='line'><span class="nv">RIGHT_NOW</span><span class="o">=</span><span class="k">$(</span>date +<span class="s2">&quot;%x %r %Z&quot;</span><span class="k">)</span>
</span><span class='line'><span class="nv">TIME_STAMP</span><span class="o">=</span><span class="s2">&quot;Updated on $RIGHT_NOW by $USER&quot;</span>
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt;- _EOF_</span>
</span><span class='line'><span class="s">    &lt;html&gt;</span>
</span><span class='line'><span class="s">    &lt;head&gt;</span>
</span><span class='line'><span class="s">        &lt;title&gt;</span>
</span><span class='line'><span class="s">        $title</span>
</span><span class='line'><span class="s">        &lt;/title&gt;</span>
</span><span class='line'><span class="s">    &lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s">    &lt;body&gt;</span>
</span><span class='line'><span class="s">    &lt;h1&gt;$title&lt;/h1&gt;</span>
</span><span class='line'><span class="s">    &lt;p&gt;$TIME_STAMP&lt;/p&gt;</span>
</span><span class='line'><span class="s">    &lt;/body&gt;</span>
</span><span class='line'><span class="s">    &lt;/html&gt;</span>
</span><span class='line'><span class="s">_EOF_</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. shell functions</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="c"># sysinfo_page - A script to produce an system information HTML file</span>
</span><span class='line'>
</span><span class='line'><span class="c">##### Constants</span>
</span><span class='line'>
</span><span class='line'><span class="nv">TITLE</span><span class="o">=</span><span class="s2">&quot;System Information for $HOSTNAME&quot;</span>
</span><span class='line'><span class="nv">RIGHT_NOW</span><span class="o">=</span><span class="k">$(</span>date +<span class="s2">&quot;%x %r %Z&quot;</span><span class="k">)</span>
</span><span class='line'><span class="nv">TIME_STAMP</span><span class="o">=</span><span class="s2">&quot;Updated on $RIGHT_NOW by $USER&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">##### Functions</span>
</span><span class='line'>
</span><span class='line'>system_info<span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># Temporary function stub</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;function system_info&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>show_uptime<span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># Temporary function stub</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;function show_uptime&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>drive_space<span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># Temporary function stub</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;function drive_space&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>home_space<span class="o">()</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># Temporary function stub</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;function home_space&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">##### Main</span>
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt;- _EOF_</span>
</span><span class='line'><span class="s">  &lt;html&gt;</span>
</span><span class='line'><span class="s">  &lt;head&gt;</span>
</span><span class='line'><span class="s">      &lt;title&gt;$TITLE&lt;/title&gt;</span>
</span><span class='line'><span class="s">  &lt;/head&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s">  &lt;body&gt;</span>
</span><span class='line'><span class="s">      &lt;h1&gt;$TITLE&lt;/h1&gt;</span>
</span><span class='line'><span class="s">      &lt;p&gt;$TIME_STAMP&lt;/p&gt;</span>
</span><span class='line'><span class="s">      $(system_info)</span>
</span><span class='line'><span class="s">      $(show_uptime)</span>
</span><span class='line'><span class="s">      $(drive_space)</span>
</span><span class='line'><span class="s">      $(home_space)</span>
</span><span class='line'><span class="s">  &lt;/body&gt;</span>
</span><span class='line'><span class="s">  &lt;/html&gt;</span>
</span><span class='line'><span class="s">_EOF_</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. flow control</h3>

<h4>2.3.1. if</h4>

<figure class='code'><figcaption><span>if</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> <span class="o">[</span> -f .bash_profile <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;You have a .bash_profile. Things are fine.&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Yikes! You have no .bash_profile!&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Alternate form</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -f .bash_profile <span class="o">]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;You have a .bash_profile. Things are fine.&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Yikes! You have no .bash_profile!&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Another alternate form</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -f .bash_profile <span class="o">]</span>
</span><span class='line'><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;You have a .bash_profile. Things are fine.&quot;</span>
</span><span class='line'><span class="k">else</span> <span class="nb">echo</span> <span class="s2">&quot;Yikes! You have no .bash_profile!&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>test</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>-d file         True <span class="k">if</span> file is a directory
</span><span class='line'>-e file         True <span class="k">if</span> file exists
</span><span class='line'>-f file         True <span class="k">if</span> file exists and is a regular file
</span><span class='line'>-L file         True <span class="k">if</span> file is a symbolic link
</span><span class='line'>-r file         True <span class="k">if</span> file is a file readable by you
</span><span class='line'>-w file         True <span class="k">if</span> file is a file writable by you
</span><span class='line'>-x file         True <span class="k">if</span> file is a file executable by you
</span><span class='line'>file1 -nt file2 True <span class="k">if</span> file1 is newer than <span class="o">(</span>according to modification <span class="nb">time</span><span class="o">)</span> file2
</span><span class='line'>file1 -ot file2 True <span class="k">if</span> file1 is older than file2
</span><span class='line'>-z string       True <span class="k">if</span> string is empty
</span><span class='line'>-n string       True <span class="k">if</span> string is not empty
</span><span class='line'><span class="nv">str1</span> <span class="o">=</span> str2     True <span class="k">if</span> string1 equals string2
</span><span class='line'>str1 !<span class="o">=</span> str2    True <span class="k">if</span> string1 does not equal string2
</span></code></pre></td></tr></table></div></figure>


<p>exit</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="m">0</span>       success
</span><span class='line'><span class="m">1</span>       failure
</span></code></pre></td></tr></table></div></figure>


<h4>2.3.2. case</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> -n <span class="s2">&quot;Type a digit or a letter &gt; &quot;</span>
</span><span class='line'><span class="nb">read </span>character
</span><span class='line'><span class="k">case</span> <span class="nv">$character</span> in
</span><span class='line'>                                <span class="c"># Check for letters</span>
</span><span class='line'>    <span class="o">[[</span>:lower:<span class="o">]]</span> <span class="p">|</span> <span class="o">[[</span>:upper:<span class="o">]]</span> <span class="o">)</span> <span class="nb">echo</span> <span class="s2">&quot;You typed the letter $character&quot;</span>
</span><span class='line'>                                <span class="p">;;</span>
</span><span class='line'>
</span><span class='line'>                                <span class="c"># Check for digits</span>
</span><span class='line'>    <span class="o">[</span>0-9<span class="o">]</span> <span class="o">)</span>                     <span class="nb">echo</span> <span class="s2">&quot;You typed the digit $character&quot;</span>
</span><span class='line'>                                <span class="p">;;</span>
</span><span class='line'>
</span><span class='line'>                                <span class="c"># Check for anything else</span>
</span><span class='line'>    * <span class="o">)</span>                         <span class="nb">echo</span> <span class="s2">&quot;You did not type a letter or a digit&quot;</span>
</span><span class='line'><span class="k">esac</span>
</span></code></pre></td></tr></table></div></figure>


<h4>2.3.3. loops</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">number</span><span class="o">=</span>0
</span><span class='line'><span class="k">while</span> <span class="o">[</span> <span class="s2">&quot;$number&quot;</span> -lt <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Number = $number&quot;</span>
</span><span class='line'>    <span class="nv">number</span><span class="o">=</span><span class="k">$((</span>number <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</span><span class='line'><span class="k">done</span>
</span><span class='line'>
</span><span class='line'><span class="nv">number</span><span class="o">=</span>0
</span><span class='line'><span class="k">until</span> <span class="o">[</span> <span class="s2">&quot;$number&quot;</span> -ge <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Number = $number&quot;</span>
</span><span class='line'>    <span class="nv">number</span><span class="o">=</span><span class="k">$((</span>number <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</span><span class='line'><span class="k">done</span>
</span><span class='line'>
</span><span class='line'><span class="nv">count</span><span class="o">=</span>0
</span><span class='line'><span class="k">for</span> i in <span class="k">$(</span>cat ~/.bash_profile<span class="k">)</span><span class="p">;</span> <span class="k">do</span>
</span><span class='line'>    <span class="nv">count</span><span class="o">=</span><span class="k">$((</span>count <span class="o">+</span> <span class="m">1</span><span class="k">))</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Word $count ($i) contains $(echo -n $i | wc -c) characters&quot;</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://www.linuxcommand.org/index.php">Linux Command</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/02/installing-edx-analytics-data-api/">Installing edX Analytics Data API</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-02T13:44:48+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:44 pm</span></time>
        
           | <a href="/tech/2014/11/02/installing-edx-analytics-data-api/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/02/installing-edx-analytics-data-api/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Install in a single server</h2>

<h3>1.1. Download the repo</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p edx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/edx/edx-analytics-data-api.git
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. Install the requirements</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx-analytics-data-api
</span><span class='line'><span class="nv">$ </span>make develop
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. Testing</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>./manage.py migrate --noinput
</span><span class='line'><span class="nv">$ </span>./manage.py migrate --noinput --database<span class="o">=</span>analytics
</span><span class='line'><span class="nv">$ </span>./manage.py set_api_key &lt;username&gt; &lt;token&gt;
</span><span class='line'><span class="nv">$ </span>make loaddata
</span><span class='line'><span class="nv">$ </span>./manage.py runserver
</span></code></pre></td></tr></table></div></figure>


<p>link: <a href="http://localhost:9001">http://localhost:9001</a></p>

<h2>2. Install by ansible scripts</h2>

<h3>2.1. Download configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir edx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/edx/configuration.git
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Install edx-analytics-data-api</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>configuration/playbooks
</span><span class='line'><span class="nv">$ </span>sudo ansible-playbook -c <span class="nb">local</span> ./run_role.yml -e <span class="s2">&quot;analytics-api&quot;</span>  -i <span class="s2">&quot;localhost,&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Testing</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/edxapp/edx-analytics-api
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/edx-analytics-api/bin/activate
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx-analytics-api
</span><span class='line'><span class="nv">$ </span>make develop
</span><span class='line'><span class="nv">$ </span>./manage.py migrate --noinput
</span><span class='line'><span class="nv">$ </span>./manage.py migrate --noinput --database<span class="o">=</span>analytics
</span><span class='line'><span class="nv">$ </span>./manage.py set_api_key &lt;username&gt; &lt;token&gt;
</span><span class='line'><span class="nv">$ </span>make loaddata
</span><span class='line'><span class="nv">$ </span>./manage.py runserver 0.0.0.0:9001
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="https://github.com/edx/configuration/">configuration</a></li>
<li><a href="https://github.com/edx/edx-analytics-data-api">edx-analytics-data-api</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/11/01/installing-edx-analytics-dashboard/">Installing edX Analytics Dashboard</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-01T13:29:38+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>1:29 pm</span></time>
        
           | <a href="/tech/2014/11/01/installing-edx-analytics-dashboard/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/11/01/installing-edx-analytics-dashboard/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Install in a single server</h2>

<h3>1. Prequistions</h3>

<ul>
<li>Python 2.7.x (not tested with Python 3.x)</li>
<li>gettext</li>
<li>npm</li>
<li>JDK 7+</li>
</ul>


<h3>2. Download the repo</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p edx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/edx/edx-analytics-dashboard.git
</span></code></pre></td></tr></table></div></figure>


<h3>3. Install the requirements</h3>

<p>install by manually</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx-analytics-dashboard
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span><span class='line'><span class="nv">$ </span>bundle install
</span><span class='line'><span class="nv">$ </span>bower install
</span></code></pre></td></tr></table></div></figure>


<p>install by commands</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>make develop
</span></code></pre></td></tr></table></div></figure>


<h3>4. Testing</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>make migrate
</span><span class='line'><span class="nv">$ </span>./manage.py runserver 0.0.0.0:9000
</span></code></pre></td></tr></table></div></figure>


<h2>2. Install with ansible scripts</h2>

<h3>2.1. Download configuration</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir edx
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx
</span><span class='line'><span class="nv">$ </span>git clone https://github.com/edx/configuration.git
</span><span class='line'><span class="nv">$ </span>pip install -r requirements.txt
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Install edx-analytics-dashboard</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>configuration/playbooks
</span><span class='line'><span class="nv">$ </span>sudo ansible-playbook -c <span class="nb">local</span> ./run_role.yml -e <span class="s2">&quot;insights&quot;</span>  -i <span class="s2">&quot;localhost,&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>2.3. Testing</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /edx/edxapp/insights
</span><span class='line'><span class="nv">$ </span><span class="nb">source </span>venvs/insights/bin/activate
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx-analytics-dashboard
</span><span class='line'><span class="nv">$ </span>make migrate
</span><span class='line'><span class="nv">$ </span>./manage.py runserver 0.0.0.0:9000
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="https://github.com/edx/configuration/">configuration</a></li>
<li><a href="https://github.com/edx/edx-analytics-dashboard/">edx-analytics-dashboard</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/10/16/installing-edx-platform/">Installing edX Platform</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-16T13:08:29+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:08 pm</span></time>
        
           | <a href="/tech/2014/10/16/installing-edx-platform/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/10/16/installing-edx-platform/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Devstack</h2>

<h3>1.1. Prequsition</h3>

<ul>
<li>Vagrant</li>
<li>VirtualBox</li>
<li>Ubuntu 12.04</li>
</ul>


<h3>1.2. Download box</h3>

<p>download Vagrantfile</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p edx/devstack
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>edx/devstack
</span><span class='line'><span class="nv">$ </span>curl -L https://raw.githubusercontent.com/edx/configuration/master/vagrant/release/devstack/Vagrantfile &gt; Vagrantfile
</span><span class='line'><span class="nv">$ </span>vim Vagrantfile
</span></code></pre></td></tr></table></div></figure>


<p>Look for the url of the specific box, download it, and then <code>vagrant box add ...</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box add box_name box_path/box_name
</span><span class='line'><span class="nv">$ </span>vagrant box list
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. Create edX VM</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant plugin install vagrant-vbguest
</span><span class='line'><span class="nv">$ </span>vagrant up
</span></code></pre></td></tr></table></div></figure>


<p>NOTE: It will cost a lot of time on downloading and provisioning, please make sure the network connection is good.</p>

<h3>1.4. Testing</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'><span class="nv">$ </span>sudo su edxapp
</span><span class='line'><span class="nv">$ </span>paver devstack lms
</span><span class='line'><span class="nv">$ </span>paver devstack studio
</span></code></pre></td></tr></table></div></figure>


<p>links:</p>

<ul>
<li>LMS: <a href="http://localhost:8000">http://localhost:8000</a></li>
<li>CMS/Studio: <a href="http://localhost:8001">http://localhost:8001</a></li>
</ul>


<p>accounts:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>staff@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>audit@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>verify@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>honor@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Fullstack</h2>

<h3>2.1. Fullstack</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir fullstack
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>fullstack
</span><span class='line'><span class="nv">$ </span>curl -L https://raw.githubusercontent.com/edx/configuration/master/vagrant/release/fullstack/Vagrantfile &gt; Vagrantfile
</span><span class='line'><span class="nv">$ </span>vagrant plugin install vagrant-hostsupdater
</span><span class='line'><span class="nv">$ </span>vagrant up
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Testing</h3>

<p>Links:</p>

<ul>
<li>LMS: <a href="http://192.168.33.10/">http://192.168.33.10/</a></li>
<li>Studio: <a href="http://192.168.33.10:18010/">http://192.168.33.10:18010/</a></li>
</ul>


<p>Accounts:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>staff@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>audit@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>verify@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span><span class='line'>honor@example.com <span class="o">(</span>password: edx<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ul>
<li><a href="https://github.com/edx/configuration/wiki/edX-Developer-Stack">edX Developer Stack</a></li>
<li><a href="https://github.com/edx/configuration/wiki/edx-Full-stack--installation-using-Vagrant-Virtualbox">edx Full stack installation using Vagrant Virtualbox</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/10/15/vagrant/">Vagrant</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-10-15T11:17:29+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:17 am</span></time>
        
           | <a href="/tech/2014/10/15/vagrant/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/10/15/vagrant/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<h3>1.1. Ubuntu</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install dpkg-dev virtualbox-dkms
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> /tmp
</span><span class='line'><span class="nv">$ </span>wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.7.2_i686.deb          <span class="c"># 32-bit</span>
</span><span class='line'><span class="nv">$ </span>wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.7.2_x86_64.deb        <span class="c"># 64-bit</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo dpkg -i vagrant_1.7.2_i686.deb
</span><span class='line'><span class="nv">$ </span>sudo apt-get install linux-headers-<span class="k">$(</span>uname -r<span class="k">)</span>
</span><span class='line'><span class="nv">$ </span>sudo dpkg-reconfigure virtualbox-dkms
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span><span class="c"># plugin</span>
</span><span class='line'><span class="nv">$ </span>vagrant plugin install vagrant-vbguest
</span></code></pre></td></tr></table></div></figure>


<h2>2. Vagrant Commands</h2>

<h3>2.1. Get Started</h3>

<p>manage a vm</p>

<figure class='code'><figcaption><span>manage a vm</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box add box_name box_path/box_name
</span><span class='line'><span class="nv">$ </span>vagrant init box_name
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'><span class="nv">$ </span>vagrant up --provider<span class="o">=</span>vmware_fusion
</span><span class='line'><span class="nv">$ </span>vagrant up --provider<span class="o">=</span>aws
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant ssh
</span><span class='line'><span class="nv">$ </span>vagrant provision
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant login
</span><span class='line'><span class="nv">$ </span>vagrant share
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant <span class="nb">suspend</span>
</span><span class='line'><span class="nv">$ </span>vagrant halt
</span><span class='line'><span class="nv">$ </span>vagrant destroy
</span></code></pre></td></tr></table></div></figure>


<p>help</p>

<figure class='code'><figcaption><span>vagrant help</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant xxx -h
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Vagrant Box, Package</h3>

<p>vagrant box</p>

<figure class='code'><figcaption><span>vagrant box commands</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant box add box_name box_path/box_name
</span><span class='line'><span class="nv">$ </span>vagrant box list
</span><span class='line'><span class="nv">$ </span>vagrant box outdated --global
</span><span class='line'><span class="nv">$ </span>vagrant box remove NAME
</span><span class='line'><span class="nv">$ </span>vagrant box repackage NAME PROVIDER VERSION
</span><span class='line'><span class="nv">$ </span>vagrant box update
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant box add ADDRESS
</span><span class='line'><span class="nv">$ </span>vagrant box add ADDRESS --box-version VALUE
</span><span class='line'>                          --cacert CERTFILE
</span><span class='line'>                          --capath CERTDIR
</span><span class='line'>                          --cert CERTFILE
</span><span class='line'>                          --clean
</span><span class='line'>                          --force
</span><span class='line'>                          --insecure
</span><span class='line'>                          --provider PROVIDER
</span><span class='line'>
</span><span class='line'>                          --checksum VALUE
</span><span class='line'>                          --checksum-type TYPE
</span><span class='line'>                          --name VALUE
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant box remove NAME --box-version VALUE
</span><span class='line'>                          --force
</span><span class='line'>                          --provider VALUE
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant box update --box VALUE
</span><span class='line'>                     --provider VALUE
</span></code></pre></td></tr></table></div></figure>


<p>vagrant package</p>

<figure class='code'><figcaption><span>vagrant package</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant package --base NAME
</span><span class='line'>                  --output NAME
</span><span class='line'>                  --include x,y,z
</span><span class='line'>                  --vagrantfile FILE
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Vagrant Connect, Share, Rdp</h3>

<p>vagrant connect</p>

<figure class='code'><figcaption><span>vagrant connect</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant connect NAME --disable-static-ip
</span><span class='line'>                       --static-ip IP
</span><span class='line'>                       --ssh
</span></code></pre></td></tr></table></div></figure>


<p>vagrant share</p>

<figure class='code'><figcaption><span>vagrant share</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant share --disable-http
</span><span class='line'>                --http PORT
</span></code></pre></td></tr></table></div></figure>


<p>vagrant rdp</p>

<figure class='code'><figcaption><span>vagrant rdp</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant rdp -- /span
</span></code></pre></td></tr></table></div></figure>


<h3>2.4. Vagrant Init, Up, Destroy, Halt, Reload, Resume/Suspend</h3>

<p>vagrant init</p>

<figure class='code'><figcaption><span>vagrant init</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant init <span class="o">[</span>box-name<span class="o">]</span> <span class="o">[</span>box-url<span class="o">]</span> --force
</span><span class='line'>                                    --minimal
</span><span class='line'>                                    --output FILE
</span></code></pre></td></tr></table></div></figure>


<p>vagrant up</p>

<figure class='code'><figcaption><span>vagrant up</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant up --<span class="o">[</span>no-<span class="o">]</span>destroy-on-error
</span><span class='line'>             --<span class="o">[</span>no-<span class="o">]</span>parallel
</span><span class='line'>             --provider x
</span><span class='line'>             --provision
</span><span class='line'>             --provision-with x,y,z
</span></code></pre></td></tr></table></div></figure>


<p>vagrant destroy</p>

<figure class='code'><figcaption><span>vagrant destroy</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant destroy -f
</span><span class='line'>                  --force
</span></code></pre></td></tr></table></div></figure>


<p>vagrant halt</p>

<figure class='code'><figcaption><span>vagrant halt</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant halt -f
</span><span class='line'>               --force
</span></code></pre></td></tr></table></div></figure>


<p>vagrant reload</p>

<figure class='code'><figcaption><span>vagrant reload</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant reload --provision
</span><span class='line'>                 --provision-with x,y,z
</span></code></pre></td></tr></table></div></figure>


<p>vagrant resume/suspend</p>

<figure class='code'><figcaption><span>vagrant resume/suspend</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant resume
</span><span class='line'><span class="nv">$ </span>vagrant <span class="nb">suspend</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.5. Vagrant Login, SSH, SSH-Config</h3>

<p>vagrant login</p>

<figure class='code'><figcaption><span>vagrant login</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant login --check
</span><span class='line'>                --logout
</span><span class='line'>                --token
</span></code></pre></td></tr></table></div></figure>


<p>vagrant ssh</p>

<figure class='code'><figcaption><span>vagrant ssh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant ssh -c COMMAND
</span><span class='line'>              --command COMMAND
</span><span class='line'>              -p
</span><span class='line'>              --plain
</span></code></pre></td></tr></table></div></figure>


<p>vagrant ssh-config</p>

<figure class='code'><figcaption><span>vagrant ssh-config</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant ssh-config --host NAME
</span></code></pre></td></tr></table></div></figure>


<h3>2.6. Vagrant Status and Version</h3>

<p>vagrant status</p>

<figure class='code'><figcaption><span>vagrant status</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant status
</span></code></pre></td></tr></table></div></figure>


<p>vagrant global-status</p>

<figure class='code'><figcaption><span>vagrant global-status</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant global-status --prune
</span></code></pre></td></tr></table></div></figure>


<p>vagrant version</p>

<figure class='code'><figcaption><span>vagrant version</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant version
</span></code></pre></td></tr></table></div></figure>


<h3>2.7. Vagrant Provision</h3>

<p>vagrant provision</p>

<figure class='code'><figcaption><span>vagrant provision</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant provision --provision-with x,y,z
</span><span class='line'><span class="nv">$ </span>vagrant provision --provision-with shell
</span></code></pre></td></tr></table></div></figure>


<h3>2.8. Vagrant Plugin</h3>

<p>vagrant plugin</p>

<figure class='code'><figcaption><span>vagrant plugin</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant plugin install NAME --entry-point ENTRYPOINT
</span><span class='line'>                              --plugin-source SOURCE
</span><span class='line'>                              --plugin-version VERSION
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant plugin uninstall NAME
</span><span class='line'><span class="nv">$ </span>vagrant plugin license NAME LICENSE_FILE
</span><span class='line'><span class="nv">$ </span>vagrant plugin list
</span><span class='line'><span class="nv">$ </span>vagrant plugin update NAME
</span></code></pre></td></tr></table></div></figure>


<h3>2.9. Vagrant Help</h3>

<p>vagrant help</p>

<figure class='code'><figcaption><span>vagrant help</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vagrant -h
</span><span class='line'><span class="nv">$ </span>vagrant list-commands
</span></code></pre></td></tr></table></div></figure>


<h2>3. Vagrantfile</h2>

<h3>3.1. Configuration Version</h3>

<figure class='code'><figcaption><span>configuration version</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="c1"># ...</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. Minimum Vagrant Version</h3>

<figure class='code'><figcaption><span>minimum vagrant version</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">require_version</span> <span class="s2">&quot;&gt;= 1.3.5&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. Loop Over VM Definitions</h3>

<figure class='code'><figcaption><span>loop over vm definitions</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s2">&quot;node-</span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">node</span><span class="o">|</span>
</span><span class='line'>    <span class="n">node</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&quot;shell&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="ss">inline</span><span class="p">:</span> <span class="s2">&quot;echo hello from node </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.4. config.vm</h3>

<figure class='code'><figcaption><span>config.vm</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">boot_timeout</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">graceful_halt_timeout</span>
</span><span class='line'>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_check_update</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_checksum</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_checksum_type</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_checksum</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_client_cert</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_ca_cert</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_ca_path</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_insecure</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_download_location_trusted</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm_box_url</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_version</span>
</span><span class='line'>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">communicator</span>
</span><span class='line'>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">guest</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span>
</span><span class='line'>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">usable_port_range</span>
</span><span class='line'>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">post_up_message</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3.4.1. box</h4>

<h4>3.4.2. provisioning</h4>

<p>vagrant provision with shell scripts</p>

<p><code>vagrant provision</code> for running shell scripts</p>

<figure class='code'><figcaption><span>bootstrap.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'>apt-get update
</span><span class='line'>apt-get install -y apache2
</span><span class='line'><span class="k">if</span> ! <span class="o">[</span> -L /var/www <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  rm -rf /var/www
</span><span class='line'>  ln -fs /vagrant /var/www
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;hashicorp/precise32&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:shell</span><span class="p">,</span> <span class="ss">path</span><span class="p">:</span> <span class="s2">&quot;bootstrap.sh&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3.4.3. networking</h4>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;hashicorp/precise32&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:shell</span><span class="p">,</span> <span class="ss">path</span><span class="p">:</span> <span class="s2">&quot;bootstrap.sh&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="ss">:forwarded_port</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">4567</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h4>3.4.4. synced folders</h4>

<h4>3.4.5. multi-machines</h4>

<h4>3.4.6. providers</h4>

<h4>3.4.7. plugins</h4>

<h4>3.4.8. push</h4>

<h4>3.4.9. debug and env_vars</h4>

<h3>3.5. config.ssh</h3>

<figure class='code'><figcaption><span>config.ssh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">username</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">password</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">host</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">port</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">guest_port</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">private_key_path</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">insert_key</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">proxy_command</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">pty</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">shell</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">sudo_command</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.6. config.winrm</h3>

<figure class='code'><figcaption><span>config.winrm</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">winrm</span><span class="o">.</span><span class="n">username</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">winrm</span><span class="o">.</span><span class="n">password</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">winrm</span><span class="o">.</span><span class="n">host</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">winrm</span><span class="o">.</span><span class="n">port</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">winrm</span><span class="o">.</span><span class="n">guest_port</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.7. config.vagrant</h3>

<figure class='code'><figcaption><span>config.vagrant</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">vagrant</span><span class="o">.</span><span class="n">host</span>
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ol>
<li><a href="https://www.vagrantup.com">Vagrant Official Site</a></li>
<li><a href="">Vagrant Source Code</a></li>
<li><a href="https://www.vagrantup.com/downloads.html">Vagrant Downloads</a></li>
<li><a href="https://docs.vagrantup.com/v2/">Vagrant Documentation</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/16/python-django/">Python Django</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-16T19:32:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:32 pm</span></time>
        
           | <a href="/tech/2014/09/16/python-django/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/16/python-django/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Project Construct</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysite/
</span><span class='line'>    manage.py
</span><span class='line'>    mysite/
</span><span class='line'>        __init__.py
</span><span class='line'>        settings.py
</span><span class='line'>        urls.py
</span><span class='line'>        wsgi.py</span></code></pre></td></tr></table></div></figure>


<p>django app</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>polls/
</span><span class='line'>    __init__.py
</span><span class='line'>    admin.py
</span><span class='line'>    models.py
</span><span class='line'>    tests.py
</span><span class='line'>    views.py
</span><span class='line'>    urls.py
</span><span class='line'>
</span><span class='line'>    migrations/
</span><span class='line'>        __init__.py
</span><span class='line'>    templates/
</span><span class='line'>        appname/
</span><span class='line'>            xxx.html
</span><span class='line'>    static/
</span><span class='line'>        appname/
</span><span class='line'>            css/
</span><span class='line'>            js/
</span><span class='line'>            images/</span></code></pre></td></tr></table></div></figure>


<h2>1. MVC</h2>

<h3>1.1. Model</h3>

<h3>1.2. View</h3>

<h3>1.3. Control</h3>

<h2>2. Admin</h2>

<h2>3. Commands</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>django-admin.py startproject mysite
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>python manage.py migrate
</span><span class='line'><span class="nv">$ </span>python manage.py runserver
</span><span class='line'><span class="nv">$ </span>python manage.py runserver 8080
</span><span class='line'><span class="nv">$ </span>python manage.py runserver 0.0.0.0:8000
</span><span class='line'><span class="nv">$ </span>python manage.py startapp polls
</span><span class='line'><span class="nv">$ </span>python manage.py makemigrations polls
</span><span class='line'><span class="nv">$ </span>python manage.py sqlmigrate polls 0001
</span><span class='line'><span class="nv">$ </span>python manage.py migrate
</span><span class='line'><span class="nv">$ </span>python manage.py shell
</span><span class='line'><span class="nv">$ </span>python manage.py createsuperuser
</span><span class='line'><span class="nv">$ </span>python manage.py validate
</span><span class='line'><span class="nv">$ </span>python manage.py syncdb
</span><span class='line'><span class="nv">$ </span>python manage.py collectstatic
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/09/parsing-the-catalogs-from-lowes/">Parsing the Catalogs From Lowes</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-09T20:59:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:59 pm</span></time>
        
           | <a href="/tech/2014/09/09/parsing-the-catalogs-from-lowes/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/09/parsing-the-catalogs-from-lowes/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Introduction</h2>

<p>I needed to get the catalogs from <a href="http://www.lowes.com">Lowe&rsquo;s</a> which was
including the department and catagories.</p>

<ul>
<li>category #</li>
<li>categories</li>
<li>item #</li>
<li>model #</li>
<li>product #</li>
<li>product name</li>
</ul>


<h2>2. Steps</h2>

<ul>
<li>step1. analyze the site struture</li>
<li>step2. parse all urls of department/categories those containing product info</li>
<li>step3. parse the product info from the urls one by one</li>
<li>step4. clean the data with standard formats</li>
<li>step5. load the data into database</li>
</ul>


<h2>3. Tools</h2>

<ul>
<li>language: Python</li>
<li>libraries: re, beautifulsoup, mechanize</li>
</ul>


<h2>4. Notes</h2>

<ul>
<li>If crawling data is denied by a site, simulating a browser to click the urls.</li>
<li>Parsing the data from a same container (div).</li>
<li>URL/href contains a lot of information, especially the data of product ID,
dept ID, category ID etc.</li>
<li>Record all the exceptions, and then re-check.</li>
<li>It will cost more time if writing the data frequently, but it can record the
process well if writing the data by a small batch.</li>
</ul>


<h2>5. Source Codes</h2>

<ul>
<li>step2. parse all urls of department/categories those containing product info</li>
<li>step3. parse the product info from the urls one by one</li>
<li>step4. clean the data with standard formats</li>
</ul>


<h3>5.1. parse all urls of department/categories those containing product info</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getHTML</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#time.sleep(1.00)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;User-Agent&#39;</span> <span class="p">:</span> <span class="s">&quot;Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.16 Safari/534.24&quot;</span><span class="p">}</span>
</span><span class='line'>    <span class="n">req</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">headers</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractAttribute</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractURL</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;categories sep&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="c">#print results</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># links</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;&quot;&quot;&lt;a href=&quot;(.*) title=.*&gt;&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="n">extractAttribute</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#print links</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">links</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">getHTML</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">extractURL</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
</span><span class='line'>        <span class="n">thisLink</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">thisURL</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="n">thisLink</span>
</span><span class='line'>        <span class="n">newURLs</span> <span class="o">=</span> <span class="n">extract</span><span class="p">(</span><span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">newURLs</span><span class="p">:</span>
</span><span class='line'>            <span class="n">dfs</span><span class="p">(</span><span class="n">newURLs</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">outCSV</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">thisLink</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">outCSV</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">baseurl</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com&quot;</span>
</span><span class='line'>    <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com/Hidden-Catalogs/_/N-1z138z4/pl#!&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>    <span class="n">fullurls</span> <span class="o">=</span> <span class="s">&quot;lowes-catalogs-fullurls.csv&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">fullurls</span><span class="p">):</span>
</span><span class='line'>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">cateName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="n">extract</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dfs</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="n">fullurls</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#with open(outPath+fullurls, &#39;wb&#39;) as f:</span>
</span><span class='line'>    <span class="c">#    for line in data:</span>
</span><span class='line'>    <span class="c">#        f.write(&quot;%s\n&quot; % line)</span>
</span><span class='line'>    <span class="c">#f.close()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5.2. parse the product info from the urls one by one</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">mechanize</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cookielib</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">openBrowser</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser </span>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
</span><span class='line'>    <span class="c"># Cookie Jar </span>
</span><span class='line'>    <span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser options </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_equiv</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#br.set_handle_gzip(True) </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_redirect</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_referer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Follows refresh 0 but not hangs on refresh &gt; 0 </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s">&#39;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">br</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Open url</span>
</span><span class='line'>    <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadURLs</span><span class="p">(</span><span class="n">dataFile</span><span class="p">):</span>
</span><span class='line'>    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dataFile</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span><span class='line'>            <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">urls</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getPages</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;totalPages&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">pages</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">pages</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">pages</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
</span><span class='line'>    <span class="n">products</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&#39;h3&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;productTitle&#39;</span><span class="p">})</span>
</span><span class='line'>    <span class="c">#print results</span>
</span><span class='line'>    <span class="n">pattern1</span> <span class="o">=</span> <span class="s">r&quot;&lt;a href=.*&gt;([\d\w\u4e00-\u9fa5\s].*)&lt;/a&gt;&quot;</span>
</span><span class='line'>    <span class="n">results1</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern1</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print products</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pattern2</span> <span class="o">=</span> <span class="s">r&#39;&lt;a href=&quot;(.*)&quot; name=.*&gt;&#39;</span>
</span><span class='line'>    <span class="n">results2</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">pattern2</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print links</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">products</span><span class="p">,</span> <span class="n">links</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">baseurl</span> <span class="o">=</span> <span class="s">&quot;http://www.lowes.com&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">openBrowser</span><span class="p">()</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">):</span>
</span><span class='line'>        <span class="n">fileName</span> <span class="o">=</span> <span class="s">&quot;lowes-catalogs-fullurls-</span><span class="si">%s</span><span class="s">.csv&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>        <span class="n">urls</span> <span class="o">=</span> <span class="n">loadURLs</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">outCSV</span> <span class="o">=</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;products-&quot;</span><span class="o">+</span><span class="n">fileName</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outCSV</span><span class="p">):</span>
</span><span class='line'>            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">outCSV</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
</span><span class='line'>            <span class="n">thisURL</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="n">url</span>
</span><span class='line'>            <span class="n">soup</span> <span class="o">=</span> <span class="n">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>            <span class="n">pages</span> <span class="o">=</span> <span class="n">getPages</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</span><span class='line'>            <span class="c">#print soup</span>
</span><span class='line'>            <span class="c">#print pages</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="n">pages</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-no-products.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nf</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">nf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">thisURL</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">elif</span> <span class="n">pages</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                <span class="n">content</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;productResults&#39;</span><span class="p">})</span>
</span><span class='line'>                <span class="n">products</span><span class="p">,</span> <span class="n">links</span> <span class="o">=</span> <span class="n">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>                    <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span> <span class="s">&#39;prodURL&#39;</span><span class="p">:</span> <span class="n">links</span><span class="p">})</span>
</span><span class='line'>                    <span class="n">data</span><span class="p">[</span><span class="s">&#39;deptURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thisURL</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outCSV</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-one-page.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">tf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">thisURL</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pages</span><span class="p">):</span>
</span><span class='line'>                    <span class="n">pageURL</span> <span class="o">=</span> <span class="n">thisURL</span> <span class="o">+</span> <span class="s">&quot;?&amp;rpp=32&amp;page=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">thisSoup</span> <span class="o">=</span> <span class="n">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">pageURL</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">content</span> <span class="o">=</span> <span class="n">thisSoup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;productResults&#39;</span><span class="p">})</span>
</span><span class='line'>                    <span class="n">products</span><span class="p">,</span> <span class="n">links</span> <span class="o">=</span> <span class="n">getProducts</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>                    <span class="c">#print pageURL</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">products</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">data</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="n">products</span><span class="p">,</span> <span class="s">&#39;prodURL&#39;</span><span class="p">:</span> <span class="n">links</span><span class="p">})</span>
</span><span class='line'>                        <span class="n">data</span><span class="p">[</span><span class="s">&#39;deptURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pageURL</span>
</span><span class='line'>
</span><span class='line'>                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outCSV</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>                             <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;error-more-pages.csv&quot;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pf</span><span class="p">:</span>
</span><span class='line'>                            <span class="n">pf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pageURL</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5.3. clean the data with standard formats</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadContent</span><span class="p">(</span><span class="n">dataFile</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dataFile</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">content</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractAttrs</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="c">#ids = []</span>
</span><span class='line'>    <span class="n">itemIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">cateIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">modelIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">prodIDs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">depts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c"># names</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;.*,(.*),http://www.lowes.com/.*&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># ids </span>
</span><span class='line'>    <span class="c">#pattern = r&quot;/pd_(.*)_.*__\??&quot;</span>
</span><span class='line'>    <span class="c">#results = filterRE(content, pattern)</span>
</span><span class='line'>    <span class="c">#for result in results:</span>
</span><span class='line'>    <span class="c">#    ids.append(result)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># itemIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_(\d+)-?&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">itemIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># cateIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_\d+-(\d+)-?&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">cateIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># modelIDs</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;/pd_\d+-\d+-(.*)_.*__\??&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">modelIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># prodIDs</span>
</span><span class='line'>    <span class="c">#pattern = r&quot;productId=(\d+)&amp;amp;&quot;</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;productId=(\d+)&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">prodIDs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># depts</span>
</span><span class='line'>    <span class="n">pattern</span> <span class="o">=</span> <span class="s">r&quot;http://www.lowes.com/(.*)/_/N-.*&quot;</span>
</span><span class='line'>    <span class="n">results</span> <span class="o">=</span> <span class="n">filterRE</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span class='line'>        <span class="n">depts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cates</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">dept</span> <span class="ow">in</span> <span class="n">depts</span><span class="p">:</span>
</span><span class='line'>        <span class="n">cates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dept</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print len(names)</span>
</span><span class='line'>    <span class="c">#print len(itemIDs)</span>
</span><span class='line'>    <span class="c">#print len(cateIDs)</span>
</span><span class='line'>    <span class="c">#print len(modelIDs)</span>
</span><span class='line'>    <span class="c">#print len(prodIDs)</span>
</span><span class='line'>    <span class="c">#print len(cates)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">attrs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;prodName&#39;</span><span class="p">:</span> <span class="n">names</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;itemID&#39;</span><span class="p">:</span> <span class="n">itemIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;cateID&#39;</span><span class="p">:</span> <span class="n">cateIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;modelID&#39;</span><span class="p">:</span> <span class="n">modelIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;prodID&#39;</span><span class="p">:</span> <span class="n">prodIDs</span><span class="p">,</span>
</span><span class='line'>                          <span class="s">&#39;cates&#39;</span><span class="p">:</span> <span class="n">cates</span><span class="p">})</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">attrs</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/data/lowes/products/&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/freelance/20140903-eCatalog/src/outputs/&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#for i in range(21):</span>
</span><span class='line'>    <span class="c">#    dataFile = &quot;products-lowes-catalogs-fullurls-%s.csv&quot; % str(i)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#    content = loadContent(dataPath+dataFile)</span>
</span><span class='line'>    <span class="c">#    attrs = extractAttrs(content)</span>
</span><span class='line'>    <span class="c">#    attrs.to_csv(outPath+&quot;clean-&quot;+dataFile, header=True, index=False)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#dataFile = &quot;products-error-one-page.csv&quot;</span>
</span><span class='line'>    <span class="c">#dataFile = &quot;products-error-more-pages.csv&quot;</span>
</span><span class='line'>    <span class="n">dataFile</span> <span class="o">=</span> <span class="s">&quot;products-error-no-products.csv&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">content</span> <span class="o">=</span> <span class="n">loadContent</span><span class="p">(</span><span class="n">dataPath</span><span class="o">+</span><span class="n">dataFile</span><span class="p">)</span>
</span><span class='line'>    <span class="n">attrs</span> <span class="o">=</span> <span class="n">extractAttrs</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span class='line'>    <span class="n">attrs</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;clean-&quot;</span><span class="o">+</span><span class="n">dataFile</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/08/mechanize/">Mechanize</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-08T21:15:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:15 pm</span></time>
        
           | <a href="/tech/2014/09/08/mechanize/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/08/mechanize/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Mechanize is to simulate a browser.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">mechanize</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cookielib</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">openBrowser</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser </span>
</span><span class='line'>    <span class="n">br</span> <span class="o">=</span> <span class="n">mechanize</span><span class="o">.</span><span class="n">Browser</span><span class="p">()</span>
</span><span class='line'>    <span class="c"># Cookie Jar </span>
</span><span class='line'>    <span class="n">cj</span> <span class="o">=</span> <span class="n">cookielib</span><span class="o">.</span><span class="n">LWPCookieJar</span><span class="p">()</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_cookiejar</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Browser options </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_equiv</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#br.set_handle_gzip(True) </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_redirect</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_referer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_robots</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Follows refresh 0 but not hangs on refresh &gt; 0 </span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">set_handle_refresh</span><span class="p">(</span><span class="n">mechanize</span><span class="o">.</span><span class="n">_http</span><span class="o">.</span><span class="n">HTTPRefreshProcessor</span><span class="p">(),</span> <span class="n">max_time</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="n">br</span><span class="o">.</span><span class="n">addheaders</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;User-agent&#39;</span><span class="p">,</span> <span class="s">&#39;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">br</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getSoup</span><span class="p">(</span><span class="n">br</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Open url</span>
</span><span class='line'>    <span class="n">r</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">html</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">soup</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/07/morse-code/">Morse Codes</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-07T22:53:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:53 pm</span></time>
        
           | <a href="/tech/2014/09/07/morse-code/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/07/morse-code/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Encoding and decoding Morse.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># -*- coding:utf-8 -*-</span>
</span><span class='line'><span class="n">__author__</span>  <span class="o">=</span> <span class="s">&#39;KellyChan&#39;</span>
</span><span class='line'><span class="n">__date__</span>    <span class="o">=</span> <span class="s">&#39;2014-09-07&#39;</span>
</span><span class='line'><span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">encode</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Morse Table</span>
</span><span class='line'>    <span class="n">CODE</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="c"># 26 letters</span>
</span><span class='line'>            <span class="s">&#39;A&#39;</span><span class="p">:</span> <span class="s">&#39;.-&#39;</span><span class="p">,</span>     <span class="s">&#39;B&#39;</span><span class="p">:</span> <span class="s">&#39;-...&#39;</span><span class="p">,</span>   <span class="s">&#39;C&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;D&#39;</span><span class="p">:</span> <span class="s">&#39;-..&#39;</span><span class="p">,</span>    <span class="s">&#39;E&#39;</span><span class="p">:</span> <span class="s">&#39;.&#39;</span><span class="p">,</span>      <span class="s">&#39;F&#39;</span><span class="p">:</span> <span class="s">&#39;..-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;G&#39;</span><span class="p">:</span> <span class="s">&#39;--.&#39;</span><span class="p">,</span>    <span class="s">&#39;H&#39;</span><span class="p">:</span> <span class="s">&#39;....&#39;</span><span class="p">,</span>   <span class="s">&#39;I&#39;</span><span class="p">:</span> <span class="s">&#39;..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;J&#39;</span><span class="p">:</span> <span class="s">&#39;.---&#39;</span><span class="p">,</span>   <span class="s">&#39;K&#39;</span><span class="p">:</span> <span class="s">&#39;-.-&#39;</span><span class="p">,</span>    <span class="s">&#39;L&#39;</span><span class="p">:</span> <span class="s">&#39;.-..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;M&#39;</span><span class="p">:</span> <span class="s">&#39;--&#39;</span><span class="p">,</span>     <span class="s">&#39;N&#39;</span><span class="p">:</span> <span class="s">&#39;-.&#39;</span><span class="p">,</span>     <span class="s">&#39;O&#39;</span><span class="p">:</span> <span class="s">&#39;---&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;P&#39;</span><span class="p">:</span> <span class="s">&#39;.--.&#39;</span><span class="p">,</span>   <span class="s">&#39;Q&#39;</span><span class="p">:</span> <span class="s">&#39;--.-&#39;</span><span class="p">,</span>   <span class="s">&#39;R&#39;</span><span class="p">:</span> <span class="s">&#39;.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;S&#39;</span><span class="p">:</span> <span class="s">&#39;...&#39;</span><span class="p">,</span>    <span class="s">&#39;T&#39;</span><span class="p">:</span> <span class="s">&#39;-&#39;</span><span class="p">,</span>      <span class="s">&#39;U&#39;</span><span class="p">:</span> <span class="s">&#39;..-&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;V&#39;</span><span class="p">:</span> <span class="s">&#39;...-&#39;</span><span class="p">,</span>   <span class="s">&#39;W&#39;</span><span class="p">:</span> <span class="s">&#39;.--&#39;</span><span class="p">,</span>    <span class="s">&#39;X&#39;</span><span class="p">:</span> <span class="s">&#39;-..-&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;Y&#39;</span><span class="p">:</span> <span class="s">&#39;-.--&#39;</span><span class="p">,</span>   <span class="s">&#39;Z&#39;</span><span class="p">:</span> <span class="s">&#39;--..&#39;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># 10 digits</span>
</span><span class='line'>            <span class="s">&#39;0&#39;</span><span class="p">:</span> <span class="s">&#39;-----&#39;</span><span class="p">,</span>  <span class="s">&#39;1&#39;</span><span class="p">:</span> <span class="s">&#39;.----&#39;</span><span class="p">,</span>  <span class="s">&#39;2&#39;</span><span class="p">:</span> <span class="s">&#39;..---&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;3&#39;</span><span class="p">:</span> <span class="s">&#39;...--&#39;</span><span class="p">,</span>  <span class="s">&#39;4&#39;</span><span class="p">:</span> <span class="s">&#39;....-&#39;</span><span class="p">,</span>  <span class="s">&#39;5&#39;</span><span class="p">:</span> <span class="s">&#39;.....&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;6&#39;</span><span class="p">:</span> <span class="s">&#39;-....&#39;</span><span class="p">,</span>  <span class="s">&#39;7&#39;</span><span class="p">:</span> <span class="s">&#39;--...&#39;</span><span class="p">,</span>  <span class="s">&#39;8&#39;</span><span class="p">:</span> <span class="s">&#39;---..&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;9&#39;</span><span class="p">:</span> <span class="s">&#39;----.&#39;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># 16 punctuations</span>
</span><span class='line'>            <span class="s">&#39;,&#39;</span><span class="p">:</span> <span class="s">&#39;--..--&#39;</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">:</span> <span class="s">&#39;.-.-.-&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">:</span> <span class="s">&#39;---...&#39;</span><span class="p">,</span> <span class="s">&#39;;&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;?&#39;</span><span class="p">:</span> <span class="s">&#39;..--..&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">:</span> <span class="s">&#39;-...-&#39;</span><span class="p">,</span>  <span class="s">&quot;&#39;&quot;</span><span class="p">:</span> <span class="s">&#39;.----.&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">:</span> <span class="s">&#39;-..-.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;!&#39;</span><span class="p">:</span> <span class="s">&#39;-.-.--&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="s">&#39;-....-&#39;</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">:</span> <span class="s">&#39;..--.-&#39;</span><span class="p">,</span> <span class="s">&#39;(&#39;</span><span class="p">:</span> <span class="s">&#39;-.--.&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;)&#39;</span><span class="p">:</span> <span class="s">&#39;-.--.-&#39;</span><span class="p">,</span> <span class="s">&#39;$&#39;</span><span class="p">:</span> <span class="s">&#39;...-..-&#39;</span><span class="p">,</span><span class="s">&#39;&amp;&#39;</span><span class="p">:</span> <span class="s">&#39;. . . .&#39;</span><span class="p">,</span><span class="s">&#39;@&#39;</span><span class="p">:</span> <span class="s">&#39;.--.-.&#39;</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># you can define more</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">CODE</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="n">CODE</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">CODE</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">convertString2Morse</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
</span><span class='line'>    <span class="n">morse</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your message was: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">msg</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s">&#39; &#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">morse</span> <span class="o">+=</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># upper(): convert all lowercases to uppercases</span>
</span><span class='line'>            <span class="n">CODE</span> <span class="o">=</span> <span class="n">encode</span><span class="p">()</span>
</span><span class='line'>            <span class="n">morse</span> <span class="o">+=</span> <span class="n">CODE</span><span class="p">[</span><span class="n">char</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Morse Code is: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">morse</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">morse</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">convertMorse2String</span><span class="p">(</span><span class="n">morse</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">codes</span> <span class="o">=</span> <span class="n">morse</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Morse Code was: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">codes</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">string</span> <span class="o">+=</span> <span class="s">&#39; &#39;</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">UNCODE</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encode</span><span class="p">())</span>
</span><span class='line'>            <span class="n">string</span> <span class="o">+=</span> <span class="n">UNCODE</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Your Message is: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">string</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">string</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#msg = raw_input(&#39;Please input your message: &#39;)</span>
</span><span class='line'>    <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Happy Mid-Autumn Day!&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">morse</span> <span class="o">=</span> <span class="n">convertString2Morse</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>    <span class="n">string</span> <span class="o">=</span> <span class="n">convertMorse2String</span><span class="p">(</span><span class="n">morse</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/07/generating-passwords/">Generating Passwords</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-07T22:01:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:01 pm</span></time>
        
           | <a href="/tech/2014/09/07/generating-passwords/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/07/generating-passwords/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Generating all 4-digit passwords combining digits 0-9, uppercases A-Z and
lowercases a-z.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">chars</span><span class="o">=</span><span class="p">[</span>
</span><span class='line'>            <span class="s">&#39;0&#39;</span><span class="p">,</span><span class="s">&#39;1&#39;</span><span class="p">,</span><span class="s">&#39;2&#39;</span><span class="p">,</span><span class="s">&#39;3&#39;</span><span class="p">,</span><span class="s">&#39;4&#39;</span><span class="p">,</span><span class="s">&#39;5&#39;</span><span class="p">,</span><span class="s">&#39;6&#39;</span><span class="p">,</span><span class="s">&#39;7&#39;</span><span class="p">,</span><span class="s">&#39;8&#39;</span><span class="p">,</span><span class="s">&#39;9&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">,</span><span class="s">&#39;e&#39;</span><span class="p">,</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="s">&#39;h&#39;</span><span class="p">,</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="s">&#39;j&#39;</span><span class="p">,</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="s">&#39;l&#39;</span><span class="p">,</span><span class="s">&#39;m&#39;</span><span class="p">,</span><span class="s">&#39;n&#39;</span><span class="p">,</span><span class="s">&#39;o&#39;</span><span class="p">,</span><span class="s">&#39;p&#39;</span><span class="p">,</span><span class="s">&#39;q&#39;</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">,</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="s">&#39;t&#39;</span><span class="p">,</span><span class="s">&#39;u&#39;</span><span class="p">,</span><span class="s">&#39;v&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="s">&#39;z&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">,</span><span class="s">&#39;E&#39;</span><span class="p">,</span><span class="s">&#39;F&#39;</span><span class="p">,</span><span class="s">&#39;G&#39;</span><span class="p">,</span><span class="s">&#39;H&#39;</span><span class="p">,</span><span class="s">&#39;I&#39;</span><span class="p">,</span><span class="s">&#39;J&#39;</span><span class="p">,</span><span class="s">&#39;K&#39;</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">,</span><span class="s">&#39;M&#39;</span><span class="p">,</span><span class="s">&#39;N&#39;</span><span class="p">,</span><span class="s">&#39;O&#39;</span><span class="p">,</span><span class="s">&#39;P&#39;</span><span class="p">,</span><span class="s">&#39;Q&#39;</span><span class="p">,</span><span class="s">&#39;R&#39;</span><span class="p">,</span><span class="s">&#39;S&#39;</span><span class="p">,</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="s">&#39;U&#39;</span><span class="p">,</span><span class="s">&#39;V&#39;</span><span class="p">,</span><span class="s">&#39;W&#39;</span><span class="p">,</span><span class="s">&#39;X&#39;</span><span class="p">,</span><span class="s">&#39;Y&#39;</span><span class="p">,</span><span class="s">&#39;Z&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">base</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span>  <span class="c"># 62</span>
</span><span class='line'>    <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span><span class="o">**</span><span class="mi">4</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="s">&#39;outputs&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outputs</span><span class="o">+</span><span class="s">&quot;/dict.txt&quot;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">i</span>
</span><span class='line'>            <span class="n">char0</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char1</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char2</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">base</span>
</span><span class='line'>            <span class="n">char3</span> <span class="o">=</span> <span class="n">chars</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>            <span class="c">#print i, char3, char2, char1, char0</span>
</span><span class='line'>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">char3</span><span class="o">+</span><span class="n">char2</span><span class="o">+</span><span class="n">char1</span><span class="o">+</span><span class="n">char0</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#with open(outputs+&quot;/dict.txt&quot;, &#39;rb&#39;) as f:</span>
</span><span class='line'>    <span class="c">#    for line in f.readlines()[-100:]:</span>
</span><span class='line'>    <span class="c">#        print line</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/03/python-unicodeencodeerror/">Python UnicodeEncodeError</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-03T20:22:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>8:22 pm</span></time>
        
           | <a href="/tech/2014/09/03/python-unicodeencodeerror/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/03/python-unicodeencodeerror/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Error message</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="ne">UnicodeEncodeError</span><span class="p">:</span> <span class="s">&#39;ascii&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="s">&#39;t encode characters in position 32-34: ordinal not in range(128) </span>
</span></code></pre></td></tr></table></div></figure>


<p>Solution</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># add these lines at the top</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span> <span class="s">&quot;utf-8&quot;</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/09/02/multiplication-tables/">Multiplication Tables</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-09-02T20:10:00+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>8:10 pm</span></time>
        
           | <a href="/tech/2014/09/02/multiplication-tables/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/09/02/multiplication-tables/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Chinese 9-9 Multiplication Table</h2>

<p>Print a multiplication table</p>

<pre><code>1*1=1   
1*2=2   2*2=4   
1*3=3   2*3=6   3*3=9   
1*4=4   2*4=8   3*4=12  4*4=16  
1*5=5   2*5=10  3*5=15  4*5=20  5*5=25  
1*6=6   2*6=12  3*6=18  4*6=24  5*6=30  6*6=36  
1*7=7   2*7=14  3*7=21  4*7=28  5*7=35  6*7=42  7*7=49  
1*8=8   2*8=16  3*8=24  4*8=32  5*8=40  6*8=48  7*8=56  8*8=64  
1*9=9   2*9=18  3*9=27  4*9=36  5*9=45  6*9=54  7*9=63  8*9=72  9*9=81  
</code></pre>

<p>solution 1:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">print99</span><span class="p">():</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
</span><span class='line'>        <span class="n">row</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">base</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="n">row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;*&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">row</span>
</span></code></pre></td></tr></table></div></figure>


<p>solution 2:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">*</span><span class="si">%s</span><span class="s">=</span><span class="si">%-2s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summation</h2>

<p>Print a summation.</p>

<pre><code>1 = 1
1 + 2 = 3
1 + 2 + 3 = 6
1 + 2 + 3 + 4 = 10
1 + 2 + 3 + 4 + 5 = 15
1 + 2 + 3 + 4 + 5 + 6 = 21
1 + 2 + 3 + 4 + 5 + 6 + 7 = 28
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 = 36
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45
1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 = 55
</code></pre>

<p>solution:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">calSum</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
</span><span class='line'>  <span class="n">digits</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>  <span class="n">digitStrings</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>  <span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39; + &#39;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">num</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>      <span class="n">digits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>      <span class="n">digitStrings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span><span class='line'>  <span class="k">print</span> <span class="n">delimiter</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">digitStrings</span><span class="p">),</span><span class="s">&quot;=&quot;</span><span class="p">,</span><span class="nb">sum</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
</span><span class='line'>  <span class="n">calSum</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/08/07/multiple-github-pages-and-custom-domains-via-dns/">Multiple Github Pages and Custom Domains via DNS</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-07T17:58:22+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:58 pm</span></time>
        
           | <a href="/tech/2014/08/07/multiple-github-pages-and-custom-domains-via-dns/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/08/07/multiple-github-pages-and-custom-domains-via-dns/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>I have multiple projects hosted on Github Pages, but I would like to create the
subdomains for specific projects under one domain, then I set up the CNAME and
DNS like this:</p>

<pre><code>Project 1: username.github.io/project1
- CNAME file: project1.domain-name.com
- DNS CNAME:
    - host: project1
    - points to: username.github.io

Project 2: username.github.io/project2
- CNAME file: project2.domain-name.com
- DNS CNAME:
    - host: project2
    - points to: username.github.io
</code></pre>

<p>Then it worked.</p>

<h2>How did I config my domain name?</h2>

<ul>
<li><p>step1. add a <code>CNAME</code> file under the project folder</p>

<pre><code>  CNAME: domain-name.com
</code></pre></li>
<li><p>step2. add a new record of <code>DNS CNAME</code></p>

<pre><code>  DNS CNAME (for subdomain name):
  - host: subdomain-name
  - points to: project link
</code></pre></li>
<li><p>step3. updated <code>url</code> in the <code>_config.yml</code></p>

<pre><code>  baseurl: domain-name
  url: domain-name
</code></pre></li>
</ul>


<h2>Reference</h2>

<p><a href="https://stackoverflow.com/questions/10685961/multiple-github-pages-and-custom-domains-via-dns">Multiple GitHub Pages and custom domains via DNS</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/08/03/html-5/">HTML 5</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-08-03T03:10:02+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>3:10 am</span></time>
        
           | <a href="/tech/2014/08/03/html-5/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/08/03/html-5/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Elements</h2>

<h3>1.1. New elements</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- canvas: `&lt;canvas&gt;`
</span><span class='line'>- media: `&lt;audio&gt;`, `&lt;embed&gt;`, `&lt;source&gt;`, `&lt;track&gt;`, `&lt;video&gt;` 
</span><span class='line'>- form: `&lt;datalist&gt;`, `&lt;keygen&gt;`, `&lt;output&gt;`
</span><span class='line'>- semantic: `&lt;aside&gt;`, `&lt;bdi&gt;`, `&lt;details&gt;`, `&lt;dialog&gt;`, `&lt;figcaption&gt;`, `&lt;figure&gt;`, `&lt;footer&gt;`, `&lt;header&gt;`, `&lt;main&gt;`, `&lt;mark&gt;`, `&lt;menuitem&gt;`, `&lt;meter&gt;`, `&lt;nav&gt;`, `&lt;progress&gt;`, `&lt;rp&gt;`, `&lt;rt&gt;`, `&lt;ruby&gt;`, `&lt;section&gt;`, `&lt;summary&gt;`, `&lt;time&gt;`, `&lt;wbr&gt;`</span></code></pre></td></tr></table></div></figure>


<h3>1.2. Removed elements</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>`&lt;sefont&gt;`, `&lt;big&gt;`, `&lt;center&gt;`, `&lt;dir&gt;`, `&lt;font&gt;`, `&lt;frame&gt;`, `&lt;frameset&gt;`, `&lt;noframes&gt;`, `&lt;strike&gt;`, `&lt;tt&gt;`</span></code></pre></td></tr></table></div></figure>


<h2>2. Examples</h2>

<p>layouts</p>

<pre><code>|------------------------------------|
|   &lt;header&gt;                         |
|------------------------------------|
|   &lt;nav&gt;                            |
|------------------------------------|
|   &lt;section&gt;        |               |
|--------------------| &lt;aside&gt;       |
|   &lt;article&gt;        |               |
|------------------------------------|
|   &lt;footer&gt;                         |
|------------------------------------|
</code></pre>

<p>section</p>

<figure class='code'><figcaption><span>section</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>WWF<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>The World Wide Fund for Nature (WWF) is....<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>article</p>

<figure class='code'><figcaption><span>article</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;article&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Internet Explorer 9<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>Windows Internet Explorer 9 (abbreviated as IE9) was released to
</span><span class='line'>  the  public on March 14, 2011 at 21:00 PDT.....<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>nav</p>

<figure class='code'><figcaption><span>nav</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;nav&gt;</span>
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/html/&quot;</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/a&gt;</span> |
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/css/&quot;</span><span class="nt">&gt;</span>CSS<span class="nt">&lt;/a&gt;</span> |
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/js/&quot;</span><span class="nt">&gt;</span>JavaScript<span class="nt">&lt;/a&gt;</span> |
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/jquery/&quot;</span><span class="nt">&gt;</span>jQuery<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/nav&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>aside</p>

<figure class='code'><figcaption><span>aside</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p&gt;</span>My family and I visited The Epcot center this summer.<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;aside&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h4&gt;</span>Epcot Center<span class="nt">&lt;/h4&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>The Epcot Center is a theme park in Disney World, Florida.<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/aside&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>header</p>

<figure class='code'><figcaption><span>header</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;article&gt;</span>
</span><span class='line'>  <span class="nt">&lt;header&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Internet Explorer 9<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p&gt;&lt;time</span> <span class="na">pubdate</span> <span class="na">datetime=</span><span class="s">&quot;2011-03-15&quot;</span><span class="nt">&gt;&lt;/time&gt;&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/header&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>Windows Internet Explorer 9 (abbreviated as IE9) was released to
</span><span class='line'>  the  public on March 14, 2011 at 21:00 PDT.....<span class="nt">&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/article&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>footer</p>

<figure class='code'><figcaption><span>footer</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;footer&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>Posted by: Hege Refsnes<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;&lt;time</span> <span class="na">pubdate</span> <span class="na">datetime=</span><span class="s">&quot;2012-03-01&quot;</span><span class="nt">&gt;&lt;/time&gt;&lt;/p&gt;</span>
</span><span class='line'><span class="nt">&lt;/footer&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>figure / figcaption</p>

<figure class='code'><figcaption><span>figure/figcaption</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;figure&gt;</span>
</span><span class='line'>  <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;img_pulpit.jpg&quot;</span> <span class="na">alt=</span><span class="s">&quot;The Pulpit Rock&quot;</span> <span class="na">width=</span><span class="s">&quot;304&quot;</span> <span class="na">height=</span><span class="s">&quot;228&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;figcaption&gt;</span>Fig1. - The Pulpit Pock, Norway.<span class="nt">&lt;/figcaption&gt;</span>
</span><span class='line'><span class="nt">&lt;/figure&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Integrated IE 8 and earlier</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!--[if lt IE 9]&gt;&lt;script src=&quot;html5shiv.js&quot;&gt;&lt;/script&gt;&lt;![endif]--&gt;</span>
</span><span class='line'>
</span><span class='line'>header, section, footer, aside, nav, main, article, figure {
</span><span class='line'>    display: block;
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>input types</p>

<figure class='code'><figcaption><span>input types</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- color --&gt;</span>
</span><span class='line'>Select your favorite color: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;color&quot;</span> <span class="na">name=</span><span class="s">&quot;favcolor&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- date --&gt;</span>
</span><span class='line'>Birthday: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;date&quot;</span> <span class="na">name=</span><span class="s">&quot;bday&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- datetime --&gt;</span>
</span><span class='line'>Birthday (date and time): <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;datetime&quot;</span> <span class="na">name=</span><span class="s">&quot;bdaytime&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- datetime-local --&gt;</span>
</span><span class='line'>Birthday (date and time): <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;datetime-local&quot;</span> <span class="na">name=</span><span class="s">&quot;bdaytime&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- email --&gt;</span>
</span><span class='line'>E-mail: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- month --&gt;</span>
</span><span class='line'>Birthday (month and year): <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;month&quot;</span> <span class="na">name=</span><span class="s">&quot;bdaymonth&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- number --&gt;</span>
</span><span class='line'>Quantity (between 1 and 5): <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">name=</span><span class="s">&quot;quantity&quot;</span> <span class="na">min=</span><span class="s">&quot;1&quot;</span> <span class="na">max=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- range --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;range&quot;</span> <span class="na">name=</span><span class="s">&quot;points&quot;</span> <span class="na">min=</span><span class="s">&quot;1&quot;</span> <span class="na">max=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- search --&gt;</span>
</span><span class='line'>Search Google: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;search&quot;</span> <span class="na">name=</span><span class="s">&quot;googlesearch&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- tel --&gt;</span>
</span><span class='line'>Telephone: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;tel&quot;</span> <span class="na">name=</span><span class="s">&quot;usrtel&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- type --&gt;</span>
</span><span class='line'>Select a time: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;time&quot;</span> <span class="na">name=</span><span class="s">&quot;usr_time&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- url --&gt;</span>
</span><span class='line'>Add your homepage: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;url&quot;</span> <span class="na">name=</span><span class="s">&quot;homepage&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- week --&gt;</span>
</span><span class='line'>Select a week: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;week&quot;</span> <span class="na">name=</span><span class="s">&quot;week_year&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>form</p>

<figure class='code'><figcaption><span>form</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- datalist --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">list=</span><span class="s">&quot;browsers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;datalist</span> <span class="na">id=</span><span class="s">&quot;browsers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Internet Explorer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Firefox&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Chrome&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Opera&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Safari&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/datalist&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- keygen --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_keygen.asp&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Username: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;usr_name&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Encryption: <span class="nt">&lt;keygen</span> <span class="na">name=</span><span class="s">&quot;security&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- output --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">oninput=</span><span class="s">&quot;x.value=parseInt(a.value)+parseInt(b.value)&quot;</span><span class="nt">&gt;</span>0
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;range&quot;</span> <span class="na">id=</span><span class="s">&quot;a&quot;</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">&gt;</span>100 +
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">id=</span><span class="s">&quot;b&quot;</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">&gt;</span>=
</span><span class='line'><span class="nt">&lt;output</span> <span class="na">name=</span><span class="s">&quot;x&quot;</span> <span class="na">for=</span><span class="s">&quot;a b&quot;</span><span class="nt">&gt;&lt;/output&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>form with new attributes</p>

<figure class='code'><figcaption><span>form</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>- `<span class="nt">&lt;form&gt;</span>`: `autocomplete`, `novalidate`
</span><span class='line'>- `<span class="nt">&lt;input&gt;</span>`: `autocomplete`, `autofocus`, `form`, `formaction`, `formenctype`, `formmethod`, `formnovalidate`, `formtarget`, `height`, `width`, `list`, `min`, `max`, `multiple`, `pattern (regexp)`, `placeholder`, `required`, `step` 
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>form with new attributes</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- &lt;form&gt; / &lt;input&gt; autocomplete --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;on&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name:<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  Last name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;lname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  E-mail: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;form&gt; novalidate --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
</span><span class='line'>  E-mail: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;user_email&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; autofocus --&gt;</span>
</span><span class='line'>First name:<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span> <span class="na">autofocus</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; form --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span> <span class="na">id=</span><span class="s">&quot;form1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>Last name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;lname&quot;</span> <span class="na">form=</span><span class="s">&quot;form1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; formaction --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  Last name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;lname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">formaction=</span><span class="s">&quot;demo_admin.asp&quot;</span>
</span><span class='line'>  <span class="na">value=</span><span class="s">&quot;Submit as admin&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; formenctype --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_post_enctype.asp&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">formenctype=</span><span class="s">&quot;multipart/form-data&quot;</span>
</span><span class='line'>  <span class="na">value=</span><span class="s">&quot;Submit as Multipart/form-data&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; formmethod --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  Last name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;lname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">formmethod=</span><span class="s">&quot;post&quot;</span> <span class="na">formaction=</span><span class="s">&quot;demo_post.asp&quot;</span>
</span><span class='line'>  <span class="na">value=</span><span class="s">&quot;Submit using POST&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; formnovalidate --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  E-mail: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;email&quot;</span> <span class="na">name=</span><span class="s">&quot;userid&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">formnovalidate</span> <span class="na">value=</span><span class="s">&quot;Submit without validation&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; formtarget --&gt;</span>
</span><span class='line'><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;demo_form.asp&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  First name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  Last name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;lname&quot;</span><span class="nt">&gt;&lt;br&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Submit as normal&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">formtarget=</span><span class="s">&quot;_blank&quot;</span>
</span><span class='line'>  <span class="na">value=</span><span class="s">&quot;Submit to a new window&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; height and width --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;image&quot;</span> <span class="na">src=</span><span class="s">&quot;img_submit.gif&quot;</span> <span class="na">alt=</span><span class="s">&quot;Submit&quot;</span> <span class="na">width=</span><span class="s">&quot;48&quot;</span> <span class="na">height=</span><span class="s">&quot;48&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; list --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">list=</span><span class="s">&quot;browsers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;datalist</span> <span class="na">id=</span><span class="s">&quot;browsers&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Internet Explorer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Firefox&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Chrome&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Opera&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Safari&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/datalist&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; min and max --&gt;</span>
</span><span class='line'>Enter a date before 1980-01-01:
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;date&quot;</span> <span class="na">name=</span><span class="s">&quot;bday&quot;</span> <span class="na">max=</span><span class="s">&quot;1979-12-31&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Enter a date after 2000-01-01:
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;date&quot;</span> <span class="na">name=</span><span class="s">&quot;bday&quot;</span> <span class="na">min=</span><span class="s">&quot;2000-01-02&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Quantity (between 1 and 5):
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">name=</span><span class="s">&quot;quantity&quot;</span> <span class="na">min=</span><span class="s">&quot;1&quot;</span> <span class="na">max=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; multiple --&gt;</span>
</span><span class='line'>Select images: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;file&quot;</span> <span class="na">name=</span><span class="s">&quot;img&quot;</span> <span class="na">multiple</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; pattern --&gt;</span>
</span><span class='line'>Country code: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;country_code&quot;</span> <span class="na">pattern=</span><span class="s">&quot;[A-Za-z]{3}&quot;</span> <span class="na">title=</span><span class="s">&quot;Three letter country code&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; placeholder --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;fname&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;First name&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; required --&gt;</span>
</span><span class='line'>Username: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;usrname&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- &lt;input&gt; step --&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;number&quot;</span> <span class="na">name=</span><span class="s">&quot;points&quot;</span> <span class="na">step=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>graphics</p>

<figure class='code'><figcaption><span>graphics</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">&quot;myCanvas&quot;</span> <span class="na">width=</span><span class="s">&quot;200&quot;</span> <span class="na">height=</span><span class="s">&quot;100&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span><span class='line'><span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">&quot;myCanvas&quot;</span> <span class="na">width=</span><span class="s">&quot;200&quot;</span> <span class="na">height=</span><span class="s">&quot;100&quot;</span> <span class="na">style=</span><span class="s">&quot;border:1px solid #000000;&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">75</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&quot;30px Arial&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create gradient</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">grd</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">createLinearGradient</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'><span class="nx">grd</span><span class="p">.</span><span class="nx">addColorStop</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;red&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">grd</span><span class="p">.</span><span class="nx">addColorStop</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;white&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Fill with gradient</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">grd</span><span class="p">;</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">80</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create gradient</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">grd</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">createRadialGradient</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
</span><span class='line'><span class="nx">grd</span><span class="p">.</span><span class="nx">addColorStop</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;red&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">grd</span><span class="p">.</span><span class="nx">addColorStop</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;white&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Fill with gradient</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="nx">grd</span><span class="p">;</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">80</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myCanvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;scream&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>SVG</p>

<figure class='code'><figcaption><span>SVG</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;svg</span> <span class="na">width=</span><span class="s">&quot;300&quot;</span> <span class="na">height=</span><span class="s">&quot;200&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;polygon</span> <span class="na">points=</span><span class="s">&quot;100,10 40,198 190,78 10,78 160,198&quot;</span>
</span><span class='line'>  <span class="na">style=</span><span class="s">&quot;fill:lime;stroke:purple;stroke-width:5;fill-rule:evenodd;&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/svg&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>media</p>

<figure class='code'><figcaption><span>media</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- video --&gt;</span>
</span><span class='line'><span class="nt">&lt;video</span> <span class="na">width=</span><span class="s">&quot;320&quot;</span> <span class="na">height=</span><span class="s">&quot;240&quot;</span> <span class="na">controls</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">&quot;movie.mp4&quot;</span> <span class="na">type=</span><span class="s">&quot;video/mp4&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">&quot;movie.ogg&quot;</span> <span class="na">type=</span><span class="s">&quot;video/ogg&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Your browser does not support the video tag.
</span><span class='line'><span class="nt">&lt;/video&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&lt;!-- audio --&gt;</span>
</span><span class='line'><span class="nt">&lt;audio</span> <span class="na">controls</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">&quot;horse.ogg&quot;</span> <span class="na">type=</span><span class="s">&quot;audio/ogg&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source</span> <span class="na">src=</span><span class="s">&quot;horse.mp3&quot;</span> <span class="na">type=</span><span class="s">&quot;audio/mpeg&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>Your browser does not support the audio element.
</span><span class='line'><span class="nt">&lt;/audio&gt;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/31/ascii-and-unicode/">ASCII and Unicode</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-31T22:20:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>10:20 pm</span></time>
        
           | <a href="/tech/2014/07/31/ascii-and-unicode/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/31/ascii-and-unicode/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>ASCII</h2>

<p>ASCII: American Standard Code for Information Interchange (1960s)</p>

<h3>Bits</h3>

<ul>
<li>128 characters: upper-case, lower-case, sepecial characters</li>
<li>binary digits/ bits: 0/1 or on/off</li>
<li>8 bits = 1 byte: representing 1 character (e.g., L: 01001100)</li>
</ul>


<h3>Bytes</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> Bytes                                   </th>
<th style="text-align:left;"> Unit        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> 8 bits                                  </td>
<td style="text-align:left;"> 1 byte      </td>
</tr>
<tr>
<td style="text-align:left;"> 1,024,000 bytes                         </td>
<td style="text-align:left;"> 1 megabyte  </td>
</tr>
<tr>
<td style="text-align:left;"> one billion bytes                       </td>
<td style="text-align:left;"> 1 gigabyte  </td>
</tr>
<tr>
<td style="text-align:left;"> one trillion bytes                      </td>
<td style="text-align:left;"> 1 terabyte  </td>
</tr>
<tr>
<td style="text-align:left;"> 8 quadrillion bytes ( 15 zeros)         </td>
<td style="text-align:left;"> 1 petabyte  </td>
</tr>
<tr>
<td style="text-align:left;"> 1,208,925,819,614,629,174,706,176 bytes </td>
<td style="text-align:left;"> 1 yottabyte </td>
</tr>
</tbody>
</table>


<table>
<thead>
<tr>
<th style="text-align:left;"> Storage              </th>
<th style="text-align:left;"> Bytes          </th>
<th style="text-align:left;"> Example                  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> 3.5 inch floppy disk </td>
<td style="text-align:left;"> 1.44 metabytes </td>
<td style="text-align:left;"> 750 pages                </td>
</tr>
<tr>
<td style="text-align:left;"> compact disc         </td>
<td style="text-align:left;"> 700 metabytes  </td>
<td style="text-align:left;"> an hour&rsquo;s worth of songs </td>
</tr>
<tr>
<td style="text-align:left;"> a single-side DVD    </td>
<td style="text-align:left;"> 4.7 gigabytes  </td>
<td style="text-align:left;"> a regular old movie      </td>
</tr>
</tbody>
</table>


<h3>Table of ASCII Characters</h3>

<pre><code>Char  Dec  Oct  Hex | Char  Dec  Oct  Hex | Char  Dec  Oct  Hex | Char Dec  Oct   Hex
-------------------------------------------------------------------------------------
(nul)   0 0000 0x00 | (sp)   32 0040 0x20 | @      64 0100 0x40 | `      96 0140 0x60
(soh)   1 0001 0x01 | !      33 0041 0x21 | A      65 0101 0x41 | a      97 0141 0x61
(stx)   2 0002 0x02 | "      34 0042 0x22 | B      66 0102 0x42 | b      98 0142 0x62
(etx)   3 0003 0x03 | #      35 0043 0x23 | C      67 0103 0x43 | c      99 0143 0x63
(eot)   4 0004 0x04 | $      36 0044 0x24 | D      68 0104 0x44 | d     100 0144 0x64
(enq)   5 0005 0x05 | %      37 0045 0x25 | E      69 0105 0x45 | e     101 0145 0x65
(ack)   6 0006 0x06 | &amp;      38 0046 0x26 | F      70 0106 0x46 | f     102 0146 0x66
(bel)   7 0007 0x07 | '      39 0047 0x27 | G      71 0107 0x47 | g     103 0147 0x67
(bs)    8 0010 0x08 | (      40 0050 0x28 | H      72 0110 0x48 | h     104 0150 0x68
(ht)    9 0011 0x09 | )      41 0051 0x29 | I      73 0111 0x49 | i     105 0151 0x69
(nl)   10 0012 0x0a | *      42 0052 0x2a | J      74 0112 0x4a | j     106 0152 0x6a
(vt)   11 0013 0x0b | +      43 0053 0x2b | K      75 0113 0x4b | k     107 0153 0x6b
(np)   12 0014 0x0c | ,      44 0054 0x2c | L      76 0114 0x4c | l     108 0154 0x6c
(cr)   13 0015 0x0d | -      45 0055 0x2d | M      77 0115 0x4d | m     109 0155 0x6d
(so)   14 0016 0x0e | .      46 0056 0x2e | N      78 0116 0x4e | n     110 0156 0x6e
(si)   15 0017 0x0f | /      47 0057 0x2f | O      79 0117 0x4f | o     111 0157 0x6f
(dle)  16 0020 0x10 | 0      48 0060 0x30 | P      80 0120 0x50 | p     112 0160 0x70
(dc1)  17 0021 0x11 | 1      49 0061 0x31 | Q      81 0121 0x51 | q     113 0161 0x71
(dc2)  18 0022 0x12 | 2      50 0062 0x32 | R      82 0122 0x52 | r     114 0162 0x72
(dc3)  19 0023 0x13 | 3      51 0063 0x33 | S      83 0123 0x53 | s     115 0163 0x73
(dc4)  20 0024 0x14 | 4      52 0064 0x34 | T      84 0124 0x54 | t     116 0164 0x74
(nak)  21 0025 0x15 | 5      53 0065 0x35 | U      85 0125 0x55 | u     117 0165 0x75
(syn)  22 0026 0x16 | 6      54 0066 0x36 | V      86 0126 0x56 | v     118 0166 0x76
(etb)  23 0027 0x17 | 7      55 0067 0x37 | W      87 0127 0x57 | w     119 0167 0x77
(can)  24 0030 0x18 | 8      56 0070 0x38 | X      88 0130 0x58 | x     120 0170 0x78
(em)   25 0031 0x19 | 9      57 0071 0x39 | Y      89 0131 0x59 | y     121 0171 0x79
(sub)  26 0032 0x1a | :      58 0072 0x3a | Z      90 0132 0x5a | z     122 0172 0x7a
(esc)  27 0033 0x1b | ;      59 0073 0x3b | [      91 0133 0x5b | {     123 0173 0x7b
(fs)   28 0034 0x1c | &lt;      60 0074 0x3c | \      92 0134 0x5c | |     124 0174 0x7c
(gs)   29 0035 0x1d | =      61 0075 0x3d | ]      93 0135 0x5d | }     125 0175 0x7d
(rs)   30 0036 0x1e | &gt;      62 0076 0x3e | ^      94 0136 0x5e | ~     126 0176 0x7e
(us)   31 0037 0x1f | ?      63 0077 0x3f | _      95 0137 0x5f | (del) 127 0177 0x7f
</code></pre>

<h3>ASCII control characters (character code 0-31)</h3>

<p>The first 32 characters in the ASCII-table are unprintable control codes and are used to control peripherals such as printers.</p>

<pre><code>DEC OCT HEX BIN Symbol  HTML Number HTML Name   Description
0   000 00  00000000    NUL &amp;#000;      Null char
1   001 01  00000001    SOH &amp;#001;      Start of Heading
2   002 02  00000010    STX &amp;#002;      Start of Text
3   003 03  00000011    ETX &amp;#003;      End of Text
4   004 04  00000100    EOT &amp;#004;      End of Transmission
5   005 05  00000101    ENQ &amp;#005;      Enquiry
6   006 06  00000110    ACK &amp;#006;      Acknowledgment
7   007 07  00000111    BEL &amp;#007;      Bell
8   010 08  00001000    BS  &amp;#008;      Back Space
9   011 09  00001001    HT  &amp;#009;      Horizontal Tab
10  012 0A  00001010    LF  &amp;#010;      Line Feed
11  013 0B  00001011    VT  &amp;#011;      Vertical Tab
12  014 0C  00001100    FF  &amp;#012;      Form Feed
13  015 0D  00001101    CR  &amp;#013;      Carriage Return
14  016 0E  00001110    SO  &amp;#014;      Shift Out / X-On
15  017 0F  00001111    SI  &amp;#015;      Shift In / X-Off
16  020 10  00010000    DLE &amp;#016;      Data Line Escape
17  021 11  00010001    DC1 &amp;#017;      Device Control 1 (oft. XON)
18  022 12  00010010    DC2 &amp;#018;      Device Control 2
19  023 13  00010011    DC3 &amp;#019;      Device Control 3 (oft. XOFF)
20  024 14  00010100    DC4 &amp;#020;      Device Control 4
21  025 15  00010101    NAK &amp;#021;      Negative Acknowledgement
22  026 16  00010110    SYN &amp;#022;      Synchronous Idle
23  027 17  00010111    ETB &amp;#023;      End of Transmit Block
24  030 18  00011000    CAN &amp;#024;      Cancel
25  031 19  00011001    EM  &amp;#025;      End of Medium
26  032 1A  00011010    SUB &amp;#026;      Substitute
27  033 1B  00011011    ESC &amp;#027;      Escape
28  034 1C  00011100    FS  &amp;#028;      File Separator
29  035 1D  00011101    GS  &amp;#029;      Group Separator
30  036 1E  00011110    RS  &amp;#030;      Record Separator
31  037 1F  00011111    US  &amp;#031;      Unit Separator
</code></pre>

<h3>ASCII printable characters (character code 32-127)</h3>

<p>Codes 32-127 are common for all the different variations of the ASCII table,
they are called printable characters, represent letters, digits, punctuation
marks, and a few miscellaneous symbols. You will find almost every character on
your keyboard. Character 127 represents the command DEL.</p>

<pre><code>DEC OCT HEX BIN Symbol  HTML Number HTML Name   Description
32  040 20  00100000        &amp;#32;       Space
33  041 21  00100001    !   &amp;#33;       Exclamation mark
34  042 22  00100010    "   &amp;#34;   &amp;quot;  Double quotes (or speech marks)
35  043 23  00100011    #   &amp;#35;       Number
36  044 24  00100100    $   &amp;#36;       Dollar
37  045 25  00100101    %   &amp;#37;       Procenttecken
38  046 26  00100110    &amp;   &amp;#38;   &amp;amp;   Ampersand
39  047 27  00100111    '   &amp;#39;       Single quote
40  050 28  00101000    (   &amp;#40;       Open parenthesis (or open bracket)
41  051 29  00101001    )   &amp;#41;       Close parenthesis (or close bracket)
42  052 2A  00101010    *   &amp;#42;       Asterisk
43  053 2B  00101011    +   &amp;#43;       Plus
44  054 2C  00101100    ,   &amp;#44;       Comma
45  055 2D  00101101    -   &amp;#45;       Hyphen
46  056 2E  00101110    .   &amp;#46;       Period, dot or full stop
47  057 2F  00101111    /   &amp;#47;       Slash or divide
48  060 30  00110000    0   &amp;#48;       Zero
49  061 31  00110001    1   &amp;#49;       One
50  062 32  00110010    2   &amp;#50;       Two
51  063 33  00110011    3   &amp;#51;       Three
52  064 34  00110100    4   &amp;#52;       Four
53  065 35  00110101    5   &amp;#53;       Five
54  066 36  00110110    6   &amp;#54;       Six
55  067 37  00110111    7   &amp;#55;       Seven
56  070 38  00111000    8   &amp;#56;       Eight
57  071 39  00111001    9   &amp;#57;       Nine
58  072 3A  00111010    :   &amp;#58;       Colon
59  073 3B  00111011    ;   &amp;#59;       Semicolon
60  074 3C  00111100    &lt;   &amp;#60;   &amp;lt;    Less than (or open angled bracket)
61  075 3D  00111101    =   &amp;#61;       Equals
62  076 3E  00111110    &gt;   &amp;#62;   &amp;gt;    Greater than (or close angled bracket)
63  077 3F  00111111    ?   &amp;#63;       Question mark
64  100 40  01000000    @   &amp;#64;       At symbol
65  101 41  01000001    A   &amp;#65;       Uppercase A
66  102 42  01000010    B   &amp;#66;       Uppercase B
67  103 43  01000011    C   &amp;#67;       Uppercase C
68  104 44  01000100    D   &amp;#68;       Uppercase D
69  105 45  01000101    E   &amp;#69;       Uppercase E
70  106 46  01000110    F   &amp;#70;       Uppercase F
71  107 47  01000111    G   &amp;#71;       Uppercase G
72  110 48  01001000    H   &amp;#72;       Uppercase H
73  111 49  01001001    I   &amp;#73;       Uppercase I
74  112 4A  01001010    J   &amp;#74;       Uppercase J
75  113 4B  01001011    K   &amp;#75;       Uppercase K
76  114 4C  01001100    L   &amp;#76;       Uppercase L
77  115 4D  01001101    M   &amp;#77;       Uppercase M
78  116 4E  01001110    N   &amp;#78;       Uppercase N
79  117 4F  01001111    O   &amp;#79;       Uppercase O
80  120 50  01010000    P   &amp;#80;       Uppercase P
81  121 51  01010001    Q   &amp;#81;       Uppercase Q
82  122 52  01010010    R   &amp;#82;       Uppercase R
83  123 53  01010011    S   &amp;#83;       Uppercase S
84  124 54  01010100    T   &amp;#84;       Uppercase T
85  125 55  01010101    U   &amp;#85;       Uppercase U
86  126 56  01010110    V   &amp;#86;       Uppercase V
87  127 57  01010111    W   &amp;#87;       Uppercase W
88  130 58  01011000    X   &amp;#88;       Uppercase X
89  131 59  01011001    Y   &amp;#89;       Uppercase Y
90  132 5A  01011010    Z   &amp;#90;       Uppercase Z
91  133 5B  01011011    [   &amp;#91;       Opening bracket
92  134 5C  01011100    \   &amp;#92;       Backslash
93  135 5D  01011101    ]   &amp;#93;       Closing bracket
94  136 5E  01011110    ^   &amp;#94;       Caret - circumflex
95  137 5F  01011111    _   &amp;#95;       Underscore
96  140 60  01100000    `   &amp;#96;       Grave accent
97  141 61  01100001    a   &amp;#97;       Lowercase a
98  142 62  01100010    b   &amp;#98;       Lowercase b
99  143 63  01100011    c   &amp;#99;       Lowercase c
100 144 64  01100100    d   &amp;#100;      Lowercase d
101 145 65  01100101    e   &amp;#101;      Lowercase e
102 146 66  01100110    f   &amp;#102;      Lowercase f
103 147 67  01100111    g   &amp;#103;      Lowercase g
104 150 68  01101000    h   &amp;#104;      Lowercase h
105 151 69  01101001    i   &amp;#105;      Lowercase i
106 152 6A  01101010    j   &amp;#106;      Lowercase j
107 153 6B  01101011    k   &amp;#107;      Lowercase k
108 154 6C  01101100    l   &amp;#108;      Lowercase l
109 155 6D  01101101    m   &amp;#109;      Lowercase m
110 156 6E  01101110    n   &amp;#110;      Lowercase n
111 157 6F  01101111    o   &amp;#111;      Lowercase o
112 160 70  01110000    p   &amp;#112;      Lowercase p
113 161 71  01110001    q   &amp;#113;      Lowercase q
114 162 72  01110010    r   &amp;#114;      Lowercase r
115 163 73  01110011    s   &amp;#115;      Lowercase s
116 164 74  01110100    t   &amp;#116;      Lowercase t
117 165 75  01110101    u   &amp;#117;      Lowercase u
118 166 76  01110110    v   &amp;#118;      Lowercase v
119 167 77  01110111    w   &amp;#119;      Lowercase w
120 170 78  01111000    x   &amp;#120;      Lowercase x
121 171 79  01111001    y   &amp;#121;      Lowercase y
122 172 7A  01111010    z   &amp;#122;      Lowercase z
123 173 7B  01111011    {   &amp;#123;      Opening brace
124 174 7C  01111100    |   &amp;#124;      Vertical bar
125 175 7D  01111101    }   &amp;#125;      Closing brace
126 176 7E  01111110    ~   &amp;#126;      Equivalency sign - tilde
127 177 7F  01111111        &amp;#127;      Delete
</code></pre>

<h3>The extended ASCII codes (character code 128-255)</h3>

<p>There are several different variations of the 8-bit ASCII table. The table
below is according to ISO 8859-1, also called ISO Latin-1. Codes 129-159
contain the Microsoft Windows Latin-1 extended characters.</p>

<pre><code>DEC OCT HEX BIN Symbol  HTML Number HTML Name   Description
128 200 80  10000000     &amp;#128;  &amp;euro;  Euro sign
129 201 81  10000001                 
130 202 82  10000010    ?   &amp;#130;  &amp;sbquo; Single low-9 quotation mark
131 203 83  10000011    ?   &amp;#131;  &amp;fnof;  Latin small letter f with hook
132 204 84  10000100    ?   &amp;#132;  &amp;bdquo; Double low-9 quotation mark
133 205 85  10000101     &amp;#133;  &amp;hellip;    Horizontal ellipsis
134 206 86  10000110    ?   &amp;#134;  &amp;dagger;    Dagger
135 207 87  10000111    ?   &amp;#135;  &amp;Dagger;    Double dagger
136 210 88  10001000    ?   &amp;#136;  &amp;circ;  Modifier letter circumflex accent
137 211 89  10001001     &amp;#137;  &amp;permil;    Per mille sign
138 212 8A  10001010    ?   &amp;#138;  &amp;Scaron;    Latin capital letter S with caron
139 213 8B  10001011    ?   &amp;#139;  &amp;lsaquo;    Single left-pointing angle quotation
140 214 8C  10001100    ?   &amp;#140;  &amp;OElig; Latin capital ligature OE
141 215 8D  10001101                 
142 216 8E  10001110    ?   &amp;#142;      Latin captial letter Z with caron
143 217 8F  10001111                 
144 220 90  10010000                 
145 221 91  10010001     &amp;#145;  &amp;lsquo; Left single quotation mark
146 222 92  10010010     &amp;#146;  &amp;rsquo; Right single quotation mark
147 223 93  10010011     &amp;#147;  &amp;ldquo; Left double quotation mark
148 224 94  10010100     &amp;#148;  &amp;rdquo; Right double quotation mark
149 225 95  10010101    ?   &amp;#149;  &amp;bull;  Bullet
150 226 96  10010110     &amp;#150;  &amp;ndash; En dash
151 227 97  10010111     &amp;#151;  &amp;mdash; Em dash
152 230 98  10011000    ?   &amp;#152;  &amp;tilde; Small tilde
153 231 99  10011001    ?   &amp;#153;  &amp;trade; Trade mark sign
154 232 9A  10011010    ?   &amp;#154;  &amp;scaron;    Latin small letter S with caron
155 233 9B  10011011    ?   &amp;#155;  &amp;rsaquo;    Single right-pointing angle quotation mark
156 234 9C  10011100    ?   &amp;#156;  &amp;oelig; Latin small ligature oe
157 235 9D  10011101                 
158 236 9E  10011110    ?   &amp;#158;      Latin small letter z with caron
159 237 9F  10011111    ?   &amp;#159;  &amp;yuml;  Latin capital letter Y with diaeresis
160 240 A0  10100000        &amp;#160;  &amp;nbsp;  Non-breaking space
161 241 A1  10100001    ?   &amp;#161;  &amp;iexcl; Inverted exclamation mark
162 242 A2  10100010     &amp;#162;  &amp;cent;  Cent sign
163 243 A3  10100011     &amp;#163;  &amp;pound; Pound sign
164 244 A4  10100100      &amp;#164;  &amp;curren;    Currency sign
165 245 A5  10100101     &amp;#165;  &amp;yen;   Yen sign
166 246 A6  10100110    |   &amp;#166;  &amp;brvbar;    Pipe, Broken vertical bar
167 247 A7  10100111      &amp;#167;  &amp;sect;  Section sign
168 250 A8  10101000      &amp;#168;  &amp;uml;   Spacing diaeresis - umlaut
169 251 A9  10101001    ?   &amp;#169;  &amp;copy;  Copyright sign
170 252 AA  10101010    a   &amp;#170;  &amp;ordf;  Feminine ordinal indicator
171 253 AB  10101011    ?   &amp;#171;  &amp;laquo; Left double angle quotes
172 254 AC  10101100    ?   &amp;#172;  &amp;not;   Not sign
173 255 AD  10101101        &amp;#173;  &amp;shy;   Soft hyphen
174 256 AE  10101110    ?   &amp;#174;  &amp;reg;   Registered trade mark sign
175 257 AF  10101111      &amp;#175;  &amp;macr;  Spacing macron - overline
176 260 B0  10110000      &amp;#176;  &amp;deg;   Degree sign
177 261 B1  10110001      &amp;#177;  &amp;plusmn;    Plus-or-minus sign
178 262 B2  10110010    2   &amp;#178;  &amp;sup2;  Superscript two - squared
179 263 B3  10110011    3   &amp;#179;  &amp;sup3;  Superscript three - cubed
180 264 B4  10110100     &amp;#180;  &amp;acute; Acute accent - spacing acute
181 265 B5  10110101      &amp;#181;  &amp;micro; Micro sign
182 266 B6  10110110    ?   &amp;#182;  &amp;para;  Pilcrow sign - paragraph sign
183 267 B7  10110111      &amp;#183;  &amp;middot;    Middle dot - Georgian comma
184 270 B8  10111000    ?   &amp;#184;  &amp;cedil; Spacing cedilla
185 271 B9  10111001    1   &amp;#185;  &amp;sup1;  Superscript one
186 272 BA  10111010    o   &amp;#186;  &amp;ordm;  Masculine ordinal indicator
187 273 BB  10111011    ?   &amp;#187;  &amp;raquo; Right double angle quotes
188 274 BC  10111100    ?   &amp;#188;  &amp;frac14;    Fraction one quarter
189 275 BD  10111101    ?   &amp;#189;  &amp;frac12;    Fraction one half
190 276 BE  10111110    ?   &amp;#190;  &amp;frac34;    Fraction three quarters
191 277 BF  10111111    ?   &amp;#191;  &amp;iquest;    Inverted question mark
192 300 C0  11000000      &amp;#192;  &amp;Agrave;    Latin capital letter A with grave
193 301 C1  11000001      &amp;#193;  &amp;Aacute;    Latin capital letter A with acute
194 302 C2  11000010    ?   &amp;#194;  &amp;Acirc; Latin capital letter A with circumflex
195 303 C3  11000011    ?   &amp;#195;  &amp;Atilde;    Latin capital letter A with tilde
196 304 C4  11000100    ?   &amp;#196;  &amp;Auml;  Latin capital letter A with diaeresis
197 305 C5  11000101    ?   &amp;#197;  &amp;Aring; Latin capital letter A with ring above
198 306 C6  11000110    ?   &amp;#198;  &amp;AElig; Latin capital letter AE
199 307 C7  11000111    ?   &amp;#199;  &amp;Ccedil;    Latin capital letter C with cedilla
200 310 C8  11001000      &amp;#200;  &amp;Egrave;    Latin capital letter E with grave
201 311 C9  11001001      &amp;#201;  &amp;Eacute;    Latin capital letter E with acute
202 312 CA  11001010      &amp;#202;  &amp;Ecirc; Latin capital letter E with circumflex
203 313 CB  11001011    ?   &amp;#203;  &amp;Euml;  Latin capital letter E with diaeresis
204 314 CC  11001100      &amp;#204;  &amp;Igrave;    Latin capital letter I with grave
205 315 CD  11001101      &amp;#205;  &amp;Iacute;    Latin capital letter I with acute
206 316 CE  11001110    ?   &amp;#206;  &amp;Icirc; Latin capital letter I with circumflex
207 317 CF  11001111    ?   &amp;#207;  &amp;Iuml;  Latin capital letter I with diaeresis
208 320 D0  11010000    D   &amp;#208;  &amp;ETH;   Latin capital letter ETH
209 321 D1  11010001    ?   &amp;#209;  &amp;Ntilde;    Latin capital letter N with tilde
210 322 D2  11010010      &amp;#210;  &amp;Ograve;    Latin capital letter O with grave
211 323 D3  11010011      &amp;#211;  &amp;Oacute;    Latin capital letter O with acute
212 324 D4  11010100    ?   &amp;#212;  &amp;Ocirc; Latin capital letter O with circumflex
213 325 D5  11010101    ?   &amp;#213;  &amp;Otilde;    Latin capital letter O with tilde
214 326 D6  11010110    ?   &amp;#214;  &amp;Ouml;  Latin capital letter O with diaeresis
215 327 D7  11010111      &amp;#215;  &amp;times; Multiplication sign
216 330 D8  11011000    ?   &amp;#216;  &amp;Oslash;    Latin capital letter O with slash
217 331 D9  11011001      &amp;#217;  &amp;Ugrave;    Latin capital letter U with grave
218 332 DA  11011010      &amp;#218;  &amp;Uacute;    Latin capital letter U with acute
219 333 DB  11011011    ?   &amp;#219;  &amp;Ucirc; Latin capital letter U with circumflex
220 334 DC  11011100      &amp;#220;  &amp;Uuml;  Latin capital letter U with diaeresis
221 335 DD  11011101    Y   &amp;#221;  &amp;Yacute;    Latin capital letter Y with acute
222 336 DE  11011110    T   &amp;#222;  &amp;THORN; Latin capital letter THORN
223 337 DF  11011111    ?   &amp;#223;  &amp;szlig; Latin small letter sharp s - ess-zed
224 340 E0  11100000      &amp;#224;  &amp;agrave;    Latin small letter a with grave
225 341 E1  11100001      &amp;#225;  &amp;aacute;    Latin small letter a with acute
226 342 E2  11100010    a   &amp;#226;  &amp;acirc; Latin small letter a with circumflex
227 343 E3  11100011    ?   &amp;#227;  &amp;atilde;    Latin small letter a with tilde
228 344 E4  11100100    ?   &amp;#228;  &amp;auml;  Latin small letter a with diaeresis
229 345 E5  11100101    ?   &amp;#229;  &amp;aring; Latin small letter a with ring above
230 346 E6  11100110    ?   &amp;#230;  &amp;aelig; Latin small letter ae
231 347 E7  11100111    ?   &amp;#231;  &amp;ccedil;    Latin small letter c with cedilla
232 350 E8  11101000      &amp;#232;  &amp;egrave;    Latin small letter e with grave
233 351 E9  11101001      &amp;#233;  &amp;eacute;    Latin small letter e with acute
234 352 EA  11101010      &amp;#234;  &amp;ecirc; Latin small letter e with circumflex
235 353 EB  11101011    ?   &amp;#235;  &amp;euml;  Latin small letter e with diaeresis
236 354 EC  11101100      &amp;#236;  &amp;igrave;    Latin small letter i with grave
237 355 ED  11101101      &amp;#237;  &amp;iacute;    Latin small letter i with acute
238 356 EE  11101110    ?   &amp;#238;  &amp;icirc; Latin small letter i with circumflex
239 357 EF  11101111    ?   &amp;#239;  &amp;iuml;  Latin small letter i with diaeresis
240 360 F0  11110000    e   &amp;#240;  &amp;eth;   Latin small letter eth
241 361 F1  11110001    ?   &amp;#241;  &amp;ntilde;    Latin small letter n with tilde
242 362 F2  11110010      &amp;#242;  &amp;ograve;    Latin small letter o with grave
243 363 F3  11110011      &amp;#243;  &amp;oacute;    Latin small letter o with acute
244 364 F4  11110100    ?   &amp;#244;  &amp;ocirc; Latin small letter o with circumflex
245 365 F5  11110101    ?   &amp;#245;  &amp;otilde;    Latin small letter o with tilde
246 366 F6  11110110    ?   &amp;#246;  &amp;ouml;  Latin small letter o with diaeresis
247 367 F7  11110111      &amp;#247;  &amp;divide;    Division sign
248 370 F8  11111000    ?   &amp;#248;  &amp;oslash;    Latin small letter o with slash
249 371 F9  11111001      &amp;#249;  &amp;ugrave;    Latin small letter u with grave
250 372 FA  11111010      &amp;#250;  &amp;uacute;    Latin small letter u with acute
251 373 FB  11111011    ?   &amp;#251;  &amp;ucirc; Latin small letter u with circumflex
252 374 FC  11111100      &amp;#252;  &amp;uuml;  Latin small letter u with diaeresis
253 375 FD  11111101    y   &amp;#253;  &amp;yacute;    Latin small letter y with acute
254 376 FE  11111110    t   &amp;#254;  &amp;thorn; Latin small letter thorn
255 377 FF  11111111    ?   &amp;#255;  &amp;yuml;  Latin small letter y with diaeresis
</code></pre>

<h2>Unicode</h2>

<p>binary -> ascii -> unicode</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> Binary </th>
<th style="text-align:left;"> ASCII           </th>
<th style="text-align:left;"> Unicode           </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> bit    </td>
<td style="text-align:left;"> 8 bits = 1 byte </td>
<td style="text-align:left;"> 16 bits = 2 bytes </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> 255             </td>
<td style="text-align:left;"> 80,000            </td>
</tr>
</tbody>
</table>


<p>bits</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> 80000 </th>
<th style="text-align:center;">       </th>
<th style="text-align:center;">      </th>
<th style="text-align:center;">      </th>
<th style="text-align:center;">      </th>
<th style="text-align:center;">      </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th> </th>
<th style="text-align:center;"> 255 </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> 32768 </td>
<td style="text-align:center;"> 16384 </td>
<td style="text-align:center;"> 8192 </td>
<td style="text-align:center;"> 4096 </td>
<td style="text-align:center;"> 2048 </td>
<td style="text-align:center;"> 1024 </td>
<td style="text-align:center;"> 512 </td>
<td style="text-align:center;"> 256 </td>
<td> </td>
<td style="text-align:center;"> 128 </td>
<td style="text-align:center;"> 64 </td>
<td style="text-align:center;"> 32 </td>
<td style="text-align:center;"> 16 </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 1 </td>
</tr>
</tbody>
</table>


<h3>Table of Unicode</h3>

<pre><code>0000-001F Control character
0020-007F Basic Latin
0080-00FF Latin-1 Supplement
0100-017F Latin extended A
0180-024F Latin extended B
0250-02AF IPA Extentions
02B0-02FF Spacing Modifier Letters
0300-036F Combining Diacritical Marks
0370-03FF Greek and Coptic
0400-04FF Cyrillic
0500-052F Cyrillic Supplement
0530-058F Armenian
0590-05FF Hebrew
0600-06FF Arabic
0700-074F Syriac
0750-077F Arabic Supplement
0780-07BF Thaana
07C0-07FF NKo
0800-083F Samaritan
0840-085F Mandaic
08A0-08FF Arabic Extended-A
0900-097F Devanagari
0980-09FF Bengali
0A00-0A7F Gurmukhi
0A80-0AFF Gujarati
0B00-0B7F Oriya
0B80-0BFF Tamil
0C00-0C7F Telugu
0C80-0CFF Kannada
0D00-0D7F Malayalam
0D80-0DFF Sinhala
0E00-0E7F Thai
0E80-0EFF Lao
0F00-0FFF Tibetan
1000-109F Myanmar
10A0-10FF Georgian
1100-11FF Hangul Jamo
1200-137F Ethiopic
1380-139F Ethiopic Supplement
13A0-13FF Cherokee
1400-167F Unified Canadian Aboriginal Syllabics
1680-169F Ogham
16A0-16FF Runic
1700-171F Tagalog
1720-173F Hanunoo
1740-175F Buhid
1760-177F Tagbanwa
1780-17FF Khmer
1800-18AF Mongolian
18B0-18FF Unified Canadian Aboriginal Syllabics Extended
1900-194F Limbu
1950-197F Tai Le
1980-19DF Tai Lue
19E0-19FF Khmer Symbols
1A00-1A1F Buginese
1A20-1AAF Tai Tham
1B00-1B87 Balinese
1B80-1BBF Sundanese
1BC0-1BFF Batak
1C00-1C4F Lepcha
1C50-1C7F Ol Chiki
1CC0-1CCF Sundanese Supplement
1CD0-1CFF Vedic Extensions
1D00-1D7F Phonetic Extensions
1D80-1DBF Phonetic Extensions Supplement
1DC0-1DFF Combining Diacritical Marks Supplement
1E00-1EFF Latin extended additional
1F00-1FFF Greek Extended
2000-206F General Punctuation
2070-209F Superscripts and Subscripts
20A0-20CF Currency Symbols
20D0-20FF Combining Diacritical Marks for Symbols
2100-214F Letterlike Symbols
2150-218F Number Forms
2190-21FF Arrows
2200-22FF Mathematical Operators
2300-23FF Miscellaneous Technical
2400-243F Control Pictures
2440-245F Optical Character Recognition
2460-24FF Enclosed Alphanumerics
2500-257F Box Drawing
2580-259F Block Elements
25A0-25FF Geometric Shapes
2600-26FF Miscellaneous Symbols
2700-27BF Dingbats
27C0-27EF Miscellaneous Mathematical Symbols-A
27F0-27FF Supplemental Arrows-A
2800-28FF Braille Patterns
2900-297F Supplemental Arrows-B
2980-29FF Miscellaneous Mathematical Symbols-B
2A00-2AFF Supplemental Mathematical Operators
2B00-2BFF Miscellaneous Symbols and Arrows
2C00-2C5F Glagolitic
2C60-2C7F Latin Extended-C
2C80-2CFF Coptic
2D00-2D2F Georgian Supplement
2D30-2D7F Tifinagh
2D80-2DDF Ethiopic Extended
2DE0-2DFF Cyrillic Extended-A
2E00-2E7F Supplemental Punctuation
2E80-2EFF CJK Radicals Supplement
2F00-2FDF Kangxi Radicals
2FF0-2FFF Ideographic Description Characters
3000-303F CJK Symbols and Punctuation
3040-309F Hiragana
30A0-30FF Katakana
3100-312F Bopomofo
3130-318F Hangul Compatibility Jamo
3190-319F Kanbun
31A0-31BF Bopomofo Extended
31C0-31EF CJK Strokes
31F0-31FF Katakana Phonetic Extensions
3200-32FF Enclosed CJK Letters and Months
3300-33FF CJK Compatibility
3400-4DBF CJK Unified Ideographs Extension A
4DC0-4DFF Yijing Hexagram Symbols
4E00-9FFF CJK Unified Ideographs
A000-A48F Yi Syllables
A490-A4CF Yi Radicals
A500-A63F Vai
A640-A69F Cyrillic Extended-B
A6A0-A6FF Bamum
A700-A71F Modifier Tone Letters
A720-A7FF Latin Extended-D
A800-A82F Syloti Nagri
A830-A83F Common Indic Number Forms
A840-A87F Phags-pa
A880-A8DF Saurashtra
A8E0-A8FF Devanagari Extended
A900-A92F Kayah Li
A930-A95F Rejang
A960-A97F Hangul Jamo Extended-A
A980-A9DF Javanese
AA00-AA5F Cham
AA60-AA7F Myanmar Extended-A
AA80-AADF Tai Viet
AAE0-AAFF Meetei Mayek Extensions
AB00-AB2F Ethiopic Extended-A
ABC0-ABFF Meetei Mayek
AC00-D7AF Hangul Syllables
D800-DB7F High Surrogates
DB80-DBFF High Private Use Surrogates
DC00-DFFF Low Surrogates
E000-F8FF Private Use Area
F900-FAFF CJK Compatibility Ideographs
FB00-FB4F Alphabetic Presentation Forms
FB50-FDFF Arabic Presentation Forms-A
FE00-FE0F Variation Selectors
FE10-FE1F Vertical Forms
FE20-FE2F Combining Half Marks
FE30-FE4F CJK Compatibility Forms
FE50-FE6F Small Form Variants
FE70-FEFF Arabic Presentation Forms-B
FF00-FFEF Halfwidth and Fullwidth Forms
FFF0-FFFF Specials
</code></pre>

<h2>Tools</h2>

<ul>
<li><a href="http://unicode-table.com/en/#control-character">Unicode Character Table</a></li>
<li><a href="http://textmechanic.com/ASCII-Hex-Unicode-Base64-Converter.html">Text Mechanic</a></li>
</ul>


<h2>References</h2>

<ol>
<li><a href="http://education-portal.com/academy/lesson/ascii-binary-digital-and-analog-representation-of-data.html#lesson">ASCII and Unicode to Represent Characters in Binary Code</a></li>
<li><a href="http://web.cs.mun.ca/~michael/c/ascii-table.html">Table of ASCII Characters</a></li>
<li><a href="http://www.ascii-code.com/">ASCII Code - The extended ASCII table</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/30/summarization-on-the-machine-learning-algorithms/">Summarization on the Machine Learning Algorithms</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-30T12:00:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 pm</span></time>
        
           | <a href="/tech/2014/07/30/summarization-on-the-machine-learning-algorithms/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/30/summarization-on-the-machine-learning-algorithms/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>Table of Contents</p>

<ul>
<li>1. Classification</li>
<li>2. Prediction</li>
<li>3. Unsupervised Learning</li>
<li>4. Dimensionality Reduction</li>
<li>5. Big Data and Map Reduce</li>
</ul>


<h2>1. Classification</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm  </th>
<th style="text-align:left;"> Maths                   </th>
<th style="text-align:left;"> Data     </th>
<th style="text-align:left;"> Pros       </th>
<th style="text-align:left;"> Cons        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> kNN        </td>
<td style="text-align:left;"> euclidean distance: sqrt{sum(xi-xj)<sup>2</sup>} </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> High accuracy, insensitive to outliers, no assumptions about data </td>
<td style="text-align:left;"> Computationally expensive, requires a lot of memory </td>
</tr>
<tr>
<td style="text-align:left;"> Decision Tree </td>
<td style="text-align:left;"> shannon entropy: - p(x) * log(p(x)) </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Computationally cheap to use, easy for humans to understand learned results, missing values OK, can deal with irrelevant features </td>
<td style="text-align:left;"> Prone to overfitting </td>
</tr>
<tr>
<td style="text-align:left;"> Naive Bayes </td>
<td style="text-align:left;"> bayes, ln(a * b) = lna + lnb, lnf(x)~ f(x) </td>
<td style="text-align:left;"> Nominal values </td>
<td style="text-align:left;"> Works with a small amount of data, handles multiple classes </td>
<td style="text-align:left;"> Sensitive to how the input data is prepared </td>
</tr>
<tr>
<td style="text-align:left;"> Logistic Regression </td>
<td style="text-align:left;"> sigmoid: 1/(1+e^-z), gradient ascent/descent: w = w +/- alpha * delta(f(w)) </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Computationally inexpensive, easy to implement, knowledge representation easy to interpret </td>
<td style="text-align:left;"> Prone to underfitting, may have low accuracy </td>
</tr>
<tr>
<td style="text-align:left;"> Support Vector Machine </td>
<td style="text-align:left;"> hyperplane: arg max{min (label * W<sup>T</sup> * x+b) * 1/|W|}, SMO algorithm (Sequential Minimal Optimization): finds alpha (increased/decreased) and b, alpha criteria: outside margin boundary, not already clamped/bounded </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Low generalization error, computationally inexpensive, easy to interpret results </td>
<td style="text-align:left;"> Sensitive to tuning parameters and kernel choice; natively only handles binary classification </td>
</tr>
<tr>
<td style="text-align:left;"> AdaBoost Meta-Algorithm </td>
<td style="text-align:left;"> boosting/bagging: (boosting) weighted sum of all classifiers, error = # of misclassified / # of examples, alpha = &frac12; * ln (1 - error / error), weightedVector = probability * exp(-1 * alpha * categoryMatrix * classifiedMatrix) </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Low generalization error, easy to code, works with most classifiers, no parameters to adjust </td>
<td style="text-align:left;"> Sensitive to outliers </td>
</tr>
</tbody>
</table>


<h2>2. Prediction</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm  </th>
<th style="text-align:left;"> Maths                   </th>
<th style="text-align:left;"> Data     </th>
<th style="text-align:left;"> Pros       </th>
<th style="text-align:left;"> Cons        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Linear Regression </td>
<td style="text-align:left;"> *  </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Easy to interpret results, computationally inexpensive </td>
<td style="text-align:left;"> Poorly models nonlinear data </td>
</tr>
<tr>
<td style="text-align:left;"> Tree-based Regression </td>
<td style="text-align:left;"> bestFeatureSplit: targetMean, targetVariance </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Fits complex, nonlinear data </td>
<td style="text-align:left;"> Difficult to interpret results </td>
</tr>
</tbody>
</table>


<p>* (Linear Regression) Maths</p>

<ul>
<li><p>regression - (X<sup>T</sup> * X) inversed</p>

<ul>
<li>Y = X<sup>T</sup> * W</li>
<li>W = (X<sup>T</sup> * X)<sup>-1</sup> * X<sup>T</sup> * Y</li>
</ul>
</li>
<li><p>locally weighted linear regression (LWLR) - (X<sup>T</sup> * X) inversed</p>

<ul>
<li>yHat = (X<sup>T</sup> * W * X)<sup>-1</sup> * X<sup>T</sup> * W * y</li>
<li>(kernel) W = exp (|xi - x|/(-2k<sup>2</sup>)), constant k - how much to weight nearby points</li>
</ul>
</li>
<li><p>ridge regression - (X<sup>T</sup> * X) NOT inversed</p>

<ul>
<li>Y = X<sup>T</sup> * X + lambda * I</li>
<li>W = (X<sup>T</sup> * X + lambda * I)<sup>-1</sup> * X<sup>T</sup> * y</li>
</ul>
</li>
<li><p>forward stagewise regression - greedy algorithm</p>

<ul>
<li>lasso</li>
</ul>
</li>
</ul>


<h2>3. Unsupervised Learning</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm  </th>
<th style="text-align:left;"> Maths                   </th>
<th style="text-align:left;"> Data     </th>
<th style="text-align:left;"> Pros       </th>
<th style="text-align:left;"> Cons        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Unlabeled items grouping: k-means clustering </td>
<td style="text-align:left;"> mean, euclidean distance: (x-y)<sup>2</sup>, squared error: distnace<sup>2</sup> </td>
<td style="text-align:left;"> Numeric values </td>
<td style="text-align:left;"> Easy to implement </td>
<td style="text-align:left;">  Can converge at local minima; slow on very large datasets </td>
</tr>
<tr>
<td style="text-align:left;"> Association analysis: apriori </td>
<td style="text-align:left;"> probability, confidence </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Easy to code up </td>
<td style="text-align:left;"> May be slow on large datasets </td>
</tr>
<tr>
<td style="text-align:left;"> Frequent itemsets finding: FP-growth </td>
<td style="text-align:left;"> frequency count, tree (data structure) </td>
<td style="text-align:left;"> Nominal values </td>
<td style="text-align:left;"> Usually faster than Apriori </td>
<td style="text-align:left;"> Difficult to implement; certain datasets degrade the performance </td>
</tr>
</tbody>
</table>


<h2>4. Dimensionality Reduction</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm  </th>
<th style="text-align:left;"> Maths                   </th>
<th style="text-align:left;"> Data     </th>
<th style="text-align:left;"> Pros       </th>
<th style="text-align:left;"> Cons        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Principal Component Analysis (PCA) </td>
<td style="text-align:left;"> covariance, eigenValues, eigenVectors </td>
<td style="text-align:left;"> Numerical values </td>
<td style="text-align:left;"> Reduces complexity of data, indentifies most important features </td>
<td style="text-align:left;"> May not be needed, could throw away useful information </td>
</tr>
<tr>
<td style="text-align:left;"> Singular Value Decomposition (SVD) </td>
<td style="text-align:left;"> [DATA]m<em>n = [U]m</em>m [SIGMA]m<em>n [V<sup>T</sup>]n</em>n </td>
<td style="text-align:left;"> Numeric values </td>
<td style="text-align:left;"> Simplifies data, removes noise, may improve algorithm results </td>
<td style="text-align:left;"> Transformed data may be difficult to understand </td>
</tr>
</tbody>
</table>


<h2>5. Big Data and Map Reduce</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm  </th>
<th style="text-align:left;"> Maths                   </th>
<th style="text-align:left;"> Data     </th>
<th style="text-align:left;"> Pros       </th>
<th style="text-align:left;"> Cons        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> MapReduce  </td>
<td style="text-align:left;"> </td>
<td style="text-align:left;"> Numeric values, nominal values </td>
<td style="text-align:left;"> Processes a massive job in a short period of time </td>
<td style="text-align:left;"> Algorithms must be rewritten; requires understanding of systems engineering </td>
</tr>
</tbody>
</table>


<p>MapReduce: a framework for distributed computing</p>

<h3>5.1. Machine Learning Algorithms for MapReduce</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> Algorithm                          </th>
<th style="text-align:left;"> MapReduce                                                                   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Naive Bayes                        </td>
<td style="text-align:left;"> mapper - results of the probability of a feature, reducer - sum up results  </td>
</tr>
<tr>
<td style="text-align:left;"> k-Nearest Neighbors (kNN)          </td>
<td style="text-align:left;"> tree: to narrow search for cloest vectors                                   </td>
</tr>
<tr>
<td style="text-align:left;"> Support Vector Machines (SVM)      </td>
<td style="text-align:left;"> Pegasos algorithm: stochastic gradient descent                              </td>
</tr>
<tr>
<td style="text-align:left;"> Singular Value Decomposition (SVD) </td>
<td style="text-align:left;"> Lanczos algorithm: find the singular values in a large matrix               </td>
</tr>
<tr>
<td style="text-align:left;"> k-means Clustering                 </td>
<td style="text-align:left;"> Canopy clustering                                                           </td>
</tr>
</tbody>
</table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/29/unbalanced-coin/">Unbalanced Coin</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-29T22:54:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:54 pm</span></time>
        
           | <a href="/tech/2014/07/29/unbalanced-coin/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/29/unbalanced-coin/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>If there is an unbalanced coin, the probability of the head is p (0\&lt;\p\&lt;1), while
of the tail is 1-p, how can you get the same probability of this coin?</p>

<p>To flip the coin twice,</p>

<ul>
<li>1. prob(head, head) = p * p</li>
<li>2. prob(head, tail) = p * (1-p)</li>
<li>3. prob(tail, head) = (1-p) * p</li>
<li>4. prob(tail, tail) = (1-p) * (1-p)</li>
</ul>


<p>If the situation 1 &amp; 4, flip the coin twice again.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">random</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">UnbalancedCoin</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">assert</span> <span class="mf">0.0</span> <span class="o">&lt;</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;invalid p&#39;</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">combination</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span class='line'>            <span class="n">pos</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">&#39;head&#39;</span><span class="p">,</span> <span class="s">&#39;tail&#39;</span><span class="p">])</span>
</span><span class='line'>            <span class="n">combination</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">combination</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">flip_prob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">combination</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">prob_flip</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">combination</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="s">&#39;head&#39;</span><span class="p">:</span>
</span><span class='line'>                <span class="n">prob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">prob</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span>
</span><span class='line'>            <span class="n">prob_flip</span> <span class="o">=</span> <span class="n">prob_flip</span> <span class="o">*</span> <span class="n">prob</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">prob_flip</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">p</span> <span class="o">=</span> <span class="mf">0.3</span>
</span><span class='line'>    <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'>    <span class="n">coin</span> <span class="o">=</span> <span class="n">UnbalancedCoin</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>    <span class="n">combination</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>    <span class="n">prob</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">flip_prob</span><span class="p">(</span><span class="n">combination</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;combination: &quot;</span><span class="p">,</span> <span class="n">combination</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;probability: &quot;</span><span class="p">,</span> <span class="n">prob</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/29/binary-search/">Binary Search</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-29T22:33:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:33 pm</span></time>
        
           | <a href="/tech/2014/07/29/binary-search/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/29/binary-search/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Introduction</h2>

<p>A binary search, it also called half-interval search which finds the position
of a speicified input value (key) within an array sorted by key value. The
order of the array should be arranged in ascending or descending.</p>

<h2>Algorithm</h2>

<p>NOTE: the array must be a ordered list</p>

<p>In each step, the algorithm compares the search key value with the key value of
the middle element in the array.</p>

<ul>
<li>If the array is empty, return &ldquo;not found&rdquo;.</li>
<li>Else,

<ul>
<li>If the keys match, then a matching element has been found and its
index/position is returned.</li>
<li>Else,

<ul>
<li>if the search key is less than the middle element&rsquo;s key, then the
algorithm repeats its action on the sub-array to the left of the middle
lement.</li>
<li>if the search key is greater, on the sub-array to the right.</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>Pros and Cons</h2>

<p>Pros:</p>

<ul>
<li>the times of comparison is less</li>
<li>the speech of search is fast</li>
<li>the average performance is good</li>
</ul>


<p>Cons:</p>

<ul>
<li>the array must be a ordered list</li>
<li>insertion / deletion is difficult</li>
</ul>


<p>Applications:</p>

<ul>
<li>the value in the array could not be modified frequently</li>
<li>the value in the array is searched frequently</li>
</ul>


<h2>Source Codes</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">first_pos</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">last_pos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">first_pos</span> <span class="o">&lt;</span> <span class="n">last_pos</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
</span><span class='line'>        <span class="n">midpoint</span> <span class="o">=</span> <span class="p">(</span><span class="n">first_pos</span> <span class="o">+</span> <span class="n">last_pos</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="c">#print midpoint</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">ordered_list</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="n">ordered_list</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">last_pos</span> <span class="o">=</span> <span class="n">midpoint</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">first_pos</span> <span class="o">=</span> <span class="n">midpoint</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">found</span>
</span></code></pre></td></tr></table></div></figure>


<p>It also can be recursive.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">False</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">midpoint</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">ordered_list</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="n">ordered_list</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">binary_search</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">[:</span><span class="n">midpoint</span><span class="p">],</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">binary_search</span><span class="p">(</span><span class="n">ordered_list</span><span class="p">[</span><span class="n">midpoint</span><span class="o">+</span><span class="mi">1</span><span class="p">:],</span> <span class="n">item</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/18/bash-scripting-with-ftp/">Bash Scripting With FTP</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-18T13:38:22+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:38 pm</span></time>
        
           | <a href="/tech/2014/07/18/bash-scripting-with-ftp/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/18/bash-scripting-with-ftp/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>Requirements</h2>

<p>Introduction:</p>

<ul>
<li>Connect to ftp host 10.11.12.13 port 22 user=hello password=world</li>
<li>Download 5 files called webtrekk_Marketing Report_2013-01-01_VN.zip</li>
</ul>


<p>Requirements:</p>

<ul>
<li>Where 2013-01-01 is always the rolling date of 28 days ago regardless of the current date (e.g. if today is 2013-03-29 then the date should be 2013-03-01 and if today is 2013-03-30 then the date should be 2013-03-02)</li>
<li>VN can be any of [SG, MY, TH, PH, VN]</li>
<li>Into directory home/Marketing Report/Data</li>
</ul>


<p>Processing:</p>

<ul>
<li>Run ZMR.py which is situated in home/Marketing Report</li>
<li>Copy WT.csv from the local directory home/Marketing/Report to a directory that a standard mysql installation is allowed to use (google it if unsure)</li>
<li>Log on to mysql with local-infile=1</li>
<li>Run the query UpdateWebtrekk.sql</li>
</ul>


<h2>Source Codes</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">shutil</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">MySQLdb</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Database</span><span class="p">:</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; creating the class Database &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">,</span> <span class="n">db</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; initializing database and connecting &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">passwd</span> <span class="o">=</span> <span class="n">passwd</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">passwd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">passwd</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
</span><span class='line'>                                    <span class="n">local_infile</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># loading local file allowed</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; inserting records into database &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">try</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span class='line'>        <span class="k">except</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; querying data with sql &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span class='line'>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; closing cursor and connection &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createFileName</span><span class="p">(</span><span class="n">countryList</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; generating the names of zip files &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">today</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
</span><span class='line'>    <span class="n">fileDate</span> <span class="o">=</span> <span class="n">today</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>  <span class="c"># rolling 28 days ago</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fileNames</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">countryList</span><span class="p">:</span>
</span><span class='line'>        <span class="n">fileName</span> <span class="o">=</span> <span class="s">&#39;webtrekk_Marketing Report_</span><span class="si">%s</span><span class="s">_</span><span class="si">%s</span><span class="s">.zip&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fileDate</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">country</span><span class="p">))</span>
</span><span class='line'>        <span class="n">fileNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">fileNames</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">ftpDownload</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">,</span> <span class="n">remotedir</span><span class="p">,</span> <span class="n">localdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; downloading zip files from ftp and then saving them to the directory &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ftp</span> <span class="o">=</span> <span class="n">FTP</span><span class="p">()</span>
</span><span class='line'>    <span class="c">#ftp.set_debuglevel(2)  # 2: display, 0: not display</span>
</span><span class='line'>    <span class="n">ftp</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>  <span class="c"># host, port</span>
</span><span class='line'>    <span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">)</span>  <span class="c"># user, passwd</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ftp</span><span class="o">.</span><span class="n">cwd</span><span class="p">(</span><span class="n">remotedir</span><span class="p">)</span>  <span class="c"># connecting the directory of files</span>
</span><span class='line'>    <span class="c">#ftp.retrlines(&#39;LIST&#39;) # listing files under directory</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># creating local file path</span>
</span><span class='line'>    <span class="n">localPath</span> <span class="o">=</span> <span class="n">localdir</span> <span class="o">+</span> <span class="n">filename</span>
</span><span class='line'>    <span class="n">file_handler</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">localPath</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># downloading files from ftp and saving to local path</span>
</span><span class='line'>    <span class="n">ftp</span><span class="o">.</span><span class="n">retrbinary</span><span class="p">(</span><span class="s">&quot;RETR </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">,</span> <span class="n">file_handler</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;File </span><span class="si">%s</span><span class="s"> has been saved in </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">localPath</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">ftp</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">copyCSV</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">csvdir</span><span class="p">,</span> <span class="n">todir</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; copying csv file to mysql directory&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">todir</span><span class="o">+</span><span class="n">csvfile</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># if csv file exists, remove csv file and copy the new one</span>
</span><span class='line'>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">todir</span><span class="o">+</span><span class="n">csvfile</span><span class="p">)</span>
</span><span class='line'>        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">csvdir</span><span class="o">+</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">todir</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="c"># if csv file does not exist, copy csv file to the directory</span>
</span><span class='line'>        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">csvdir</span><span class="o">+</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">todir</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;File </span><span class="si">%s</span><span class="s"> has been copied to the directory </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">csvfile</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">todir</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># step1. creating file names</span>
</span><span class='line'>    <span class="n">countryList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;SG&#39;</span><span class="p">,</span> <span class="s">&#39;MY&#39;</span><span class="p">,</span> <span class="s">&#39;TH&#39;</span><span class="p">,</span> <span class="s">&#39;PH&#39;</span><span class="p">,</span> <span class="s">&#39;VN&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">fileNames</span> <span class="o">=</span> <span class="n">createFileName</span><span class="p">(</span><span class="n">countryList</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># step2. downloading files to local directory</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">fileName</span> <span class="ow">in</span> <span class="n">fileNames</span><span class="p">:</span>
</span><span class='line'>        <span class="n">ftpDownload</span><span class="p">(</span><span class="s">&#39;10.11.12.13&#39;</span><span class="p">,</span> <span class="s">&#39;22&#39;</span><span class="p">,</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;world&#39;</span><span class="p">,</span> <span class="s">&#39;XXX/XXX&#39;</span><span class="p">,</span>
</span><span class='line'>                    <span class="s">&#39;home/Marketing Report/Data/&#39;</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># step3. running python script</span>
</span><span class='line'>    <span class="n">pyPath</span> <span class="o">=</span> <span class="s">&#39;home/Marketing Report/&#39;</span>
</span><span class='line'>    <span class="nb">execfile</span><span class="p">(</span><span class="n">pyPath</span> <span class="o">+</span> <span class="s">&#39;ZMR.py&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># step4. copying csv file to mysql directory</span>
</span><span class='line'>    <span class="n">csvfile</span> <span class="o">=</span> <span class="s">&#39;WT.csv&#39;</span>
</span><span class='line'>    <span class="n">csvdir</span> <span class="o">=</span> <span class="s">&#39;home/Marketing/Report&#39;</span>
</span><span class='line'>    <span class="n">todir</span> <span class="o">=</span> <span class="s">&#39;mysql_direcotry&#39;</span>
</span><span class='line'>    <span class="n">copyCSV</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">csvdir</span><span class="p">,</span> <span class="n">todir</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># step5. log onmysql with local-infile=1 and run query</span>
</span><span class='line'>    <span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;UpdateWebtrekk.sql&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span><span class='line'>        <span class="n">db</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class='line'>    <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Cron Job</h2>

<p>schedule the above as a cron job every day at 2.35am</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># cron: [minute] [hour] [day] [month] [weekday] [command] </span>
</span><span class='line'><span class="mi">35</span> <span class="mo">02</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">/</span><span class="n">python_path</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">py</span>
</span></code></pre></td></tr></table></div></figure>


<p>coding in python</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># step1. install python-crontab</span>
</span><span class='line'><span class="c"># step2. write script in python</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">crontab</span> <span class="kn">import</span> <span class="n">CronTab</span>
</span><span class='line'>
</span><span class='line'><span class="n">tab</span> <span class="o">=</span> <span class="n">CronTab</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s">&#39;xxx&#39;</span><span class="p">,</span> <span class="n">fake_tab</span><span class="o">=</span><span class="s">&#39;True&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># setting up command</span>
</span><span class='line'><span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;/python_path /path/script.py&#39;</span>
</span><span class='line'><span class="n">cron_job</span> <span class="o">=</span> <span class="n">tab</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s">&#39;xxxxx&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">crob_job</span><span class="o">.</span><span class="n">minute</span><span class="p">()</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
</span><span class='line'><span class="n">crob_job</span><span class="o">.</span><span class="n">hour</span><span class="p">()</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># writing content</span>
</span><span class='line'><span class="n">tab</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="n">tab</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/18/printing-a-schedule/">Printing a Schedule</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-18T13:19:22+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:19 pm</span></time>
        
           | <a href="/tech/2014/07/18/printing-a-schedule/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/18/printing-a-schedule/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h3>The tennis problem</h3>

<p>A tennis club is organizing a fun tournament once a year. We have 2n players, which are divided in two groups. We have the good players A = {a1, , an} and the bad players B = {b1, , bn}.</p>

<p>The tournament is a double tournament and the teams consist always of one good player (group A) and one bad player (group B). i. E.g., one match could be (a_1, b_2) vs. (a_3, b_4)</p>

<p>The playing schedule has to follow some rules:</p>

<ul>
<li>All players of group A have to play against each other (teams play in a group, no knockout tournament).</li>
<li>The same for the players of group B.</li>
<li>The team (ai, bj) only plays together once during the tournament (this means, you never play twice with the same partner).</li>
<li>The players of the same rank cant play together (the best player of A never plays together with the best player of B etc.) i.e., we never have the team (ai, bi).</li>
</ul>


<p>Pretty print the schedule of the tournament for any given n.</p>

<h3>Solution</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="sd">&quot;&quot;&quot; solution without constraint &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createSchedule</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>  <span class="c"># creating good players</span>
</span><span class='line'>    <span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;b&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>  <span class="c"># creating bad players</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># generating schedule</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;(</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">) vs. (</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">B</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="n">createSchedule</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Output</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b2</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b1</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b3</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a3</span><span class="p">,</span> <span class="n">b1</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b4</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a4</span><span class="p">,</span> <span class="n">b1</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b5</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a5</span><span class="p">,</span> <span class="n">b1</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b3</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a3</span><span class="p">,</span> <span class="n">b2</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b4</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a4</span><span class="p">,</span> <span class="n">b2</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b5</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a5</span><span class="p">,</span> <span class="n">b2</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a3</span><span class="p">,</span> <span class="n">b4</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a4</span><span class="p">,</span> <span class="n">b3</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a3</span><span class="p">,</span> <span class="n">b5</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a5</span><span class="p">,</span> <span class="n">b3</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">a4</span><span class="p">,</span> <span class="n">b5</span><span class="p">)</span> <span class="n">vs</span><span class="o">.</span> <span class="p">(</span><span class="n">a5</span><span class="p">,</span> <span class="n">b4</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/18/working-mysql-with-python/">Working MySQL With Python</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-18T13:12:22+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:12 pm</span></time>
        
           | <a href="/tech/2014/07/18/working-mysql-with-python/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/18/working-mysql-with-python/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Connection</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="sd">&quot;&quot;&quot; python with MySQL &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">MySQLdb</span>
</span><span class='line'>
</span><span class='line'><span class="c"># connect database</span>
</span><span class='line'><span class="n">conn</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&#39;test&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>  <span class="c"># opening cursor</span>
</span><span class='line'>
</span><span class='line'><span class="n">n</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;select * from table&#39;</span><span class="p">)</span>  <span class="c"># querying with SQL, return # of rows</span>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>  <span class="c"># getting all records</span>
</span><span class='line'>
</span><span class='line'><span class="c"># connection closed</span>
</span><span class='line'><span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Processing</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">MySQLdb</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">connectMySQL</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">sql</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; connect MySQL and return data by sql query&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">conn</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</span><span class='line'>        <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">n</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>  <span class="c"># querying with sql, return # of rows</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>  <span class="c"># fetching all rows</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;MySQL server could not be connected.&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; convert data into pandas data frame &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">days</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">visits</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">orders</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span class='line'>        <span class="n">day</span><span class="p">,</span> <span class="n">visit</span><span class="p">,</span> <span class="n">order</span> <span class="o">=</span> <span class="n">row</span>  <span class="c"># splitting columns</span>
</span><span class='line'>        <span class="n">days</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
</span><span class='line'>        <span class="n">visits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">visit</span><span class="p">)</span>
</span><span class='line'>        <span class="n">orders</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">daily_orders</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;Days&#39;</span><span class="p">:</span> <span class="n">days</span><span class="p">,</span>
</span><span class='line'>                                     <span class="s">&#39;Visits&#39;</span><span class="p">:</span> <span class="n">visits</span><span class="p">,</span>
</span><span class='line'>                                     <span class="s">&#39;Orders&#39;</span><span class="p">:</span> <span class="n">orders</span>
</span><span class='line'>                                     <span class="p">})</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">daily_orders</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>    <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM reporting.daily_orders WHERE reporting.daily_orders.Days = &#39;2013-01-12&#39;&quot;</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">connectMySQL</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="n">sql</span><span class="p">)</span>
</span><span class='line'>    <span class="n">daily_orders</span> <span class="o">=</span> <span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. Source Codes</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">MySQLdb</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Database</span><span class="p">:</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; creating the class Database &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="p">,</span> <span class="n">db</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; initializing database and connecting &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">passwd</span> <span class="o">=</span> <span class="n">passwd</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">MySQLdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">passwd</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; inserting records into database &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">try</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span class='line'>        <span class="k">except</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; querying data with sql &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span class='line'>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot; closing cursor and connection &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">mergeData</span><span class="p">(</span><span class="n">dataList</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; merging all country data into one &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fullData</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataList</span><span class="p">:</span>
</span><span class='line'>        <span class="n">fullData</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">fullData</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># creating the instances of database</span>
</span><span class='line'>    <span class="n">dbMY</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="s">&#39;zlmy_reporting&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dbSG</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="s">&#39;zlsg_reporting&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dbRE</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="s">&#39;root&#39;</span><span class="p">,</span> <span class="s">&#39;pw_root&#39;</span><span class="p">,</span> <span class="s">&#39;zlre_reporting&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># querying data from database</span>
</span><span class='line'>    <span class="n">dataMY</span> <span class="o">=</span> <span class="n">db1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;SELECT * from orders&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">dataSG</span> <span class="o">=</span> <span class="n">db2</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;SELECT * from orders&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># merging data into one</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">mergeData</span><span class="p">([</span><span class="n">dataMY</span><span class="p">,</span> <span class="n">dataSG</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># creating new table if not exists in the database zlre_reporting</span>
</span><span class='line'>    <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
</span><span class='line'><span class="s">             CREATE TABLE IF NOT EXISTS orders (</span>
</span><span class='line'><span class="s">               Days  VARCHAR(10),</span>
</span><span class='line'><span class="s">               Order_nr  INT(20),</span>
</span><span class='line'><span class="s">               Price_paid  FLOAT</span>
</span><span class='line'><span class="s">             )</span>
</span><span class='line'><span class="s">         &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">dbRE</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># inserting records into the database zlre_reporting</span>
</span><span class='line'>    <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
</span><span class='line'><span class="s">             INSERT INTO orders (Days, Order_nr, Price_paid) VALUES (&#39;</span><span class="si">%s</span><span class="s">&#39;, &#39;</span><span class="si">%s</span><span class="s">&#39;, &#39;</span><span class="si">%s</span><span class="s">&#39;)</span>
</span><span class='line'><span class="s">          &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span class='line'>        <span class="n">db3</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">sql</span> <span class="o">%</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c"># closing database</span>
</span><span class='line'>    <span class="n">dbMY</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>    <span class="n">dbSG</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>    <span class="n">dbRE</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/13/regular-expression/">Regular Expression</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-13T12:46:55+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:46 pm</span></time>
        
           | <a href="/tech/2014/07/13/regular-expression/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/13/regular-expression/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Regex</h2>

<h3>1.1. Elements</h3>

<p>symbols: <code>. ^ $ * + ? { [ ] \ | ( )</code></p>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type      </th>
<th style="text-align:left;"> Regex </th>
<th style="text-align:left;"> Expression                 </th>
<th style="text-align:left;"> Regex </th>
<th style="text-align:left;"> Expression                 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> container </td>
<td style="text-align:left;"> ()    </td>
<td style="text-align:left;"> all                        </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> []    </td>
<td style="text-align:left;"> single selection           </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> match     </td>
<td style="text-align:left;"> ?     </td>
<td style="text-align:left;"> 0/1, {0,1}                 </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> +     </td>
<td style="text-align:left;"> >=1, {1,}                  </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> *     </td>
<td style="text-align:left;"> >=0, {0,}                  </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> .     </td>
<td style="text-align:left;"> any except \n              </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> {m,n} </td>
<td style="text-align:left;"> [m,n] times                </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> \     </td>
<td style="text-align:left;"> \\section = r"\section" </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> operator  </td>
<td style="text-align:left;"> `</td>
<td style="text-align:left;">`   </td>
<td style="text-align:left;"> or                         </td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> boundary  </td>
<td style="text-align:left;"> ^     </td>
<td style="text-align:left;"> not, start                 </td>
<td style="text-align:left;"> $     </td>
<td style="text-align:left;"> not, end                   </td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> \A    </td>
<td style="text-align:left;"> match, start               </td>
<td style="text-align:left;"> \Z    </td>
<td style="text-align:left;"> match, end                 </td>
</tr>
<tr>
<td style="text-align:left;">           </td>
<td style="text-align:left;"> \b    </td>
<td style="text-align:left;"> match, between             </td>
<td style="text-align:left;"> \B    </td>
<td style="text-align:left;"> not match, between         </td>
</tr>
</tbody>
</table>


<p>.</p>

<h3>1.2. Combinations</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> Regex </th>
<th style="text-align:left;"> Expression    </th>
<th style="text-align:left;"> Regex </th>
<th style="text-align:left;"> Expression     </th>
<th style="text-align:left;"> Meaning </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> \d    </td>
<td style="text-align:left;"> [0-9]         </td>
<td style="text-align:left;"> \D    </td>
<td style="text-align:left;"> [^0-9]         </td>
<td style="text-align:left;"> digits  </td>
</tr>
<tr>
<td style="text-align:left;"> \s    </td>
<td style="text-align:left;"> [ &ldquo;t"n"r"f"v] </td>
<td style="text-align:left;"> \S    </td>
<td style="text-align:left;"> [^ &ldquo;t"n"r"f"v] </td>
<td style="text-align:left;"> spaces  </td>
</tr>
<tr>
<td style="text-align:left;"> \w    </td>
<td style="text-align:left;"> [a-zA-Z0-9]   </td>
<td style="text-align:left;"> \W    </td>
<td style="text-align:left;"> [^a-zA-Z0-9]   </td>
<td style="text-align:left;"> words   </td>
</tr>
</tbody>
</table>


<p>.</p>

<h3>1.3. functions</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> Function   </th>
<th style="text-align:left;"> Description                                         </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> match()    </td>
<td style="text-align:left;"> default <code>None</code>, </td>
</tr>
<tr>
<td style="text-align:left;"> search()   </td>
<td style="text-align:left;"> default <code>None</code>, the location of the matched strings </td>
</tr>
<tr>
<td style="text-align:left;"> findall()  </td>
<td style="text-align:left;"> a list of the matched strings       </td>
</tr>
<tr>
<td style="text-align:left;"> finditer() </td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> group()    </td>
<td style="text-align:left;"> the matched string </td>
</tr>
<tr>
<td style="text-align:left;"> start()    </td>
<td style="text-align:left;"> the start location </td>
</tr>
<tr>
<td style="text-align:left;"> end()      </td>
<td style="text-align:left;"> the end location </td>
</tr>
<tr>
<td style="text-align:left;"> span()     </td>
<td style="text-align:left;"> tuple: [start location, end location] </td>
</tr>
<tr>
<td style="text-align:left;"> split()    </td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> sub()      </td>
<td></td>
</tr>
<tr>
<td style="text-align:left;"> subn()     </td>
<td></td>
</tr>
</tbody>
</table>


<h2>2. Examples</h2>

<h3>2.1. Any</h3>

<ul>
<li>any except <code>\n</code>: <code>.*</code></li>
<li>any: <code>[\s\S]*</code>, <code>[\d\D]*</code>, <code>[\w\W]*</code></li>
<li>all English: <code>/[ -~]/</code></li>
<li>not greedy: <code>(.*?)</code></li>
<li>null: <code>\.*</code></li>
<li>any character (one word/digit/punctuation/space): <code>[\d\w\u4e00-\u9fa5\s]</code></li>
</ul>


<h3>2.2. Specific patterns</h3>

<ul>
<li>select the same pattern: <code>(\d+)(\w+)$2</code></li>
</ul>


<h3>2.3. Date and Time</h3>

<ul>
<li>Year - 1950-2000: <code>(19[5-9][0-9] | 2000)</code></li>
<li>Month - 1-12: <code>([0-9]|1[0-2])</code></li>
<li>Date - 0-31: <code>([0-9]|[1-2][0-9]|3[0-1])</code></li>
<li>Date: 1-20-2000 or 1/20/2000 or 1.20.2000: <code>$2</code> will be the same pattern as <code>([/|-|.])</code></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>([0-9]|[1-2][0-9]|3[0-1])([/|-|.])
</span><span class='line'>([0-9]|1[0-2])$2
</span><span class='line'>(19[5-9][0-9] | 2000)</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>2.4. HTML</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;b&gt;&lt;p&gt;</span>Hello World<span class="nt">&lt;/p&gt;&lt;p&gt;</span>Good Bye<span class="nt">&lt;/p&gt;&lt;/b&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>get &ldquo;Hello World&rdquo;: <code>&lt;\w+&gt;&lt;(\w+)&gt;(.*?)&lt;/$1&gt;</code></li>
<li><code>(.*?)</code>: not greedy, get the first content of <code>&lt;p&gt;...&lt;/p&gt;</code></li>
<li><code>&lt;(\w+)&gt;...&lt;/$1&gt;</code>: get the same tab</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/13/data-apis/">Data APIs</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-13T02:39:10+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:39 am</span></time>
        
           | <a href="/tech/2014/07/13/data-apis/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/13/data-apis/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Yelp API</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install rauth
</span></code></pre></td></tr></table></div></figure>


<p>example</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">rauth</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">simplejson</span> <span class="kn">as</span> <span class="nn">json</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">defineParams</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">):</span>
</span><span class='line'>    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="n">params</span><span class="p">[</span><span class="s">&quot;term&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;restaurants&quot;</span>
</span><span class='line'>    <span class="n">params</span><span class="p">[</span><span class="s">&quot;ll&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;{},{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">latitude</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">longitude</span><span class="p">))</span>
</span><span class='line'>    <span class="n">params</span><span class="p">[</span><span class="s">&quot;radius_filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;2000&quot;</span>
</span><span class='line'>    <span class="n">params</span><span class="p">[</span><span class="s">&quot;limit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;10&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">params</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># setting up personal Yelp account</span>
</span><span class='line'>    <span class="n">consumer_key</span> <span class="o">=</span> <span class="s">&quot;XXX&quot;</span>
</span><span class='line'>    <span class="n">consumer_secret</span> <span class="o">=</span> <span class="s">&quot;XXXX&quot;</span>
</span><span class='line'>    <span class="n">token</span> <span class="o">=</span> <span class="s">&quot;XXX&quot;</span>
</span><span class='line'>    <span class="n">token_secret</span> <span class="o">=</span> <span class="s">&quot;XXX&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">session</span> <span class="o">=</span> <span class="n">rauth</span><span class="o">.</span><span class="n">OAuth1Session</span><span class="p">(</span><span class="n">consumer_key</span> <span class="o">=</span> <span class="n">consumer_key</span><span class="p">,</span>
</span><span class='line'>                                  <span class="n">consumer_secret</span> <span class="o">=</span> <span class="n">consumer_secret</span><span class="p">,</span>
</span><span class='line'>                                  <span class="n">access_token</span> <span class="o">=</span> <span class="n">token</span><span class="p">,</span>
</span><span class='line'>                                  <span class="n">access_token_secret</span> <span class="o">=</span> <span class="n">token_secret</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">request</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;http://api.yelp.com/v2/search&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># transforming the data in JSON format</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'>    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">locations</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">39.98</span><span class="p">,</span><span class="o">-</span><span class="mf">82.98</span><span class="p">),(</span><span class="mf">42.24</span><span class="p">,</span><span class="o">-</span><span class="mf">83.61</span><span class="p">),(</span><span class="mf">41.33</span><span class="p">,</span><span class="o">-</span><span class="mf">89.13</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">apiData</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
</span><span class='line'>        <span class="n">params</span> <span class="o">=</span> <span class="n">defineParams</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">)</span>
</span><span class='line'>        <span class="n">apiData</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getData</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
</span><span class='line'>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print len(apiData)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">apiData</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">key</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">apiData</span><span class="p">:</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">record</span><span class="p">[</span><span class="s">&quot;businesses&quot;</span><span class="p">]</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">record</span><span class="p">[</span><span class="s">&#39;total&#39;</span><span class="p">]</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">record</span><span class="p">[</span><span class="s">&#39;region&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">apiData</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Factual API</h2>

<p>installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install factual-api
</span></code></pre></td></tr></table></div></figure>


<p>example</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">factual</span> <span class="kn">import</span> <span class="n">Factual</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">factual.utils</span> <span class="kn">import</span> <span class="n">circle</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Database</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">secret</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">secret</span> <span class="o">=</span> <span class="n">secret</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">Factual</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">secret</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span><span class="o">.</span><span class="n">schema</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">):</span>
</span><span class='line'>        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">tableQuery</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchContent</span><span class="p">)</span><span class="o">.</span><span class="n">include_count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">tableQuery</span><span class="o">.</span><span class="n">included_rows</span><span class="p">(),</span> \
</span><span class='line'>               <span class="n">tableQuery</span><span class="o">.</span><span class="n">total_row_count</span><span class="p">(),</span> \
</span><span class='line'>               <span class="n">tableQuery</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">condition</span><span class="p">):</span>
</span><span class='line'>        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">filters</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">search_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">condition</span><span class="p">):</span>
</span><span class='line'>        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchContent</span><span class="p">)</span><span class="o">.</span><span class="n">filters</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">search_filters_paging</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">condition</span><span class="p">,</span> <span class="n">pages</span><span class="p">):</span>
</span><span class='line'>        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchContent</span><span class="p">)</span><span class="o">.</span><span class="n">filters</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">geofilters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
</span><span class='line'>        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchContent</span><span class="p">)</span><span class="o">.</span><span class="n">geo</span><span class="p">(</span><span class="n">circle</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">radius</span><span class="p">))</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">factual</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="s">&#39;YOUR_KEY&#39;</span><span class="p">,</span> <span class="s">&#39;YOUR_SECRET&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">schemaPlaces</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#pprint(schemaPlaces)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">places</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#print places</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">rows</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="s">&#39;century city mall&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#print rows</span>
</span><span class='line'>    <span class="c">#print N</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  search restaurants (http://developer.factual.com/working-with-categories/)</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;category_ids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$includes&#39;</span><span class="p">:</span> <span class="mi">347</span><span class="p">}})</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  search restaurants or bars</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;category_ids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$includes_any&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">312</span><span class="p">,</span><span class="mi">347</span><span class="p">]}})</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  search entertainment venues but NOT adult entertainment</span>
</span><span class='line'>    <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;$and&#39;</span><span class="p">:</span> <span class="p">[</span> \
</span><span class='line'>                         <span class="p">{</span><span class="s">&#39;category_ids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$includes&#39;</span><span class="p">:</span> <span class="mi">317</span><span class="p">}},</span> \
</span><span class='line'>                         <span class="p">{</span><span class="s">&#39;category_ids&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$excludes&#39;</span><span class="p">:</span> <span class="mi">318</span><span class="p">}}</span>  \
</span><span class='line'>                       <span class="p">]</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  search for Starbucks in Los Angeles</span>
</span><span class='line'>    <span class="n">tableName</span> <span class="o">=</span> <span class="s">&#39;places&#39;</span>
</span><span class='line'>    <span class="n">searchContent</span> <span class="o">=</span> <span class="s">&#39;starbucks&#39;</span>
</span><span class='line'>    <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;locality&#39;</span><span class="p">:</span> <span class="s">&#39;los angeles&#39;</span><span class="p">}</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">search_filters</span><span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  search for starbucks in Los Angeles or Santa Monica </span>
</span><span class='line'>    <span class="n">tableName</span> <span class="o">=</span> <span class="s">&#39;places&#39;</span>
</span><span class='line'>    <span class="n">searchContent</span> <span class="o">=</span> <span class="s">&#39;starbucks&#39;</span>
</span><span class='line'>    <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;$or&#39;</span><span class="p">:[{</span><span class="s">&#39;locality&#39;</span><span class="p">:{</span><span class="s">&#39;$eq&#39;</span><span class="p">:</span><span class="s">&#39;los angeles&#39;</span><span class="p">}},{</span><span class="s">&#39;locality&#39;</span><span class="p">:{</span><span class="s">&#39;$eq&#39;</span><span class="p">:</span><span class="s">&#39;santa monica&#39;</span><span class="p">}}]}</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">search_filters</span><span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  paging </span>
</span><span class='line'>    <span class="n">tableName</span> <span class="o">=</span> <span class="s">&#39;places&#39;</span>
</span><span class='line'>    <span class="n">searchContent</span> <span class="o">=</span> <span class="s">&#39;starbucks&#39;</span>
</span><span class='line'>    <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;$or&#39;</span><span class="p">:[{</span><span class="s">&#39;locality&#39;</span><span class="p">:{</span><span class="s">&#39;$eq&#39;</span><span class="p">:</span><span class="s">&#39;los angeles&#39;</span><span class="p">}},{</span><span class="s">&#39;locality&#39;</span><span class="p">:{</span><span class="s">&#39;$eq&#39;</span><span class="p">:</span><span class="s">&#39;santa monica&#39;</span><span class="p">}}]}</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">search_filters_paging</span><span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span><span class='line'>    <span class="c">#pprint(data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Geo filter:</span>
</span><span class='line'>    <span class="c">#  coffee near the Factual office</span>
</span><span class='line'>    <span class="n">tableName</span> <span class="o">=</span> <span class="s">&#39;places&#39;</span>
</span><span class='line'>    <span class="n">searchContent</span> <span class="o">=</span> <span class="s">&#39;coffee&#39;</span>
</span><span class='line'>    <span class="n">latitude</span> <span class="o">=</span> <span class="mf">34.058583</span>
</span><span class='line'>    <span class="n">longitude</span> <span class="o">=</span> <span class="o">-</span><span class="mf">118.416582</span>
</span><span class='line'>    <span class="n">radius</span> <span class="o">=</span> <span class="mi">1000</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">factual</span><span class="o">.</span><span class="n">geofilters</span><span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">searchContent</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
</span><span class='line'>    <span class="n">pprint</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/12/downloading-images-by-batch/">Downloading Images by Batch</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-12T20:35:22+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:35 pm</span></time>
        
           | <a href="/tech/2014/07/12/downloading-images-by-batch/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/12/downloading-images-by-batch/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>I would like to download some images from a painting website in batch, but didnt prefer click the urls of these pictures one by one, then I wrote this program to download them in batch.</p>

<ul>
<li>website: <a href="http://kankanwoo.com/arts/paintings.asp?c=2">Chinese Painting by Shekwing Tam</a></li>
<li>libraries: re, urllib2, BeautifulSoup</li>
<li>features

<ul>
<li>extracting the urls of the pictures from the page</li>
<li>downloading these pictures and saving them to the local drive</li>
</ul>
</li>
</ul>


<h2>1. Get image urls from the website</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getURLs</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fileURLs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">contents</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;/arts/paintings/images/mw&quot;</span><span class="p">)):</span>
</span><span class='line'>        <span class="n">fileURLs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;src&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">fileURLs</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Download the images and save to a path</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">outPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; downloading files from the web &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">loadedSize</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">bufferSize</span> <span class="o">=</span> <span class="mi">8192</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># getting the url of a file</span>
</span><span class='line'>    <span class="n">rawFile</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># getting the total size of the file</span>
</span><span class='line'>    <span class="n">meta</span> <span class="o">=</span> <span class="n">rawFile</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span><span class='line'>    <span class="n">fileSize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">getheaders</span><span class="p">(</span><span class="s">&quot;Content-Length&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;File name: </span><span class="si">%s</span><span class="s">, Bytes: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">fileSize</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Downloading...&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span> <span class="o">+</span> <span class="n">fileName</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># downloading files by blocks</span>
</span><span class='line'>        <span class="nb">buffer</span> <span class="o">=</span> <span class="n">rawFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">bufferSize</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">buffer</span><span class="p">:</span>
</span><span class='line'>            <span class="k">break</span>
</span><span class='line'>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># showing the downloading process</span>
</span><span class='line'>        <span class="n">loadedSize</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
</span><span class='line'>        <span class="n">status</span> <span class="o">=</span> <span class="s">r&quot;</span><span class="si">%10d</span><span class="s"> [</span><span class="si">%3.2f%%</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">loadedSize</span><span class="p">,</span> <span class="n">loadedSize</span> <span class="o">*</span> <span class="mf">100.</span> <span class="o">/</span> <span class="n">fileSize</span><span class="p">)</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">status</span>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">: Ready!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Source Codes</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">getURLs</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fileURLs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">contents</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;/arts/paintings/images/mw&quot;</span><span class="p">)):</span>
</span><span class='line'>        <span class="n">fileURLs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;src&#39;</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">fileURLs</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">outPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; downloading files from the web &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">loadedSize</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">bufferSize</span> <span class="o">=</span> <span class="mi">8192</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># getting the url of a file</span>
</span><span class='line'>    <span class="n">rawFile</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># getting the total size of the file</span>
</span><span class='line'>    <span class="n">meta</span> <span class="o">=</span> <span class="n">rawFile</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span><span class='line'>    <span class="n">fileSize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">getheaders</span><span class="p">(</span><span class="s">&quot;Content-Length&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;File name: </span><span class="si">%s</span><span class="s">, Bytes: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">fileSize</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Downloading...&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span> <span class="o">+</span> <span class="n">fileName</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># downloading files by blocks</span>
</span><span class='line'>        <span class="nb">buffer</span> <span class="o">=</span> <span class="n">rawFile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">bufferSize</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">buffer</span><span class="p">:</span>
</span><span class='line'>            <span class="k">break</span>
</span><span class='line'>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># showing the downloading process</span>
</span><span class='line'>        <span class="n">loadedSize</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
</span><span class='line'>        <span class="n">status</span> <span class="o">=</span> <span class="s">r&quot;</span><span class="si">%10d</span><span class="s"> [</span><span class="si">%3.2f%%</span><span class="s">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">loadedSize</span><span class="p">,</span> <span class="n">loadedSize</span> <span class="o">*</span> <span class="mf">100.</span> <span class="o">/</span> <span class="n">fileSize</span><span class="p">)</span>
</span><span class='line'>        <span class="k">print</span> <span class="n">status</span>
</span><span class='line'>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">: Ready!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">downloadFiles</span><span class="p">(</span><span class="n">fileURLs</span><span class="p">,</span> <span class="n">outPath</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">fileURLs</span><span class="p">:</span>
</span><span class='line'>        <span class="n">fileName</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://kankanwoo.com/&quot;</span> <span class="o">+</span> <span class="n">url</span>
</span><span class='line'>        <span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">outPath</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://kankanwoo.com/arts/paintings.asp?c=2&quot;</span>
</span><span class='line'>    <span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;/outputs/img/mountains_and_water/&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fileURLs</span> <span class="o">=</span> <span class="n">getURLs</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span class='line'>    <span class="n">downloadFiles</span><span class="p">(</span><span class="n">fileURLs</span><span class="p">,</span> <span class="n">outPath</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/07/12/beautiful-soup/">Beautiful Soup</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-07-12T17:56:44+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:56 pm</span></time>
        
           | <a href="/tech/2014/07/12/beautiful-soup/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/07/12/beautiful-soup/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Connection</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">urllib2</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span class='line'>
</span><span class='line'><span class="n">url</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span>
</span><span class='line'><span class="n">html</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class='line'><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Extraction</h2>

<h3>2.1. HTML</h3>

<p>extraction from tags</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">contents</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">title</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">b</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">a</span>
</span></code></pre></td></tr></table></div></figure>


<p>get url</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">):</span>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>find contents</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&quot;p&quot;</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&quot;link2&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;results&#39;</span><span class="p">})</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;sisters&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Regular Expressions</h3>

<p>extraction with re</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">re</span>
</span><span class='line'><span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;^b&quot;</span><span class="p">)):</span>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup Documentation</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/23/stanford-nlp-5-spelling-correction-and-the-noisy-channel/">Stanford NLP 5 - Spelling Correction and the Noisy Channel</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-23T20:25:12+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>8:25 pm</span></time>
        
           | <a href="/tech/2014/06/23/stanford-nlp-5-spelling-correction-and-the-noisy-channel/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/23/stanford-nlp-5-spelling-correction-and-the-noisy-channel/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. The Spelling Correction Task</h2>

<h3>1.1. Applications for spelling correction</h3>

<ul>
<li>word processing</li>
<li>search engine</li>
<li>phones</li>
</ul>


<h3>1.2. Spelling Tasks</h3>

<ul>
<li>spelling error detection</li>
<li>spelling error correction

<ul>
<li>autocorrect: hte -> the</li>
<li>suggest a correction</li>
<li>suggestion lists</li>
</ul>
</li>
</ul>


<h3>1.3. Types of spelling errors</h3>

<ul>
<li>non-word errors

<ul>
<li>graffe -> giraffe</li>
</ul>
</li>
<li>real-word errors

<ul>
<li>typographical erros: three -> there</li>
<li>cognitive errors (homophones): piece -> peace, too -> two</li>
</ul>
</li>
</ul>


<h3>1.4. Rates of spelling errors</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">      </th>
<th style="text-align:left;">                                                   </th>
<th style="text-align:left;">                                            </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">  26% </td>
<td style="text-align:left;"> web queries                                       </td>
<td style="text-align:left;"> Wang et al. 2003                           </td>
</tr>
<tr>
<td style="text-align:left;">  13% </td>
<td style="text-align:left;"> retyping, no backspace                            </td>
<td style="text-align:left;"> Whitelaw et al. English &amp; German           </td>
</tr>
<tr>
<td style="text-align:left;">   7% </td>
<td style="text-align:left;"> words corrected retyping on phone-sized organizer </td>
<td style="text-align:left;">                                            </td>
</tr>
<tr>
<td style="text-align:left;">   2% </td>
<td style="text-align:left;"> words uncorrected on organizer                    </td>
<td style="text-align:left;"> Soukoreff &amp; MacKenzie 2003                 </td>
</tr>
<tr>
<td style="text-align:left;"> 1-2% </td>
<td style="text-align:left;"> retyping                                          </td>
<td style="text-align:left;"> Kane and Wobbrock 2007, Gruden et al. 1983 </td>
</tr>
</tbody>
</table>


<h3>1.5. Non-word spelling errors</h3>

<ul>
<li>non-word spelling error detection

<ul>
<li>any word not in a dictionary is an error</li>
<li>the larger the dictionary the better</li>
</ul>
</li>
<li>non-word spelling error correction

<ul>
<li>generate candidates: real words that are similar to error</li>
<li>choose the one which is best

<ul>
<li>shorest weighted edit distance</li>
<li>highest noisy channel probability</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>1.6. Real word spelling errors</h3>

<ul>
<li>for each word w, generate candidate set:

<ul>
<li>find candidate words with similar pronunciations</li>
<li>find candidate words with similar spelling</li>
<li>include w in candidate set</li>
</ul>
</li>
<li>choose beset candidate

<ul>
<li>noisy channel</li>
<li>classifier</li>
</ul>
</li>
</ul>


<h2>2. The Noisy Channel Model of Spelling</h2>

<h3>2.1. Noisy Channel Intuition</h3>

<p>original word &ndash; (noisy channel) &ndash;> noisy word &ndash; (decoder) &ndash;> guessed word</p>

<h3>2.2. Noisy Channel</h3>

<ul>
<li>we see an observation x of a misspelled word</li>
<li>find the correct word w: bayes rule</li>
</ul>


<p>channel/error model: maximize the product of two factors - likelihood and prior &lt;- language model</p>

<p>$$
\hat w = argmax<em>{w \in V} P(w | x)
       = argmax</em>{x \in V} \frac {P(x | w)P(w)}{P(x)}
       = argmax<em>{x \in V} P(x | w)P(w)
       = argmax</em>{likelihood * prior}
$$</p>

<h3>2.3. History: Noisy channel for spelling proposed around 1990</h3>

<ul>
<li>IBM

<ul>
<li>Mays, Eric, Fred J. Damerau and Robert L. Mercer. 1991</li>
<li>Context based spelling correction. Inforamtion Processing and management, 23(5), 517-522</li>
</ul>
</li>
<li>AT&amp;T Bell Labs

<ul>
<li>Kernighan, Mark D., Kenneth W. Church, and William A. Gale. 1990</li>
<li>A spelling correction program based on a nosiy channel model. Proceedings of COLING 1990, 205-210</li>
</ul>
</li>
</ul>


<h3>2.4. Non-word spelling error example</h3>

<p>acress</p>

<h3>2.5. Candidate generation</h3>

<ul>
<li>words with similar spelling

<ul>
<li>small edit distance to error</li>
</ul>
</li>
<li>words with similar pronunciation

<ul>
<li>small edit distance of pronunciation to error</li>
</ul>
</li>
</ul>


<h3>2.6. Damerau-Levenshtein edit distance</h3>

<ul>
<li>minimal edit distance between two strings, where edits are

<ul>
<li>insertion</li>
<li>deletion</li>
<li>substitution</li>
<li>transposition of two adjacent letters</li>
</ul>
</li>
</ul>


<h3>2.7. Words within 1 of acress</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> Error </th>
<th style="text-align:left;"> Candidate Correction </th>
<th style="text-align:left;"> Correct Letter </th>
<th style="text-align:left;"> Error Letter </th>
<th style="text-align:left;"> Type          </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> actress             </td>
<td style="text-align:left;"> t              </td>
<td style="text-align:left;"> -            </td>
<td style="text-align:left;"> deletion      </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> cress               </td>
<td style="text-align:left;"> -              </td>
<td style="text-align:left;"> a            </td>
<td style="text-align:left;"> insertion     </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> caress              </td>
<td style="text-align:left;"> ca             </td>
<td style="text-align:left;"> ac           </td>
<td style="text-align:left;"> transposition </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> access              </td>
<td style="text-align:left;"> c              </td>
<td style="text-align:left;"> r            </td>
<td style="text-align:left;"> substitution  </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> across              </td>
<td style="text-align:left;"> o              </td>
<td style="text-align:left;"> e            </td>
<td style="text-align:left;"> substitution  </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> across              </td>
<td style="text-align:left;"> o              </td>
<td style="text-align:left;"> e            </td>
<td style="text-align:left;"> substitution  </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> acres               </td>
<td style="text-align:left;"> -              </td>
<td style="text-align:left;"> s            </td>
<td style="text-align:left;"> insertion     </td>
</tr>
<tr>
<td style="text-align:left;"> acress </td>
<td style="text-align:left;"> acres               </td>
<td style="text-align:left;"> -              </td>
<td style="text-align:left;"> s            </td>
<td style="text-align:left;"> insertion     </td>
</tr>
</tbody>
</table>


<h3>2.8. Candidate generation</h3>

<ul>
<li>80% of erros are within edit distance 1</li>
<li>almost all errors within edit distance 2</li>
</ul>


<p>practice:</p>

<ul>
<li>also allow insertion of space or hyphen

<ul>
<li>thisidea -> this idea</li>
<li>inlaw -> in-law</li>
</ul>
</li>
</ul>


<h3>2.9. Language Model</h3>

<ul>
<li>use any of the language modeling algorithms we&rsquo;ve learned</li>
<li>unigram, bigram, trigram</li>
<li>web-scale spelling correction

<ul>
<li>stupid backoff</li>
</ul>
</li>
</ul>


<h3>2.10. Unigram Prior probability</h3>

<p>counts from 404,253,213 words in Corpus of Contemporary Englsih (COCA)</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> word    </th>
<th style="text-align:left;"> Frequency of word </th>
<th style="text-align:left;"> P(word)     </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> actress </td>
<td style="text-align:left;"> 9,321             </td>
<td style="text-align:left;"> .0000230573 </td>
</tr>
<tr>
<td style="text-align:left;"> cress   </td>
<td style="text-align:left;"> 220               </td>
<td style="text-align:left;"> .0000005442 </td>
</tr>
<tr>
<td style="text-align:left;"> caress  </td>
<td style="text-align:left;"> 686               </td>
<td style="text-align:left;"> .0000016969 </td>
</tr>
<tr>
<td style="text-align:left;"> access  </td>
<td style="text-align:left;"> 37,038            </td>
<td style="text-align:left;"> .0000916207 </td>
</tr>
<tr>
<td style="text-align:left;"> across  </td>
<td style="text-align:left;"> 120,844           </td>
<td style="text-align:left;"> .0002989314 </td>
</tr>
<tr>
<td style="text-align:left;"> acres   </td>
<td style="text-align:left;"> 12,874            </td>
<td style="text-align:left;"> .0000318463 </td>
</tr>
</tbody>
</table>


<h2>3. Real-Word Spelling Correction</h2>

<h2>4. State of the Art Systems</h2>

<h2>References</h2>

<ol>
<li>video courses: <a href="https://www.youtube.com/watch?v=Z1m7McLIP9c&amp;index=20&amp;list=PL6397E4B26D00A269">part 1</a>, <a href="https://www.youtube.com/watch?v=RgHr2KVXtiE&amp;index=21&amp;list=PL6397E4B26D00A269">part 2</a>, <a href="">part 3</a>, <a href="">part 4</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/23/stanford-nlp-4-language-modeling/">Stanford NLP 4 - Language Modeling</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-23T13:49:23+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:49 pm</span></time>
        
           | <a href="/tech/2014/06/23/stanford-nlp-4-language-modeling/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/23/stanford-nlp-4-language-modeling/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Introduction to N-grams</h2>

<h3>1.1. Probabilistic Language Models</h3>

<ul>
<li>goal: assign a probability to a sentence

<ul>
<li>mahcine translation: $$ P(high\,winds\,tonite) > P(large\,winds\,tonite) $$</li>
<li>spell correction: $$P(about\,fifteen\,minutes\,from) > P(about\,fifteen\,minuets\,from)$$</li>
<li>speech recognition: $$P(I\,saw\,a\,van) >> P(eyes\,awe\,of\,an)$$</li>
<li>summarization, question-answering, etc., etc.!!</li>
</ul>
</li>
<li>goal: compute the probability of a sentence or sequence of words $$P(W) = P(w1,w2,w3,w4,w5&hellip;wn)$$</li>
<li>related task: probability of an upcoming word $$P(w5|w1,w2,w3,w4)$$</li>
<li>a model that computes either of these $$P(W)$$ or $$P(Wn|w1,w2&hellip;wn-1)$$ is called a language model</li>
<li>better: the grammar, but language model or LM is standard</li>
</ul>


<h3>1.2. How to compute P(W)</h3>

<ul>
<li>how to compute this joint probability: $$P(its, water, is, so transparent, that)$$</li>
<li>intuition: let&rsquo;s rely on the Chian Rule of Probability</li>
</ul>


<h3>1.3. Reminder: The Chain Rule</h3>

<ul>
<li>recall the definition of conditional probabilities<br/>
  $$P(A|B) = P(A,B) / P(B)$$<br/>
  $$P(A|B)<em>P(B) = P(A,B)$$<br/>
  $$P(A,B) = P(A|B)</em>P(B)$$</li>
<li>more variables:<br/>
  $$P(A,B,C,D) = P(A)P(B|A)P(C|A,B)P(D|A,B,C)$$<br/>
  the chain rule in general: $$P(x1,x2,x3,&hellip;,xn) = P(x1)P(x2|x1)P(x3|x1,x2)&hellip;P(xn|x1,&hellip;,xn-1)$$</li>
</ul>


<h3>1.4. The Chain Rule applied to compute joint probability of words in sentence</h3>

<p>$$P(w_1*w_2&hellip;w_n = \prod_i {P(w_i | w_1 * w_2&hellip;w_{i-1})}$$</p>

<p>$$P(&ldquo;its water is so transparent&rdquo;) = P(its) * P(water|its) * P(is| its\,water) * P(so| its\,water\,is) * P(transparent| its\,water\,is\,so)$$</p>

<h3>1.5. How to estimate these probabilities</h3>

<ul>
<li><p>could we just count and divide?</p>

<p>$$P(the| its\,water\,is\,so\,transparent\,that) = Count(its\,water\,is\,so\,transparent\,that\,the) / Count(its\,water\,is\,so\,transparent\,that)$$</p></li>
<li><p>NO! TOO MANY possible sentences!</p></li>
<li>we&rsquo;ll never see enough data for estimating these</li>
</ul>


<h3>1.6. Markov Assumption</h3>

<ul>
<li>simplifying assumption<br/>
$$P(the|its\,water\,is\,so\,transparent\,that) \approx P(the| that)$$</li>
<li>or maybe<br/>
$$P(the|its\,water\,is\,so\,transparent\,that) \approx P(the|transparent\,that)$$</li>
</ul>


<h3>1.7. Markov Assumption</h3>

<p>the probability of current word = the conditional probability of some previous words</p>

<p>$$P(w_1w_2&hellip;w_n) \approx \prod_i P(w_i | w<em>{i-k}&hellip;w</em>{i-1})$$</p>

<ul>
<li>in other words, we approximate each component in the product</li>
</ul>


<p>$$P(w_i | w_1w_2&hellip;w<em>{i-1}) \approx P(w_i | w</em>{i-k}&hellip;w_{i-1})$$</p>

<h3>1.8. Simplest case: unigram model</h3>

<p>the probability of currect = the probability of the previous word</p>

<p>$$P(w_1w_2&hellip;w_n) \approx \prod_i P(w_i)$$</p>

<h3>1.9. N-gram models</h3>

<ul>
<li>we can extend to trigrams, 4-grams, 5-grams</li>
<li>in general this is an insufficient model of language

<ul>
<li>because language has long-distance dependencies:</li>
</ul>
</li>
</ul>


<p>&ldquo;The (computer) which I had just put into the machine room on the fifth (floor) [crashed]&rdquo;</p>

<ul>
<li>but we can often get away with N-gram models</li>
</ul>


<h2>2. Estimating N-gram Probabilities</h2>

<h3>2.1. Estimating bigram probabilities</h3>

<ul>
<li>the maximum likelihood estimate</li>
</ul>


<p>$$P(w_i | w<em>{i-1} = count(w</em>{i-1},w_i) / count(w<em>{i-1})$$<br/>
$$P(w_i | w</em>{i-1} = c(w<em>{i-1}, w_i) / c(w</em>{i-1})$$</p>

<h3>2.2. An example</h3>

<p>$$ P(w_i | w<em>{i-1}) = c(w</em>{i-1},w_i) / c(w_{i-1}) $$</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;s&gt; I am Sam &lt;/s&gt;  
</span><span class='line'>&lt;s&gt; Sam I am &lt;/s&gt;  
</span><span class='line'>&lt;s&gt; I do not like green eggs and ham &lt;/s&gt;  </span></code></pre></td></tr></table></div></figure>


<ul>
<li>$$ P(I | <code>&lt;s&gt;</code>) = c(<code>&lt;s&gt;</code>,I) / c(<code>&lt;s&gt;</code>) = 2/3 = .67 $$</li>
<li>$$ P(Sam | <code>&lt;s&gt;</code>) = 1/3 = .33 $$</li>
<li>$$ P(am | I) = 2/3 = .67 $$</li>
<li>$$ P(</s> | Sam) = &frac12; = 0.5 $$</li>
<li>$$ P(Sam | am) = &frac12; = .5 $$</li>
<li>$$ P(do | I) = 1/3 = .33 $$</li>
</ul>


<h3>2.3. More examples: Berkeley Restaurant Project sentences</h3>

<ul>
<li>can you tell me about any good cantonese restaurants close by</li>
<li>mid priced thai food is what i&rsquo;m looking for</li>
<li>tell me about chez panisse</li>
<li>can you give me a listing of the kinds of food that are available</li>
<li>i&rsquo;m looking for a good place to eat breakfast</li>
<li>when is caffe venezia open during the day</li>
</ul>


<h3>2.4. Raw bigram counts</h3>

<ul>
<li>out of 9222 sentences</li>
</ul>


<p>$$P(w_i | w<em>{i-1}) = c(w</em>{i-1}, w_i) / c(w_{i-1})$$</p>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i  </th>
<th style="text-align:left;"> want </th>
<th style="text-align:left;"> to  </th>
<th style="text-align:left;"> eat </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food </th>
<th style="text-align:left;"> lunch </th>
<th style="text-align:left;"> spend </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 5  </td>
<td style="text-align:left;"> 827  </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 9   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 2     </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 608 </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 6       </td>
<td style="text-align:left;"> 6    </td>
<td style="text-align:left;"> 5     </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 4   </td>
<td style="text-align:left;"> 686 </td>
<td style="text-align:left;"> 2       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 6     </td>
<td style="text-align:left;"> 211   </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 2   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 16      </td>
<td style="text-align:left;"> 2    </td>
<td style="text-align:left;"> 42    </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 1  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 82   </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 15 </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 15  </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 4    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 1  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
</tbody>
</table>


<ul>
<li>normalize by unigrams</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;"> i    </th>
<th style="text-align:left;"> want </th>
<th style="text-align:left;"> to   </th>
<th style="text-align:left;"> eat  </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food </th>
<th style="text-align:left;"> lunch </th>
<th style="text-align:left;"> spend </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> 2533 </td>
<td style="text-align:left;"> 927  </td>
<td style="text-align:left;"> 2417 </td>
<td style="text-align:left;"> 746  </td>
<td style="text-align:left;"> 158     </td>
<td style="text-align:left;"> 1093 </td>
<td style="text-align:left;"> 341   </td>
<td style="text-align:left;"> 278   </td>
</tr>
</tbody>
</table>


<ul>
<li>result</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i       </th>
<th style="text-align:left;"> want </th>
<th style="text-align:left;"> to     </th>
<th style="text-align:left;"> eat    </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food   </th>
<th style="text-align:left;"> lunch  </th>
<th style="text-align:left;"> spend   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 0.002   </td>
<td style="text-align:left;"> 0.33 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0.0036 </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0.00079 </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 0.0022  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0.66   </td>
<td style="text-align:left;"> 0.0011 </td>
<td style="text-align:left;"> 0.0065  </td>
<td style="text-align:left;"> 0.0065 </td>
<td style="text-align:left;"> 0.0054 </td>
<td style="text-align:left;"> 0.0011  </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 0.00083 </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0.0017 </td>
<td style="text-align:left;"> 0.28   </td>
<td style="text-align:left;"> 0.00083 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0.0025 </td>
<td style="text-align:left;"> 0.087   </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0.0027 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0.021   </td>
<td style="text-align:left;"> 0.0027 </td>
<td style="text-align:left;"> 0.056  </td>
<td style="text-align:left;"> 0       </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 0.0063  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0.52   </td>
<td style="text-align:left;"> 0.0063 </td>
<td style="text-align:left;"> 0       </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 0.014   </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0.014  </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0.00092 </td>
<td style="text-align:left;"> 0.0037 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 0.0059  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0.0029 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 0.0036  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0.0036 </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0      </td>
<td style="text-align:left;"> 0       </td>
</tr>
</tbody>
</table>


<h3>2.5. Bigram estimates of sentence probabilities</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>P (&lt;s&gt; I want english food &lt;/s&gt;) = P(I | &lt;s&gt;) *
</span><span class='line'>                                   P(want | I) *
</span><span class='line'>                                   P(english | want) *
</span><span class='line'>                                   P(food | english) *
</span><span class='line'>                                   P(&lt;/s&gt; | food)
</span><span class='line'>                                 = 0.000031</span></code></pre></td></tr></table></div></figure>


<h3>2.6. What kinds of knowledge?</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>P(english | want) = 0.0011
</span><span class='line'>P(chinese | want) = 0.0065   &lt;- people like chinese cuisine
</span><span class='line'>P(to | want) = 0.66          &lt;- want - infinite grammar
</span><span class='line'>P(eat | to) = 0.28
</span><span class='line'>P(food | to) = 0
</span><span class='line'>P(want | spend) = 0          &lt;- grammatical disallowed
</span><span class='line'>P(i | &lt;s&gt;) = 0.25</span></code></pre></td></tr></table></div></figure>


<h3>2.7. Practical Issues</h3>

<ul>
<li>what do everything in log space

<ul>
<li>avoid underflow</li>
<li>also adding is faster than multiplying</li>
</ul>
</li>
</ul>


<p>$$p_1 * p_2 * p_3 * p_4 = log p_1 + log p_2 + log p_3 + log p_4$$</p>

<h3>2.8. Language Modeling Toolkits</h3>

<ul>
<li><a href="http://www.speech.sri.com/projects/srilm/">SRILM</a></li>
<li><a href="http://googleresearch.blogspot.ae/2006/08/all-our-n-gram-are-belong-to-you.html">Google N-Gram Release, August 2006</a></li>
<li><a href="http://ngrams.googlelabs.com/">Google Book N-grams</a></li>
</ul>


<h2>3. Evaluation and Perplexity</h2>

<h3>3.1. Evaluation: How good is our model?</h3>

<ul>
<li>does our language model prefer good sentences to bad ones?

<ul>
<li>assign higher probability to &ldquo;real&rdquo; or &ldquo;frequently observed&rdquo; sentences

<ul>
<li>than &ldquo;ungrammatical&rdquo; or &ldquo;rarely observed&rdquo; sentences?</li>
</ul>
</li>
</ul>
</li>
<li>we train parameters of our model on a training set</li>
<li>we test the model&rsquo;s performance on data we haven&rsquo;t seen

<ul>
<li>a test set is an unseen dataset that is different from our training set, totally unused</li>
<li>an evaluation metric tells us how well our model does on the test set</li>
</ul>
</li>
</ul>


<h3>3.2. Extrinsic evaluation of N-gram models</h3>

<ul>
<li>best evaluation for comparing models A and B

<ul>
<li>put each model in a task

<ul>
<li>spelling corrector, speech recognizer, MT system</li>
</ul>
</li>
<li>run the task, get an accuracy for A and for B

<ul>
<li>how many misspelled words corrected properly</li>
<li>how many words translated correctly</li>
</ul>
</li>
<li>compare accuracy for A and B</li>
</ul>
</li>
</ul>


<h3>3.3. Difficulty of extrinsic (in-vivo) evaluation of N-gram models</h3>

<ul>
<li>extrinsic evaluation

<ul>
<li>time-consuming, can tak days or weeks</li>
</ul>
</li>
<li>so

<ul>
<li>sometimes use intrinsic evaluation: perplexity</li>
<li>bad approximation

<ul>
<li>unless the test data looks just like the training data</li>
<li>so generally only useful in pilot experiments</li>
</ul>
</li>
<li>but is helpful to think about</li>
</ul>
</li>
</ul>


<h3>3.4. Intuition of Perplexity</h3>

<ul>
<li>the Shannon Game:

<ul>
<li>How well can we predict the next word?</li>
</ul>
</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>      I always order pizza with cheese and ____ 
</span><span class='line'>      - mushrooms 0.1
</span><span class='line'>      - pepperoni 0.1
</span><span class='line'>      - anchovies 0.01
</span><span class='line'>      - fried rice 0.0001
</span><span class='line'>      - ...
</span><span class='line'>      - and 1e-100
</span><span class='line'>    
</span><span class='line'>      The 33rd President of the US was _____
</span><span class='line'>      I saw a ______</span></code></pre></td></tr></table></div></figure>


<pre><code>- unigrams are terrible at this game (why?)
</code></pre>

<ul>
<li>a better model of a text

<ul>
<li>is one which assigns a higher probability to the word that actually occurs</li>
</ul>
</li>
</ul>


<h3>3.5. Perplexity</h3>

<p>the best language model is one that best predicts an unseen test set<br/>
- gives the highest $$P(sentence)$$</p>

<p>Perplexity is the probability of the test test, normalized by the number of words<br/>
$$PP(W) = P(w_1w_2&hellip;w_N)^{-1/N} = \sqrt[N]{1/P(w_1w_2&hellip;w_N)}$$</p>

<p>Chain rule:<br/>
$$PP(W) = \sqrt[N]{\prod<em>{i=1}^N 1 / P(w_i|w_1&hellip;w</em>{i-1})}$$</p>

<p>for bigrams:<br/>
$$PP(W) = \sqrt[N]{\prod<em>{i=1}^N 1 / P(w_i | w</em>{i-1})}$$</p>

<p>minimizing perplexity is the same as maximmizing probability</p>

<h3>3.6. The Shannon Game intuition for perplexity</h3>

<ul>
<li>from Josh Goodman</li>
<li>How hard is the task of recognizing digits &lsquo;0,1,2,3,4,5,6,7,8,9&rsquo;

<ul>
<li>perplexity 10</li>
</ul>
</li>
<li>How hard is recognizing (30,000) names at Microsoft

<ul>
<li>perplexity = 30,000</li>
</ul>
</li>
<li>if a system has to recognize

<ul>
<li>operator (1 in 4)</li>
<li>sales (1 in 4)</li>
<li>technical support (1 in 4)</li>
<li>30,000 names (1 in 120,000 each)</li>
<li>perplexity is 54</li>
</ul>
</li>
<li>perplexity is weighted equivalent branching factor</li>
</ul>


<h3>3.7. Perplexity as branching factor</h3>

<ul>
<li>let&rsquo;s suppose a sentence consisting of random digits</li>
<li>what is the perplexity of this sentence according to a model that assign P=1/20 to each digit?</li>
</ul>


<p>$$PP(W) = P(w_1w_2&hellip;w_N)^{-1/N} = (1<sup>N</sup>/10)^{-1/N} = 1<sup>-1</sup>/10 = 10$$</p>

<h3>3.8. Lower perplexity = better model</h3>

<ul>
<li>training 38 million words, test 1.5 million words, WSJ</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;"> N-gram Order </th>
<th style="text-align:left;"> Unigram </th>
<th style="text-align:left;"> Bigram </th>
<th style="text-align:left;"> Trigram </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Perplexity   </td>
<td style="text-align:left;"> 962     </td>
<td style="text-align:left;"> 170    </td>
<td style="text-align:left;"> 109     </td>
</tr>
</tbody>
</table>


<h2>4. Generalization and Zeros</h2>

<h3>4.1. The Shannon Visualization Method</h3>

<ul>
<li>choose a random bigram

<ul>
<li>(<s>,w) according to its probability</li>
</ul>
</li>
<li>now choose a random bigram

<ul>
<li>(w,x) according to its probability</li>
</ul>
</li>
<li>and so on until we choose </s></li>
<li>then string the words together</li>
</ul>


<h3>4.2. Shakespeare as corpus</h3>

<ul>
<li>N=884,647 tokens, V=29,066</li>
<li>Shakespeare produced 300,000 bigram types out of V<sup>2</sup>=844 million possible bigrams

<ul>
<li>so 99.96% of the possible bigrams were never seen (have zero entries in the table)</li>
</ul>
</li>
<li>Quadrigrams worse: what&rsquo;s coming out looks like Shakespeare because it is Shakespeare</li>
</ul>


<h3>4.3. The perils of overfitting</h3>

<ul>
<li>N-grams only work well for word prediction if the test corpus looks like the training corpus

<ul>
<li>in real life, it often doesn&rsquo;t</li>
<li>we need to train robust models that generalize!</li>
<li>one kind of generalization: Zeros!

<ul>
<li>things that don&rsquo;t ever occur in the training set

<ul>
<li>but occur in the test set</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>4.4. Zero</h3>

<ul>
<li>training set:

<ul>
<li>denied the allegations</li>
<li>denied the reports</li>
<li>denied the claims</li>
<li>denied the request</li>
</ul>
</li>
</ul>


<p>$$P(&ldquo;offer&rdquo; | denied\,the) = 0$$</p>

<ul>
<li>test set:

<ul>
<li>denied the offer</li>
<li>denied the loan</li>
</ul>
</li>
</ul>


<p>$$P(&ldquo;offer&rdquo; | denied\,the) = 0?$$</p>

<h3>4.5. Zero probability bigrams</h3>

<ul>
<li>bigrams with zero probability

<ul>
<li>mean that we will assign 0 probability to the test set</li>
</ul>
</li>
<li>and hence we cannot compute perplexity (can&rsquo;t divide by 0)!</li>
</ul>


<h2>5. Smoothing Add-One (Laplace) smoothing</h2>

<h3>5.1. The intuition of smoothing from Dan Klein)</h3>

<ul>
<li>when we have sparse statistics

<ul>
<li>P(w | denied the)

<ul>
<li>3 allegations</li>
<li>2 reports</li>
<li>1 claims</li>
<li>1 request</li>
<li>7 total</li>
</ul>
</li>
</ul>
</li>
<li>steal probability mass to generalize better

<ul>
<li>P(w | denied the)

<ul>
<li>2.5 allegations</li>
<li>1.5 reports</li>
<li>0.5 claims</li>
<li>0.5 request</li>
<li>2 other</li>
<li>7 total</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>5.2. Add-one estimation</h3>

<ul>
<li>also called Laplace smoothing</li>
<li>pretend we saw each word one more time than we did</li>
<li>just add one to all the counts</li>
</ul>


<p>MLE estimate: $$P_MLE(w_i | w<em>{i-1}) = c(w</em>{i-1},w_i) / c(w<em>{i-1})$$<br/>
Add-1 estimate: $$P_Add-1(w_i | w</em>{i-1}) = \frac {c(w<em>{i-1},w_i) + 1}{c(w</em>{i-1}) + V}$$</p>

<h3>5.3. Maximum Likelihood Estimates</h3>

<ul>
<li>the maximum likelihood estimate

<ul>
<li>of some parameter of a model M from a training set T</li>
<li>maximizes the likelihood of the training set T given the model M</li>
</ul>
</li>
<li>suppose the word &ldquo;bagel&rdquo; occurs 400 times in a corpus of a million words</li>
<li>what is the probability that a random word from some other text will be &ldquo;bagel&rdquo;?</li>
<li>MLE estimate is 400/1,000,000 = 0.0004</li>
<li>this may be a bad estimate for some other corpus

<ul>
<li>but it is the estimate that makes it most likely that &ldquo;bagel&rdquo; will occur 400 times in a million word corpus</li>
</ul>
</li>
</ul>


<h3>5.4. Berkeley Restaurant Corpus: Laplace smoothed bigram counts</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i  </th>
<th style="text-align:left;"> want </th>
<th style="text-align:left;"> to  </th>
<th style="text-align:left;"> eat </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food </th>
<th style="text-align:left;"> lunch </th>
<th style="text-align:left;"> spend </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 6  </td>
<td style="text-align:left;"> 828  </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 10  </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 3     </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 3  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 609 </td>
<td style="text-align:left;"> 2   </td>
<td style="text-align:left;"> 7       </td>
<td style="text-align:left;"> 7    </td>
<td style="text-align:left;"> 6     </td>
<td style="text-align:left;"> 2     </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 3  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 5   </td>
<td style="text-align:left;"> 687 </td>
<td style="text-align:left;"> 3       </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 7     </td>
<td style="text-align:left;"> 212   </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 1  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 3   </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 17      </td>
<td style="text-align:left;"> 3    </td>
<td style="text-align:left;"> 43    </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 83   </td>
<td style="text-align:left;"> 2     </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 16 </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 16  </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 2       </td>
<td style="text-align:left;"> 5    </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 3  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 2    </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 2   </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 1     </td>
</tr>
</tbody>
</table>


<h3>5.5. Laplace-smoothed bigrams</h3>

<p>$$P^*(w_n | w<em>{n-1}) = \frac {C(w</em>{n-1}w_n) + 1}{C(w_{n-1}) + V}$$</p>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i       </th>
<th style="text-align:left;"> want    </th>
<th style="text-align:left;"> to      </th>
<th style="text-align:left;"> eat     </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food    </th>
<th style="text-align:left;"> lunch   </th>
<th style="text-align:left;"> spend   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 0.00015 </td>
<td style="text-align:left;"> 0.21    </td>
<td style="text-align:left;"> 0.00025 </td>
<td style="text-align:left;"> 0.0025  </td>
<td style="text-align:left;"> 0.00025 </td>
<td style="text-align:left;"> 0.00025 </td>
<td style="text-align:left;"> 0.00025 </td>
<td style="text-align:left;"> 0.00075 </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 0.0013  </td>
<td style="text-align:left;"> 0.00042 </td>
<td style="text-align:left;"> 0.26    </td>
<td style="text-align:left;"> 0.00084 </td>
<td style="text-align:left;"> 0.0029  </td>
<td style="text-align:left;"> 0.0029  </td>
<td style="text-align:left;"> 0.0025  </td>
<td style="text-align:left;"> 0.00084 </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 0.00078 </td>
<td style="text-align:left;"> 0.00026 </td>
<td style="text-align:left;"> 0.0013  </td>
<td style="text-align:left;"> 0.18    </td>
<td style="text-align:left;"> 0.00078 </td>
<td style="text-align:left;"> 0.00026 </td>
<td style="text-align:left;"> 0.0018  </td>
<td style="text-align:left;"> 0.055   </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0.00046 </td>
<td style="text-align:left;"> 0.00046 </td>
<td style="text-align:left;"> 0.0014  </td>
<td style="text-align:left;"> 0.00046 </td>
<td style="text-align:left;"> 0.078   </td>
<td style="text-align:left;"> 0.0014  </td>
<td style="text-align:left;"> 0.02    </td>
<td style="text-align:left;"> 0.00046 </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 0.0012  </td>
<td style="text-align:left;"> 0.00062 </td>
<td style="text-align:left;"> 0.00062 </td>
<td style="text-align:left;"> 0.00062 </td>
<td style="text-align:left;"> 0.00062 </td>
<td style="text-align:left;"> 0.052   </td>
<td style="text-align:left;"> 0.0012  </td>
<td style="text-align:left;"> 0.00062 </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 0.0063  </td>
<td style="text-align:left;"> 0.00039 </td>
<td style="text-align:left;"> 0.0063  </td>
<td style="text-align:left;"> 0.00039 </td>
<td style="text-align:left;"> 0.00079 </td>
<td style="text-align:left;"> 0.002   </td>
<td style="text-align:left;"> 0.00039 </td>
<td style="text-align:left;"> 0.00039 </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 0.0017  </td>
<td style="text-align:left;"> 0.00056 </td>
<td style="text-align:left;"> 0.00056 </td>
<td style="text-align:left;"> 0.00056 </td>
<td style="text-align:left;"> 0.00056 </td>
<td style="text-align:left;"> 0.0011  </td>
<td style="text-align:left;"> 0.00056 </td>
<td style="text-align:left;"> 0.00056 </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 0.0012  </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
<td style="text-align:left;"> 0.00058 </td>
</tr>
</tbody>
</table>


<h3>5.6. Reconstituted counts</h3>

<p>$$C^*(w<em>{n-1}w_n) = \frac {[C(w</em>{n-1}w_n) + 1] * C(w<em>{n-1})}{C(w</em>{n-1}) + V}$$</p>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i    </th>
<th style="text-align:left;"> want  </th>
<th style="text-align:left;"> to    </th>
<th style="text-align:left;"> eat   </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food    </th>
<th style="text-align:left;"> lunch   </th>
<th style="text-align:left;"> spend   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 3.8  </td>
<td style="text-align:left;"> 527   </td>
<td style="text-align:left;"> 0.64  </td>
<td style="text-align:left;"> 6.4   </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 1.9     </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 1.2  </td>
<td style="text-align:left;"> 0.39  </td>
<td style="text-align:left;"> 238   </td>
<td style="text-align:left;"> 0.78  </td>
<td style="text-align:left;"> 2.7     </td>
<td style="text-align:left;"> 2.7     </td>
<td style="text-align:left;"> 2.3     </td>
<td style="text-align:left;"> 0.78    </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 1.9  </td>
<td style="text-align:left;"> 0.63  </td>
<td style="text-align:left;"> 3.1   </td>
<td style="text-align:left;"> 430   </td>
<td style="text-align:left;"> 1.9     </td>
<td style="text-align:left;"> 0.63    </td>
<td style="text-align:left;"> 4.4     </td>
<td style="text-align:left;"> 133     </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0.34 </td>
<td style="text-align:left;"> 0.34  </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 0.34  </td>
<td style="text-align:left;"> 5.8     </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 15      </td>
<td style="text-align:left;"> 0.34    </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 0.2  </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098   </td>
<td style="text-align:left;"> 8.2     </td>
<td style="text-align:left;"> 0.2     </td>
<td style="text-align:left;"> 0.098   </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 6.9  </td>
<td style="text-align:left;"> 0.43  </td>
<td style="text-align:left;"> 6.9   </td>
<td style="text-align:left;"> 0.43  </td>
<td style="text-align:left;"> 0.86    </td>
<td style="text-align:left;"> 2.2     </td>
<td style="text-align:left;"> 0.43    </td>
<td style="text-align:left;"> 0.43    </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 0.57 </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19    </td>
<td style="text-align:left;"> 0.38    </td>
<td style="text-align:left;"> 0.19    </td>
<td style="text-align:left;"> 0.19    </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 0.32 </td>
<td style="text-align:left;"> 0.16  </td>
<td style="text-align:left;"> 0.32  </td>
<td style="text-align:left;"> 0.16  </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
</tr>
</tbody>
</table>


<h3>5.7. Compare with raw bigram counts</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i  </th>
<th style="text-align:left;"> want </th>
<th style="text-align:left;"> to  </th>
<th style="text-align:left;"> eat </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food </th>
<th style="text-align:left;"> lunch </th>
<th style="text-align:left;"> spend </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 5  </td>
<td style="text-align:left;"> 827  </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 9   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 2     </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 608 </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 6       </td>
<td style="text-align:left;"> 6    </td>
<td style="text-align:left;"> 5     </td>
<td style="text-align:left;"> 1     </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 4   </td>
<td style="text-align:left;"> 686 </td>
<td style="text-align:left;"> 2       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 6     </td>
<td style="text-align:left;"> 211   </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 2   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 16      </td>
<td style="text-align:left;"> 2    </td>
<td style="text-align:left;"> 42    </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 1  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 82   </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 15 </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 15  </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 4    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 2  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 1    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 1  </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 1   </td>
<td style="text-align:left;"> 0   </td>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> 0    </td>
<td style="text-align:left;"> 0     </td>
<td style="text-align:left;"> 0     </td>
</tr>
</tbody>
</table>


<p>add-1 smoothing is maximum to change the original counts</p>

<table>
<thead>
<tr>
<th style="text-align:left;">         </th>
<th style="text-align:left;"> i    </th>
<th style="text-align:left;"> want  </th>
<th style="text-align:left;"> to    </th>
<th style="text-align:left;"> eat   </th>
<th style="text-align:left;"> chinese </th>
<th style="text-align:left;"> food    </th>
<th style="text-align:left;"> lunch   </th>
<th style="text-align:left;"> spend   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> i       </td>
<td style="text-align:left;"> 3.8  </td>
<td style="text-align:left;"> 527   </td>
<td style="text-align:left;"> 0.64  </td>
<td style="text-align:left;"> 6.4   </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 0.64    </td>
<td style="text-align:left;"> 1.9     </td>
</tr>
<tr>
<td style="text-align:left;"> want    </td>
<td style="text-align:left;"> 1.2  </td>
<td style="text-align:left;"> 0.39  </td>
<td style="text-align:left;"> 238   </td>
<td style="text-align:left;"> 0.78  </td>
<td style="text-align:left;"> 2.7     </td>
<td style="text-align:left;"> 2.7     </td>
<td style="text-align:left;"> 2.3     </td>
<td style="text-align:left;"> 0.78    </td>
</tr>
<tr>
<td style="text-align:left;"> to      </td>
<td style="text-align:left;"> 1.9  </td>
<td style="text-align:left;"> 0.63  </td>
<td style="text-align:left;"> 3.1   </td>
<td style="text-align:left;"> 430   </td>
<td style="text-align:left;"> 1.9     </td>
<td style="text-align:left;"> 0.63    </td>
<td style="text-align:left;"> 4.4     </td>
<td style="text-align:left;"> 133     </td>
</tr>
<tr>
<td style="text-align:left;"> eat     </td>
<td style="text-align:left;"> 0.34 </td>
<td style="text-align:left;"> 0.34  </td>
<td style="text-align:left;"> 1     </td>
<td style="text-align:left;"> 0.34  </td>
<td style="text-align:left;"> 5.8     </td>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 15      </td>
<td style="text-align:left;"> 0.34    </td>
</tr>
<tr>
<td style="text-align:left;"> chinese </td>
<td style="text-align:left;"> 0.2  </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098 </td>
<td style="text-align:left;"> 0.098   </td>
<td style="text-align:left;"> 8.2     </td>
<td style="text-align:left;"> 0.2     </td>
<td style="text-align:left;"> 0.098   </td>
</tr>
<tr>
<td style="text-align:left;"> food    </td>
<td style="text-align:left;"> 6.9  </td>
<td style="text-align:left;"> 0.43  </td>
<td style="text-align:left;"> 6.9   </td>
<td style="text-align:left;"> 0.43  </td>
<td style="text-align:left;"> 0.86    </td>
<td style="text-align:left;"> 2.2     </td>
<td style="text-align:left;"> 0.43    </td>
<td style="text-align:left;"> 0.43    </td>
</tr>
<tr>
<td style="text-align:left;"> lunch   </td>
<td style="text-align:left;"> 0.57 </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19  </td>
<td style="text-align:left;"> 0.19    </td>
<td style="text-align:left;"> 0.38    </td>
<td style="text-align:left;"> 0.19    </td>
<td style="text-align:left;"> 0.19    </td>
</tr>
<tr>
<td style="text-align:left;"> spend   </td>
<td style="text-align:left;"> 0.32 </td>
<td style="text-align:left;"> 0.16  </td>
<td style="text-align:left;"> 0.32  </td>
<td style="text-align:left;"> 0.16  </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
<td style="text-align:left;"> 0.16    </td>
</tr>
</tbody>
</table>


<h3>5.8. Add-1 estimation is a blunt instrument</h3>

<ul>
<li>so add-1 isn&rsquo;t used for N-grams

<ul>
<li>we&rsquo;ll see better methods</li>
</ul>
</li>
<li>but add-1 is used to smooth other NLP models

<ul>
<li>for text classification</li>
<li>in domains where the number of zeros isn&rsquo;t so huge</li>
</ul>
</li>
</ul>


<h2>6. Interpolation, Backoff, and Web-Scale LMs</h2>

<h3>6.1. Backoff and Interpolation</h3>

<ul>
<li>sometimes it helps to use less context

<ul>
<li>condition on less context for contexts you haven&rsquo;t learned much about</li>
</ul>
</li>
<li>backoff

<ul>
<li>use trigram if you have good evidence</li>
<li>otherwise bigram</li>
<li>otherwise unigram</li>
</ul>
</li>
<li>interpolation

<ul>
<li>mix unigram, bigram, trigram</li>
</ul>
</li>
<li>interpolation works better</li>
</ul>


<h3>6.2. Linear Interpolation</h3>

<ul>
<li>simple interpolation</li>
</ul>


<p>$$\hat P(w_n | w<em>{n-1}w</em>{n-2}) = \lambda_1 P(w_n | w<em>{n-1}w</em>{n-2}) + \lambda_2 P(w_n | w_{n-1}) + \lambda_3 P(w_n)$$<br/>
$$\sum_i \lambda_i = 1$$</p>

<ul>
<li>lambdas conditional on context</li>
</ul>


<p>$$\hat P(w_n | w<em>{n-2}w</em>{n-1}) = \lambda_1 (w<em>{n-2}^{n-1}) P(w_n | w</em>{n-2}w<em>{n-1})
                                  + \lambda_2 (w</em>{n-2}^{n-1}) P(w_n | w<em>{n-1})
                                  + \lambda_3 (w</em>{n-2}^{n-1}) P(w_n)
$$</p>

<h3>6.3. How to set the lambdas</h3>

<ul>
<li>use a held-out corpus</li>
</ul>


<p>training data -> held-out data (dev set) -> test data</p>

<ul>
<li>choose $$\lambda$$s to maximize the probability of held-out data

<ul>
<li>fix the N-gram probabilities (on the training data)</li>
<li>then search for $$\lambda$$s that give largest probability to held-out set:</li>
</ul>
</li>
</ul>


<p>$$log P(w_1&hellip;w_n | M(\lambda_1&hellip;\lambda_k)) = \sum_i log P<em>{M(\lambda_1&hellip;\lambda_k)}(w_i | w</em>{i-1})$$</p>

<h3>6.4. Unknown words: Open versus closed vocabulary tasks</h3>

<ul>
<li>if we know all the words in advanced

<ul>
<li>vocabulary V is fixed</li>
<li>closed vcabulary task</li>
</ul>
</li>
<li>often we don&rsquo;t know this

<ul>
<li>out of vocabulary = OOV words</li>
<li>open vocabulary task</li>
</ul>
</li>
<li>instead: create an unknown word token <UNK>

<ul>
<li>training of <UNK> probabilities

<ul>
<li>create a fixed lexicon L of size V</li>
<li>at text normalization phase, any training word not in L changed to <UNK></li>
<li>now we train its probabilities like a normal word</li>
</ul>
</li>
<li>at decoding time

<ul>
<li>if text input: use UNK probabilities for any word not in training</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>6.5. Smoothing for Web-scale N-grams</h3>

<ul>
<li>&ldquo;stupid backoff&rdquo; (Brants et al. 2007)</li>
<li>no discounting, just use relative frequencies</li>
</ul>


<p>$$S(w_i | w<em>{i-k+1}^{i-1}) = { \frac {count(w</em>{i-k+1}^i)}{count(w<em>{i-k+1}^{i-1})} \qquad if \quad count(w</em>{i=k+1}^i) > 0$$<br/>
$$S(w_i | w<em>{i-k+1}^{i-1}) = { 0.4S(w_i | w</em>{i-k+2}^{i-1})  \qquad otherwise$$</p>

<p>$$S(w_i) = \frac {count(w_i)}{N}$$</p>

<h3>6.6. N-gram Smoothing Summary</h3>

<ul>
<li>Add-1 smoothing

<ul>
<li>OK for text categorization, not for language modeling</li>
</ul>
</li>
<li>the most commonly used method

<ul>
<li>extended interpolated Kneser-ney</li>
</ul>
</li>
<li>For very large N-grams like the web

<ul>
<li>stupid backoff</li>
</ul>
</li>
</ul>


<h3>6.7. Advanced language Modeling</h3>

<ul>
<li>Discriminative models

<ul>
<li>choose n-gram weights to improve a task, not to fit the training set</li>
</ul>
</li>
<li>parsing-based models</li>
<li>caching models

<ul>
<li><p>recently used words are more likely to appear</p>

<p>  $$P<em>{CACHE}(w | history) = \lambda P(w_i | w</em>{i-2}w_{i-1}) + (1-\lambda) \frac{c(w\in history)}{|history|} $$</p></li>
<li><p>these perform very poorly for speech recognition (why?)</p></li>
</ul>
</li>
</ul>


<h2>7. Advanced: Good-Turing Smoothing</h2>

<h3>7.1. Reminder: Add-1 (Laplace) Smoothing</h3>

<p>$$P<em>{Add-1}(w_i | w</em>{i-1}) = \frac{c(w<em>{i-1},w_i) + 1}{c(w</em>{i-1} + V)}$$</p>

<h3>7.2. More general formulations: Add-k</h3>

<p>$$P<em>{Add-k}(w_i | w</em>{i-1}) = \frac{c(w<em>{i-1}, w_i) + k}{c(w</em>{i-1} + kV)}$$</p>

<p>$$P<em>{Add-k}(w_i | w</em>{i-1}) = \frac {c(w<em>{i-1}, w_i)+m(\frac1V)}{c(w</em>{i-1})+m}$$</p>

<h3>7.3. Unigram prior smoothing</h3>

<p>$$P<em>{Add-k}(w_i | w</em>{i-1}) = \frac {c(w<em>{i-1}, w_i) + m(\frac 1V)}{c(w</em>{i-1}) + m)}$$</p>

<p>$$P<em>{UnigramPrior}(w_i | w</em>{i-1}) = \frac {c(w<em>{i-1}, w_i) + mP(w_i)}{c(w</em>{i-1}) + m}$$</p>

<h3>7.4. Advanced smoothing algorithms</h3>

<ul>
<li>intuition used by many smoothing algorithms

<ul>
<li>Good-Turing</li>
<li>Kneser-Ney</li>
<li>Witten-Bell</li>
</ul>
</li>
<li>use the count of things we&rsquo;ve seen once

<ul>
<li>to help estimate the count of things we&rsquo;ve never seen</li>
</ul>
</li>
</ul>


<h3>7.5. Notation: $$N_c$$ = Frequency of frequency c</h3>

<p>$$N_c$$ = the count of things we&rsquo;ve seen c times</p>

<p>example: Sam I am I am Sam I do not eat</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> Word </th>
<th style="text-align:left;"> Frequnecy </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> I    </td>
<td style="text-align:left;"> 3         </td>
</tr>
<tr>
<td style="text-align:left;"> sam  </td>
<td style="text-align:left;"> 2         </td>
</tr>
<tr>
<td style="text-align:left;"> am   </td>
<td style="text-align:left;"> 2         </td>
</tr>
<tr>
<td style="text-align:left;"> do   </td>
<td style="text-align:left;"> 1         </td>
</tr>
<tr>
<td style="text-align:left;"> not  </td>
<td style="text-align:left;"> 1         </td>
</tr>
<tr>
<td style="text-align:left;"> eat  </td>
<td style="text-align:left;"> 1         </td>
</tr>
</tbody>
</table>


<ul>
<li>$$N_1$$ = 3</li>
<li>$$N_2$$ = 2</li>
<li>$$N_3$$ = 1</li>
</ul>


<h3>7.6. Good-Turing smoothing intuition</h3>

<ul>
<li>You are fishing (a scenario from Josh Goodman), and caught

<ul>
<li>10 carp, 3 perch, 2 whitefish, 1 trout, 1 salmon, 1 eel = 18 fish</li>
</ul>
</li>
<li>How likely is it that next species is trout?

<ul>
<li>1/18</li>
</ul>
</li>
<li>How likely is it that next species is new (i.e. catfish or bass)

<ul>
<li>let&rsquo;s use our estimate of things-we-saw-once to estimate the new things</li>
<li>3/18 (because N_1 = 3)</li>
</ul>
</li>
<li>assuming so, how likely is it that next species is trout?

<ul>
<li>must be less than 1/18</li>
<li>how to estimate?</li>
</ul>
</li>
</ul>


<h3>7.7. Good Turing calculations</h3>

<p>$$P_{GT}(things\,with\,zero\,frequency) = \frac{N_1}{N}$$</p>

<p>$$C^{*} = \frac{(c+1)N_{c+1}}{N_c}$$</p>

<table>
<thead>
<tr>
<th style="text-align:left;">            </th>
<th style="text-align:left;"> unseen (bass or catfish)    </th>
<th style="text-align:left;"> seen once (trout)    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> c          </td>
<td style="text-align:left;"> c=0                         </td>
<td style="text-align:left;"> c=1                  </td>
</tr>
<tr>
<td style="text-align:left;"> MLE        </td>
<td style="text-align:left;"> p=0/18=0                    </td>
<td style="text-align:left;"> p = 1/18             </td>
</tr>
<tr>
<td style="text-align:left;"> $$P_{GT}$$ </td>
<td style="text-align:left;"> P_GT(unseen) = N_1/N = 3/18 </td>
<td style="text-align:left;"> C(trout) = 2 * N2/N1 = 2 * 1/3 = 2/3 , P_GT(trout) = 2/3 / 18 = 1/27 </td>
</tr>
</tbody>
</table>


<h3>7.8. Ney et al.&rsquo;s Good Turing Intuition</h3>

<p>datasets: training, held-out</p>

<ul>
<li>intuition from leave-one-out validation

<ul>
<li>take each of the c training words out in turn</li>
<li>c training sets of size c-1, held-out of size 1</li>
<li>what fraction of held-out words are unseen in training: N_1 / C</li>
<li>what fraction of held-out words are seen k times in training: k times, (k+1)N_{k+1}/C</li>
<li>so in the future we expect (k+1)N_(k+1)/c of the words to be those with training count k</li>
<li>there are N_k words with training count k</li>
<li>each should occur with probability (k+1)N_{k+1}/c/N_k</li>
<li>or expected count: k* = (k+1)N_{k+1} / N_k</li>
</ul>
</li>
</ul>


<h3>7.9. Good-Turing complications</h3>

<ul>
<li>problems: what about &ldquo;the&rdquo;? (say c=4417)

<ul>
<li>for small k, N_k > N_{k+1}</li>
<li>for large k, too jumpy, zeros wrech estimates</li>
</ul>
</li>
<li>simple Good-Turing [Gale and Sampson]: replace empirical N_k with a best-fit power law once count counts get unreliable</li>
</ul>


<h3>7.10. Resulting Good-Turing numbers</h3>

<ul>
<li>numbers from Church and Gale (1991)</li>
<li>22 million words of AP Newswire</li>
</ul>


<p>$$c^{*} = \frac{(c+1)N_{c+1}}{N_c}$$</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> Count c </th>
<th style="text-align:left;"> Good Turing c* </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> 0       </td>
<td style="text-align:left;"> .0000270       </td>
</tr>
<tr>
<td style="text-align:left;"> 1       </td>
<td style="text-align:left;"> 0.446          </td>
</tr>
<tr>
<td style="text-align:left;"> 2       </td>
<td style="text-align:left;"> 1.26           </td>
</tr>
<tr>
<td style="text-align:left;"> 3       </td>
<td style="text-align:left;"> 2.24           </td>
</tr>
<tr>
<td style="text-align:left;"> 4       </td>
<td style="text-align:left;"> 3.24           </td>
</tr>
<tr>
<td style="text-align:left;"> 5       </td>
<td style="text-align:left;"> 4.22           </td>
</tr>
<tr>
<td style="text-align:left;"> 6       </td>
<td style="text-align:left;"> 4.19           </td>
</tr>
<tr>
<td style="text-align:left;"> 7       </td>
<td style="text-align:left;"> 6.21           </td>
</tr>
<tr>
<td style="text-align:left;"> 8       </td>
<td style="text-align:left;"> 7.24           </td>
</tr>
<tr>
<td style="text-align:left;"> 9       </td>
<td style="text-align:left;"> 8.25           </td>
</tr>
</tbody>
</table>


<h2>8. Kneser-Ney Smoothing</h2>

<h3>8.1. Absolute Discounting Interpolation</h3>

<ul>
<li>save ourselves some time and just subtract 0.75 (or some d)!</li>
</ul>


<p>$$P<em>{AbsoluteDiscounting}(w_i | w</em>{i-1}) = discounted bigram + \lambda * InterpolationWeight * unigram$$</p>

<p>$$P<em>{AbsoluteDiscounting}(w_i | w</em>{i-1}) = \frac {c(w<em>{i-1}, w_i) - d}{c(w</em>{i-1})} + \lambda(w_{i-1})P(w)$$</p>

<ul>
<li>maybe keeping a couple extra values of d for counts 1 and 2</li>
<li>but should we really just use the regular unigram P(w)?</li>
</ul>


<h3>8.2. Kneser-Ney Smoothing I</h3>

<ul>
<li>better estimate for probabilities of lower-order unigrams

<ul>
<li>Shannon game: I can&rsquo;t see without my reading ______ ?</li>
<li>&ldquo;Francisco&rdquo; is more common than &ldquo;glasses&rdquo;</li>
<li>but &ldquo;Francisco&rdquo; always follows &ldquo;San&rdquo;</li>
</ul>
</li>
<li>the unigram is useful exactly when we haven&rsquo;t seen this bigram!</li>
<li>instead of P(w): &ldquo;How likely is w&rdquo;</li>
<li>P_continuation(w): &ldquo;How likely is w to appear as a novel continuation?

<ul>
<li>for each word, count the number of bigram types it completes</li>
<li>every bigram type was a novel continuation the first time it was seen</li>
</ul>
</li>
</ul>


<p>$$P<em>{CONTINUATION}(w): |{w</em>{i-1}: c(w_{i-1},w) > 0}|$$</p>

<h3>8.3. Kneser-Ney Smoothing II</h3>

<ul>
<li>how many times does w appear as a novel continuation</li>
</ul>


<p>$$P<em>{CONTINUATION}(w): |{w</em>{i-1}: c(w_{i-1},w) > 0}|$$</p>

<ul>
<li>normalized by the total number of word bigram types</li>
</ul>


<p>$$|{(w<em>{j-1},w_j):c(w</em>{j-1},w_j)>0}|$$</p>

<p>$$P<em>{CONTINUATION}(w) = \frac {|{w</em>{i-1}: c(w<em>{i-1},w) > 0}|}{|{(w</em>{j-1},w_j):c(w_{j-1},w_j)}|}$$</p>

<h3>8.4. Kneser-Ney Smoothing III</h3>

<ul>
<li>alternative metaphor: the number of # of word types seen to precede w</li>
</ul>


<p>$$|{w<em>{i-1}: c(w</em>{i-1}, w)>0}|$$</p>

<ul>
<li>normalized by the # of words preceding all words</li>
</ul>


<p>$$ P<em>{CONTINUATION}(w) = \frac {|{w</em>{i-1}: c(w<em>{i-1}, w)>0}|}
                               {\sum</em>{w'} |{w'<em>{i-1}: c(w'</em>{i-1}, w')>0}|}
$$</p>

<ul>
<li>a frequent word (Francisco) occurring in only one context (San) will have a low continuation probability</li>
</ul>


<h3>8.5. Kneser-Ney Smoothing IV</h3>

<p>$$P<em>{KN}(w_i | w</em>{i-1}) = \frac {max(c(w<em>{i-1}, w_i)-d,0)}{c(w</em>{i-1})} +
                           \lambda(w<em>{i-1}P</em>{CONTINUATION}(w_i)
$$</p>

<p>$$\lambda$$ is a normalizing constant; the probability mass we&rsquo;ve discounted</p>

<p>$$\lambda(w_{i-1}) = theNormalizedDiscount * theNumberOfWordTypesThatCanFollowWi-1$$</p>

<p>the number of word types that can follow w_i-1<br/>
= # of word types we discounted
= # of times we applied normalized discount</p>

<p>$$\lambda(w<em>{i-1}) = \frac{d}{c(w</em>{i-1})} |{w: c(w_{i-1},w)>0}|$$</p>

<h3>8.6. Kneser-Ney Smoothing: Recursive formulation</h3>

<p>$$ P<em>{KN}(w_i | w</em>{i-n+1}^{i-1}) = \frac {max(c<em>{KN}(w</em>{i-n+1}^i)-d,0)}{c<em>{KN}(w</em>{i-n+1}^{i-1})} +
                                    \lambda(w<em>{i-n+1}^{i-1}P</em>{KN}(w_i | w_{i-n+2}^{i-1}))
$$</p>

<p>$$C_{KN}(\circ) = { count(\circ) \qquad for\,the\,highest\,order$$</p>

<p>$$C_{KN}(\circ) = { continuationcount(\circ) \qquad for\,lower\,order$$</p>

<p>continuation count = Number of unique single word contexts for $$\circ$$</p>

<h2>References</h2>

<ol>
<li>video courses: <a href="https://www.youtube.com/watch?v=s3kKlUBa3b0&amp;list=PL6397E4B26D00A269&amp;index=12">part 1</a>, <a href="https://www.youtube.com/watch?v=o-CvoOkVrnY&amp;index=13&amp;list=PL6397E4B26D00A269">part 2</a>, <a href="https://www.youtube.com/watch?v=OHyVNCvnsTo&amp;index=14&amp;list=PL6397E4B26D00A269">part 3</a>, <a href="https://www.youtube.com/watch?v=s5Yg6qac9ag&amp;index=15&amp;list=PL6397E4B26D00A269">part 4</a>, <a href="https://www.youtube.com/watch?v=d8nVJjlMOYo&amp;list=PL6397E4B26D00A269&amp;index=16">part 5</a>, <a href="https://www.youtube.com/watch?v=-aMYz1tMfPg&amp;list=PL6397E4B26D00A269&amp;index=17">part 6</a>, <a href="https://www.youtube.com/watch?v=XdjCCkFUBKU&amp;index=18&amp;list=PL6397E4B26D00A269">part 7</a>, <a href="https://www.youtube.com/watch?v=wtB00EczoCM&amp;list=PL6397E4B26D00A269&amp;index=19">part 8</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/20/stanford-nlp-3-minimum-edit-distance/">Stanford NLP 3 - Minimum Edit Distance</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-20T12:57:12+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:57 pm</span></time>
        
           | <a href="/tech/2014/06/20/stanford-nlp-3-minimum-edit-distance/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/20/stanford-nlp-3-minimum-edit-distance/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Definition of Minimum Edit Distance</h2>

<h3>1.1. How similar are two strings?</h3>

<ul>
<li>spell correction

<ul>
<li>the user typed &ldquo;graffe&rdquo;, which is closest?

<ul>
<li>graf</li>
<li>graft</li>
<li>grail</li>
<li>giraffe</li>
</ul>
</li>
</ul>
</li>
<li><p>computational biology</p>

<ul>
<li><p>align two sequences of nucleotides</p>

<p>  <code>AGGCTATCACCTGACCTCCAGGCCGATGCCC</code><br/>
  <code>TAGCTATCACGACCGCGGTCGATTTGCCGAC</code></p></li>
<li><p>resulting alignment:</p>

<p>  <code>-AGGCTATCACCTGACCTCCAGGCCGA--TGCCC---</code><br/>
  <code>TAG-CTATCAC--GACCGC--GGTCGATTTGCCCGAC</code></p></li>
</ul>
</li>
<li><p>also for machine translation, information extraction, speech recognition</p></li>
</ul>


<h3>1.2. Edit Distance</h3>

<ul>
<li>the minimum edit distance between two strings</li>
<li>is the minimum number of editing operations

<ul>
<li>insertion</li>
<li>deletion</li>
<li>substitution</li>
</ul>
</li>
<li>needed to transform one into the other</li>
</ul>


<h3>1.3. Minimum Edit Distance</h3>

<ul>
<li>two strings and their alignment</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>I N T E * N T I O N 
</span><span class='line'>| | | | | | | | | |  
</span><span class='line'>* E X E C U T I O N  
</span><span class='line'>d s s   i s        
</span><span class='line'>
</span><span class='line'>- d: deletion
</span><span class='line'>- s: substitution
</span><span class='line'>- i: insertion</span></code></pre></td></tr></table></div></figure>


<ul>
<li>if each operation has cost of 1

<ul>
<li>distance between these is 5</li>
</ul>
</li>
<li>if substituions cost 2 (Levenshtein)

<ul>
<li>distance between them is 8</li>
</ul>
</li>
</ul>


<h3>1.4. Alignment in Computational Biology</h3>

<ul>
<li><p>given a sequence of bases</p>

<p>  <code>AGGCTATCACCTGACCTCCAGGCCGATGCCC</code><br/>
  <code>TAGCTAGCACGACCGCGGTCGATTTGCCCGAC</code></p></li>
<li><p>an alignment:</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-AGGCTATCACCTGACCTCCAGGCCGA--TGCCC---
</span><span class='line'>TAG-CTAGCAC--GACCGC--GGTCGATTTGCCCGAC</span></code></pre></td></tr></table></div></figure>


<ul>
<li>given two sequences, alignn each letter to a letter or gap</li>
</ul>


<h3>1.5. Other uese of Edit Distance in NLP</h3>

<ul>
<li>evaluating machine translation and speech recognition</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>R Spokesman confirms     senior government adviser was shot
</span><span class='line'>H Spokesman said     the senior            adviser was shot dead
</span><span class='line'>             S        I             D                        I</span></code></pre></td></tr></table></div></figure>


<ul>
<li>named entity extraction and entity coreference

<ul>
<li><code>IBM Inc.</code> announced today</li>
<li><code>IBM</code> profits</li>
<li><code>Stanford President John Hennessy</code> announnced yesterday</li>
<li>for <code>Stanford University President John Hennessy</code></li>
</ul>
</li>
</ul>


<h3>1.6. How to find the Min Edit Distance?</h3>

<ul>
<li>searching for a path (sequence of edits) from the start string to the final string

<ul>
<li>initial state: the word we&rsquo;re tranforming</li>
<li>operators: insert, delte, substitute</li>
<li>goal state: the word we&rsquo;re trying to get to</li>
<li>path cost: what we want to minimize - the number of edits</li>
</ul>
</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>intention
</span><span class='line'>   |---- Del ---&gt; ntention
</span><span class='line'>   |---- Ins ---&gt; eintention
</span><span class='line'>   |---- Sub ---&gt; entention</span></code></pre></td></tr></table></div></figure>


<h3>1.7. Minimum Edit as Search</h3>

<ul>
<li>but the space of all edit sequences is huge

<ul>
<li>we can&rsquo;t afford to navigate naively</li>
<li>lots of distinct paths wind up at the same state

<ul>
<li>we don&rsquo;t have to keep track of all of them</li>
<li>just the shortest path to each of those revisted states</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>1.8. Defining Min Edit Distance</h3>

<ul>
<li>for two strings

<ul>
<li>X of length n</li>
<li>Y of length m</li>
</ul>
</li>
<li>we define D(i,j)

<ul>
<li>the edit distance between X[1..i] and Y[1..j]

<ul>
<li>i.e., the first i characters of X and the first j characters of Y</li>
</ul>
</li>
<li>the edit distance between X and Y is thus D(n,m)</li>
</ul>
</li>
</ul>


<h2>2. Computing Minimum Edit Distance</h2>

<h3>2.1. Dynamic Programming for Minimum Edit Distance</h3>

<ul>
<li>dynamic programming: a tabular computation of D(n, m)</li>
<li>solving problems by combining solutions to subproblems</li>
<li>bottom-up

<ul>
<li>we compute D(i,j) for small i,j</li>
<li>and compute larger D(i,j) based on previously computed smaller values</li>
<li>i.e., compute D(i,j) for all i(0 &lt; i &lt; n) and j(0 &lt; j &lt; m)</li>
</ul>
</li>
</ul>


<h3>2.2. Defining Min Edit Distance (Levenshtein)</h3>

<ul>
<li>initialization

<ul>
<li>D(i,0) = i</li>
<li>D(0,j) = j</li>
</ul>
</li>
<li>recurrence relation:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>for each i = 1...M
</span><span class='line'>    for each j = 1...N
</span><span class='line'>        D(i,j) = min { D(i-1,j) + 1  &lt;- delete
</span><span class='line'>                     { D(i,j-1) + 1  &lt;- insert
</span><span class='line'>                     { D(i-1,j-1) + 2; if X(i) &lt;&gt; Y(j)  &lt;- substitute
</span><span class='line'>                                    0; if X(i) == Y(j)</span></code></pre></td></tr></table></div></figure>


<ul>
<li>termination

<ul>
<li>D(N,M) is distance</li>
</ul>
</li>
</ul>


<h3>2.3. The Edit Distance Table</h3>

<ul>
<li>initialization</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 9 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> O </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> E </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
<td style="text-align:center;">   </td>
</tr>
<tr>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> 9 </td>
</tr>
<tr>
<td style="text-align:center;">   </td>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> E </td>
<td style="text-align:center;"> X </td>
<td style="text-align:center;"> E </td>
<td style="text-align:center;"> C </td>
<td style="text-align:center;"> U </td>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> O </td>
<td style="text-align:center;"> N </td>
</tr>
</tbody>
</table>


<ul>
<li>recurrence relation</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 9 </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> 9 </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 11 </td>
<td style="text-align:center;"> 12 </td>
<td style="text-align:center;"> 11 </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 8  |  &lt;- L = 8</td>
</tr>
<tr>
<td style="text-align:center;"> O </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 11 </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 11 </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 11 </td>
<td style="text-align:center;"> 10 </td>
</tr>
<tr>
<td style="text-align:center;"> E </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 5  </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 10 </td>
<td style="text-align:center;"> 9  </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
<td style="text-align:center;"> 8  </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 4 </td>
<td style="text-align:center;"> 5  </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 7  </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 4  </td>
<td style="text-align:center;"> 5  </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
</tr>
<tr>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 3  </td>
<td style="text-align:center;"> 4  </td>
<td style="text-align:center;"> 5  </td>
<td style="text-align:center;"> 6  </td>
<td style="text-align:center;"> 7  </td>
<td style="text-align:center;"> 8  </td>
<td style="text-align:center;"> 9  </td>
</tr>
<tr>
<td style="text-align:center;">   </td>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> E </td>
<td style="text-align:center;"> X </td>
<td style="text-align:center;"> E  </td>
<td style="text-align:center;"> C  </td>
<td style="text-align:center;"> U  </td>
<td style="text-align:center;"> T  </td>
<td style="text-align:center;"> I  </td>
<td style="text-align:center;"> O  </td>
<td style="text-align:center;"> N  </td>
</tr>
</tbody>
</table>


<h2>3. Bactrace for Computing Alignments</h2>

<h3>3.1. Computing alignments</h3>

<ul>
<li>edit distance isn&rsquo;t sufficient

<ul>
<li>we often need to align each character of the two strings to each other</li>
</ul>
</li>
<li>we do this by keeping a &ldquo;backtrace&rdquo;</li>
<li>every time we enter a cell, remember where we came from</li>
<li>when we each the end,

<ul>
<li>trace back the path from the upper right corner to read off the alignment</li>
</ul>
</li>
</ul>


<h3>3.2. MinEdit with Backtrace</h3>

<table>
<thead>
<tr>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;">              </th>
<th style="text-align:center;">              </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">               </th>
<th style="text-align:center;">           </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 9 </td>
<td style="text-align:center;"> (S)        8 </td>
<td style="text-align:center;"> (SW, W, S) 9 </td>
<td style="text-align:center;"> (SW, W, S) 10 </td>
<td style="text-align:center;"> (SW, W, S) 11 </td>
<td style="text-align:center;"> (SW, W, S) 12 </td>
<td style="text-align:center;"> (S)        11 </td>
<td style="text-align:center;"> (S)        10 </td>
<td style="text-align:center;"> (S)        9  </td>
<td style="text-align:center;"> (SW)   8  </td>
</tr>
<tr>
<td style="text-align:center;"> O </td>
<td style="text-align:center;"> 8 </td>
<td style="text-align:center;"> (S)        7 </td>
<td style="text-align:center;"> (SW, W, S) 8 </td>
<td style="text-align:center;"> (SW, W, S) 9  </td>
<td style="text-align:center;"> (SW, W, S) 10 </td>
<td style="text-align:center;"> (SW, W, S) 11 </td>
<td style="text-align:center;"> (S)        10 </td>
<td style="text-align:center;"> (S)        9  </td>
<td style="text-align:center;"> (SW)       8  </td>
<td style="text-align:center;"> (W)    9  </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 7 </td>
<td style="text-align:center;"> (S)        6 </td>
<td style="text-align:center;"> (SW, W, S) 7 </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (SW, W, S) 9  </td>
<td style="text-align:center;"> (SW, W, S) 10 </td>
<td style="text-align:center;"> (S)        9  </td>
<td style="text-align:center;"> (SW)       8  </td>
<td style="text-align:center;"> (W)        9  </td>
<td style="text-align:center;"> (W)    10 </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 6 </td>
<td style="text-align:center;"> (S)        5 </td>
<td style="text-align:center;"> (SW, W, S) 6 </td>
<td style="text-align:center;"> (SW, W, S) 7  </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (SW, W, S) 9  </td>
<td style="text-align:center;"> (SW)       8  </td>
<td style="text-align:center;"> (W)        9  </td>
<td style="text-align:center;"> (W)        10 </td>
<td style="text-align:center;"> (W, S) 11 </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 5 </td>
<td style="text-align:center;"> (S)        4 </td>
<td style="text-align:center;"> (SW, W, S) 5 </td>
<td style="text-align:center;"> (SW, W, S) 6  </td>
<td style="text-align:center;"> (SW, W, S) 7  </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (SW, W, S) 9  </td>
<td style="text-align:center;"> (SW, W, S) 10 </td>
<td style="text-align:center;"> (SW, W, S) 11 </td>
<td style="text-align:center;"> (S)    9  </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> (SW, W, S) 4 </td>
<td style="text-align:center;"> (SW, W, S) 5 </td>
<td style="text-align:center;"> (SW, W, S) 6  </td>
<td style="text-align:center;"> (SW, W, S) 7  </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (SW)       7  </td>
<td style="text-align:center;"> (W, S)     8  </td>
<td style="text-align:center;"> (SW, W, S) 9  </td>
<td style="text-align:center;"> (S)    8  </td>
</tr>
<tr>
<td style="text-align:center;"> N </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> (SW, W, S) 3 </td>
<td style="text-align:center;"> (SW, W, S) 4 </td>
<td style="text-align:center;"> (SW, W, S) 5  </td>
<td style="text-align:center;"> (SW, W, S) 6  </td>
<td style="text-align:center;"> (SW, W, S) 7  </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (S)        7  </td>
<td style="text-align:center;"> (SW, W, S) 8  </td>
<td style="text-align:center;"> (SW)   7  </td>
</tr>
<tr>
<td style="text-align:center;"> I </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> (SW, W, S) 2 </td>
<td style="text-align:center;"> (SW, W, S) 3 </td>
<td style="text-align:center;"> (SW, W, S) 4  </td>
<td style="text-align:center;"> (SW, W, S) 5  </td>
<td style="text-align:center;"> (SW, W, S) 6  </td>
<td style="text-align:center;"> (SW, W, S) 7  </td>
<td style="text-align:center;"> (SW)       6  </td>
<td style="text-align:center;"> (W)        7  </td>
<td style="text-align:center;"> (W)    8  </td>
</tr>
<tr>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1            </td>
<td style="text-align:center;"> 2            </td>
<td style="text-align:center;"> 3             </td>
<td style="text-align:center;"> 4             </td>
<td style="text-align:center;"> 5             </td>
<td style="text-align:center;"> 6             </td>
<td style="text-align:center;"> 7             </td>
<td style="text-align:center;"> 8             </td>
<td style="text-align:center;"> 9         </td>
</tr>
<tr>
<td style="text-align:center;">   </td>
<td style="text-align:center;"> # </td>
<td style="text-align:center;"> E            </td>
<td style="text-align:center;"> X            </td>
<td style="text-align:center;"> E             </td>
<td style="text-align:center;"> C             </td>
<td style="text-align:center;"> U             </td>
<td style="text-align:center;"> T             </td>
<td style="text-align:center;"> I             </td>
<td style="text-align:center;"> O             </td>
<td style="text-align:center;"> N         </td>
</tr>
</tbody>
</table>


<ul>
<li>S: South for down</li>
<li>W: West for left</li>
<li>SW: South West</li>
</ul>


<h3>3.3. Adding Backtrace to Minimum Edit Distance</h3>

<ul>
<li>base conditions

<ul>
<li>D(i,0) = i</li>
<li>D(0,j) - j</li>
</ul>
</li>
<li>recurrence relation</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>for each i = 1...M
</span><span class='line'>    for each j = 1...N
</span><span class='line'>        D(i,j) = min { D(i-1,j) + 1  &lt;- deletion
</span><span class='line'>                     { D(i,j-1) + 1  &lt;- insertion
</span><span class='line'>                     { D(i-1,j-1) + 2; if X(i) &lt;&gt; Y(j)  &lt;- substitution
</span><span class='line'>                                    0; if X(i) == Y(j)
</span><span class='line'>
</span><span class='line'>        ptr(i,j) = { LEFT  &lt;- insertion
</span><span class='line'>                   { DOWN  &lt;- deletion
</span><span class='line'>                   { DIAG  &lt;- substitution</span></code></pre></td></tr></table></div></figure>


<ul>
<li>termination:

<ul>
<li>D(N,M) is distance</li>
</ul>
</li>
</ul>


<h3>3.4. The Distance Matrix</h3>

<ul>
<li>every non-decreasing path</li>
<li>from (0,0) to (M,N)</li>
<li>corresponds to an alignment of the two sequences</li>
<li>an optimal alignment is composed of optimal subalignments</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:center;">       </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> Xn    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;"> (M,N) </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> x1    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> x0    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> (0,0) </td>
<td style="text-align:center;"> y0 </td>
<td style="text-align:center;"> y1 </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> Ym    </td>
</tr>
</tbody>
</table>


<h3>3.5. Result of Backtrace</h3>

<ul>
<li>two strings and their alignment</li>
</ul>


<h3>3.6. Performance</h3>

<ul>
<li>time: O(nm)</li>
<li>space: O(nm)</li>
<li>backtrace: O (n+m)</li>
</ul>


<h2>4. Weighted Minimum Edit Distance</h2>

<h3>4.1. Weighted Edit Distance</h3>

<ul>
<li>why would we add weights to the computation?

<ul>
<li>spell correction: some letters are more likely to be mistyped than others</li>
<li>biology: certain kinds of deletions or insertions are more likely than others</li>
</ul>
</li>
</ul>


<h3>4.2. Confusion matrix for spelling errors</h3>

<p>sub[X,Y] = substitution of X(incorrect) for Y(correct)<br/>
<img src="http://media-cache-ec0.pinimg.com/736x/51/99/a9/5199a999530b83f37b93593bbddb03f0.jpg"/></p>

<h3>4.3. Weighted Min Edit Distance</h3>

<ul>
<li>initialization

<ul>
<li>D(0,0) = 0</li>
<li>D(i,0) = D(i-1,0) + del[x(i)];  1 &lt; i &lt;= N</li>
<li>D(0,j) = D(0,j-1) + ins[y(j)];  1 &lt; j &lt;= M</li>
</ul>
</li>
<li>recurrence relation:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>D(i,j) = min { D(i-1,j)    + del[x(i)]
</span><span class='line'>             { D(i,j-1)    + ins[y(j)]
</span><span class='line'>             { D(i-1,j-1)  + sub[x(i),y(j)]</span></code></pre></td></tr></table></div></figure>


<ul>
<li>termination:

<ul>
<li>D(N,M) is distance</li>
</ul>
</li>
</ul>


<h3>4.4. Where did the name, dynamic programming, come from?</h3>

<ul>
<li><p>Richard Bellman, &ldquo;Eye of the Hurricane: an autobiography&rdquo; 1984</p>

<pre><code>  ... The 1950s were not good years for mathematical research. [the] Secretary of Defense ... had a pathological fear and hatred of the word, research ...

  I decided therefore to use the word, "programming".

  I wanted to get across the idea that this was dynamic, this was multistage... I thought, let's ... take a word that  has an absolutely precise meaning, namely dynamic... it's impossible to use the word, dynamic, in a pejorative sense. Try thinking of some combination that will possibly give it a pejorative meaning. It's impossible.

  Thus, I thought dynamic programming was a good name. It was something not even a Congressman could object to.
</code></pre></li>
</ul>


<h2>5. Minimum Edit Distance in Computational Biology</h2>

<h3>5.1. Sequence Alignment</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>AGGCTATCACCTGACCTCCAGGCCGATGCCC
</span><span class='line'>TAGCTATCACGACCGCGGTCGATTTGCCCGAC
</span><span class='line'>
</span><span class='line'>-AGGCTATCACCTGACCTCCAGGCCGA--TGCCC---
</span><span class='line'>TAG-CTAGCAC--GACCGC--GGTCGATTTGCCCGAC</span></code></pre></td></tr></table></div></figure>


<h3>5.2. Why sequence alignment?</h3>

<ul>
<li>comparing genes or regions from different species

<ul>
<li>to find important regions</li>
<li>determine function</li>
<li>uncover evolutionary forces</li>
</ul>
</li>
<li>assembling fragments to sequence DNA</li>
<li>compare individuals to looking for mutations</li>
</ul>


<h3>5.3. Alignments in two fields</h3>

<table>
<thead>
<tr>
<th style="text-align:left;"> NLP                  </th>
<th style="text-align:left;"> Computational Biology  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> distance (minimized) </td>
<td style="text-align:left;"> similarity (maximized) </td>
</tr>
<tr>
<td style="text-align:left;"> weights              </td>
<td style="text-align:left;"> scores                 </td>
</tr>
</tbody>
</table>


<h3>5.4. The Needleman-Wunsch Algorithm</h3>

<ul>
<li>initialization:

<ul>
<li>D(i,0) = -i * d</li>
<li>D(0,j) = -j * d</li>
</ul>
</li>
<li>recurrence relation:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>D(i,j) = max { D(i-1,j)   - d
</span><span class='line'>             { D(i,j-1)   - d
</span><span class='line'>             { D(i-1,j-1) + s[x(i),y(j)]</span></code></pre></td></tr></table></div></figure>


<ul>
<li>termination:

<ul>
<li>D(N,M) is distance</li>
</ul>
</li>
</ul>


<h3>5.5. The Needleman-Wunsch Matrix</h3>

<ul>
<li>note that the origin is at the upper left</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:center;">       </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">       </td>
<td style="text-align:center;"> X1 </td>
<td style="text-align:center;"> X2 </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> Xm    </td>
</tr>
<tr>
<td style="text-align:center;"> Y1    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> Yn    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
</tbody>
</table>


<h3>5.6. A variant of the basic algorithm</h3>

<ul>
<li>maybe it is ok to have an unlimited # of gaps in the beginning and end</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>----------CTATCACCTGACCTCCAGGCCGATGCCCCTTCCGGC
</span><span class='line'>GCGAGTTCATCTATCAC--GACCGC--GGTCG--------------</span></code></pre></td></tr></table></div></figure>


<ul>
<li>if so, we don&rsquo;t want to penalize gaps at the ends</li>
</ul>


<h3>5.7. Different types of overlaps</h3>

<p>2 overlapping &ldquo;reads&rdquo; from a sequencing project</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>----------||||||||||||||
</span><span class='line'>          ||||||||||||||-------------------------
</span><span class='line'>
</span><span class='line'>          ||||||||||||||-------------------------
</span><span class='line'>----------||||||||||||||</span></code></pre></td></tr></table></div></figure>


<p>search for a moouse gene withinn a human chromosome</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-----------|||||||||-----------------
</span><span class='line'>           |||||||||
</span><span class='line'>
</span><span class='line'>           |||||||||
</span><span class='line'>-----------|||||||||-----------------</span></code></pre></td></tr></table></div></figure>


<h3>5.8. The Overlap Detection variant</h3>

<p>changes:</p>

<ul>
<li>initialization

<ul>
<li>for all i,j,

<ul>
<li>F(i,0) = 0  &lt;&ndash; - i * d</li>
<li>F(0,j) = 0  &lt;&ndash; - j * d</li>
</ul>
</li>
</ul>
</li>
<li>termination</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Fopt = max { max_i F(i, N)
</span><span class='line'>           { max_j F(M, j)</span></code></pre></td></tr></table></div></figure>


<table>
<thead>
<tr>
<th style="text-align:center;">       </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">    </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">     </th>
<th style="text-align:center;">       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">       </td>
<td style="text-align:center;"> X1 </td>
<td style="text-align:center;"> X2 </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> &hellip; </td>
<td style="text-align:center;"> Xm    </td>
</tr>
<tr>
<td style="text-align:center;"> Y1    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">   1   </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> &hellip;   </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
<tr>
<td style="text-align:center;"> Yn    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">    </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">     </td>
<td style="text-align:center;">       </td>
</tr>
</tbody>
</table>


<h3>5.9. The Local Alignment Problem</h3>

<ul>
<li>given two strings

<ul>
<li>x = x1&hellip;xm</li>
<li>y = y1&hellip;yn</li>
</ul>
</li>
<li><p>find substrings x', y' whose similarity (optimal global alignment value) is maximum</p>

<p>  x = aaaacc<code>cccggg</code>gtta<br/>
  y = tt<code>cccggg</code>aaccaacc</p></li>
</ul>


<h3>5.10. The Simith-Waterman algorithm</h3>

<p>idea: Ignore badly aligning regions</p>

<p>modifications to Needleman-Wunsch:</p>

<ul>
<li>initialization:

<ul>
<li>F(0,j) = 0</li>
<li>F(i,0) = 0</li>
</ul>
</li>
<li>iteration</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>F(i,j) = max { F(i-1,j)    - d
</span><span class='line'>             { F(i,j-1)    - d
</span><span class='line'>             { F(i-1, j-1) + s(xi,yj)</span></code></pre></td></tr></table></div></figure>


<ul>
<li>termination

<ul>
<li>if we want the best local alignment

<ul>
<li>Fopt = max_i,j F(i,j)</li>
<li>find Fopt and trance back</li>
</ul>
</li>
<li>if we want all local alignments scoring > t

<ul>
<li>for all i,j find F(i,j) > t, and trace back?</li>
<li>complicated by overlapping local alignments</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>5.11. Local alignment example</h3>

<p>X = <code>ATCAT</code><br/>
Y = <code>ATTAT</code>C</p>

<p>X =    <code>ATC</code>AT<br/>
Y = ATT<code>ATC</code></p>

<p>let:<br/>
- m = 1 (1 point for match)
- d = 1 (-1 point for del/ins/sub)</p>

<table>
<thead>
<tr>
<th style="text-align:center;">   </th>
<th style="text-align:center;">   </th>
<th style="text-align:center;"> A </th>
<th style="text-align:center;"> T </th>
<th style="text-align:center;"> T </th>
<th style="text-align:center;"> A </th>
<th style="text-align:center;"> T </th>
<th style="text-align:center;"> C </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">   </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
</tr>
<tr>
<td style="text-align:center;"> A </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 0 </td>
</tr>
<tr>
<td style="text-align:center;"> C </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 3 </td>
</tr>
<tr>
<td style="text-align:center;"> A </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 2 </td>
</tr>
<tr>
<td style="text-align:center;"> T </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 2 </td>
<td style="text-align:center;"> 0 </td>
<td style="text-align:center;"> 1 </td>
<td style="text-align:center;"> 3 </td>
<td style="text-align:center;"> 2 </td>
</tr>
</tbody>
</table>


<h2>References</h2>

<ol>
<li>video courses: <a href="https://www.youtube.com/watch?v=CXfJNzD43OI&amp;index=7&amp;list=PL6397E4B26D00A269">part 1</a>, <a href="https://www.youtube.com/watch?v=z_CB7Gih_Mg&amp;list=PL6397E4B26D00A269&amp;index=8">part 2</a>, <a href="https://www.youtube.com/watch?v=iQVp4Mq6s6k&amp;index=9&amp;list=PL6397E4B26D00A269">part 3</a>, <a href="https://www.youtube.com/watch?v=ScdU0cHmxfE&amp;index=10&amp;list=PL6397E4B26D00A269">part 4</a>, <a href="https://www.youtube.com/watch?v=Q0TGn4wkuoE&amp;index=11&amp;list=PL6397E4B26D00A269">part 5</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/19/stanford-nlp-2-basic-text-processsing/">Stanford NLP 2 - Basic Text Processsing</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-19T20:18:34+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:18 pm</span></time>
        
           | <a href="/tech/2014/06/19/stanford-nlp-2-basic-text-processsing/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/19/stanford-nlp-2-basic-text-processsing/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Regular Expressions</h2>

<p>A formal language for specifying text strings</p>

<h2>1.1. Regular Expressions: Disjunctions</h2>

<p>How can we search for any of these?</p>

<ul>
<li>(singular) woodchuck</li>
<li>(plural) woodchucks</li>
<li>(capital) Woodchuck</li>
<li>(combination) Woodchucks</li>
</ul>


<p>Regular Expressions:</p>

<ul>
<li>letters inside square brackets []</li>
<li>ranges [A-Z]</li>
<li>negations [^Ss]

<ul>
<li>carat means negation only when first in []</li>
</ul>
</li>
</ul>


<h2>1.2. Regular Expressions: More Disjunction</h2>

<ul>
<li>Woodchucks is another name for groundhog!</li>
<li>The pipe | for disjunction</li>
</ul>


<h2>1.3. Regular Expressions: ? * + .</h2>

<h2>1.4. Regular Expressions: anchors ^ $</h2>

<p>example: find me all instances of the word the in a text</p>

<ul>
<li>the: [^A-Za-z][Tt]he[^A-Za-z]</li>
</ul>


<h2>1.5. Summary</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Pattern                      </th>
<th style="text-align:left;"> Matches                    </th>
<th> Example                 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> [wW]oodchuck                 </td>
<td style="text-align:left;"> Woodchuck, woodchuck       </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [1234567890]                 </td>
<td style="text-align:left;"> Any digit                  </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [A-Z]                        </td>
<td style="text-align:left;"> an upper case letter       </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [a-z]                        </td>
<td style="text-align:left;"> a lower case letter        </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [0-9]                        </td>
<td style="text-align:left;"> a single digit             </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [^A-Z]                       </td>
<td style="text-align:left;"> not an upper case letter   </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [^Ss]                        </td>
<td style="text-align:left;"> neither &rsquo;S' nor &rsquo;s'        </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [^e^]                        </td>
<td style="text-align:left;"> neither e nor ^            </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> a<sup>b</sup>                          </td>
<td style="text-align:left;"> the pattern a carat b      </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> groundhog | woodchuck       </td>
<td style="text-align:left;">                            </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> yours | mine                </td>
<td style="text-align:left;"> yours mine                 </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> a|b|c                      </td>
<td style="text-align:left;"> =[abc]                     </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> [gG]roundhog | [wW]oodchuck </td>
<td style="text-align:left;">                            </td>
<td>                         </td>
</tr>
<tr>
<td style="text-align:left;"> oo*h!                       </td>
<td style="text-align:left;"> 0 or more of previous char </td>
<td> oh! ooh! oooh! ooooh!   </td>
</tr>
<tr>
<td style="text-align:left;"> o+h!                         </td>
<td style="text-align:left;"> 1 or more of previous char </td>
<td> oh! ooh! oooh! oooh!    </td>
</tr>
<tr>
<td style="text-align:left;"> baa+                         </td>
<td style="text-align:left;">                            </td>
<td> baa baaa baaa baaa      </td>
</tr>
<tr>
<td style="text-align:left;"> beg.n                        </td>
<td style="text-align:left;"> anyone                     </td>
<td> begin begun begun beg3n </td>
</tr>
<tr>
<td style="text-align:left;"> colou?r                      </td>
<td style="text-align:left;"> optional previous char     </td>
<td> color colour            </td>
</tr>
<tr>
<td style="text-align:left;"> ^[A-Z]                       </td>
<td style="text-align:left;"> begin of the line          </td>
<td> Palo Alto               </td>
</tr>
<tr>
<td style="text-align:left;"> ^[A-Za-z]                    </td>
<td style="text-align:left;"> begin of the line          </td>
<td> 1 &ldquo;Hello&rdquo;               </td>
</tr>
<tr>
<td style="text-align:left;"> .$                           </td>
<td style="text-align:left;"> end of the line            </td>
<td> The end.                </td>
</tr>
<tr>
<td style="text-align:left;"> .$                           </td>
<td style="text-align:left;"> end of the line            </td>
<td> The end? The end!       </td>
</tr>
</tbody>
</table>


<p>.</p>

<p><strong>Errors</strong></p>

<p>The process we just went through was based on fixing two kinds of errors</p>

<ul>
<li>(Type I - False positives) matching strings that we should not have matched (there, then, other)</li>
<li>(Type II - False negatives) not matching things that we should have matched (The)</li>
</ul>


<p><strong>Errors Cont.</strong></p>

<p>in NLP we are always dealing with these kinds of errors</p>

<p>reducing the error rate for an application often involved two antagonistic efforts</p>

<ul>
<li>increasing accuracy or precision (minimizing false positives)</li>
<li>increasing coverage or recall (minimizing false negatives)</li>
</ul>


<p><strong>Summary</strong></p>

<p>regular expressions play a surprisingly large role</p>

<ul>
<li>sophisticated sequences of regular expressions are often the first model for any text processing text</li>
</ul>


<p>for many hard tasks, we use machine learning classifiers</p>

<ul>
<li>but regular expressions are used as features in the classifiers</li>
<li>can be very useful in capturing generalizations</li>
</ul>


<h2>2. Word Tokenization</h2>

<h3>2.1. Text Normalization</h3>

<p>every NLP task needs to do text</p>

<p>normalization</p>

<ul>
<li>segmenting/ tokenizing words in running text</li>
<li>normalizing word formats</li>
<li>segmenting sentences in running text</li>
</ul>


<h3>2.2. How many words?</h3>

<p>I do uh main- mianly business data processing</p>

<ul>
<li>fragments, filled pauses</li>
</ul>


<p>Seusss cat in the hat is different from other cats!</p>

<ul>
<li>lemma: same stem, part of speech, rough word sense

<ul>
<li>cat and cats = same lemma</li>
</ul>
</li>
<li>wordform: the full inflected surface form

<ul>
<li>cat and cats = different wordforms</li>
</ul>
</li>
</ul>


<p>Definitions:</p>

<ul>
<li>type: an element of the vocabulary - V = vocabulary = set of types - |V| is the size of the vocabulary</li>
<li>token: an instance of that type in running text - N = number of token</li>
<li>Church and Gale (1990): |V| > O(N<sup>1</sup>/2)</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;">                                 </th>
<th style="text-align:left;"> Tokens = N  </th>
<th style="text-align:left;"> Types = |V| </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Switchboard phone sonversations </td>
<td style="text-align:left;"> 2.4 million </td>
<td style="text-align:left;"> 20 thousand   </td>
</tr>
<tr>
<td style="text-align:left;"> Shakespeare                     </td>
<td style="text-align:left;"> 884,000     </td>
<td style="text-align:left;"> 31 thousand   </td>
</tr>
<tr>
<td style="text-align:left;"> Google N-grams                  </td>
<td style="text-align:left;"> 1 trillion  </td>
<td style="text-align:left;"> 13 million    </td>
</tr>
</tbody>
</table>


<p>example:</p>

<p>They lay back on the San Francisco grass and looked at the starts and their</p>

<p>how many?</p>

<ul>
<li>15 tokens (or 14) -> San Francisco is one word or two words?</li>
<li>13 types (or 12)(or 11?)</li>
</ul>


<h3>2.3. Issues in Tokenization</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">                     </th>
<th style="text-align:left;">                                  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Finland&rsquo;s capital   </td>
<td style="text-align:left;"> Finland Finlands Finland&rsquo;s?      </td>
</tr>
<tr>
<td style="text-align:left;"> what&rsquo;re, I&rsquo;m, isn&rsquo;t </td>
<td style="text-align:left;"> What are, I am, is not           </td>
</tr>
<tr>
<td style="text-align:left;"> Hewlett-Packard     </td>
<td style="text-align:left;"> Hewlett Packard?                 </td>
</tr>
<tr>
<td style="text-align:left;"> state-of-the-art    </td>
<td style="text-align:left;"> state of the art?                </td>
</tr>
<tr>
<td style="text-align:left;"> Lowercase           </td>
<td style="text-align:left;"> lower-case lowercase lower case? </td>
</tr>
<tr>
<td style="text-align:left;"> m.p.h., PhD.        </td>
<td style="text-align:left;"> ??                               </td>
</tr>
</tbody>
</table>


<h3>2.4. Tokenization: language issues</h3>

<p>French</p>

<ul>
<li>Lensemble -> one token or two?

<ul>
<li>L? l? Le?</li>
<li>Want lensemble to match with un ensemble</li>
</ul>
</li>
</ul>


<p>German noun compounds are not segmented</p>

<ul>
<li>Lebensversicherungsgesellschaftsangestellter</li>
<li>life insurance company employee</li>
<li>German information retrieval needs compound splitter</li>
</ul>


<p>Chinese and Japanese no spaces between words:</p>

<ul>
<li></li>
<li>       </li>
<li>Sharapova now lives in US southeastern Florida</li>
</ul>


<p>Further complicated in Japanese, with multiple alphabets intermingled</p>

<ul>
<li>Dates/amounts in multiple formats</li>
<li>Katakana Hiragana Kanji Romaji</li>
</ul>


<p>End-user can express query entirely in hiragana!</p>

<h3>2.5. Word Tokenization in Chinese</h3>

<p>also called Word Segmentation</p>

<ul>
<li>Chinese words are composed of characters</li>
<li>characters are generally 1 syllable and 1 morepheme</li>
</ul>


<p>average word is 2.4 characters long</p>

<p>standard baseline segmentation algorithm:</p>

<ul>
<li>maximum matching (also called greedy)</li>
</ul>


<h3>2.6. Maximum Matching Word Segmentation Algorithm</h3>

<p>given a wordlist of Chinese, and a string</p>

<ol>
<li>start a pointer at the beginning of the string</li>
<li>find the longest word in dictionary that matches the string starting at pointer</li>
<li>move the pointer over the word in string</li>
<li>go to 2</li>
</ol>


<h3>2.7. Max-match segmentation illustration</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">                   </th>
<th style="text-align:left;">                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Thecatinthehat    </td>
<td style="text-align:left;"> the cat in the hat   </td>
</tr>
<tr>
<td style="text-align:left;"> Thetabledownthere </td>
<td style="text-align:left;"> the table down there </td>
</tr>
<tr>
<td style="text-align:left;">                   </td>
<td style="text-align:left;"> theta bled own there </td>
</tr>
</tbody>
</table>


<p>Doesnt generally work in English!</p>

<p>But works astonishingly well in Chinese</p>

<ul>
<li></li>
<li>       </li>
</ul>


<p>Modern probabilistic segmentation algorithms even better</p>

<h2>3. Word Normalization and Stemming</h2>

<h3>3.1. Normalization</h3>

<p>need to normalize terms</p>

<ul>
<li>information retrieval: indexed text and query terms must have same form

<ul>
<li>we want to match U.S.A and USA</li>
</ul>
</li>
</ul>


<p>we impicitly define equivalence classes of terms</p>

<ul>
<li>e.g., deleting periods in a term</li>
</ul>


<p>alternative: asymmetric expansion</p>

<p>potentially more powerful, but less efficient</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> Enter   </th>
<th style="text-align:left;"> Search                   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> window  </td>
<td style="text-align:left;"> window, windows          </td>
</tr>
<tr>
<td style="text-align:left;"> windows </td>
<td style="text-align:left;"> Windows, windows, window </td>
</tr>
<tr>
<td style="text-align:left;"> Windows </td>
<td style="text-align:left;"> Windows                  </td>
</tr>
</tbody>
</table>


<h3>3.2. Case folding</h3>

<p>applications like IR: educe all letters to lower case</p>

<ul>
<li>since users tend to use lower case</li>
<li>possible exception: upper case in mid-sentence?

<ul>
<li>e.g., General Motors</li>
<li>Fed vs. fed</li>
<li>SAIL vs. sail</li>
</ul>
</li>
</ul>


<p>for sentiment analysis, MT, Information extraction</p>

<ul>
<li>case is helpful (US versus us is important)</li>
</ul>


<h3>3.3. Lemmatization</h3>

<ul>
<li>reduce inflections or variant forms to base form</li>
<li>lemmatization: have to find correct dictionary headword form</li>
<li>machine translation

<ul>
<li>Spanish quiero (I want), quieres (you want) same lemma as querer want</li>
</ul>
</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;"> inflections or variant forms  </th>
<th style="text-align:left;"> base form </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> am, are, is                   </td>
<td style="text-align:left;"> be        </td>
</tr>
<tr>
<td style="text-align:left;"> car, cars, car&rsquo;s, cars'       </td>
<td style="text-align:left;"> car       </td>
</tr>
</tbody>
</table>


<p>example:</p>

<p>the boy&rsquo;s cars are different colors -> the boy car be different color</p>

<h3>3.4. Morphology</h3>

<p>morphemes</p>

<ul>
<li>the small meaningful units that make up words</li>
<li>stems: the core meaning-bearing units</li>
<li>affixes: bits and pieces that adhere to stems

<ul>
<li>often with grammatical functions</li>
</ul>
</li>
</ul>


<h3>3.5. Stemming</h3>

<ul>
<li>reduce terms to their stems in information retrieval</li>
<li>stemming is crude chopping of affixes

<ul>
<li>language dependent</li>
<li>e.g., automate(s), automatic, automation all reduced to automat</li>
</ul>
</li>
</ul>


<p>example:</p>

<p>for example compressed and compression are both accepted as equivalent to compress</p>

<ul>
<li>for exampl compress and compress ar both accept as equival to compress</li>
</ul>


<h3>3.6. Porters algorithm - the most common English stemmer</h3>

<p>step 1a</p>

<table>
<thead>
<tr>
<th style="text-align:left;">      </th>
<th style="text-align:left;">    </th>
<th style="text-align:left;">                    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> sses </td>
<td style="text-align:left;"> s  </td>
<td style="text-align:left;"> caresses -> caress </td>
</tr>
<tr>
<td style="text-align:left;"> ies  </td>
<td style="text-align:left;"> i  </td>
<td style="text-align:left;"> ponies -> poni     </td>
</tr>
<tr>
<td style="text-align:left;"> ss   </td>
<td style="text-align:left;"> ss </td>
<td style="text-align:left;"> caress -> caress   </td>
</tr>
<tr>
<td style="text-align:left;"> s    </td>
<td style="text-align:left;">  / </td>
<td style="text-align:left;"> cats -> cat        </td>
</tr>
</tbody>
</table>


<p>step 1b</p>

<table>
<thead>
<tr>
<th style="text-align:left;">            </th>
<th style="text-align:left;">    </th>
<th style="text-align:left;">                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> (*v*)ing </td>
<td style="text-align:left;">  / </td>
<td style="text-align:left;"> walking -> walk      </td>
</tr>
<tr>
<td style="text-align:left;">            </td>
<td style="text-align:left;">    </td>
<td style="text-align:left;"> sing -> sing         </td>
</tr>
<tr>
<td style="text-align:left;"> (*v*)ed  </td>
<td style="text-align:left;">  / </td>
<td style="text-align:left;"> plastered -> plaster </td>
</tr>
</tbody>
</table>


<p>step 2 (for long stems)</p>

<table>
<thead>
<tr>
<th style="text-align:left;">          </th>
<th style="text-align:left;">     </th>
<th style="text-align:left;">                       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> ational  </td>
<td style="text-align:left;"> ate </td>
<td style="text-align:left;"> relational -> relate  </td>
</tr>
<tr>
<td style="text-align:left;"> izer     </td>
<td style="text-align:left;"> ize </td>
<td style="text-align:left;"> digitizer -> digitize </td>
</tr>
<tr>
<td style="text-align:left;"> ator     </td>
<td style="text-align:left;"> ate </td>
<td style="text-align:left;"> operator -> operate   </td>
</tr>
</tbody>
</table>


<p>step 3 (for longer stems)</p>

<table>
<thead>
<tr>
<th style="text-align:left;">      </th>
<th style="text-align:left;">     </th>
<th style="text-align:left;">                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> al   </td>
<td style="text-align:left;">  /  </td>
<td style="text-align:left;"> revival -> reviv     </td>
</tr>
<tr>
<td style="text-align:left;"> able </td>
<td style="text-align:left;">  /  </td>
<td style="text-align:left;"> adjustable -> adjust </td>
</tr>
<tr>
<td style="text-align:left;"> ate  </td>
<td style="text-align:left;">  /  </td>
<td style="text-align:left;"> activate -> activ    </td>
</tr>
</tbody>
</table>


<h3>3.7. Viewing morphology in a corpus - Why only strip -ing if there is a vowel?</h3>

<table>
<thead>
<tr>
<th style="text-align:left;">            </th>
<th style="text-align:left;">    </th>
<th style="text-align:left;">                 </th>
<th style="text-align:left;">                           </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> (*v*)ing </td>
<td style="text-align:left;">  / </td>
<td style="text-align:left;"> walking -> walk </td>
<td style="text-align:left;"> with an earlier vowel &ldquo;a&rdquo; </td>
</tr>
<tr>
<td style="text-align:left;">            </td>
<td style="text-align:left;">    </td>
<td style="text-align:left;"> sing -> sing    </td>
<td style="text-align:left;"> without vowel             </td>
</tr>
</tbody>
</table>


<h3>3.8. Dealing with complex morphology is sometimes necessary</h3>

<ul>
<li>some languages requires complex morpheme segmentation

<ul>
<li> Turkish</li>
<li> Uygarlastiranoadiklarimizdanmissinizcasina</li>
<li> <code>(behaving) as if you are among those whom we could not civilize</code></li>
<li> Uygar <code>civilized</code> + las <code>become</code>

<ul>
<li> <code>+</code> tir <code>cause</code> + ama <code>not able</code></li>
<li> <code>+</code> dik <code>past</code> + lar <code>plural</code></li>
<li> <code>+</code> imiz <code>p1pl</code> + dan <code>abl</code></li>
<li> <code>+</code> mis <code>past</code> + siniz <code>2pl</code> + casina <code>as if</code></li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>4. Sentence Segmentation and Decision Trees</h2>

<h3>4.1. Sentence Segmentation</h3>

<p>!, ? are relatively unambiguous</p>

<p>Period . is quite ambiguous</p>

<ul>
<li>Sentence boundary</li>
<li>Abbreviations like Inc. or Dr.</li>
<li>Numbers like .02% or 4.3</li>
</ul>


<p>solution: build a binary classifier</p>

<ul>
<li>looks at a .</li>
<li>decides EndOfSentence/ NotEndOfSentence</li>
<li>classifiers: hand0written rules, regular expressions, or machine learning</li>
</ul>


<h3>4.2. Determining if a word is end-of-sentence: a Decision Tree</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>lots of blank lines after me?
</span><span class='line'>    |--- YES ---&gt; E-O-S
</span><span class='line'>    |--- NO  ---&gt; final punctuation is ?, !, or :?
</span><span class='line'>                     |--- YES ---&gt; E-O-S
</span><span class='line'>                     |--- NO  ---&gt; final punctuation is period
</span><span class='line'>                                        |--- YES ---&gt; I am "etc" or other abbreviation
</span><span class='line'>                                                        |--- YES ---&gt; not E-O-S
</span><span class='line'>                                                        |--- NO  ---&gt; E-O-S
</span><span class='line'>                                        |--- NO  ---&gt; not E-O-S</span></code></pre></td></tr></table></div></figure>


<h3>4.3. More sophisticated decision tree features</h3>

<p>case of word with/after .: Upper, Lower, Cap, Number</p>

<p>numeric features</p>

<ul>
<li>length of word with .</li>
<li>probability(word with . occurs at end-of-s)</li>
<li>probability(word after . occurs at beginning-of-s)</li>
</ul>


<h3>4.4. Implementing Decision Trees</h3>

<p>a decision tree is just an if-then-else statement</p>

<p>the interesting research is choosing the features</p>

<p>setting up the structure is often too hard to do by hand</p>

<ul>
<li>hand-building only possible for very simple features, domains

<ul>
<li>for numeric features, its too hard to pick each threshold</li>
</ul>
</li>
<li>instead, structure usually learned by machine learning from a training corpus</li>
</ul>


<h3>4.5. Decision Trees and other classifiers</h3>

<p>we can think of the questions in a decision tree</p>

<p>as features that could be exploited by an kind of classifier</p>

<ul>
<li>logistic regression</li>
<li>svm</li>
<li>neural nets</li>
<li>etc.</li>
</ul>


<h2>References</h2>

<ol>
<li>video courses: <a href="https://www.youtube.com/watch?v=hwDhO1GLb_4&amp;list=PL6397E4B26D00A269&amp;index=2">part 1</a>, <a href="https://www.youtube.com/watch?v=RGLldper5II&amp;index=3&amp;list=PL6397E4B26D00A269">part 2</a>, <a href="https://www.youtube.com/watch?v=jBk24DI8kg0&amp;index=4&amp;list=PL6397E4B26D00A269">part 3</a>, <a href="https://www.youtube.com/watch?v=2s7f8mBwnko&amp;list=PL6397E4B26D00A269&amp;index=5">part 4</a>, <a href="https://www.youtube.com/watch?v=di0N3kXfGYg&amp;index=6&amp;list=PL6397E4B26D00A269">part 5</a></li>
<li>tools: <a href="regexpal.com">RegexPal</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/19/stanford-nlp-1-introduction/">Stanford NLP 1 - Introduction</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-19T17:42:24+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:42 pm</span></time>
        
           | <a href="/tech/2014/06/19/stanford-nlp-1-introduction/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/19/stanford-nlp-1-introduction/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. What is Natural Language Processing?</h2>

<p>Answers</p>

<ul>
<li>IBMs Watson (Feb 16 2011)</li>
<li>Information Extraction

<ul>
<li>email: creating a new calendar entry from email</li>
<li>sentiment analysis: product feedback</li>
</ul>
</li>
<li>Machine Translation

<ul>
<li>fully automatic</li>
<li>helping human translators</li>
</ul>
</li>
</ul>


<p>language Technology</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> mostly solved                  </th>
<th style="text-align:left;"> making good progress            </th>
<th style="text-align:left;"> still really hard       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> Spam detection                 </td>
<td style="text-align:left;"> Sentiment analysis              </td>
<td style="text-align:left;"> Question answering (QA) </td>
</tr>
<tr>
<td style="text-align:left;"> Part-of-speech (POS) tagging   </td>
<td style="text-align:left;"> Coreference resolution          </td>
<td style="text-align:left;"> Paraphrase              </td>
</tr>
<tr>
<td style="text-align:left;"> Named entity recognition (NER) </td>
<td style="text-align:left;"> Word sense disambiguation (WSD) </td>
<td style="text-align:left;"> Summarization           </td>
</tr>
<tr>
<td style="text-align:left;">                                </td>
<td style="text-align:left;"> Parsing                         </td>
<td style="text-align:left;"> Dialog                  </td>
</tr>
<tr>
<td style="text-align:left;">                                </td>
<td style="text-align:left;"> Machine translation (MT)        </td>
<td style="text-align:left;">                         </td>
</tr>
<tr>
<td style="text-align:left;">                                </td>
<td style="text-align:left;"> Information extraction (IE)     </td>
<td style="text-align:left;">                         </td>
</tr>
</tbody>
</table>


<h2>2. The Hard Problems</h2>

<h3>2.1. Ambiguity makes NLP hard: Crash blossoms</h3>

<p>Type 1:</p>

<p>Violinist Linked to JAL Crash Blossoms</p>

<ul>
<li>[Violinist] Linked to [JAL Crash Blossoms]</li>
<li>[Violinist Linked to JAL] Crash [Blossoms]</li>
</ul>


<p>Teacher Strikes Idle Kids</p>

<ul>
<li>[Teacher Strikes] Idle [Kids]</li>
<li>[Teacher] Strikes [Idle Kids]</li>
</ul>


<p>Type 2:</p>

<p>Red Tape Holds Up New Bridges</p>

<ul>
<li>Holds Up: delay</li>
<li>Holds Up: to support</li>
</ul>


<p>Others:</p>

<ul>
<li>Hospitals Are Sued by 7 Foot Doctors</li>
<li>Juvenile Court to Try Shooting Defendant</li>
<li>Local High School Dropouts Cut in Half</li>
</ul>


<h3>2.2. Ambiguity is pervasive</h3>

<p>Fed raises interest rates</p>

<p>phrase structure 1</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> Fed </th>
<th style="text-align:center;"> raises  </th>
<th style="text-align:center;"> interest </th>
<th style="text-align:center;"> rates  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> N   </td>
<td style="text-align:center;"> V       </td>
<td style="text-align:center;"> N        </td>
<td style="text-align:center;"> N      </td>
</tr>
<tr>
<td style="text-align:center;"> NP  </td>
<td style="text-align:center;">         </td>
<td style="text-align:center;"> NP                </td>
<td></td>
</tr>
<tr>
<td style="text-align:center;">     </td>
<td style="text-align:center;"> VP                          </td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:center;"> S                                 </td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>


<p>phrase structure 2</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> Fed </th>
<th style="text-align:center;"> raises  </th>
<th style="text-align:center;"> interest </th>
<th style="text-align:center;"> rates  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;"> N   </td>
<td style="text-align:center;"> N       </td>
<td style="text-align:center;">          </td>
<td style="text-align:center;"> N      </td>
</tr>
<tr>
<td style="text-align:center;">     </td>
<td style="text-align:center;">         </td>
<td style="text-align:center;"> V        </td>
<td style="text-align:center;"> VP     </td>
</tr>
<tr>
<td style="text-align:center;"> NP  </td>
<td style="text-align:center;">         </td>
<td style="text-align:center;"> VP       </td>
<td style="text-align:center;">        </td>
</tr>
<tr>
<td style="text-align:center;"> S                                 </td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>


<p>Fed raises interest rates 0.5%</p>

<ul>
<li>[Fed raises interest] rates [0.5%]</li>
</ul>


<h2>3. Solutions</h2>

<p>Making progress on this problem</p>

<p>The task is difficult! What tools do we need?</p>

<ul>
<li>knowledge about language</li>
<li>knowledge about the world</li>
<li>a way to combine knowledge sources</li>
</ul>


<p>How we generally do this:</p>

<ul>
<li>probabilistic models built from language data

<ul>
<li>P(maison -> house) high</li>
<li>P(Lavocat general -> the general avocado) low</li>
</ul>
</li>
<li>luckily, rough text features can often do half the job</li>
</ul>


<h2>4. Class</h2>

<p>Teaches key theory and methods for statistical NLP:</p>

<ul>
<li>viterbi</li>
<li>naive bayes, maxent classifiers</li>
<li>n-gram language modeling</li>
<li>statistical parsing</li>
<li>inverted index, tf-idf, vector models of meaning</li>
</ul>


<p>For practical, robust real-world applications</p>

<ul>
<li>information extraction</li>
<li>spelling correction</li>
<li>information retrieval</li>
<li>sentiment analysis</li>
</ul>


<h2>5. Skills</h2>

<ul>
<li>simple linear algebra (vectors, matrics)</li>
<li>basic probability theory</li>
<li>java or python programming</li>
</ul>


<h2>Reference</h2>

<ul>
<li><a href="https://www.youtube.com/watch?v=nfoudtpBV68&amp;index=1&amp;list=PL6397E4B26D00A269">Stanford NLP 1</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/17/mathjax/">MathJax</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-17T14:41:25+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>2:41 pm</span></time>
        
           | <a href="/tech/2014/06/17/mathjax/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/17/mathjax/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<h2>2. Syntax</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type                         </th>
<th style="text-align:left;"> Formula                       </th>
<th style="text-align:left;"> Example                        </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> display                      </td>
<td style="text-align:left;"> <code>$$...$$</code>                     </td>
<td style="text-align:left;">                                </td>
</tr>
<tr>
<td style="text-align:left;"> greek letters with lowercase </td>
<td style="text-align:left;"> <code>\alpha</code>                      </td>
<td style="text-align:left;"> $$\alpha$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\beta</code>                       </td>
<td style="text-align:left;"> $$\beta$$                      </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\omega</code>                      </td>
<td style="text-align:left;"> $$\omega$$                     </td>
</tr>
<tr>
<td style="text-align:left;"> greek letters with uppercase </td>
<td style="text-align:left;"> <code>\Gamma</code>                      </td>
<td style="text-align:left;"> $$\Gamma$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\Delta</code>                      </td>
<td style="text-align:left;"> $$\Delta$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\Omega</code>                      </td>
<td style="text-align:left;"> $$\Omega$$                     </td>
</tr>
<tr>
<td style="text-align:left;"> superscripts                 </td>
<td style="text-align:left;"> <code>^</code>                           </td>
<td style="text-align:left;">                                </td>
</tr>
<tr>
<td style="text-align:left;"> subscripts                   </td>
<td style="text-align:left;"> <code>_</code>                           </td>
<td style="text-align:left;"> $$x_i<sup>2</sup>$$                      </td>
</tr>
<tr>
<td style="text-align:left;"> grouping                     </td>
<td style="text-align:left;"> <code>{...}</code>                       </td>
<td style="text-align:left;"> $$x^{y<sup>z</sup>}$$                    </td>
</tr>
<tr>
<td style="text-align:left;"> parentheses                  </td>
<td style="text-align:left;"> <code>\left( and \right)</code>          </td>
<td style="text-align:left;"> $$\left(\right)$$              </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\{ and \}</code>                   </td>
<td style="text-align:left;"> $${}$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\langle</code> and <code>\rangle</code>       </td>
<td style="text-align:left;"> $$\langle\rangle$$             </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\lceil</code> and <code>\rceil</code>         </td>
<td style="text-align:left;"> $$\langle\rangle$$             </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>$$\lfloor$$</code>and<code>$$\rfloor$$</code> </td>
<td style="text-align:left;"> $$\lfloor\rfloor$$             </td>
</tr>
<tr>
<td style="text-align:left;"> invisible parentheses        </td>
<td style="text-align:left;"> <code>.</code>                           </td>
<td style="text-align:left;"> $$\left.\frac12\right\rbrace$$ </td>
</tr>
<tr>
<td style="text-align:left;"> sums                         </td>
<td style="text-align:left;"> <code>\sum</code>                        </td>
<td style="text-align:left;"> $$\sum_1<sup>n</sup>$$                   </td>
</tr>
<tr>
<td style="text-align:left;"> integrals                    </td>
<td style="text-align:left;"> <code>\int</code>                        </td>
<td style="text-align:left;"> $$\int$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\prod</code>                       </td>
<td style="text-align:left;"> $$\prod$$                      </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\bigcup</code>                     </td>
<td style="text-align:left;"> $$\bigcup$$                    </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\bigcap</code>                     </td>
<td style="text-align:left;"> $$\bigcap$$                    </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\iint</code>                       </td>
<td style="text-align:left;"> $$\iint$$                      </td>
</tr>
<tr>
<td style="text-align:left;"> fractions                    </td>
<td style="text-align:left;"> <code>\frac ab</code>                    </td>
<td style="text-align:left;"> $$\frac ab$$                   </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\frac{a+a}{b+1}</code>             </td>
<td style="text-align:left;"> $$\frac{a+1}{b+1}$$            </td>
</tr>
<tr>
<td style="text-align:left;"> radical signs                </td>
<td style="text-align:left;"> <code>\sqrt{x^3}</code>                  </td>
<td style="text-align:left;"> $$\sqrt{x<sup>3</sup>}$$                 </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\sqrt[3]{\frac xy}</code>          </td>
<td style="text-align:left;"> $$\sqrt[3]{\frac xy}$$         </td>
</tr>
<tr>
<td style="text-align:left;"> functions                    </td>
<td style="text-align:left;"> <code>\lim</code>                        </td>
<td style="text-align:left;"> $$\lim$$ - <code>\lim</code>              </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\sin</code>                        </td>
<td style="text-align:left;"> $$\sin$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\max</code>                        </td>
<td style="text-align:left;"> $$\max$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\ln</code>                         </td>
<td style="text-align:left;"> $$\ln$$                        </td>
</tr>
<tr>
<td style="text-align:left;"> spaces                       </td>
<td style="text-align:left;"> <code>a b</code>                         </td>
<td style="text-align:left;"> $$a b$$                        </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\,</code>                          </td>
<td style="text-align:left;"> $$a\,b$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\;</code>                          </td>
<td style="text-align:left;"> $$a\;b$$                       </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\quad</code>                       </td>
<td style="text-align:left;"> $$a\quad b$$                   </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\qquad</code>                      </td>
<td style="text-align:left;"> $$a\qquad b$$                  </td>
</tr>
<tr>
<td style="text-align:left;"> ccents and diacritical marks </td>
<td style="text-align:left;"> <code>\hat</code>                        </td>
<td style="text-align:left;"> $$\hat x$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\widehat</code>                    </td>
<td style="text-align:left;"> $$\widehat{ab}$$               </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\bar</code>                        </td>
<td style="text-align:left;"> $$\bar x$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\overline</code>                   </td>
<td style="text-align:left;"> $$\overline{xyz}$$             </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\vec</code>                        </td>
<td style="text-align:left;"> $$\vec x$$                     </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\overrightarrow</code>             </td>
<td style="text-align:left;"> $$\overrightarrow{xy}$$        </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\dot and \ddot</code>              </td>
<td style="text-align:left;"> $$\dot x \ddot x$$             </td>
</tr>
<tr>
<td style="text-align:left;"> special characters           </td>
<td style="text-align:left;"> <code>\$</code>                          </td>
<td style="text-align:left;"> $$\$$$                         </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\{</code>                          </td>
<td style="text-align:left;"> $${$$                         </td>
</tr>
<tr>
<td style="text-align:left;">                              </td>
<td style="text-align:left;"> <code>\_</code>                          </td>
<td style="text-align:left;"> $$_$$                         </td>
</tr>
</tbody>
</table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/17/facial-detection/">Facial Detection</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-17T10:04:55+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:04 am</span></time>
        
           | <a href="/tech/2014/06/17/facial-detection/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/17/facial-detection/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Definitions</h2>

<ul>
<li>Facial Detection: where is the face?</li>
<li>Facial Recognition: who is this?</li>
</ul>


<h2>2. History</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Year </th>
<th style="text-align:left;"> Authors            </th>
<th style="text-align:left;"> Method                       </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> 1973 </td>
<td style="text-align:left;"> Kanade             </td>
<td style="text-align:left;"> First automated system       </td>
</tr>
<tr>
<td style="text-align:left;"> 1987 </td>
<td style="text-align:left;"> Sirovich &amp; Kirby   </td>
<td style="text-align:left;"> Principal Component Analysis </td>
</tr>
<tr>
<td style="text-align:left;"> 1991 </td>
<td style="text-align:left;"> Turk &amp; Pentland    </td>
<td style="text-align:left;"> Eigenface                    </td>
</tr>
<tr>
<td style="text-align:left;"> 1996 </td>
<td style="text-align:left;"> Etemad &amp; Chelapa   </td>
<td style="text-align:left;"> Fisherface                   </td>
</tr>
<tr>
<td style="text-align:left;"> 2001 </td>
<td style="text-align:left;"> Viola &amp; Jones      </td>
<td style="text-align:left;"> AdaBoost + Haar Cascade      </td>
</tr>
<tr>
<td style="text-align:left;"> 2007 </td>
<td style="text-align:left;"> Naruniec &amp; Skarbek </td>
<td style="text-align:left;"> Gabor Jets                   </td>
</tr>
</tbody>
</table>


<h2>3. Concepts</h2>

<p>How can a computer find a face?</p>

<ul>
<li>skin color (color image)</li>
<li>motion (video)</li>
<li>head shape</li>
<li>all of these combined</li>
</ul>


<p>Haar Cascade:</p>

<ul>
<li>features: edge, line, center-surround</li>
<li>How is the haar-like feature work?

<ul>
<li>pick a scale, slide it</li>
<li>compute the average pixel values under the white area and the black area</li>
<li>if the difference between the areas is above some threshold, the feature matches.</li>
</ul>
</li>
<li>How could this detect a face?

<ul>
<li>the eyes are usually darker than skin</li>
</ul>
</li>
</ul>


<h2>4. Classification</h2>

<ul>
<li>weak classifier</li>
<li>strong classifier: adaboost - selecting the best weak classifier and then combining the best classifiers</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;"> Data Point </th>
<th style="text-align:left;"> Classifier 1 </th>
<th style="text-align:left;"> Classifier 2 </th>
<th style="text-align:left;"> Classifier 3 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> x1         </td>
<td style="text-align:left;"> pass         </td>
<td style="text-align:left;"> fail         </td>
<td style="text-align:left;"> pass         </td>
</tr>
<tr>
<td style="text-align:left;"> x2         </td>
<td style="text-align:left;"> fail         </td>
<td style="text-align:left;"> pass         </td>
<td style="text-align:left;"> pass         </td>
</tr>
<tr>
<td style="text-align:left;"> x3         </td>
<td style="text-align:left;"> pass         </td>
<td style="text-align:left;"> pass         </td>
<td style="text-align:left;"> pass         </td>
</tr>
<tr>
<td style="text-align:left;"> x4         </td>
<td style="text-align:left;"> fail         </td>
<td style="text-align:left;"> fail         </td>
<td style="text-align:left;"> pass         </td>
</tr>
</tbody>
</table>


<h2>References</h2>

<ul>
<li>Facial Detection: <a href="https://www.youtube.com/watch?v=sWTvK72-SPU">Part 1</a></li>
<li><a href="http://docs.opencv.org/trunk/doc/py_tutorials/py_setup/py_setup_in_windows/py_setup_in_windows.html">OpenCV</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/13/summary-on-machine-learning-algorithms/">Summary on Machine Learning Algorithms</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-13T13:28:30+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:28 pm</span></time>
        
           | <a href="/tech/2014/06/13/summary-on-machine-learning-algorithms/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/13/summary-on-machine-learning-algorithms/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>steps:</p>

<ol>
<li>(feature selection) statisics</li>
<li>(linear data) regression, (weights) gradient descent</li>
<li>(non-linear data) neural netowrk, svm</li>
<li>(overfitting) regularization, cross validation</li>
<li>(knowledge discovery) unsupervised learning</li>
</ol>


<h2>1. Regression</h2>

<ul>
<li>Ordinary Least Squares</li>
<li>Logistic Regression</li>
<li>Stepwise Regression</li>
<li>Multivariate Adaptive Regression Splines (MARS)</li>
<li>Locally Estimated Scatterplot Smoothing (LOESS)</li>
</ul>


<h2>2. Instance-based Methods</h2>

<ul>
<li>k-Nearest Neighbour (kNN)</li>
<li>Learning Vector Quantization (LVQ)</li>
<li>Self-Organizing Map (SOM)</li>
</ul>


<h2>3. Regularization Methods</h2>

<ul>
<li>Ridge Regression</li>
<li>Least Absolute Shrinkage and Selection Operator (LASSO)</li>
<li>Elastic Net</li>
</ul>


<h2>4. Decision Tree Learning</h2>

<ul>
<li>Classification and Regression Tree (CART)</li>
<li>Iterative Dichotomiser 3 (ID3)</li>
<li>C4.5</li>
<li>Chi-squared Automatic Interaction Detection (CHAID)</li>
<li>Decision Stump</li>
<li>Random Forest</li>
<li>Multivariate Adaptive Regression Splines (MARS)</li>
<li>Gradient Boosting Machines (GBM)</li>
</ul>


<h2>5. Bayesian</h2>

<ul>
<li>Naive Bayes</li>
<li>Averaged One-Dependence Estimators (AODE)</li>
<li>Bayesian Belief Network (BBN)</li>
</ul>


<h2>6. Kernel Methods</h2>

<ul>
<li>Support Vector Machines (SVM)</li>
<li>Radial Basis Function (RBF)</li>
<li>Linear Discriminate Analysis (LDA)</li>
</ul>


<h2>7. Clustering Methods</h2>

<ul>
<li>K-Means</li>
<li>Expectation Maximisation (EM)</li>
</ul>


<h2>8. Association Rule Learning</h2>

<ul>
<li>Apriori algorithm</li>
<li>Eclat algorithm</li>
</ul>


<h2>9. Artificial Neural Networks</h2>

<ul>
<li>Perceptron</li>
<li>Back-Propagation</li>
<li>Hopfield Network</li>
<li>Self-Organizing Map (SOM)</li>
<li>Learning Vector Quantization (LVQ)</li>
</ul>


<h2>10. Deep Learning</h2>

<ul>
<li>Restricted Boltzmann Machine (RBM)</li>
<li>Deep Belief Networks (DBN)</li>
<li>Convolutional Network</li>
<li>Stacked Auto-encoders</li>
</ul>


<h2>11. Dimensionality Reduction</h2>

<ul>
<li>Principal Component Analysis (PCA)</li>
<li>Partial Least Squares Regression (PLS)</li>
<li>Sammon Mapping</li>
<li>Multidimensional Scaling (MDS)</li>
<li>Projection Pursuit</li>
</ul>


<h2>12. Ensemble Methods</h2>

<ul>
<li>Boosting</li>
<li>Bootstrapped Aggregation (Bagging)</li>
<li>AdaBoost</li>
<li>Stacked Generalization (blending)</li>
<li>Gradient Boosting Machines (GBM)</li>
<li>Random Forest</li>
</ul>


<h2>Reference</h2>

<ul>
<li><a href="http://machinelearningmastery.com/a-tour-of-machine-learning-algorithms/">A Tour of Machine Learning Algorithms</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/06/03/bike-sharing-demand/">Bike Sharing Demand</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-03T14:49:22+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>2:49 pm</span></time>
        
           | <a href="/tech/2014/06/03/bike-sharing-demand/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/06/03/bike-sharing-demand/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>The project is to predict the count of bikes sharing per day per hour.</p>

<ul>
<li><a href="http://www.kaggle.com/c/bike-sharing-demand">description</a>: bike sharing demand at Kaggle</li>
<li><a href="http://www.kaggle.com/c/bike-sharing-demand/data">data</a>: data source of this project at Kaggle</li>
<li><a href="https://github.com/KellyChan/kaggle-bike-sharing-demand">codes</a>: the source codes of this project are available at Github</li>
</ul>


<h2>1. Features</h2>

<p>prediction: count = casual + registered</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>count - number of total rentals
</span><span class='line'>casual - number of non-registered user rentals initiated
</span><span class='line'>registered - number of registered user rentals initiated</span></code></pre></td></tr></table></div></figure>


<p>features</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>datetime - hourly date + timestamp  
</span><span class='line'>season -  1 = spring, 2 = summer, 3 = fall, 4 = winter 
</span><span class='line'>holiday - whether the day is considered a holiday
</span><span class='line'>workingday - whether the day is neither a weekend nor holiday
</span><span class='line'>weather - 1: Clear, Few clouds, Partly cloudy, Partly cloudy 
</span><span class='line'>          2: Mist + Cloudy, Mist + Broken clouds, Mist + Few clouds, Mist 
</span><span class='line'>          3: Light Snow, Light Rain + Thunderstorm + Scattered clouds, Light Rain + Scattered clouds 
</span><span class='line'>          4: Heavy Rain + Ice Pallets + Thunderstorm + Mist, Snow + Fog 
</span><span class='line'>temp - temperature in Celsius
</span><span class='line'>atemp - "feels like" temperature in Celsius
</span><span class='line'>humidity - relative humidity
</span><span class='line'>windspeed - wind speed</span></code></pre></td></tr></table></div></figure>


<h2>2. Evaluation</h2>

<p>Submissions are evaluated one the Root Mean Squared Logarithmic Error (RMSLE). The RMSLE is calculated as</p>

<p>$$\sqrt{\frac 1n \sum_1<sup>n</sup> (log(p_i + 1) - log(a_i + 1))<sup>2</sup> }$$</p>

<p>Where:</p>

<ul>
<li>$$n$$ is the number of hours in the test set</li>
<li>$$p_i$$ is your predicted count</li>
<li>$$a_i$$ is the actual count</li>
<li>$$log(x)$$ is the natural logarithm</li>
</ul>


<h2>3. Algorithms</h2>

<p>algorithms:</p>

<ul>
<li>decision tree regressor</li>
<li>extra tree regressor</li>
<li>random forest regressor</li>
</ul>


<h2>4. Practice</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/python/kaggle/201406-bike/data/&quot;</span>
</span><span class='line'><span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/python/kaggle/201406-bike/src/outputs/results/&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeRegressor</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">ExtraTreesRegressor</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadData</span><span class="p">(</span><span class="n">datafile</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">splitDatetime</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>    <span class="n">sub</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">&quot;date time&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="s">&quot;year month day&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="n">time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">&quot;hour minute second&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="p">[</span><span class="s">&#39;year&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="p">[</span><span class="s">&#39;month&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="p">[</span><span class="s">&#39;day&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;hour&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">[</span><span class="s">&#39;hour&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createDecisionTree</span><span class="p">():</span>
</span><span class='line'>    <span class="n">est</span> <span class="o">=</span> <span class="n">DecisionTreeRegressor</span><span class="p">()</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">est</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createRandomForest</span><span class="p">():</span>
</span><span class='line'>    <span class="n">est</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">est</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createExtraTree</span><span class="p">():</span>
</span><span class='line'>    <span class="n">est</span> <span class="o">=</span> <span class="n">ExtraTreesRegressor</span><span class="p">()</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">est</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">predict</span><span class="p">(</span><span class="n">est</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">est</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train</span><span class="p">[</span><span class="n">features</span><span class="p">],</span> <span class="n">train</span><span class="p">[</span><span class="n">target</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span> <span class="o">+</span> <span class="s">&quot;submission-randomforest.csv&quot;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span class='line'>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;datetime,count</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">est</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="n">features</span><span class="p">]))):</span>
</span><span class='line'>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;train.csv&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">test</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">splitDatetime</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
</span><span class='line'>    <span class="n">test</span> <span class="o">=</span> <span class="n">splitDatetime</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">target</span> <span class="o">=</span> <span class="s">&#39;count&#39;</span>
</span><span class='line'>    <span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">train</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="p">,</span> <span class="s">&#39;casual&#39;</span><span class="p">,</span> <span class="s">&#39;registered&#39;</span><span class="p">,</span> <span class="s">&#39;count&#39;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">est</span> <span class="o">=</span> <span class="n">createRandomForest</span><span class="p">()</span>
</span><span class='line'>    <span class="n">predict</span><span class="p">(</span><span class="n">est</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/05/28/forest-cover-type-prediction/">Forest Cover Type Prediction</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-28T15:00:00+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>3:00 pm</span></time>
        
           | <a href="/tech/2014/05/28/forest-cover-type-prediction/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/05/28/forest-cover-type-prediction/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>This project is to predict the forest cover type with the cartography data provided by US Geological Survey and USFS.</p>

<ul>
<li><a href="http://www.kaggle.com/c/forest-cover-type-prediction">description</a>: forest cover type prediction at Kaggle</li>
<li><a href="http://www.kaggle.com/c/forest-cover-type-prediction/data">data</a>: data source of this project at Kaggle</li>
<li><a href="https://github.com/KellyChan/kaggle-forest-cover-type-prediction">codes</a>: the source codes of this project are available at Github</li>
</ul>


<h2>1. Working Process</h2>

<ul>
<li>step 1. combining binary variables (Wilderness_Area and Soil_Type) as one</li>
<li>step 2. applying machine learning algorithms (random forest)</li>
<li>step 3. evaluating the accuracy of prediction</li>
</ul>


<h2>2. Preprocessing</h2>

<p>combining binary variables (Wilderness_Area, Soil_Type)</p>

<h2>3. Classification</h2>

<p>datasets</p>

<ul>
<li>raw data</li>
<li>punched data</li>
</ul>


<p>algorithms</p>

<ul>
<li>decision tree</li>
<li>random forest</li>
<li>extra tree: raw data worked much better than punched data.</li>
<li>adaboost</li>
</ul>


<h2>4. Evaluation</h2>

<p>% of corrections</p>

<h2>5. Practice</h2>

<h3>step1. data punching</h3>

<p>combining binary variables - Wilderness_Area, Soil_Type</p>

<p>NOTE: Pandas is good at handling with data by batch, it is much faster than processing each record one by one.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;path/kaggle/201405-Forest/data/&quot;</span>
</span><span class='line'><span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;path/kaggle/201405-Forest/src/outputs/data/&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadData</span><span class="p">(</span><span class="n">datafile</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createWildernessArea</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span class='line'>        <span class="n">coded</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span><span class='line'>        <span class="n">col</span> <span class="o">=</span> <span class="s">&#39;Wilderness_Area&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">coded</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;Wilderness_Area&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;Wilderness_Area1&#39;</span><span class="p">]</span> <span class="o">+</span> \
</span><span class='line'>                              <span class="n">data</span><span class="p">[</span><span class="s">&#39;Wilderness_Area2&#39;</span><span class="p">]</span> <span class="o">+</span> \
</span><span class='line'>                              <span class="n">data</span><span class="p">[</span><span class="s">&#39;Wilderness_Area3&#39;</span><span class="p">]</span> <span class="o">+</span> \
</span><span class='line'>                              <span class="n">data</span><span class="p">[</span><span class="s">&#39;Wilderness_Area4&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span class='line'>        <span class="n">col</span> <span class="o">=</span> <span class="s">&#39;Wilderness_Area&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createSoilType</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span>
</span><span class='line'>        <span class="n">coded</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span><span class='line'>        <span class="n">col</span> <span class="o">=</span> <span class="s">&#39;Soil_Type&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">coded</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;Soil_Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span>
</span><span class='line'>        <span class="n">col</span> <span class="o">=</span> <span class="s">&#39;Soil_Type&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span><span class="p">[</span><span class="s">&#39;Soil_Type&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span>
</span><span class='line'>        <span class="n">col</span> <span class="o">=</span> <span class="s">&#39;Soil_Type&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;train.csv&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">test</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">createWildernessArea</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">createSoilType</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
</span><span class='line'>    <span class="n">train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outPath</span> <span class="o">+</span> <span class="s">&quot;train.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">test</span> <span class="o">=</span> <span class="n">createWildernessArea</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</span><span class='line'>    <span class="n">test</span> <span class="o">=</span> <span class="n">createSoilType</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</span><span class='line'>    <span class="n">test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outPath</span> <span class="o">+</span> <span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>step2. classification with trees</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Function Tree</span>
</span><span class='line'>
</span><span class='line'><span class="sd">- chooseDataset</span>
</span><span class='line'><span class="sd">     |------ loadData</span>
</span><span class='line'>
</span><span class='line'><span class="sd">- chooseAlgorithms</span>
</span><span class='line'><span class="sd">     |------ createDecisionTree</span>
</span><span class='line'><span class="sd">     |------ createRandomForest</span>
</span><span class='line'><span class="sd">     |------ createExtraTree</span>
</span><span class='line'><span class="sd">     |------ createAdaBoost</span>
</span><span class='line'>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">rawPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/python/kaggle/201405-Forest/data/&quot;</span>
</span><span class='line'><span class="n">dataPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/python/kaggle/201405-Forest/src/outputs/data/&quot;</span>
</span><span class='line'><span class="n">outPath</span> <span class="o">=</span> <span class="s">&quot;G:/vimFiles/python/kaggle/201405-Forest/src/outputs/results/&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">ExtraTreesClassifier</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">AdaBoostClassifier</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadData</span><span class="p">(</span><span class="n">datafile</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createDecisionTree</span><span class="p">():</span>
</span><span class='line'>    <span class="n">clf</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">min_samples_split</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">clf</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createRandomForest</span><span class="p">():</span>
</span><span class='line'>    <span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">min_samples_split</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">clf</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createExtraTree</span><span class="p">():</span>
</span><span class='line'>    <span class="n">clf</span> <span class="o">=</span> <span class="n">ExtraTreesClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">min_samples_split</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">clf</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createAdaBoost</span><span class="p">():</span>
</span><span class='line'>    <span class="n">dt</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">min_samples_split</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>    <span class="n">clf</span> <span class="o">=</span> <span class="n">AdaBoostClassifier</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">n_estimators</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">clf</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">filePath</span><span class="p">):</span>
</span><span class='line'>    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train</span><span class="p">[</span><span class="n">cols</span><span class="p">],</span> <span class="n">train</span><span class="p">[</span><span class="n">target</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
</span><span class='line'>        <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Id,Cover_Type</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="n">cols</span><span class="p">]))):</span>
</span><span class='line'>            <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="s">&#39;Id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">value</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">chooseDataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">):</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">dataset</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">train</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">rawPath</span> <span class="o">+</span> <span class="s">&quot;train.csv&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">test</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">rawPath</span> <span class="o">+</span> <span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">elif</span> <span class="n">dataset</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">train</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;train.csv&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">test</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">chooseAlgorithms</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">features</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">algo</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createDecisionTree</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-decisiontree.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createRandomForest</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-randomforest.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createExtraTree</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-extratree.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createAdaBoost</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-adaboost.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">elif</span> <span class="n">algo</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createDecisionTree</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-decisiontree.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">elif</span> <span class="n">algo</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createRandomForest</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-randomforest.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">elif</span> <span class="n">algo</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createExtraTree</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-extratree.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">elif</span> <span class="n">algo</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
</span><span class='line'>        <span class="n">clf</span> <span class="o">=</span> <span class="n">createAdaBoost</span><span class="p">()</span>
</span><span class='line'>        <span class="n">classify</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-adaboost.csv&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; selections: dataset and algorithms</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    dataset:</span>
</span><span class='line'><span class="sd">    - 1: raw data - Wilderness_Area, Soil_Type are binary codes</span>
</span><span class='line'><span class="sd">    - 2: punched data - Wilderness_Area, Soil_Type are combined</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    algo: algorithms</span>
</span><span class='line'><span class="sd">    - 0: all</span>
</span><span class='line'><span class="sd">    - 1: decision tree</span>
</span><span class='line'><span class="sd">    - 2: random forest</span>
</span><span class='line'><span class="sd">    - 3: extra tree</span>
</span><span class='line'><span class="sd">    - 4: adaboost</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">dataset</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">algo</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="o">=</span> <span class="n">chooseDataset</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">target</span> <span class="o">=</span> <span class="s">&#39;Cover_Type&#39;</span>
</span><span class='line'>    <span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">train</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;Id&#39;</span><span class="p">,</span> <span class="s">&#39;Cover_Type&#39;</span><span class="p">,</span> <span class="s">&#39;Unnamed&#39;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">chooseAlgorithms</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">features</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>6. Data formats</h2>

<p>predict(submission): <code>Id</code>, <code>Cover_Type</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">Cover_Type</span> <span class="p">(</span><span class="mi">7</span> <span class="n">types</span><span class="p">,</span> <span class="n">integers</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">7</span><span class="p">)</span> <span class="o">-</span> <span class="n">Forest</span> <span class="n">Cover</span> <span class="n">Type</span> <span class="n">designation</span>
</span><span class='line'>
</span><span class='line'><span class="mi">1</span> <span class="o">-</span> <span class="n">Spruce</span><span class="o">/</span><span class="n">Fir</span>
</span><span class='line'><span class="mi">2</span> <span class="o">-</span> <span class="n">Lodgepole</span> <span class="n">Pine</span>
</span><span class='line'><span class="mi">3</span> <span class="o">-</span> <span class="n">Ponderosa</span> <span class="n">Pine</span>
</span><span class='line'><span class="mi">4</span> <span class="o">-</span> <span class="n">Cottonwood</span><span class="o">/</span><span class="n">Willow</span>
</span><span class='line'><span class="mi">5</span> <span class="o">-</span> <span class="n">Aspen</span>
</span><span class='line'><span class="mi">6</span> <span class="o">-</span> <span class="n">Douglas</span><span class="o">-</span><span class="n">fir</span>
</span><span class='line'><span class="mi">7</span> <span class="o">-</span> <span class="n">Krummholz</span>
</span></code></pre></td></tr></table></div></figure>


<p>train/test: <code>Id</code></p>

<p>features</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">Elevation</span> <span class="o">-</span> <span class="n">Elevation</span> <span class="ow">in</span> <span class="n">meters</span>
</span><span class='line'><span class="n">Aspect</span> <span class="o">-</span> <span class="n">Aspect</span> <span class="ow">in</span> <span class="n">degrees</span> <span class="n">azimuth</span>
</span><span class='line'><span class="n">Slope</span> <span class="o">-</span> <span class="n">Slope</span> <span class="ow">in</span> <span class="n">degrees</span>
</span><span class='line'>
</span><span class='line'><span class="n">Horizontal_Distance_To_Hydrology</span> <span class="o">-</span> <span class="n">Horz</span> <span class="n">Dist</span> <span class="n">to</span> <span class="n">nearest</span> <span class="n">surface</span> <span class="n">water</span> <span class="n">features</span>
</span><span class='line'><span class="n">Vertical_Distance_To_Hydrology</span> <span class="o">-</span> <span class="n">Vert</span> <span class="n">Dist</span> <span class="n">to</span> <span class="n">nearest</span> <span class="n">surface</span> <span class="n">water</span> <span class="n">features</span>
</span><span class='line'><span class="n">Horizontal_Distance_To_Roadways</span> <span class="o">-</span> <span class="n">Horz</span> <span class="n">Dist</span> <span class="n">to</span> <span class="n">nearest</span> <span class="n">roadway</span>
</span><span class='line'><span class="n">Horizontal_Distance_To_Fire_Points</span> <span class="o">-</span> <span class="n">Horz</span> <span class="n">Dist</span> <span class="n">to</span> <span class="n">nearest</span> <span class="n">wildfire</span> <span class="n">ignition</span> <span class="n">points</span>
</span><span class='line'>
</span><span class='line'><span class="n">Hillshade_9am</span> <span class="p">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">255</span> <span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="n">Hillshade</span> <span class="n">index</span> <span class="n">at</span> <span class="mi">9</span><span class="n">am</span><span class="p">,</span> <span class="n">summer</span> <span class="n">solstice</span>
</span><span class='line'><span class="n">Hillshade_Noon</span> <span class="p">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">255</span> <span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="n">Hillshade</span> <span class="n">index</span> <span class="n">at</span> <span class="n">noon</span><span class="p">,</span> <span class="n">summer</span> <span class="n">solstice</span>
</span><span class='line'><span class="n">Hillshade_3pm</span> <span class="p">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">255</span> <span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="n">Hillshade</span> <span class="n">index</span> <span class="n">at</span> <span class="mi">3</span><span class="n">pm</span><span class="p">,</span> <span class="n">summer</span> <span class="n">solstice</span>
</span><span class='line'>
</span><span class='line'><span class="n">Wilderness_Area</span> <span class="p">(</span><span class="mi">4</span> <span class="n">areas</span><span class="p">,</span> <span class="mi">0</span> <span class="o">=</span> <span class="n">absence</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">presence</span><span class="p">)</span> <span class="o">-</span> <span class="n">Wilderness</span> <span class="n">area</span> <span class="n">designation</span>
</span><span class='line'><span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">Rawah</span> <span class="n">Wilderness</span> <span class="n">Area</span>
</span><span class='line'><span class="o">-</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">Neota</span> <span class="n">Wilderness</span> <span class="n">Area</span>
</span><span class='line'><span class="o">-</span> <span class="mi">3</span> <span class="o">-</span> <span class="n">Comanche</span> <span class="n">Peak</span> <span class="n">Wilderness</span> <span class="n">Area</span>
</span><span class='line'><span class="o">-</span> <span class="mi">4</span> <span class="o">-</span> <span class="n">Cache</span> <span class="n">la</span> <span class="n">Poudre</span> <span class="n">Wilderness</span> <span class="n">Area</span>
</span><span class='line'>
</span><span class='line'><span class="n">Soil_Type</span> <span class="p">(</span><span class="mi">40</span> <span class="n">types</span><span class="p">,</span> <span class="mi">0</span> <span class="o">=</span> <span class="n">absence</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">presence</span><span class="p">)</span> <span class="o">-</span> <span class="n">Soil</span> <span class="n">Type</span> <span class="n">designation</span>
</span><span class='line'><span class="o">-</span> <span class="mi">1</span> <span class="n">Cathedral</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">2</span> <span class="n">Vanet</span> <span class="o">-</span> <span class="n">Ratake</span> <span class="n">families</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">very</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">3</span> <span class="n">Haploborolis</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">4</span> <span class="n">Ratake</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">5</span> <span class="n">Vanet</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">6</span> <span class="n">Vanet</span> <span class="o">-</span> <span class="n">Wetmore</span> <span class="n">families</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">7</span> <span class="n">Gothic</span> <span class="n">family</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">8</span> <span class="n">Supervisor</span> <span class="o">-</span> <span class="n">Limber</span> <span class="n">families</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">9</span> <span class="n">Troutville</span> <span class="n">family</span><span class="p">,</span> <span class="n">very</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">10</span> <span class="n">Bullwark</span> <span class="o">-</span> <span class="n">Catamount</span> <span class="n">families</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">11</span> <span class="n">Bullwark</span> <span class="o">-</span> <span class="n">Catamount</span> <span class="n">families</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">12</span> <span class="n">Legault</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">13</span> <span class="n">Catamount</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="o">-</span> <span class="n">Bullwark</span> <span class="n">family</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">rubbly</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">14</span> <span class="n">Pachic</span> <span class="n">Argiborolis</span> <span class="o">-</span> <span class="n">Aquolis</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">15</span> <span class="n">unspecified</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">USFS</span> <span class="n">Soil</span> <span class="ow">and</span> <span class="n">ELU</span> <span class="n">Survey</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">16</span> <span class="n">Cryaquolis</span> <span class="o">-</span> <span class="n">Cryoborolis</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">17</span> <span class="n">Gateview</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Cryaquolis</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">18</span> <span class="n">Rogert</span> <span class="n">family</span><span class="p">,</span> <span class="n">very</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">19</span> <span class="n">Typic</span> <span class="n">Cryaquolis</span> <span class="o">-</span> <span class="n">Borohemists</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">20</span> <span class="n">Typic</span> <span class="n">Cryaquepts</span> <span class="o">-</span> <span class="n">Typic</span> <span class="n">Cryaquolls</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">21</span> <span class="n">Typic</span> <span class="n">Cryaquolls</span> <span class="o">-</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">till</span> <span class="n">substratum</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">22</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">till</span> <span class="n">substratum</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">bouldery</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">23</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">till</span> <span class="n">substratum</span> <span class="o">-</span> <span class="n">Typic</span> <span class="n">Cryaquolls</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">24</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">25</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">warm</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">26</span> <span class="n">Granile</span> <span class="o">-</span> <span class="n">Catamount</span> <span class="n">families</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">very</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">27</span> <span class="n">Leighcan</span> <span class="n">family</span><span class="p">,</span> <span class="n">warm</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">28</span> <span class="n">Leighcan</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">29</span> <span class="n">Como</span> <span class="o">-</span> <span class="n">Legault</span> <span class="n">families</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">30</span> <span class="n">Como</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="o">-</span> <span class="n">Legault</span> <span class="n">family</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">31</span> <span class="n">Leighcan</span> <span class="o">-</span> <span class="n">Catamount</span> <span class="n">families</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">32</span> <span class="n">Catamount</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="o">-</span> <span class="n">Leighcan</span> <span class="n">family</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">33</span> <span class="n">Leighcan</span> <span class="o">-</span> <span class="n">Catamount</span> <span class="n">families</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">34</span> <span class="n">Cryorthents</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">35</span> <span class="n">Cryumbrepts</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="o">-</span> <span class="n">Cryaquepts</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">36</span> <span class="n">Bross</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="o">-</span> <span class="n">Cryumbrepts</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">37</span> <span class="n">Rock</span> <span class="n">outcrop</span> <span class="o">-</span> <span class="n">Cryumbrepts</span> <span class="o">-</span> <span class="n">Cryorthents</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">38</span> <span class="n">Leighcan</span> <span class="o">-</span> <span class="n">Moran</span> <span class="n">families</span> <span class="o">-</span> <span class="n">Cryaquolls</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">39</span> <span class="n">Moran</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Cryorthents</span> <span class="o">-</span> <span class="n">Leighcan</span> <span class="n">family</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span><span class='line'><span class="o">-</span> <span class="mi">40</span> <span class="n">Moran</span> <span class="n">family</span> <span class="o">-</span> <span class="n">Cryorthents</span> <span class="o">-</span> <span class="n">Rock</span> <span class="n">land</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">extremely</span> <span class="n">stony</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Aspect_(geography">Aspect Geography</a>)</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/05/24/text-classification-with-naive-bayes/">Text Classification With Naive Bayes</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-24T01:05:22+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>1:05 am</span></time>
        
           | <a href="/tech/2014/05/24/text-classification-with-naive-bayes/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/05/24/text-classification-with-naive-bayes/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Working Process</h2>

<p>general process</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>raw text --&gt; keywords --&gt; features --&gt; train --&gt; clasifier
</span><span class='line'>raw text              --&gt; features --&gt; test  --&gt; classify</span></code></pre></td></tr></table></div></figure>


<p>example: sentimental analysis for tweets</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>positive/negative tweets --&gt; keywords --&gt; features --&gt; train --&gt; clasifier
</span><span class='line'>unlabeled tweets                      --&gt; features --&gt; test  --&gt; classify</span></code></pre></td></tr></table></div></figure>


<h2>2. Feature Extraction</h2>

<p>keyword extraction: wordFreqDict</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>wordFreqDict = {keyword1: 90,
</span><span class='line'>                keyword2: 30,
</span><span class='line'>                keyword3: 3,
</span><span class='line'>                ...}</span></code></pre></td></tr></table></div></figure>


<p>feature extraction: True/False table</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> tweet                </th>
<th style="text-align:left;"> keyword1 </th>
<th style="text-align:left;"> keyword2 </th>
<th style="text-align:left;"> keyword3 </th>
<th style="text-align:left;"> &hellip; </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> &ldquo;I like this dog.&rdquo;   </td>
<td style="text-align:left;"> True     </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> True     </td>
<td style="text-align:left;"> &hellip; </td>
</tr>
<tr>
<td style="text-align:left;"> &ldquo;Beautiful morning.&rdquo; </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> &hellip; </td>
</tr>
<tr>
<td style="text-align:left;"> &hellip;                  </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip; </td>
</tr>
</tbody>
</table>


<p>.</p>

<p>train data: features + label</p>

<table>
<thead>
<tr>
<th style="text-align:left;"> tweet                </th>
<th style="text-align:left;"> keyword1 </th>
<th style="text-align:left;"> keyword2 </th>
<th style="text-align:left;"> keyword3 </th>
<th style="text-align:left;"> &hellip; </th>
<th style="text-align:left;"> label    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> &ldquo;I like this dog.&rdquo;   </td>
<td style="text-align:left;"> True     </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> True     </td>
<td style="text-align:left;"> &hellip; </td>
<td style="text-align:left;"> Positive </td>
</tr>
<tr>
<td style="text-align:left;"> &ldquo;Beautiful morning.&rdquo; </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> False    </td>
<td style="text-align:left;"> &hellip; </td>
<td style="text-align:left;"> Positive </td>
</tr>
<tr>
<td style="text-align:left;"> &hellip;                  </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip;      </td>
<td style="text-align:left;"> &hellip; </td>
<td style="text-align:left;"> &hellip;      </td>
</tr>
</tbody>
</table>


<p>.</p>

<h2>3. Practice</h2>

<p>function construct</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[predClass]: classifyNB(testX, train, keywords)
</span><span class='line'>    |----- [test-features]: extractFeatures(dataX, keywords)
</span><span class='line'>    |----- [train]: createTrain(fullData, keywords)
</span><span class='line'>              |----- [features]: extractFeatures(dataX, keywords)
</span><span class='line'>              |----- [keywords]: createKeywords(fullData)
</span><span class='line'>                        |----- [fullData]: generateFullData(data1, data2)
</span><span class='line'>                                     |----- [rawData]: loadData()</span></code></pre></td></tr></table></div></figure>


<p>data format</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- rawData: [('word word ...', 'label'), ... ]
</span><span class='line'>- fullData: [([words], label), ([words], label), ...]
</span><span class='line'>
</span><span class='line'>- features: {word: True/False}
</span><span class='line'>- train: [({features}, label), ({features}, label), ...]
</span><span class='line'>- test: ['word word ...', 'word word ...', ...]</span></code></pre></td></tr></table></div></figure>


<p>source</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">nltk</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">loadData</span><span class="p">():</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; loading raw data &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pos_tweets</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;I love this car&#39;</span><span class="p">,</span> <span class="s">&#39;positive&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;This view is amazing&#39;</span><span class="p">,</span> <span class="s">&#39;positive&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;I feel great this morning&#39;</span><span class="p">,</span> <span class="s">&#39;positive&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;I am so excited about the concert&#39;</span><span class="p">,</span> <span class="s">&#39;positive&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;He is my best friend&#39;</span><span class="p">,</span> <span class="s">&#39;positive&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">neg_tweets</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;I do not like this car&#39;</span><span class="p">,</span> <span class="s">&#39;negative&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;This view is horrible&#39;</span><span class="p">,</span> <span class="s">&#39;negative&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;I feel tired this morning&#39;</span><span class="p">,</span> <span class="s">&#39;negative&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;I am not looking forward to the concert&#39;</span><span class="p">,</span> <span class="s">&#39;negative&#39;</span><span class="p">),</span>
</span><span class='line'>                  <span class="p">(</span><span class="s">&#39;He is my enemy&#39;</span><span class="p">,</span> <span class="s">&#39;negative&#39;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">pos_tweets</span><span class="p">,</span> <span class="n">neg_tweets</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">generateFullData</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; generating full data with feature and label </span>
</span><span class='line'><span class="sd">    </span>
</span><span class='line'><span class="sd">    fullData: [([words], label), ([words], label), ...]</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">fullData</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="n">data1</span> <span class="o">+</span> <span class="n">data2</span><span class="p">:</span>
</span><span class='line'>        <span class="n">words_filterred</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">words</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'>        <span class="n">fullData</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">words_filterred</span><span class="p">,</span> <span class="n">label</span><span class="p">))</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">fullData</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createKeywords</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; generating word dictionary from all words &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">wordlist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span class='line'>        <span class="n">wordlist</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>  <span class="c"># combining all words in a list</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">wordDict</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">wordlist</span><span class="p">)</span>  <span class="c"># generating frquencies of each word</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">wordDict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">extractFeatures</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">keywords</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; extracting word table with true/false </span>
</span><span class='line'><span class="sd">    </span>
</span><span class='line'><span class="sd">    features: {word: True/False}</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">dataX_wordSet</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">dataX</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">features</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
</span><span class='line'>        <span class="c"># creating true/false table</span>
</span><span class='line'>        <span class="n">features</span><span class="p">[</span><span class="s">&#39;contains(</span><span class="si">%s</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span> <span class="ow">in</span> <span class="n">dataX_wordSet</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">features</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">createTrain</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">keywords</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; creating train data</span>
</span><span class='line'><span class="sd">    </span>
</span><span class='line'><span class="sd">    train: [({features}, label), ({features}, label), ...]</span>
</span><span class='line'><span class="sd">    - features: {word: True/False}</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span class='line'>        <span class="c"># format: ({word: True/False}, label)</span>
</span><span class='line'>        <span class="n">train</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">extractFeatures</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">keywords</span><span class="p">),</span> <span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># if only have one argument, it also can be written by apply_features</span>
</span><span class='line'>    <span class="c">#train = nltk.classify.apply_features(extractFeatures, data)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">train</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">classifyNB</span><span class="p">(</span><span class="n">testX</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">keywords</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; classifying label with naive bayes &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># creating Naive Bayes classifier</span>
</span><span class='line'>    <span class="n">classifier</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">NaiveBayesClassifier</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># extracting features from raw testX and predicting label</span>
</span><span class='line'>    <span class="n">testX</span> <span class="o">=</span> <span class="n">extractFeatures</span><span class="p">(</span><span class="n">testX</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="n">keywords</span><span class="p">)</span>
</span><span class='line'>    <span class="n">predClass</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">classify</span><span class="p">(</span><span class="n">testX</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">predClass</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># loading data and combining as one</span>
</span><span class='line'>    <span class="n">pos_tweets</span><span class="p">,</span> <span class="n">neg_tweets</span> <span class="o">=</span> <span class="n">loadData</span><span class="p">()</span>
</span><span class='line'>    <span class="n">tweets</span> <span class="o">=</span> <span class="n">generateFullData</span><span class="p">(</span><span class="n">pos_tweets</span><span class="p">,</span> <span class="n">neg_tweets</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># extracting keywords and train data</span>
</span><span class='line'>    <span class="n">keywords</span> <span class="o">=</span> <span class="n">createKeywords</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span>
</span><span class='line'>    <span class="n">train</span> <span class="o">=</span> <span class="n">createTrain</span><span class="p">(</span><span class="n">tweets</span><span class="p">,</span> <span class="n">keywords</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># predicting label</span>
</span><span class='line'>    <span class="n">testX</span> <span class="o">=</span> <span class="s">&#39;Larry is my friend&#39;</span>
</span><span class='line'>    <span class="n">predClass</span> <span class="o">=</span> <span class="n">classifyNB</span><span class="p">(</span><span class="n">testX</span><span class="p">,</span> <span class="n">train</span><span class="p">,</span> <span class="n">keywords</span><span class="p">)</span>
</span><span class='line'>    <span class="k">print</span> <span class="n">predClass</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ol>
<li><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/">Twitter sentiment analysis using Python and NLTK</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/05/23/python-syntax/">Python Syntax</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-23T13:21:29+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2014</span></span> <span class='time'>1:21 pm</span></time>
        
           | <a href="/tech/2014/05/23/python-syntax/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/05/23/python-syntax/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Default Functions</h2>

<h3>1.1. string</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># check subset</span>
</span><span class='line'><span class="k">if</span> <span class="s">&quot;xxx&quot;</span> <span class="ow">in</span> <span class="n">aString</span><span class="p">:</span>
</span><span class='line'>    <span class="n">has_string</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>
</span><span class='line'><span class="c"># join two sets</span>
</span><span class='line'><span class="n">set1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">set2</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">fullset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">set1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">set2</span><span class="p">))</span>
</span><span class='line'><span class="n">fullset</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">set1</span> <span class="o">+</span> <span class="n">set2</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="c"># remove empty strings</span>
</span><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="s">&#39;abc  &#39;</span>
</span><span class='line'><span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. IO</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># output with csv</span>
</span><span class='line'><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outPath</span><span class="o">+</span><span class="s">&quot;submission-randomforest.csv&quot;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
</span><span class='line'>    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Id,Cover_Type</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="n">cols</span><span class="p">]))):</span>
</span><span class='line'>        <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">test</span><span class="p">[</span><span class="s">&#39;Id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">value</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. random</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>  <span class="c">#   a &lt;= n &lt;= b  </span>
</span><span class='line'>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>  <span class="c">#  0 &lt;= n &lt; 1.0</span>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># [10, 12, 14, 16, ... 96, 98]</span>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">&quot;JGood&quot;</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;handsome&quot;</span><span class="p">,</span> <span class="s">&quot;boy&quot;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="s">&quot;is&quot;</span><span class="p">,</span> <span class="s">&quot;powerful&quot;</span><span class="p">,</span> <span class="s">&quot;simple&quot;</span><span class="p">,</span> <span class="s">&quot;and so on...&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</span><span class='line'><span class="nb">slice</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Default Packages</h2>

<h3>2.1. datetime</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">datetime</span>
</span><span class='line'>
</span><span class='line'><span class="c"># calculating days: minus</span>
</span><span class='line'><span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
</span><span class='line'><span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">d1</span> <span class="o">-</span> <span class="n">d2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
</span><span class='line'>
</span><span class='line'><span class="c"># calculating days: plus</span>
</span><span class='line'><span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'><span class="n">d3</span> <span class="o">=</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'><span class="n">d3</span><span class="o">.</span><span class="n">ctime</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># calculating seconds</span>
</span><span class='line'><span class="n">starttime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'><span class="n">endtime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'><span class="p">(</span><span class="n">endtime</span> <span class="o">-</span> <span class="n">starttime</span><span class="p">)</span><span class="o">.</span><span class="n">seconds</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. JSON</h3>

<p>json</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">json</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
</span><span class='line'>
</span><span class='line'><span class="n">jsonfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dataPath</span> <span class="o">+</span> <span class="n">fileName</span><span class="p">)</span>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">jsonfile</span><span class="p">)</span>
</span><span class='line'><span class="n">pprint</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'><span class="n">jsonfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>simplejson</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">simplejson</span> <span class="kn">as</span> <span class="nn">json</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">jsonData</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span> <span class="o">*</span> <span class="s">&#39; &#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. os</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get the current url of the file folder</span>
</span><span class='line'><span class="n">outputs</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="s">&#39;outputs&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/05/21/css/">CSS</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-21T22:35:50+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>10:35 pm</span></time>
        
           | <a href="/tech/2014/05/21/css/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/05/21/css/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Syntax</h2>

<h3>1.1. css construct</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">selector</span><span class="p">{</span><span class="n">property</span><span class="o">:</span> <span class="n">value</span><span class="p">;}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. css embeded</h3>

<p>in-line (attribute)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>    <span class="nt">&lt;head&gt;</span>
</span><span class='line'>      <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;body</span> <span class="na">style=</span><span class="s">&quot;background-color: #FF0000;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>This is a red page<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>internal (tag)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>    <span class="nt">&lt;head&gt;</span>
</span><span class='line'>      <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>      <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">body</span> <span class="p">{</span><span class="k">background-color</span><span class="o">:</span> <span class="m">#FF0000</span><span class="p">;}</span>
</span><span class='line'>      <span class="nt">&lt;/style&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;body&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>This is a red page<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>external (link)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;style/style.css&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Selectors</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type  </th>
<th style="text-align:left;"> Selector       </th>
<th style="text-align:left;"> Example                                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> class </td>
<td style="text-align:left;"> .class-name {} </td>
<td style="text-align:left;">                                              </td>
</tr>
<tr>
<td style="text-align:left;"> id    </td>
<td style="text-align:left;"> #id-name {}    </td>
<td style="text-align:left;">                                              </td>
</tr>
<tr>
<td style="text-align:left;"> span  </td>
<td style="text-align:left;"> span {}        </td>
<td style="text-align:left;">                                              </td>
</tr>
<tr>
<td style="text-align:left;"> div   </td>
<td style="text-align:left;"> div {}         </td>
<td style="text-align:left;">                                              </td>
</tr>
<tr>
<td style="text-align:left;"> links </td>
<td style="text-align:left;"> a {}           </td>
<td style="text-align:left;"> a{color: blue;}                              </td>
</tr>
<tr>
<td style="text-align:left;">       </td>
<td style="text-align:left;"> a:link {}      </td>
<td style="text-align:left;"> a:link {color: red;}                         </td>
</tr>
<tr>
<td style="text-align:left;">       </td>
<td style="text-align:left;"> a:visited {}   </td>
<td style="text-align:left;"> a:visited {color: red;}                      </td>
</tr>
<tr>
<td style="text-align:left;">       </td>
<td style="text-align:left;"> a:active {}    </td>
<td style="text-align:left;"> a:active {background-color: #FFFF00;}        </td>
</tr>
<tr>
<td style="text-align:left;">       </td>
<td style="text-align:left;"> a:hover {}     </td>
<td style="text-align:left;"> a:hover {color: orange; font-style: italic;} </td>
</tr>
</tbody>
</table>


<h2>3. Properties</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type  </th>
<th style="text-align:left;"> Property       </th>
<th style="text-align:left;"> Values                                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> colors </td>
<td style="text-align:left;"> color     </td>
<td style="text-align:left;"> color: #ff0000/red; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> background </td>
<td style="text-align:left;"> background: #FFCC66 url(&ldquo;butterfly.gif&rdquo;) no-repeat fixed right bottom; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> background-color </td>
<td style="text-align:left;"> background-color: #FFCC66; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> background-image </td>
<td style="text-align:left;"> background-image: url(&ldquo;butterfly.gif&rdquo;); </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> background-repeat </td>
<td style="text-align:left;"> background-repeat: no-repeat/repeat/repeat-x/repeat-y; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> background-attachment </td>
<td style="text-align:left;"> background-attachment: fixed/scroll; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;">background-position </td>
<td style="text-align:left;"> background-position: right bottom/right top/2cm 2cm/50% 25%; </td>
</tr>
<tr>
<td style="text-align:left;"> fonts  </td>
<td style="text-align:left;"> font </td>
<td style="text-align:left;"> font: italic bold 30px arial, sans-serif; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> font-style </td>
<td style="text-align:left;"> font-style: normal/italic/oblique; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> font-weight </td>
<td style="text-align:left;"> font-weight: normal/bold; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> font-size </td>
<td style="text-align:left;"> font-size: 30px/12pt/120%/1em; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> font-family </td>
<td style="text-align:left;"> font-family: arial, verdana, sans-serif; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> font-variant </td>
<td style="text-align:left;"> font-variant: normal/small-caps; </td>
</tr>
<tr>
<td style="text-align:left;"> text   </td>
<td style="text-align:left;"> text-indent </td>
<td style="text-align:left;"> text-indent: 30px; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> text-align </td>
<td style="text-align:left;"> text-align: right/left/center/justify; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> text-decoration </td>
<td style="text-align:left;"> text-decoration: underline/overline/line-through; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> text-transform </td>
<td style="text-align:left;"> text-transform: uppercase/capitalize; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> letter-spacing </td>
<td style="text-align:left;"> letter-spacing: 6px/3px; </td>
</tr>
<tr>
<td style="text-align:left;"> box    </td>
<td style="text-align:left;"> margin </td>
<td style="text-align:left;"> margin-top/margin-right/margin-bottom/margin-left: 20px; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> border </td>
<td style="text-align:left;"> (shown below) </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> padding </td>
<td style="text-align:left;"> padding-top/padding-right/padding-bottom/padding-left: 20px; </td>
</tr>
<tr>
<td style="text-align:left;">        </td>
<td style="text-align:left;"> content </td>
<td style="text-align:left;"> width/height: 10px; </td>
</tr>
<tr>
<td style="text-align:left;"> floating </td>
<td style="text-align:left;"> float </td>
<td style="text-align:left;"> float: left/right; </td>
</tr>
<tr>
<td style="text-align:left;">          </td>
<td style="text-align:left;"> clear </td>
<td style="text-align:left;"> clear: left/right/both/none; </td>
</tr>
<tr>
<td style="text-align:left;"> positioning </td>
<td style="text-align:left;"> position </td>
<td style="text-align:left;"> position:absolute/relative; </td>
</tr>
<tr>
<td style="text-align:left;">             </td>
<td style="text-align:left;"> position properties </td>
<td style="text-align:left;"> top/left/bottom/right: 100px; </td>
</tr>
<tr>
<td style="text-align:left;"> layers      </td>
<td style="text-align:left;"> z-index </td>
<td style="text-align:left;"> z-index: 1 / 2 / 3 / 4 / 5; </td>
</tr>
</tbody>
</table>


<p>note: <br/>
- box: margin -> border -> padding -> content<br/>
- direction: top/bottom/right/left</p>

<p>border</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">border-width</span><span class="o">:</span> <span class="nt">thin</span><span class="o">/</span><span class="nt">medium</span><span class="o">/</span><span class="nt">thick</span><span class="o">/</span><span class="nt">10px</span><span class="o">;</span>
</span><span class='line'><span class="nt">border-color</span><span class="o">:</span> <span class="nf">#123456</span><span class="o">/</span><span class="nt">rgb</span><span class="o">(</span><span class="nt">123</span><span class="o">,</span><span class="nt">123</span><span class="o">,</span><span class="nt">123</span><span class="o">)/</span><span class="nt">yellow</span><span class="o">;</span>
</span><span class='line'><span class="nt">border-style</span><span class="o">:</span> <span class="nt">dotted</span><span class="o">/</span><span class="nt">dashed</span><span class="o">/</span><span class="nt">solid</span><span class="o">/</span><span class="nt">double</span><span class="o">/</span><span class="nt">groove</span><span class="o">/</span><span class="nt">ridge</span><span class="o">/</span><span class="nt">inset</span><span class="o">/</span><span class="nt">outset</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">border-top</span><span class="o">/</span><span class="nt">right</span><span class="o">/</span><span class="nt">bottom</span><span class="o">/</span><span class="nt">left-width</span><span class="o">:</span> <span class="nt">thin</span><span class="o">/</span><span class="nt">medium</span><span class="o">/</span><span class="nt">thick</span><span class="o">/</span><span class="nt">10px</span><span class="o">;</span>
</span><span class='line'><span class="nt">border-top</span><span class="o">/</span><span class="nt">right</span><span class="o">/</span><span class="nt">bottom</span><span class="o">/</span><span class="nt">left-color</span><span class="o">:</span> <span class="nf">#123456</span><span class="o">/</span><span class="nt">rgb</span><span class="o">(</span><span class="nt">123</span><span class="o">,</span><span class="nt">123</span><span class="o">,</span><span class="nt">123</span><span class="o">)/</span><span class="nt">yellow</span><span class="o">;</span>
</span><span class='line'><span class="nt">border-top</span><span class="o">/</span><span class="nt">right</span><span class="o">/</span><span class="nt">bottom</span><span class="o">/</span><span class="nt">left-style</span><span class="o">:</span> <span class="nt">dotted</span><span class="o">/</span><span class="nt">dashed</span><span class="o">/</span><span class="nt">solid</span><span class="o">/</span><span class="nt">double</span><span class="o">/</span><span class="nt">groove</span><span class="o">/</span><span class="nt">ridge</span><span class="o">/</span><span class="nt">inset</span><span class="o">/</span><span class="nt">outset</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>layers</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nf">#ten_of_diamonds</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#jack_of_diamonds</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">115px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">115px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:</span> <span class="m">2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#queen_of_diamonds</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">130px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">130px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:</span> <span class="m">3</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#king_of_diamonds</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">145px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">145px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:</span> <span class="m">4</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nf">#ace_of_diamonds</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">160px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">top</span><span class="o">:</span> <span class="m">160px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">z-index</span><span class="o">:</span> <span class="m">5</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>References</h2>

<ol>
<li><a href="http://html.net/tutorials/css/">CSS Tutorial</a></li>
<li><a href="http://jigsaw.w3.org/css-validator/">CSS Validator</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/05/21/jekyll/">Jekyll</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-21T10:59:28+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>10:59 am</span></time>
        
           | <a href="/tech/2014/05/21/jekyll/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/05/21/jekyll/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<p>Prequisition</p>

<ul>
<li>ruby > 1.9.3</li>
<li>gem</li>
</ul>


<p>Installation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>gem install jekyll
</span><span class='line'><span class="nv">$ </span>jekyll new project_name
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>project_name
</span><span class='line'><span class="nv">$ </span>jekyll serve --watch
</span></code></pre></td></tr></table></div></figure>


<p>Files</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>.
</span><span class='line'><span class="p">|</span>--- _includes/                                           <span class="c"># HTML partials</span>
</span><span class='line'><span class="p">|</span>        <span class="p">|</span>------- head.html
</span><span class='line'><span class="p">|</span>        <span class="p">|</span>------- header.html
</span><span class='line'><span class="p">|</span>        <span class="p">|</span>------- footer.html
</span><span class='line'><span class="p">|</span>--- _layouts/                                            <span class="c"># templates</span>
</span><span class='line'><span class="p">|</span>        <span class="p">|</span>------- default.html   <span class="o">(</span>head/header/footer<span class="o">)</span>
</span><span class='line'><span class="p">|</span>                    <span class="p">|</span>--------- page.html
</span><span class='line'><span class="p">|</span>                                   <span class="p">|</span>------ posts.md
</span><span class='line'><span class="p">|</span>                                   <span class="p">|</span>------ projects.md
</span><span class='line'><span class="p">|</span>                    <span class="p">|</span>--------- post.html
</span><span class='line'><span class="p">|</span>--- _posts/                                              <span class="c"># posts</span>
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>--- css/
</span><span class='line'><span class="p">|</span>--- javascript/
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>--- index.html                                           <span class="c"># html page</span>
</span><span class='line'><span class="p">|</span>--- posts.md                                             <span class="c"># html page</span>
</span><span class='line'><span class="p">|</span>--- projects.md                                          <span class="c"># html page</span>
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>--- _config.yml                                          <span class="c"># config file</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. Configuration</h2>

<p><code>_config.yml</code></p>

<h2>3. Front End</h2>

<h3>3.1. Templates</h3>

<h4>3.1.1. template variables</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>.
</span><span class='line'><span class="p">|</span>--- site
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.title
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.email
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.username
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.description
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.baseurl
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- site.url
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>--- page
</span><span class='line'><span class="p">|</span>      <span class="p">|</span>--- page.title
</span><span class='line'><span class="p">|</span>
</span><span class='line'><span class="p">|</span>--- post
</span><span class='line'>       <span class="p">|</span>--- post.title
</span><span class='line'>       <span class="p">|</span>--- post.url
</span></code></pre></td></tr></table></div></figure>


<h4>3.1.2. partials</h4>

<p>categories and tags</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{/% for category in page.categories %} {/{category}}
</span><span class='line'>{/% endfor %}
</span><span class='line'>
</span><span class='line'>{/% for tag in page.tags %} {/{tag}}
</span><span class='line'>{/% endfor %}
</span></code></pre></td></tr></table></div></figure>


<p>rss</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;rss-subscribe&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    subscribe <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{\{ &quot;</span><span class="err">/</span><span class="na">feed</span><span class="err">.</span><span class="na">xml</span><span class="err">&quot;</span> <span class="err">|</span> <span class="na">prepend:</span> <span class="na">site</span><span class="err">.</span><span class="na">baseurl</span> <span class="err">}}&quot;</span><span class="nt">&gt;</span>via RSS<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>pagination</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;pageNav&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;a</span> <span class="err">{\%</span> <span class="na">if</span> <span class="na">page</span><span class="err">.</span><span class="na">previous</span> <span class="err">%}</span> <span class="na">href=</span><span class="s">&quot;{\{ site.url }}{\{page.previous.url}}&quot;</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">endif</span> <span class="err">%}</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">unless</span> <span class="na">page</span><span class="err">.</span><span class="na">previous</span> <span class="err">%}</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">endunless</span> <span class="err">%}</span>
</span><span class='line'>    <span class="nt">&gt;</span>Previous<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;a</span> <span class="err">{\%</span> <span class="na">if</span> <span class="na">page</span><span class="err">.</span><span class="na">next</span> <span class="err">%}</span> <span class="na">href=</span><span class="s">&quot;{\{ site.url }}{\{ page.next.url }}&quot;</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">endif</span> <span class="err">%}</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">unless</span> <span class="na">page</span><span class="err">.</span><span class="na">next</span> <span class="err">%}</span>
</span><span class='line'>       <span class="err">{\%</span> <span class="na">endunless</span> <span class="err">%}</span>
</span><span class='line'>    <span class="nt">&gt;</span>Next<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/span&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>date and time</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>{\% capture y %} {\{ post.date | date: &quot;%Y&quot; }}
</span><span class='line'>    {\% endcapture %}
</span><span class='line'>    {\% if year != y %}
</span><span class='line'>        {\% assign year = y %}
</span><span class='line'>        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;post-year&quot;</span><span class="nt">&gt;</span>{\{ y }}<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>{\% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>audio</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">&quot;/music/good_enough.mp3&quot;</span> <span class="na">controls</span><span class="nt">&gt;</span> 
</span><span class='line'>  <span class="nt">&lt;embed</span>
</span><span class='line'>  <span class="na">src=</span><span class="s">&quot;/music/good_enough.mp3&quot;</span>
</span><span class='line'>  <span class="na">width=</span><span class="s">&quot;180&quot;</span>
</span><span class='line'>  <span class="na">height=</span><span class="s">&quot;90&quot;</span>
</span><span class='line'>  <span class="na">loop=</span><span class="s">&quot;false&quot;</span>
</span><span class='line'>  <span class="na">autostart=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/audio&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. CSS</h3>

<h4>3.2.1. layouts</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>margin -&gt; border -&gt; padding
</span></code></pre></td></tr></table></div></figure>


<h4>3.2.2. partials</h4>

<p>table</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">table</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-family</span><span class="o">:</span> <span class="k">sans-serif</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="k">font</span><span class="o">-</span><span class="n">smoothing</span><span class="o">:</span> <span class="n">antialiased</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">115%</span><span class="p">;</span>
</span><span class='line'>  <span class="k">overflow</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">th</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span> <span class="k">rgb</span><span class="p">(</span><span class="m">112</span><span class="o">,</span> <span class="m">196</span><span class="o">,</span> <span class="m">105</span><span class="p">);</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
</span><span class='line'>  <span class="k">font-weight</span><span class="o">:</span> <span class="k">normal</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span> <span class="m">30px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">td</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span> <span class="k">rgb</span><span class="p">(</span><span class="m">238</span><span class="o">,</span> <span class="m">238</span><span class="o">,</span> <span class="m">238</span><span class="p">);</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="k">rgb</span><span class="p">(</span><span class="m">111</span><span class="o">,</span> <span class="m">111</span><span class="o">,</span> <span class="m">111</span><span class="p">);</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span> <span class="m">30px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.3. Javascript</h3>

<h4>3.3.1. Scripts</h4>

<h4>3.3.2. Libraries</h4>

<p><a href="http://www.mathjax.org/">MathJax</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span>
</span><span class='line'>        <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>4. Backend</h2>

<h2>5. Plugins</h2>

<h2>6. Markdown</h2>

<h3>6.1. links</h3>

<h3>6.2. syntax</h3>

<h2>References</h2>

<ol>
<li>Toolkits: <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://www.w3schools.com/tags/ref_colorpicker.asp">CSS Color Picker</a></li>
<li>Libraries: <a href="http://www.mathjax.org/">MathJax</a></li>
<li>Templates: <a href="https://github.com/jhamrick/blog">Jessica Hamrick</a>, <a href="https://github.com/kejinlu/kejinlu.github.com">Geek Lu</a>, <a href="http://blog.ixxoo.me/">likebeta&rsquo;s Blog</a>, <a href="https://github.com/jekyll/jekyll/wiki/Sites">Offical Sites</a>, <a href="http://yuanyong.org/blog/collect-jekyll-theme.html">Jekyll Themes</a>, <a href="https://github.com/enml/blog">enml</a></li>
<li>Tutorials: <a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax basic tutorial and quick reference</a>, <a href="http://www.calculatorium.com/mathjax-quick-start-tutorial/">MathJax Quick Start Tutorial</a></li>
<li>CSS: <a href="http://www.freshdesignweb.com/free-css-tables.html">40+ Free Beautiful CSS Table Templates</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/04/21/data-structure-and-algorithms/">Data Structure and Algorithms</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-04-21T09:24:12+08:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>9:24 am</span></time>
        
           | <a href="/tech/2014/04/21/data-structure-and-algorithms/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/04/21/data-structure-and-algorithms/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><table>
<thead>
<tr>
<th style="text-align:left;"> algorithms            </th>
<th style="text-align:left;"> data structure </th>
<th style="text-align:left;"> advance              </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> searching and sorting </td>
<td style="text-align:left;"> list           </td>
<td style="text-align:left;"> stack / queue / hash </td>
</tr>
<tr>
<td style="text-align:left;"> recursion             </td>
<td style="text-align:left;"> tree           </td>
<td style="text-align:left;"> stack / queue        </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> graph          </td>
<td style="text-align:left;">                      </td>
</tr>
</tbody>
</table>


<h2>1. Data Structure</h2>

<h3>1.1. Stack</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Stack</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.2. Queue</h3>

<p>queue</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Queue</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">enqueue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">dequeue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>dequeue</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">dequeue</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>     <span class="k">def</span> <span class="nf">addFront</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>         <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">addRear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">removeFront</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">removeRear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.3. List</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initdata</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">initdata</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getNext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">next</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newdata</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">newdata</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">setNext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newnext</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">newnext</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">UnorderedList</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">==</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>        <span class="n">temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'>        <span class="n">temp</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'>        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">count</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'>        <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">found</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'>        <span class="n">previous</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">previous</span> <span class="o">=</span> <span class="n">current</span>
</span><span class='line'>                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">previous</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">previous</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">OrderedList</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'>        <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">found</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
</span><span class='line'>        <span class="n">previous</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">previous</span> <span class="o">=</span> <span class="n">current</span>
</span><span class='line'>                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">getNext</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">previous</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">temp</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">temp</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
</span><span class='line'>            <span class="n">previous</span><span class="o">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.4. Tree</h3>

<ul>
<li>node</li>
<li>edge / path</li>
<li>root / parent / children</li>
<li>sibling</li>
<li>subtree/ leafnode</li>
<li>level / height</li>
</ul>


<p>format</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">myTree</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span>   <span class="c">#root</span>
</span><span class='line'>         <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span>  <span class="c">#left subtree</span>
</span><span class='line'>               <span class="p">[</span><span class="s">&#39;d&#39;</span> <span class="p">[],</span> <span class="p">[]],</span>
</span><span class='line'>               <span class="p">[</span><span class="s">&#39;e&#39;</span> <span class="p">[],</span> <span class="p">[]]</span> <span class="p">],</span>
</span><span class='line'>         <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span>  <span class="c">#right subtree</span>
</span><span class='line'>               <span class="p">[</span><span class="s">&#39;f&#39;</span> <span class="p">[],</span> <span class="p">[]],</span>
</span><span class='line'>               <span class="p">[]</span> <span class="p">]</span>
</span><span class='line'>         <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>binary tree</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">BinaryTree</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rootObj</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">rootObj</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">insertLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newNode</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">BinaryTree</span><span class="p">(</span><span class="n">newNode</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">t</span> <span class="o">=</span> <span class="n">BinaryTree</span><span class="p">(</span><span class="n">newNode</span><span class="p">)</span>
</span><span class='line'>            <span class="n">t</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">t</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">insertRight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newNode</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">BinaryTree</span><span class="p">(</span><span class="n">newNode</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">t</span> <span class="o">=</span> <span class="n">BinaryTree</span><span class="p">(</span><span class="n">newNode</span><span class="p">)</span>
</span><span class='line'>            <span class="n">t</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">t</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getRightChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getLeftChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">setRootVal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">obj</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getRootVal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span>
</span></code></pre></td></tr></table></div></figure>


<p>parse tree</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">pythonds.basic.stack</span> <span class="kn">import</span> <span class="n">Stack</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">pythonds.trees.binaryTree</span> <span class="kn">import</span> <span class="n">BinaryTree</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">buildParseTree</span><span class="p">(</span><span class="n">fpexp</span><span class="p">):</span>
</span><span class='line'>    <span class="n">fplist</span> <span class="o">=</span> <span class="n">fpexp</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</span><span class='line'>    <span class="n">pStack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
</span><span class='line'>    <span class="n">eTree</span> <span class="o">=</span> <span class="n">BinaryTree</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">pStack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">eTree</span><span class="p">)</span>
</span><span class='line'>    <span class="n">currentTree</span> <span class="o">=</span> <span class="n">eTree</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">fplist</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s">&#39;(&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">currentTree</span><span class="o">.</span><span class="n">insertLeft</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="n">pStack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">currentTree</span><span class="p">)</span>
</span><span class='line'>            <span class="n">currentTree</span> <span class="o">=</span> <span class="n">currentTree</span><span class="o">.</span><span class="n">getLeftChild</span><span class="p">()</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="s">&#39;)&#39;</span><span class="p">]:</span>
</span><span class='line'>            <span class="n">currentTree</span><span class="o">.</span><span class="n">setRootVal</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span><span class='line'>            <span class="n">parent</span> <span class="o">=</span> <span class="n">pStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>            <span class="n">currentTree</span> <span class="o">=</span> <span class="n">parent</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">]:</span>
</span><span class='line'>            <span class="n">currentTree</span><span class="o">.</span><span class="n">setRootVal</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>            <span class="n">currentTree</span><span class="o">.</span><span class="n">insertRight</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>            <span class="n">pStack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">currentTree</span><span class="p">)</span>
</span><span class='line'>            <span class="n">currentTree</span> <span class="o">=</span> <span class="n">currentTree</span><span class="o">.</span><span class="n">getRightChild</span><span class="p">()</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="s">&#39;)&#39;</span><span class="p">:</span>
</span><span class='line'>            <span class="n">currentTree</span> <span class="o">=</span> <span class="n">pStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">eTree</span>
</span><span class='line'>
</span><span class='line'><span class="n">pt</span> <span class="o">=</span> <span class="n">buildParseTree</span><span class="p">(</span><span class="s">&quot;( ( 10 + 5 ) * 3 )&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">pt</span><span class="o">.</span><span class="n">postorder</span><span class="p">()</span>  <span class="c">#defined and explained in the next section</span>
</span></code></pre></td></tr></table></div></figure>


<p>priority queues with binary heap</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">BinHeap</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">buildHeap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alist</span><span class="p">):</span>
</span><span class='line'>        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">alist</span><span class="p">[:]</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>        <span class="k">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span class='line'>            <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">percDown</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">percDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span class='line'>        <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span><span class="p">:</span>
</span><span class='line'>            <span class="n">mc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minChild</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">mc</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">mc</span><span class="p">]</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">mc</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
</span><span class='line'>            <span class="n">i</span> <span class="o">=</span> <span class="n">mc</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">minChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">percUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
</span><span class='line'>            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">percUp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">delMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">retval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentSize</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">heapList</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">percDown</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">retval</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">currentSize</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">False</span>
</span></code></pre></td></tr></table></div></figure>


<p>binary search tree</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">BinarySearchTree</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">__iter__</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">TreeNode</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="n">val</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">left</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">right</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasLeftChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasRightChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isLeftChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">==</span> <span class="bp">self</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isRightChild</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">==</span> <span class="bp">self</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isLeaf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasAnyChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasBothChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">replaceNodeData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lc</span><span class="p">,</span> <span class="n">rc</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="n">value</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">lc</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">rc</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasRightChild</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">currentNode</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">hasRightChild</span><span class="p">():</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">currentNode</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>
</span><span class='line'>            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">payload</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">currentNode</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">currentNode</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">currentNode</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">):</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="n">nodeToRemove</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">nodeToRemove</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">nodeToRemove</span><span class="p">)</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s">&#39;Error, key not in tree&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s">&#39;Error, key not in tree&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">findSuccessor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">succ</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasRightChild</span><span class="p">():</span>
</span><span class='line'>            <span class="n">succ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span><span class="o">.</span><span class="n">findMin</span><span class="p">()</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                    <span class="n">succ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>                    <span class="n">succ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">findSuccessor</span><span class="p">()</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">self</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">succ</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">findMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">current</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">current</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">spliceOut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLeaf</span><span class="p">():</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAnyChildren</span><span class="p">():</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftChild</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">yield</span> <span class="n">elem</span>
</span><span class='line'>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasRightChild</span><span class="p">():</span>
</span><span class='line'>                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightChild</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">yield</span> <span class="n">elem</span>
</span></code></pre></td></tr></table></div></figure>


<p>balance binary search tree / AVL Tree</p>

<ul>
<li>balanceFactor = height(leftSubTree) ? height(rightSubTree)</li>
</ul>


<p>AVL tree</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">AVLTree</span><span class="p">(</span><span class="n">BinarySearchTree</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">_put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">hasLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">currentNode</span><span class="p">)</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">updateBalance</span><span class="p">(</span><span class="n">currentNode</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">hasRightChild</span><span class="p">():</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">_put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">currentNode</span><span class="p">)</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">updateBalance</span><span class="p">(</span><span class="n">currentNode</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">updateBalance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">rebalance</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="n">node</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">isRightChild</span><span class="p">():</span>
</span><span class='line'>                <span class="n">node</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">updateBalance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">rebalance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="c"># do an LR Rotation</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateRight</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateLeft</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="c"># single left</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateLeft</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>        <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="c"># do an RL Rotation</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateLeft</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateRight</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="c"># single right</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">rotateRight</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">rotateLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotRoot</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">newRoot</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">newRoot</span><span class="o">.</span><span class="n">leftChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">rotRoot</span>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">isRoot</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">isLeftChild</span><span class="p">():</span>
</span><span class='line'>                <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">rotRoot</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> \
</span><span class='line'>                                <span class="nb">min</span><span class="p">(</span><span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> \
</span><span class='line'>                                <span class="nb">max</span><span class="p">(</span><span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">rotateRight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotRoot</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">newRoot</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">leftChild</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">rightChild</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="n">newRoot</span><span class="o">.</span><span class="n">rightChild</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">rotRoot</span>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">isRoot</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">isRightChild</span><span class="p">():</span>
</span><span class='line'>                <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">leftChild</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">rightChild</span> <span class="o">=</span> <span class="n">rotRoot</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">newRoot</span>
</span><span class='line'>        <span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">=</span> <span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> \
</span><span class='line'>                                <span class="nb">max</span><span class="p">(</span><span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>        <span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">=</span> <span class="n">newRoot</span><span class="o">.</span><span class="n">balanceFactor</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> \
</span><span class='line'>                                <span class="nb">min</span><span class="p">(</span><span class="n">rotRoot</span><span class="o">.</span><span class="n">balanceFactor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1.5. Graph</h3>

<h2>2. Algorithms</h2>

<h3>2.1. Analysis</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">sumOfN2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span class='line'>   <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">theSum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>      <span class="n">theSum</span> <span class="o">=</span> <span class="n">theSum</span> <span class="o">+</span> <span class="n">i</span>
</span><span class='line'>
</span><span class='line'>   <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">return</span> <span class="n">theSum</span><span class="p">,</span><span class="n">end</span><span class="o">-</span><span class="n">start</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.2. Recursion</h3>

<p>list and recursion</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">listsum</span><span class="p">(</span><span class="n">numList</span><span class="p">):</span>
</span><span class='line'>    <span class="n">theSum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">numList</span><span class="p">:</span>
</span><span class='line'>        <span class="n">theSum</span> <span class="o">+=</span> <span class="n">i</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">theSum</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">listsum</span><span class="p">(</span><span class="n">numList</span><span class="p">):</span>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">numList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">numList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">numList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">listsum</span><span class="p">(</span><span class="n">numList</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</span></code></pre></td></tr></table></div></figure>


<p>list, recursion and stack</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">toStr</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
</span><span class='line'>    <span class="n">convertString</span> <span class="o">=</span> <span class="s">&quot;0123456789ABCDEF&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">base</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">convertString</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">toStr</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="n">convertString</span><span class="p">[</span><span class="n">n</span><span class="o">%</span><span class="n">base</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">pythonds.basic.stack</span> <span class="kn">import</span> <span class="n">Stack</span>
</span><span class='line'>
</span><span class='line'><span class="n">rStack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">toStr</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">base</span><span class="p">):</span>
</span><span class='line'>    <span class="n">convertString</span> <span class="o">=</span> <span class="s">&quot;0123456789ABCDEF&quot;</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">base</span><span class="p">:</span>
</span><span class='line'>            <span class="n">rStack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">convertString</span><span class="p">[</span><span class="n">n</span><span class="p">])</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">rStack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">convertString</span><span class="p">[</span><span class="n">n</span> <span class="o">%</span> <span class="n">base</span><span class="p">])</span>
</span><span class='line'>        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="n">base</span>
</span><span class='line'>    <span class="n">res</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>    <span class="k">while</span> <span class="ow">not</span> <span class="n">rStack</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
</span><span class='line'>        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rStack</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">res</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2.3. Sorting and Searching</h3>

<p>searching</p>

<ul>
<li>sequential search</li>
<li>ordered sequential search</li>
<li>binary search</li>
<li>hash</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">sequentialSearch</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">found</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">orderedSequentialSearch</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>    <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>                <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">found</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">first</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">last</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">first</span> <span class="o">&lt;=</span> <span class="n">last</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
</span><span class='line'>        <span class="n">midpoint</span> <span class="o">=</span> <span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">last</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="n">alist</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">last</span> <span class="o">=</span> <span class="n">midpoint</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">first</span> <span class="o">=</span> <span class="n">midpoint</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">found</span>
</span><span class='line'>
</span><span class='line'><span class="c"># binary search for an ordered list</span>
</span><span class='line'><span class="k">def</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">False</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="n">midpoint</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]</span> <span class="o">==</span> <span class="n">item</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">item</span> <span class="o">&lt;</span> <span class="n">alist</span><span class="p">[</span><span class="n">midpoint</span><span class="p">]:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">binarySearch</span><span class="p">(</span><span class="n">alist</span><span class="p">[:</span><span class="n">midpoint</span><span class="p">],</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">binarySearch</span><span class="p">(</span><span class="n">alist</span><span class="p">[</span><span class="n">midpoint</span><span class="o">+</span><span class="mi">1</span><span class="p">:],</span> <span class="n">item</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">hash</span><span class="p">(</span><span class="n">astring</span><span class="p">,</span> <span class="n">tablesize</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">astring</span><span class="p">)):</span>
</span><span class='line'>        <span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="nb">ord</span><span class="p">(</span><span class="n">astring</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nb">sum</span> <span class="o">%</span> <span class="n">tablesize</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">HashTable</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">11</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">slots</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">hashvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashfunction</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">hashvalue</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>  <span class="c"># replace</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">nextslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">hashvalue</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> \
</span><span class='line'>                      <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">!=</span> <span class="n">key</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">nextslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">nextslot</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextslot</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>  <span class="c"># replace</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hashfunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">key</span> <span class="o">%</span> <span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">rehash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oldhash</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="n">oldhash</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">%</span> <span class="n">size</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">startslot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashfunction</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>        <span class="n">stop</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="n">position</span> <span class="o">=</span> <span class="n">startslot</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> \
</span><span class='line'>              <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
</span><span class='line'>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">:</span>
</span><span class='line'>                <span class="n">found</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rehash</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">))</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="n">startslot</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">stop</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>sorting</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">Function Tree</span>
</span><span class='line'>
</span><span class='line'><span class="sd">- bubbleSort</span>
</span><span class='line'><span class="sd">- shortBubbleSort</span>
</span><span class='line'>
</span><span class='line'><span class="sd">- selectionSort</span>
</span><span class='line'><span class="sd">- insertionSort</span>
</span><span class='line'><span class="sd">- shellSort</span>
</span><span class='line'><span class="sd">    |------ gapInsertionSort</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sd">- mergeSort</span>
</span><span class='line'><span class="sd">- quickSort</span>
</span><span class='line'><span class="sd">    |------ quickSortHelper</span>
</span><span class='line'><span class="sd">               |---------- partition</span>
</span><span class='line'>
</span><span class='line'><span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">bubbleSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">passnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">passnum</span><span class="p">):</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">temp</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">shortBubbleSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">exchanges</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>    <span class="n">passnum</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">passnum</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">exchanges</span><span class="p">:</span>
</span><span class='line'>        <span class="n">exchanges</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">passnum</span><span class="p">):</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">exchanges</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>                <span class="n">temp</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>        <span class="n">passnum</span> <span class="o">=</span> <span class="n">passnum</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">selectionSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">fillslot</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>        <span class="n">positionOfMax</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">fillslot</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">alist</span><span class="p">[</span><span class="n">location</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">alist</span><span class="p">[</span><span class="n">positionOfMax</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">positionOfMax</span> <span class="o">=</span> <span class="n">location</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">temp</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">fillslot</span><span class="p">]</span>
</span><span class='line'>        <span class="n">alist</span><span class="p">[</span><span class="n">fillslot</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">positionOfMax</span><span class="p">]</span>
</span><span class='line'>        <span class="n">alist</span><span class="p">[</span><span class="n">positionOfMax</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">insertionSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)):</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">currentvalue</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span class='line'>        <span class="n">position</span> <span class="o">=</span> <span class="n">index</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">position</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">currentvalue</span><span class="p">:</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>            <span class="n">position</span> <span class="o">=</span> <span class="n">position</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentvalue</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">shellSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">sublistcount</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">sublistcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">startposition</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sublistcount</span><span class="p">):</span>
</span><span class='line'>            <span class="n">gapInsertionSort</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">startposition</span><span class="p">,</span> <span class="n">sublistcount</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&quot;After increments of size &quot;</span><span class="p">,</span> <span class="n">sublistcount</span><span class="p">,</span> \
</span><span class='line'>              <span class="s">&quot;The list is &quot;</span><span class="p">,</span> <span class="n">alist</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">sublistcount</span> <span class="o">=</span> <span class="n">sublistcount</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">gapInsertionSort</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">gap</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="o">+</span><span class="n">gap</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">),</span> <span class="n">gap</span><span class="p">):</span>
</span><span class='line'>        <span class="n">currentvalue</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>        <span class="n">position</span> <span class="o">=</span> <span class="n">i</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">position</span> <span class="o">&gt;=</span> <span class="n">gap</span> <span class="ow">and</span> <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="o">-</span><span class="n">gap</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">currentvalue</span><span class="p">:</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="o">-</span><span class="n">gap</span><span class="p">]</span>
</span><span class='line'>            <span class="n">position</span> <span class="o">=</span> <span class="n">position</span> <span class="o">-</span> <span class="n">gap</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">alist</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">currentvalue</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">mergeSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Splitting &quot;</span><span class="p">,</span> <span class="n">alist</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">mid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span class='line'>        <span class="n">lefthalf</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[:</span><span class="n">mid</span><span class="p">]</span>
</span><span class='line'>        <span class="n">righthalf</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">mid</span><span class="p">:]</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">mergeSort</span><span class="p">(</span><span class="n">lefthalf</span><span class="p">)</span>
</span><span class='line'>        <span class="n">mergeSort</span><span class="p">(</span><span class="n">righthalf</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lefthalf</span><span class="p">)</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">righthalf</span><span class="p">):</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">lefthalf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">righthalf</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">lefthalf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">alist</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">righthalf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span class='line'>                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lefthalf</span><span class="p">):</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">lefthalf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span class='line'>            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">righthalf</span><span class="p">):</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">righthalf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span class='line'>            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Merging &quot;</span><span class="p">,</span> <span class="n">alist</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">quickSort</span><span class="p">(</span><span class="n">alist</span><span class="p">):</span>
</span><span class='line'>    <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">quickSortHelper</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">first</span> <span class="o">&lt;</span> <span class="n">last</span><span class="p">:</span>
</span><span class='line'>        <span class="n">splitpoint</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">splitpoint</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">quickSortHelper</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">splitpoint</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">pivotvalue</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">first</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">leftmark</span> <span class="o">=</span> <span class="n">first</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">rightmark</span> <span class="o">=</span> <span class="n">last</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">done</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>    <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">leftmark</span> <span class="o">&lt;=</span> <span class="n">rightmark</span> <span class="ow">and</span> \
</span><span class='line'>              <span class="n">alist</span><span class="p">[</span><span class="n">leftmark</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pivotvalue</span><span class="p">:</span>
</span><span class='line'>            <span class="n">leftmark</span> <span class="o">=</span> <span class="n">leftmark</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">while</span> <span class="n">alist</span><span class="p">[</span><span class="n">rightmark</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pivotvalue</span> <span class="ow">and</span> \
</span><span class='line'>              <span class="n">rightmark</span> <span class="o">&gt;=</span> <span class="n">leftmark</span><span class="p">:</span>
</span><span class='line'>            <span class="n">rightmark</span> <span class="o">=</span> <span class="n">rightmark</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">rightmark</span> <span class="o">&lt;</span> <span class="n">leftmark</span><span class="p">:</span>
</span><span class='line'>            <span class="n">done</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">temp</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">leftmark</span><span class="p">]</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">leftmark</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">rightmark</span><span class="p">]</span>
</span><span class='line'>            <span class="n">alist</span><span class="p">[</span><span class="n">rightmark</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">temp</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">first</span><span class="p">]</span>
</span><span class='line'>    <span class="n">alist</span><span class="p">[</span><span class="n">first</span><span class="p">]</span> <span class="o">=</span> <span class="n">alist</span><span class="p">[</span><span class="n">rightmark</span><span class="p">]</span>
</span><span class='line'>    <span class="n">alist</span><span class="p">[</span><span class="n">rightmark</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">rightmark</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li><a href="http://interactivepython.org/courselib/static/pythonds/index.html">Problem Solving with Algorithms and Data Struture</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/03/07/emacs/">Emacs</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-07T17:22:32+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:22 pm</span></time>
        
           | <a href="/tech/2014/03/07/emacs/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/03/07/emacs/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h2>1. Installation</h2>

<p>Ubuntu</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo apt-get install emacs
</span></code></pre></td></tr></table></div></figure>


<h2>2. Commands</h2>

<p>keys:</p>

<ul>
<li><code>C-x</code>: <code>ctrl+x</code>, to control buffers/files</li>
<li><code>M-x</code>: <code>Alt+x</code>, to run commands</li>
<li><code>RET</code>: enter</li>
</ul>


<p>command: <code>C-x</code></p>

<table>
<thead>
<tr>
<th style="text-align:left;">Type </th>
<th style="text-align:left;"> Cmd     </th>
<th style="text-align:left;"> description                                                    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> C-c </td>
<td style="text-align:left;"> C-c C-c </td>
<td style="text-align:left;"> run script                                                     </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-c C-p </td>
<td style="text-align:left;"> open python interpreter                                        </td>
</tr>
<tr>
<td style="text-align:left;"> C-g </td>
<td style="text-align:left;">         </td>
<td style="text-align:left;"> quit                                                           </td>
</tr>
<tr>
<td style="text-align:left;"> C-h </td>
<td style="text-align:left;"> C-h i   </td>
<td style="text-align:left;"> the info dir                                                   </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-h C-h </td>
<td style="text-align:left;"> help                                                           </td>
</tr>
<tr>
<td style="text-align:left;"> C-s </td>
<td style="text-align:left;">         </td>
<td style="text-align:left;"> search forward                                                 </td>
</tr>
<tr>
<td style="text-align:left;"> C-r </td>
<td style="text-align:left;">         </td>
<td style="text-align:left;"> search backward                                                </td>
</tr>
<tr>
<td style="text-align:left;"> C-k </td>
<td style="text-align:left;">         </td>
<td style="text-align:left;"> kill the current line                                          </td>
</tr>
<tr>
<td style="text-align:left;"> C-y </td>
<td style="text-align:left;">         </td>
<td style="text-align:left;"> yank the current line                                          </td>
</tr>
<tr>
<td style="text-align:left;"> C-x </td>
<td style="text-align:left;"> C-x b   </td>
<td style="text-align:left;"> switch buffers                                                 </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x k   </td>
<td style="text-align:left;"> kill the current buffer                                        </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x ->  </td>
<td style="text-align:left;"> right-cycle through buffers                                    </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x &lt;-  </td>
<td style="text-align:left;"> left-cycle through buffers                                     </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x o   </td>
<td style="text-align:left;"> change active window to next window                            </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x 0   </td>
<td style="text-align:left;"> close the active window                                        </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x 1   </td>
<td style="text-align:left;"> close all windows except the active window                     </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x 2   </td>
<td style="text-align:left;"> split the active window vertically into two horizontal windows </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x 3   </td>
<td style="text-align:left;"> split the active window horizontally into two vertical windows </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x C-c </td>
<td style="text-align:left;"> close emacs                                                    </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x C-f </td>
<td style="text-align:left;"> open file                                                      </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x C-s </td>
<td style="text-align:left;"> save file                                                      </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> C-x C-w </td>
<td style="text-align:left;"> save file as                                                   </td>
</tr>
</tbody>
</table>


<p>note: <code>C-x</code> for controlling buffers and files</p>

<p>Command: <code>M-x</code></p>

<table>
<thead>
<tr>
<th style="text-align:left;">Type </th>
<th style="text-align:left;"> Cmd                    </th>
<th style="text-align:left;"> description                                                    </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> M-% </td>
<td style="text-align:left;">                        </td>
<td style="text-align:left;"> find and replace                                               </td>
</tr>
<tr>
<td style="text-align:left;"> M-w </td>
<td style="text-align:left;">                        </td>
<td style="text-align:left;"> copy                                                           </td>
</tr>
<tr>
<td style="text-align:left;"> M-x </td>
<td style="text-align:left;"> M-x color-theme-select </td>
<td style="text-align:left;"> select color theme                                             </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> M-x list-packages      </td>
<td style="text-align:left;"> open package list                                              </td>
</tr>
<tr>
<td style="text-align:left;">     </td>
<td style="text-align:left;"> M-x shell RET          </td>
<td style="text-align:left;"> open shell                                                     </td>
</tr>
</tbody>
</table>


<h2>3. Configuration</h2>

<h3>3.1. Settings</h3>

<p><code>.emacs</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">;</span><span class="o">--------------------</span><span class="p">;</span>
</span><span class='line'><span class="p">;;;</span> <span class="n">User</span> <span class="n">Interface</span> <span class="p">;;;</span>
</span><span class='line'><span class="p">;</span><span class="o">--------------------</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">;</span> <span class="n">ignore</span> <span class="k">case</span> <span class="n">when</span> <span class="n">searching</span>
</span><span class='line'><span class="p">(</span><span class="n">setq</span> <span class="k">case</span><span class="o">-</span><span class="n">fold</span><span class="o">-</span><span class="n">search</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">;</span><span class="o">----------------------</span><span class="p">;</span>
</span><span class='line'><span class="p">;;;</span> <span class="n">Windows</span> <span class="o">&amp;</span> <span class="n">Frames</span> <span class="p">;;;</span>
</span><span class='line'><span class="p">;</span><span class="o">----------------------</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">;</span> <span class="n">language</span>
</span><span class='line'><span class="p">(</span><span class="n">setq</span> <span class="n">current</span><span class="o">-</span><span class="n">language</span><span class="o">-</span><span class="n">environment</span> <span class="s">&quot;English&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">;</span> <span class="n">don</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">show</span> <span class="n">the</span> <span class="n">tool</span> <span class="n">bar</span>
</span><span class='line'><span class="p">(</span><span class="n">tool</span><span class="o">-</span><span class="n">bar</span><span class="o">-</span><span class="n">mode</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">;</span> <span class="n">display</span> <span class="n">line</span> <span class="n">numbers</span> <span class="n">of</span> <span class="n">the</span> <span class="n">window</span>
</span><span class='line'><span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">linum</span><span class="o">-</span><span class="n">mode</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'><span class="p">;</span> <span class="n">show</span> <span class="n">the</span> <span class="n">current</span> <span class="n">line</span> <span class="ow">and</span> <span class="n">column</span> <span class="n">numbers</span> <span class="n">in</span> <span class="n">the</span> <span class="n">stats</span> <span class="n">bar</span> <span class="n">as</span> <span class="n">well</span>
</span><span class='line'><span class="p">(</span><span class="n">line</span><span class="o">-</span><span class="n">number</span><span class="o">-</span><span class="n">mode</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">column</span><span class="o">-</span><span class="n">number</span><span class="o">-</span><span class="n">mode</span> <span class="n">t</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.2. Theming</h3>

<p>installation</p>

<ul>
<li>download <a href="http://download.savannah.gnu.org/releases/color-theme/">color theme</a></li>
<li>unzip the folder to <code>~/.emacs.d/plugins/color-theme-6.6.0</code></li>
</ul>


<p>configuration</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">;</span> <span class="n">color</span> <span class="n">theme</span>
</span><span class='line'><span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="s">&#39;load-path &quot;~/.emacs.d/plugins/color-theme-6.6.0&quot;)</span>
</span><span class='line'><span class="s">(require &#39;</span><span class="n">color</span><span class="o">-</span><span class="n">theme</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">color</span><span class="o">-</span><span class="n">theme</span><span class="o">-</span><span class="n">initialize</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">setq</span> <span class="n">color</span><span class="o">-</span><span class="n">theme</span><span class="o">-</span><span class="n">is</span><span class="o">-</span><span class="n">global</span> <span class="n">t</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">color</span><span class="o">-</span><span class="n">theme</span><span class="o">-</span><span class="n">billw</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>selection</p>

<ul>
<li><code>M-x color-theme-select</code></li>
</ul>


<h3>3.3. Plugins</h3>

<p>installation</p>

<ul>
<li>type <code>M-x list-packages</code></li>
<li>search the package list, select and install</li>
<li>config in <code>.emacs</code></li>
</ul>


<p>plugins</p>

<ul>
<li><a href="http://www.emacswiki.org/emacs/InteractivelyDoThings">ido</a></li>
<li><a href="http://www.emacswiki.org/emacs/AutoComplete">auto-complete</a></li>
<li><a href="https://launchpad.net/python-mode">python-mode</a></li>
</ul>


<h3>3.3.1. ido</h3>

<p>config</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">(</span><span class="nb">require</span> <span class="err">&#39;</span><span class="n">ido</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">ido</span><span class="o">-</span><span class="n">mode</span> <span class="n">t</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>testing</p>

<ul>
<li><code>M-x ido-mode</code>: enable ido-mode</li>
<li><code>M-x b</code>: switch buffers</li>
</ul>


<h3>3.3.2. auto-complete</h3>

<p>config</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="s">&#39;load-path &quot;~/.emacs.d/auto-complete-1.3.1&quot;)</span>
</span><span class='line'><span class="s">(require &#39;</span><span class="n">auto</span><span class="o">-</span><span class="n">complete</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="s">&#39;ac-dictionary-directories &quot;~/.emacs.d/ac-dict&quot;)</span>
</span><span class='line'><span class="s">(require &#39;</span><span class="n">auto</span><span class="o">-</span><span class="n">complete</span><span class="o">-</span><span class="n">config</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">ac</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">default</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">global</span><span class="o">-</span><span class="n">auto</span><span class="o">-</span><span class="n">complete</span><span class="o">-</span><span class="n">mode</span> <span class="n">t</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3.3.3. python-mode</h3>

<p>config</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">(</span><span class="n">setq</span> <span class="n">py</span><span class="o">-</span><span class="n">install</span><span class="o">-</span><span class="n">directory</span> <span class="s">&quot;~/.emacs.d/plugins/python-mode&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">list</span> <span class="s">&#39;load-path py-install-directory)</span>
</span><span class='line'><span class="s">(require &#39;</span><span class="n">python</span><span class="o">-</span><span class="n">mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>testing</p>

<ul>
<li><code>M-x locate-library RET</code></li>
<li><code>python-mode RET</code></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/03/05/time-series-with-pandas/">Time Series With Pandas</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-05T22:20:32+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:20 pm</span></time>
        
           | <a href="/tech/2014/03/05/time-series-with-pandas/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/03/05/time-series-with-pandas/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><h3>1. date and time</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># get datetime from system</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span class='line'><span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span><span class='line'><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">day</span>
</span><span class='line'>
</span><span class='line'><span class="c"># calculate delta between days</span>
</span><span class='line'><span class="n">delta</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</span><span class='line'><span class="n">delta</span><span class="o">.</span><span class="n">days</span>
</span><span class='line'><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
</span><span class='line'><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</span><span class='line'><span class="n">start</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</span><span class='line'><span class="n">start</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>convert datetime and string</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># convert with strftime</span>
</span><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="nb">str</span><span class="p">(</span><span class="n">stamp</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">value</span> <span class="o">=</span> <span class="s">&#39;2011-01-03&#39;</span>
</span><span class='line'><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">datestrs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;7/6/2011&#39;</span><span class="p">,</span> <span class="s">&#39;8/6/2011&#39;</span><span class="p">]</span>
</span><span class='line'><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;%m/</span><span class="si">%d</span><span class="s">/%Y&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datestrs</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># converte with parse</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">dateutil.parser</span> <span class="kn">import</span> <span class="n">parse</span>
</span><span class='line'><span class="n">parse</span><span class="p">(</span><span class="s">&#39;2011-01-03&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">parse</span><span class="p">(</span><span class="s">&#39;Jan 31, 1997 10:45 PM&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">parse</span><span class="p">(</span><span class="s">&#39;6/12/2011&#39;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># coverte with pandas</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datestrs</span><span class="p">)</span>
</span><span class='line'><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datestrs</span> <span class="o">+</span> <span class="p">[</span><span class="bp">None</span><span class="p">])</span>
</span><span class='line'><span class="n">idx</span>
</span><span class='line'><span class="n">idx</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2. time series</h3>

<p>create dates with pandas</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span class='line'>
</span><span class='line'><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
</span><span class='line'>         <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span>
</span><span class='line'>
</span><span class='line'><span class="nb">type</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">index</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dtype</span>
</span><span class='line'>
</span><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'><span class="n">stamp</span>
</span></code></pre></td></tr></table></div></figure>


<p>indexing, selection, subsetting</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'><span class="n">ts</span><span class="p">[</span><span class="n">stamp</span><span class="p">]</span>
</span><span class='line'><span class="n">ts</span><span class="p">[</span><span class="s">&#39;1/10/2011&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">ts</span><span class="p">[</span><span class="s">&#39;20110110&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">longer_ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>
</span><span class='line'><span class="n">longer_ts</span><span class="p">[</span><span class="s">&#39;2001&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">longer_ts</span><span class="p">[</span><span class="s">&#39;2001-05&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">ts</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">):]</span>
</span><span class='line'><span class="n">ts</span><span class="p">[</span><span class="s">&#39;1/6/2011&#39;</span><span class="p">:</span><span class="s">&#39;1/11/2011&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="s">&#39;1/9/2011&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">dates</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;W-WED&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">long_df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Colorado&#39;</span><span class="p">,</span> <span class="s">&#39;Texas&#39;</span><span class="p">,</span> <span class="s">&#39;New York&#39;</span><span class="p">,</span> <span class="s">&#39;Ohio&#39;</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>time series with duplicate indices</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">dates</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="s">&#39;1/2/2000&#39;</span><span class="p">,</span> <span class="s">&#39;1/2/2000&#39;</span><span class="p">,</span> <span class="s">&#39;1/2/2000&#39;</span><span class="p">,</span> <span class="s">&#39;1/3/2000&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">dup_ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span>
</span><span class='line'><span class="n">dup_ts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span>
</span><span class='line'><span class="n">dup_ts</span><span class="p">[</span><span class="s">&#39;1/3/2000&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">dup_ts</span><span class="p">[</span><span class="s">&#39;1/2/2000&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">grouped</span> <span class="o">=</span> <span class="n">dup_ts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">grouped</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'><span class="n">grouped</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>date ranges, frequencies, shifting</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># 1. resample</span>
</span><span class='line'><span class="n">ts</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 2. date_range</span>
</span><span class='line'><span class="n">index</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;4/1/2012&#39;</span><span class="p">,</span> <span class="s">&#39;6/1/2012&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s">&#39;4/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">end</span><span class="o">=</span><span class="s">&#39;6/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="s">&#39;12/1/2000&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;BM&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;5/2/2012 12:56:31&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;5/2/2012 12:56:31&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 3. frequencies</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">Hour</span><span class="p">,</span> <span class="n">Minute</span>
</span><span class='line'><span class="n">hour</span> <span class="o">=</span> <span class="n">Hour</span><span class="p">()</span>
</span><span class='line'><span class="n">four_hours</span> <span class="o">=</span> <span class="n">Hour</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="s">&#39;1/3/2000 23:59&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;4h&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">Hour</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">Minute</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;1h30min&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 4. week of month</span>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="s">&#39;9/1/2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;WOM-3FRI&#39;</span><span class="p">)</span>
</span><span class='line'><span class="nb">list</span><span class="p">(</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 5. shifting (leading/lagging)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">))</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;3D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;90T&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># shifting dates with offsets</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">Day</span><span class="p">,</span> <span class="n">MonthEnd</span>
</span><span class='line'><span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
</span><span class='line'><span class="n">now</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">Day</span><span class="p">()</span>
</span><span class='line'><span class="n">now</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">()</span>
</span><span class='line'><span class="n">now</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">offset</span> <span class="o">=</span> <span class="n">MonthEnd</span><span class="p">()</span>
</span><span class='line'><span class="n">offset</span><span class="o">.</span><span class="n">rollforward</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
</span><span class='line'><span class="n">offset</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/15/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;4d&#39;</span><span class="p">))</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">offset</span><span class="o">.</span><span class="n">rollforward</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;mean&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. timezone handling</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">pytz</span>
</span><span class='line'><span class="n">pytz</span><span class="o">.</span><span class="n">common_timezones</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
</span><span class='line'><span class="n">tz</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>localization and conversion</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;3/9/2012 9:30&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;3/9/2012 9:30&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts_utc</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts_utc</span><span class="o">.</span><span class="n">index</span>
</span><span class='line'><span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">ts_eastern</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts_eastern</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts_eastern</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;Europe/Berlin&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>operations with timezone</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2011-03-12 04:00&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp_utc</span> <span class="o">=</span> <span class="n">stamp</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;utc&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp_moscow</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2011-03-12 04:00&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;Europe/Moscow&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">stamp_utc</span><span class="o">.</span><span class="n">value</span>
</span><span class='line'><span class="n">stamp_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">Hour</span>
</span><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2012-03-12 01:30&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp</span> <span class="o">+</span> <span class="n">Hour</span><span class="p">()</span>
</span><span class='line'><span class="n">stamp</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2012-11-04 00:30&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">stamp</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">Hour</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;3/7/2012 9:30&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts1</span> <span class="o">=</span> <span class="n">ts</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;Europe/London&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts2</span> <span class="o">=</span> <span class="n">ts1</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;Europe/Moscow&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">result</span> <span class="o">=</span> <span class="n">ts1</span> <span class="o">+</span> <span class="n">ts2</span>
</span><span class='line'><span class="n">result</span><span class="o">.</span><span class="n">index</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4. periods</h3>

<p>periods of year, month, quarter</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># period of years</span>
</span><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span> <span class="o">+</span> <span class="mi">5</span>
</span><span class='line'><span class="n">p</span> <span class="o">-</span> <span class="mi">2</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2014&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">p</span>
</span><span class='line'>
</span><span class='line'><span class="c"># period of months</span>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="s">&#39;6/30/2000&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># period of quarter</span>
</span><span class='line'><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;2001Q3&#39;</span><span class="p">,</span> <span class="s">&#39;2002Q2&#39;</span><span class="p">,</span> <span class="s">&#39;2003Q1&#39;</span><span class="p">]</span>
</span><span class='line'><span class="n">index</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-DEC&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>period frequencies conversion</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2007&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;start&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2007&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-JUN&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;start&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;end&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2007-08&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;A-JUN&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s">&#39;2006&#39;</span><span class="p">,</span> <span class="s">&#39;2009&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;start&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>quarterly period frequencies</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">p</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-JAN&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;start&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;end&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># to get the timestamp at 4PM on the 2nd to last business day of the quarter</span>
</span><span class='line'><span class="n">p4pm</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">16</span> <span class="o">*</span> <span class="mi">60</span>
</span><span class='line'><span class="n">p4pm</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s">&#39;2011Q3&#39;</span><span class="p">,</span> <span class="s">&#39;2012Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-JAN&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">new_rng</span> <span class="o">=</span> <span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">16</span> <span class="o">*</span> <span class="mi">60</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">new_rng</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>converting timestamps to periods</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">pts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_period</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/29/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts2</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts2</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">pts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_period</span><span class="p">()</span>
</span><span class='line'><span class="n">pts</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5. resampling</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;mean&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;mean&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s">&#39;period&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>downsampling</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># ohlc: open high low close</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;ohlc&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">,</span> <span class="n">loffset</span><span class="o">=</span><span class="s">&#39;-1s&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">month</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'><span class="n">ts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">weekday</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>upsampling and interpolation</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
</span><span class='line'>                         <span class="n">index</span><span class="o">=</span><span class="n">pandas</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;W-WED&#39;</span><span class="p">),</span>
</span><span class='line'>                         <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Colorado&#39;</span><span class="p">,</span> <span class="s">&#39;Texas&#39;</span><span class="p">,</span> <span class="s">&#39;New York&#39;</span><span class="p">,</span> <span class="s">&#39;Ohio&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">frame</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</span><span class='line'><span class="n">df_daily</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">df_daily</span>
</span><span class='line'><span class="n">frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;W-THU&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>resampling with periods</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
</span><span class='line'>                         <span class="n">index</span><span class="o">=</span><span class="n">pandas</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s">&#39;1-2000&#39;</span><span class="p">,</span> <span class="s">&#39;12-2001&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">),</span>
</span><span class='line'>                         <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Colorado&#39;</span><span class="p">,</span> <span class="s">&#39;Texas&#39;</span><span class="p">,</span> <span class="s">&#39;New York&#39;</span><span class="p">,</span> <span class="s">&#39;Ohio&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">frame</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</span><span class='line'><span class="n">annual_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;A-DEC&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;mean&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">annual_frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;Q-DEC&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">annual_frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;Q-DEC&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">,</span> <span class="n">convention</span><span class="o">=</span><span class="s">&#39;start&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">annual_frame</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;Q-MAR&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;ffill&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/03/05/python-pandas/">Python Pandas</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-05T12:33:47+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:33 pm</span></time>
        
           | <a href="/tech/2014/03/05/python-pandas/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/03/05/python-pandas/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p>libraries</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span></code></pre></td></tr></table></div></figure>


<h3>1. object creation</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># create array</span>
</span><span class='line'><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="c"># create dates with dataframe</span>
</span><span class='line'><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># create dataframe</span>
</span><span class='line'><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span> <span class="s">&#39;header1&#39;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
</span><span class='line'>                     <span class="s">&#39;header2&#39;</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20130102&#39;</span><span class="p">),</span>
</span><span class='line'>                     <span class="s">&#39;header3&#39;</span> <span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float32&#39;</span><span class="p">),</span>
</span><span class='line'>                     <span class="s">&#39;header4&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int32&#39;</span><span class="p">),</span>
</span><span class='line'>                     <span class="s">&#39;header5&#39;</span> <span class="p">:</span> <span class="s">&#39;foo&#39;</span> <span class="p">})</span>
</span><span class='line'>
</span><span class='line'><span class="c"># check data types of dataframe</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">dtypes</span>
</span></code></pre></td></tr></table></div></figure>


<h3>2. viewing data</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># top/bottom rows of data</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># index/row, columns and values</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">index</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">columns</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">values</span>
</span><span class='line'>
</span><span class='line'><span class="c"># summary of numeric data</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># data transpose</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">T</span>
</span><span class='line'>
</span><span class='line'><span class="c"># sorting by header/names and values</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s">&#39;columnName&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>3. selection</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># get data by columns</span>
</span><span class='line'><span class="n">dataframe</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get data by rows</span>
</span><span class='line'><span class="n">dataframe</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="n">dataframe</span><span class="p">[</span><span class="s">&#39;20130102&#39;</span><span class="p">:</span><span class="s">&#39;20130104&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># reshape dataframe</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get one record with T</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get rows and columns as defined</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,:]</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get a specific value/cell</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="n">dataframe</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<h3>4. boolean index</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># filter data by a single column</span>
</span><span class='line'><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># filter data by all columns</span>
</span><span class='line'><span class="n">df</span><span class="p">[</span><span class="n">df</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>                   <span class="c"># if value &lt;= 0, it will return NaN</span>
</span></code></pre></td></tr></table></div></figure>


<h3>5. setting</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># set values by label, position and array</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s">&#39;D&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span class='line'><span class="n">df2</span><span class="p">[</span><span class="n">df2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">df2</span>
</span><span class='line'>
</span><span class='line'><span class="c"># rename columns</span>
</span><span class='line'><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;$a&#39;</span><span class="p">:</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;$b&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>6. missing values</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># drop any rows those have missing values</span>
</span><span class='line'><span class="n">df1</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;any&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># fill missing values</span>
</span><span class='line'><span class="n">df1</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># get the boolean mask where values are nan</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">df1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>7. operations</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># mean</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># frequency count</span>
</span><span class='line'><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># correlation</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># string</span>
</span><span class='line'><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>8. merge</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># merge data by rows</span>
</span><span class='line'><span class="n">pieces</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="mi">7</span><span class="p">:]]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># join</span>
</span><span class='line'><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="s">&#39;lval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>
</span><span class='line'><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="s">&#39;rval&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s">&#39;key&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># append</span>
</span><span class='line'><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>9. grouping</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># (histogram)/group all columns by one column</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># (cross tabs)/group all columns by multi-columns</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>10. reshape</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># stack</span>
</span><span class='line'><span class="n">tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">],</span>
</span><span class='line'>                    <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">]]))</span>
</span><span class='line'>
</span><span class='line'><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;second&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</span><span class='line'><span class="n">stacked</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span>
</span><span class='line'><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
</span><span class='line'><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">stacked</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># pivot table</span>
</span><span class='line'><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;A&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>                   <span class="s">&#39;B&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>                   <span class="s">&#39;C&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>                   <span class="s">&#39;D&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
</span><span class='line'>                   <span class="s">&#39;E&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">12</span><span class="p">)})</span>
</span><span class='line'>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">],</span> <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<h3>11. get data in/out</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># tsv in/out</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">dataPath</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># json in/out</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">dataPath</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># csv in/out</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># excel in/out</span>
</span><span class='line'><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;foo.xlsx&#39;</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;foo.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet1&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># HDF5 in/out</span>
</span><span class='line'><span class="n">d</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s">&#39;foo.h5&#39;</span><span class="p">,</span><span class="s">&#39;df&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s">&#39;foo.h5&#39;</span><span class="p">,</span><span class="s">&#39;df&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>12. working with columns</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># get features</span>
</span><span class='line'><span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;Id&#39;</span><span class="p">,</span> <span class="s">&#39;Cover_Type&#39;</span><span class="p">]]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># delete columns</span>
</span><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">&#39;col&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># map labels</span>
</span><span class='line'><span class="n">coded</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Good&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Not Good&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>
</span><span class='line'><span class="n">data</span><span class="p">[</span><span class="s">&#39;IsHoliday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;IsHoliday&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">coded</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># split columns</span>
</span><span class='line'><span class="k">def</span> <span class="nf">splitDatetime</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span class='line'>    <span class="n">sub</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">&quot;date time&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="n">time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span> <span class="o">=</span> <span class="s">&quot;hour minute second&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">data</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">[</span><span class="s">&#39;hour&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span><span class='line'>
</span><span class='line'><span class="c"># shift and fillna</span>
</span><span class='line'><span class="n">df</span><span class="p">[</span><span class="s">&#39;ENTRIESn_hourly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;ENTRIESn&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;ENTRIESn&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>
</span><span class='line'><span class="n">df</span><span class="p">[</span><span class="s">&#39;ENTRIESn_hourly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;ENTRIESn_hourly&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>13. working with rows</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># drop duplicates</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h3>14. working with datasets</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># merge data</span>
</span><span class='line'><span class="k">def</span> <span class="nf">combineStore</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stores</span><span class="p">):</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stores</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&quot;Store&quot;</span><span class="p">,</span> \
</span><span class='line'>                                  <span class="n">right_on</span><span class="o">=</span><span class="s">&quot;Store&quot;</span><span class="p">,</span> \
</span><span class='line'>                                  <span class="n">how</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">data</span>
</span></code></pre></td></tr></table></div></figure>


<h3>15. statitics</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># correlation</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2014/01/18/vim-commands/">Vim Commands</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-18T19:34:30+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>7:34 pm</span></time>
        
           | <a href="/tech/2014/01/18/vim-commands/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2014/01/18/vim-commands/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><ul>
<li>normal mode: to edit a file</li>
<li>command mode: to edit a file with commands</li>
</ul>


<h2>1. Normal Mode</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type                  </th>
<th style="text-align:left;"> Action                </th>
<th style="text-align:left;"> Command                                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> edit                  </td>
<td style="text-align:left;"> insert                </td>
<td style="text-align:left;"> i                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> delete                </td>
<td style="text-align:left;"> x                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> exit                  </td>
<td style="text-align:left;"> esc                                          </td>
</tr>
<tr>
<td style="text-align:left;"> move                  </td>
<td style="text-align:left;"> left, right, down, up </td>
<td style="text-align:left;"> h, l, j, k                                   </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> back word             </td>
<td style="text-align:left;"> b                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> next word             </td>
<td style="text-align:left;"> w                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> end of line           </td>
<td style="text-align:left;"> $                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> page up               </td>
<td style="text-align:left;"> ctrl + u                                     </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> page down             </td>
<td style="text-align:left;"> ctrl + d                                     </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> top of the file       </td>
<td style="text-align:left;"> gg                                           </td>
</tr>
<tr>
<td style="text-align:left;"> copy, paste, change   </td>
<td style="text-align:left;"> yank, copy            </td>
<td style="text-align:left;"> y(xxx)                                       </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> cureent line          </td>
<td style="text-align:left;"> yy                                           </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> paste                 </td>
<td style="text-align:left;"> p                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> change                </td>
<td style="text-align:left;"> c                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> change word           </td>
<td style="text-align:left;"> cw                                           </td>
</tr>
<tr>
<td style="text-align:left;"> search, find, replace </td>
<td style="text-align:left;"> search                </td>
<td style="text-align:left;"> /(word)                                      </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> search to top         </td>
<td style="text-align:left;"> #                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> search to end         </td>
<td style="text-align:left;"> *                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> find                  </td>
<td style="text-align:left;"> f(a letter)                                  </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> find former           </td>
<td style="text-align:left;"> ,                                            </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> find next             </td>
<td style="text-align:left;"> ;                                            </td>
</tr>
<tr>
<td style="text-align:left;"> delete                </td>
<td style="text-align:left;"> delelte a line        </td>
<td style="text-align:left;"> dd                                           </td>
</tr>
<tr>
<td style="text-align:left;"> fold                  </td>
<td style="text-align:left;"> fold                  </td>
<td style="text-align:left;"> zc                                           </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> unfold (single)       </td>
<td style="text-align:left;"> zo                                           </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> unfold (all)          </td>
<td style="text-align:left;"> zr                                           </td>
</tr>
</tbody>
</table>


<p>Note: all for editing.</p>

<h2>2. Command Mode</h2>

<table>
<thead>
<tr>
<th style="text-align:left;"> Type                  </th>
<th style="text-align:left;"> Action                </th>
<th style="text-align:left;"> Command                                      </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> coding                </td>
<td style="text-align:left;"> shift                 </td>
<td style="text-align:left;"> :line,line&lt; or :line,line>                   </td>
</tr>
<tr>
<td style="text-align:left;"> files                 </td>
<td style="text-align:left;"> save                  </td>
<td style="text-align:left;"> :w                                           </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> open                  </td>
<td style="text-align:left;"> :e                                           </td>
</tr>
<tr>
<td style="text-align:left;"> buffer                </td>
<td style="text-align:left;"> switch                </td>
<td style="text-align:left;"> :b<n>                                        </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> close                 </td>
<td style="text-align:left;"> :bd                                          </td>
</tr>
<tr>
<td style="text-align:left;"> copy, replce          </td>
<td style="text-align:left;"> copy paragraph        </td>
<td style="text-align:left;"> :&lt;line,line> copy &lt;line,line>                </td>
</tr>
<tr>
<td style="text-align:left;">                       </td>
<td style="text-align:left;"> replace               </td>
<td style="text-align:left;"> :%s/(words)/(words replaced)/g, g for global </td>
</tr>
</tbody>
</table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>

    
      <h1 class="entry-title"><a href="/tech/2010/01/14/sqrt-newtons-method-of-successive-approximations/">Sqrt Newton's Method of Successive Approximations</a></h1>
    

    
      <p class="meta">
        




<time class='entry-date' datetime='2010-01-14T00:00:14+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="/tech/2010/01/14/sqrt-newtons-method-of-successive-approximations/#disqus_thread"
             data-disqus-identifier="http://k.arttechresearch.com/tech/2010/01/14/sqrt-newtons-method-of-successive-approximations/">Comments</a>
        
      </p>
    

  </header>



  <div class="entry-content"><p><img src="http://media-cache-ec0.pinimg.com/736x/4d/5d/8a/4d5d8aeb52644182af61a7eac04cdfc9.jpg" /></p>

<h3>Algorithm</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. Guess
</span><span class='line'>
</span><span class='line'>2. Good-enough?
</span><span class='line'>                  | Guess^2 - Radicant | &lt; Predetermined Tolerance
</span><span class='line'>
</span><span class='line'>If yes, Guess = Root
</span><span class='line'>   else, Improve Guess
</span><span class='line'>
</span><span class='line'>3. Improve
</span><span class='line'>                  Quotient = Radicant / Guess
</span><span class='line'>                  Average  = ( Guess + Quotient ) / 2
</span><span class='line'>                  Guess    = Average</span></code></pre></td></tr></table></div></figure>


<p>Importance: Radicant -> Large/Small -> very small fraction of the Guess -> STOP?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="mf">1.0</span> <span class="n">x</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="p">?</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>      <span class="n">guess</span>
</span><span class='line'>      <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)))</span>
</span><span class='line'><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="p">?</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="o">-</span> <span class="p">(</span><span class="n">square</span> <span class="n">guess</span><span class="p">)</span> <span class="n">x</span><span class="p">))</span> <span class="mf">0.001</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="n">average</span> <span class="n">guess</span> <span class="p">(</span><span class="o">/</span> <span class="n">x</span> <span class="n">guess</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Block Structure</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="p">?</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="o">-</span> <span class="p">(</span><span class="n">square</span> <span class="n">guess</span><span class="p">)</span> <span class="n">x</span><span class="p">))</span> <span class="mf">0.001</span><span class="p">))</span>
</span><span class='line'>  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="n">average</span> <span class="n">guess</span> <span class="p">(</span><span class="o">/</span> <span class="n">x</span> <span class="n">guess</span><span class="p">)))</span>
</span><span class='line'>  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="p">?</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span>
</span><span class='line'>        <span class="n">guess</span>
</span><span class='line'>        <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span> <span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)))</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">sqrt</span><span class="o">-</span><span class="n">iter</span> <span class="mf">1.0</span> <span class="n">x</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>References:<br/>
&ndash; <a href="http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html#%_sec_1.1.7">Square Roots by Newton&rsquo;s Method</a><br/>
&ndash; <a href="http://mitpress.mit.edu/sicp/">Structure and Interpretation of Computer Programs</a></p>
</div>
  
  


    </article>
  

  <div class="pagination">

    

    <a href="/categories/tech">Tech Archives</a>

    

  </div>

</div>




<aside class="sidebar">
    
        <section>
  <h1>Tech</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/tech/2015/10/13/using-mathjax-with-octopress/">Using MathJax With Octopress</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/06/adding-tag-generator-in-octopress/">Adding Tag Generator in Octopress</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/06/adding-tag-cloud-in-octopress/">Adding Tag Cloud in Octopress</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/06/adding-the-social-icons-in-octopress/">Adding the Social Icons in Octopress</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/06/octopress-construct/">Octopress Construct</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/06/installing-octopress/">Installing Octopress</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/10/03/installing-openstack-devstack/">Installing Openstack Devstack</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/09/30/will-architecture/">Will Architecture</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/09/30/hipchat-api/">Hipchat API</a>
      </li>
    
      <li class="post">
        <a href="/tech/2015/09/30/will-bot/">Will Bot</a>
      </li>
    
  </ul>
</section>
<section class="category-list">
    <h1>Projects</h1>
    <ul id="category-list">
        <li><a href="/tags/edx">edX</a></li>
    </ul>

    <h1>Programming</h1>
    <ul id="category-list">
        <li><a href="/tags/python">Python</a></li>
        <li><a href="/tags/ruby">Ruby</a></li>
        <li><a href="/tags/nodejs">Node.js</a></li>
        <li><a href="/tags/javascript">Javascript</a></li>
        <li><a href="/tags/html">HTML</a></li>
        <li>
            <span><a href="/tags/css">CSS</a></span> / 
            <span><a href="/tags/sass">SASS</a></span>   
        </li>
    </ul>

    <h1>Devops</h1>
    <ul id="category-list">
        <li>
            <span><a href="/tags/linux">Linux</a></span> /
            <span><a href="/tags/ubuntu">Ubuntu</a></span>
        </li>
        <li>
            <span><a href="/tags/vagrant">Vagrant</a></span> /
            <span><a href="/tags/docker">Docker</a></span>
        </li>
        <li><a href="/tags/ansible">Ansible</a></li>
    </ul>
   
</section>
<section class="tag-cloud">


  <h1>Tags</h1>
    <ul id="category-list"><a href='/tags/algorithm' style='font-size: 114.44444444444444%'>algorithm(7)</a> <a href='/tags/ansible' style='font-size: 94.07407407407408%'>ansible(2)</a> <a href='/tags/antique' style='font-size: 90.0%'>antique(1)</a> <a href='/tags/apache' style='font-size: 90.0%'>apache(1)</a> <a href='/tags/api' style='font-size: 94.07407407407408%'>api(2)</a> <a href='/tags/ascii' style='font-size: 90.0%'>ascii(1)</a> <a href='/tags/beautifulsoup' style='font-size: 90.0%'>beautifulsoup(1)</a> <a href='/tags/butter' style='font-size: 90.0%'>butter(1)</a> <a href='/tags/career' style='font-size: 94.07407407407408%'>career(2)</a> <a href='/tags/chatbot' style='font-size: 94.07407407407408%'>chatbot(2)</a> <a href='/tags/classification' style='font-size: 94.07407407407408%'>classification(2)</a> <a href='/tags/cloud' style='font-size: 90.0%'>cloud(1)</a> <a href='/tags/cloudera' style='font-size: 90.0%'>cloudera(1)</a> <a href='/tags/computer-vision' style='font-size: 90.0%'>computer vision(1)</a> <a href='/tags/crawler' style='font-size: 94.07407407407408%'>crawler(2)</a> <a href='/tags/css' style='font-size: 94.07407407407408%'>css(2)</a> <a href='/tags/data' style='font-size: 90.0%'>data(1)</a> <a href='/tags/db' style='font-size: 90.0%'>db(1)</a> <a href='/tags/devops' style='font-size: 98.14814814814815%'>devops(3)</a> <a href='/tags/django' style='font-size: 94.07407407407408%'>django(2)</a> <a href='/tags/dns' style='font-size: 90.0%'>dns(1)</a> <a href='/tags/docker' style='font-size: 90.0%'>docker(1)</a> <a href='/tags/edx' style='font-size: 98.14814814814815%'>edX(3)</a> <a href='/tags/edx-analytics' style='font-size: 94.07407407407408%'>edX Analytics(2)</a> <a href='/tags/edx-platform' style='font-size: 90.0%'>edX Platform(1)</a> <a href='/tags/emacs' style='font-size: 94.07407407407408%'>emacs(2)</a> <a href='/tags/exhibition' style='font-size: 90.0%'>exhibition(1)</a> <a href='/tags/fiction' style='font-size: 110.37037037037037%'>fiction(6)</a> <a href='/tags/forever' style='font-size: 94.07407407407408%'>forever(2)</a> <a href='/tags/french' style='font-size: 90.0%'>french(1)</a> <a href='/tags/ghost' style='font-size: 102.22222222222223%'>ghost(4)</a> <a href='/tags/git' style='font-size: 98.14814814814815%'>git(3)</a> <a href='/tags/github' style='font-size: 94.07407407407408%'>github(2)</a> <a href='/tags/gunicorn' style='font-size: 90.0%'>gunicorn(1)</a> <a href='/tags/hadoop' style='font-size: 90.0%'>hadoop(1)</a> <a href='/tags/hipchat' style='font-size: 94.07407407407408%'>hipchat(2)</a> <a href='/tags/html' style='font-size: 94.07407407407408%'>html(2)</a> <a href='/tags/ide' style='font-size: 94.07407407407408%'>ide(2)</a> <a href='/tags/javascript' style='font-size: 98.14814814814815%'>javascript(3)</a> <a href='/tags/jekyll' style='font-size: 90.0%'>jekyll(1)</a> <a href='/tags/jenkins' style='font-size: 90.0%'>jenkins(1)</a> <a href='/tags/leisure' style='font-size: 187.77777777777777%'>leisure(25)</a> <a href='/tags/linux' style='font-size: 118.51851851851852%'>linux(8)</a> <a href='/tags/machine-learning' style='font-size: 130.74074074074073%'>machine learning(11)</a> <a href='/tags/mathjax' style='font-size: 94.07407407407408%'>mathjax(2)</a> <a href='/tags/mysql' style='font-size: 110.37037037037037%'>mysql(6)</a> <a href='/tags/network' style='font-size: 90.0%'>network(1)</a> <a href='/tags/nginx' style='font-size: 98.14814814814815%'>nginx(3)</a> <a href='/tags/nlp' style='font-size: 110.37037037037037%'>nlp(6)</a> <a href='/tags/nltk' style='font-size: 90.0%'>nltk(1)</a> <a href='/tags/nodejs' style='font-size: 106.2962962962963%'>nodejs(5)</a> <a href='/tags/octopress' style='font-size: 110.37037037037037%'>octopress(6)</a> <a href='/tags/openstack' style='font-size: 90.0%'>openstack(1)</a> <a href='/tags/pandas' style='font-size: 94.07407407407408%'>pandas(2)</a> <a href='/tags/poem' style='font-size: 102.22222222222223%'>poem(4)</a> <a href='/tags/prediction' style='font-size: 90.0%'>prediction(1)</a> <a href='/tags/pycharm' style='font-size: 90.0%'>pycharm(1)</a> <a href='/tags/python' style='font-size: 200.0%'>python(28)</a> <a href='/tags/reading' style='font-size: 114.44444444444444%'>reading(7)</a> <a href='/tags/redmine' style='font-size: 90.0%'>redmine(1)</a> <a href='/tags/regex' style='font-size: 90.0%'>regex(1)</a> <a href='/tags/robotics' style='font-size: 94.07407407407408%'>robotics(2)</a> <a href='/tags/ruby' style='font-size: 118.51851851851852%'>ruby(8)</a> <a href='/tags/sql' style='font-size: 90.0%'>sql(1)</a> <a href='/tags/supervisor' style='font-size: 90.0%'>supervisor(1)</a> <a href='/tags/time-series' style='font-size: 90.0%'>time series(1)</a> <a href='/tags/translation' style='font-size: 90.0%'>translation(1)</a> <a href='/tags/ubuntu' style='font-size: 122.5925925925926%'>ubuntu(9)</a> <a href='/tags/unicode' style='font-size: 90.0%'>unicode(1)</a> <a href='/tags/vagrant' style='font-size: 90.0%'>vagrant(1)</a> <a href='/tags/vim' style='font-size: 90.0%'>vim(1)</a> <a href='/tags/vm' style='font-size: 90.0%'>vm(1)</a> <a href='/tags/web' style='font-size: 98.14814814814815%'>web(3)</a> <a href='/tags/will' style='font-size: 94.07407407407408%'>will(2)</a> </ul>
</section>

    
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2006-2015 - Kelly Chan
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kwailamc';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
